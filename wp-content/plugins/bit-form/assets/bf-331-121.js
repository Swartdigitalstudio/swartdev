var Ze=Object.defineProperty,Qe=Object.defineProperties;var Ve=Object.getOwnPropertyDescriptors;var We=Object.getOwnPropertySymbols;var Le=Object.prototype.hasOwnProperty,Ie=Object.prototype.propertyIsEnumerable;var De=(o,t,s)=>t in o?Ze(o,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[t]=s,T=(o,t)=>{for(var s in t||(t={}))Le.call(t,s)&&De(o,s,t[s]);if(We)for(var s of We(t))Ie.call(t,s)&&De(o,s,t[s]);return o},z=(o,t)=>Qe(o,Ve(t));import{a as Q,r as de,j as e,e as ne,u as Y,P as K,q as H,T as ge,_ as m,ag as V,ae as Ge,af as et,bM as tt,aa as L,$ as Ue,l as M,aF as q,a3 as ve,cS as qe,bX as Ee,aH as st,I as je,w as Ce,ah as lt,aj as Se,cL as ot,O as at,i as Je,h as it,aG as nt,c as ct,d as rt}from"./main-398.js";import{S as dt,a as pt,D as mt,b as ut}from"./bf-640-289.js";import{S as ht}from"./bf-550-169.js";import{B as ft,D as Ne,d as ke}from"./bf-354-65.js";import{A as bt}from"./bf-480-290.js";import{B as Z}from"./bf-500-108.js";import{h as Oe,a as xt,T as pe}from"./bf-491-73.js";import{P as jt}from"./bf-138-72.js";import{C as kt}from"./bf-782-101.js";import{C as oe}from"./bf-288-71.js";import{D as me}from"./bf-537-111.js";import{B as vt}from"./bf-849-115.js";import{S as be}from"./bf-404-116.js";import{M as we}from"./bf-305-112.js";import{M as fe}from"./bf-292-113.js";import{u as _e}from"./bf-989-109.js";/* empty css          */import"./bf-952-107.js";import"./bf-864-106.js";function Me({title:o,titleOutline:t,accordionActions:s,children:p}){const{css:n}=Q(),[l,b]=de.useState(!0),w=()=>{b(x=>!x)};return e.jsxs("div",{className:n(ee.section),children:[e.jsxs("div",{className:`${n(ee.titleWrp)}`,children:[e.jsxs("button",{type:"button",className:`${n(ee.title,t?ee.titleOutline:{})} btcd-logic-blk`,onClick:w,children:[o,e.jsx("span",{className:n(ee.titleIcn),children:e.jsx(kt,{size:15,rotate:!l})})]}),e.jsx("div",{className:`${n(ee.accrActions)} accr-actions`,children:s})]}),l&&e.jsx("div",{className:n(ee.content),children:p}),!l&&e.jsx("div",{className:n(ee.content),children:e.jsxs("button",{className:n(ee.collapsedAccrdn),type:"button",onClick:w,children:[e.jsx("span",{className:n(ee.collapsedCrl)}),e.jsx("span",{className:n(ee.collapsedCrl)}),e.jsx("span",{className:n(ee.collapsedCrl)})]})})]})}const ee={section:{pb:12},accrActions:{dy:"none"},titleWrp:{flx:1,":hover .accr-actions":{flx:1}},title:{bc:"var(--b-50)",h:35,fs:14,p:"0 15px",brs:30,cr:"#fff",fw:600,lh:"29px",cur:"pointer",us:"none",b:0,oe:0,flx:"center"},titleOutline:{b:"2px solid var(--b-50)",bc:"#fff",cr:"var(--b-50)",p:"0 13px"},titleIcn:{ml:8,flx:"center"},content:{my:5,ml:45},collapsedAccrdn:{b:0,oe:0,bc:"#D9D9D9",w:65,brs:10,h:20,flx:"center",rg:5,cg:5,curp:1,mt:15,":focus":{oe:"none"}},collapsedCrl:{dy:"inline-block",w:5,h:5,bc:"#AAAAAA",brs:"50%"}};function Re({lgcGrpInd:o,condGrpInd:t,actionKey:s,enableAction:p,checkKeyInArr:n,getValueFromArr:l,title:b}){const{css:w}=Q(),[x,a]=ne(V),h=Y(Ge),u=Y(et),y=Y(tt),r=K(L),c=Y(Ue),f=()=>{const C=[];return y.map(i=>{(i.type==="file-up"||i.type==="advanced-file-up")&&C.push({label:i.name,value:i.key})}),C},j=()=>y.filter(C=>C.type==="email").length>0,$=()=>{const C=[];if(j()){const i=[];y.map(k=>{k.type==="email"&&i.push({label:k.name,value:`\${${k.key}}`})}),C.push({title:"Form Fields",type:"group",childs:i})}return c.userMail&&Array.isArray(c.userMail)&&C.push({title:"WP Emails",type:"group",childs:c.userMail}),C},B=(C,i)=>{console.log({typ:C,value:i});const k=M(x,N=>{const{success:O}=N[o].conditions[t].actions,S=O.find(_=>_.type===s);S&&(S.details[C]=i)});console.log({tmpWorkflows:k}),a(k),r(N=>z(T({},N),{unsaved:!0}))};return e.jsxs("div",{className:w(H.mt2),children:[e.jsx(ge,{onChange:C=>p(C.target.checked,s),title:b,checked:n(s),className:w(H.flxc)}),n(s)&&e.jsxs("div",{className:w({mt:5,ml:28}),children:[e.jsx("label",{className:"f-m f-5",children:m("Email Template:")}),e.jsx("div",{className:"mt-1"}),e.jsxs("select",{className:"btcd-paper-inp w-7",onChange:C=>B("id",C.target.value),value:l(s,"id"),children:[e.jsx("option",{value:"",children:m("Select Email Template")}),h==null?void 0:h.map((C,i)=>e.jsx("option",{value:C.id?JSON.stringify({id:String(C.id)}):JSON.stringify({index:String(i)}),children:C.title},`sem-${i+2.3}`))]}),e.jsx(me,{action:C=>B("to",C?C.split(","):[]),value:l(s,"to"),placeholder:m("Add Email Receiver"),title:e.jsx("span",{className:"f-m f-5",children:m("To")}),isMultiple:!0,titleClassName:"w-7 mt-2",className:"w-10 mt-1",addable:!0,options:$(l(s,"to"))}),e.jsx(me,{action:C=>B("from",C),placeholder:m("Add mail from address"),value:l(s,"from"),title:e.jsx("span",{className:"f-m f-5",children:m("From")}),titleClassName:"w-7 mt-2",className:"w-10 mt-1",addable:!0,options:$(l(s,"from"))}),e.jsx(me,{action:C=>B("cc",C?C.split(","):[]),value:l(s,"cc"),placeholder:m("Add Email CC"),title:e.jsx("span",{className:"f-m f-5",children:m("CC")}),isMultiple:!0,titleClassName:"w-7 mt-2",className:"w-10 mt-1",addable:!0,options:$(l(s,"cc"))}),e.jsx(me,{action:C=>B("bcc",C?C.split(","):[]),placeholder:m("Add Email BCC"),value:l(s,"bcc"),title:e.jsx("span",{className:"f-m f-5",children:m("BCC")}),isMultiple:!0,titleClassName:"w-7 mt-2",className:"w-10 mt-1",addable:!0,options:$(l(s,"bcc"))}),e.jsx(me,{action:C=>B("replyto",C?C.split(","):[]),placeholder:m("Reply To"),value:l(s,"replyto"),title:e.jsx("span",{className:"f-m f-5",children:m("Reply To")}),isMultiple:!0,titleClassName:"w-7 mt-2",className:"w-10 mt-1",addable:!0,options:$(l(s,"replyto"))}),e.jsx(me,{action:C=>B("attachment",C?C.split(","):[]),placeholder:m("Attachment"),value:l(s,"attachment"),title:e.jsx("span",{className:"f-m f-5",children:m("Attachment")}),isMultiple:!0,titleClassName:"w-7 mt-2",className:"w-10 mt-1",options:f()}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{htmlFor:"pdf-template",className:"f-m f-5",children:m("PDF Attachment Template:")}),e.jsx("div",{className:"mt-1"}),e.jsxs("select",{className:"btcd-paper-inp w-7",onChange:C=>B("pdfId",C.target.value),value:l(s,"pdfId"),children:[e.jsx("option",{value:"",children:m("Select PDF Template")}),u==null?void 0:u.map((C,i)=>e.jsx("option",{value:C.id?JSON.stringify({id:String(C.id)}):JSON.stringify({index:String(i)}),children:C.title},`sem-${i+2.3}`))]})]})]})]})}function wt({clickAction:o,options:t,formFields:s}){const p=[{id:25,type:"back",content:e.jsx(ft,{size:"18"})},{id:6,type:"operator",content:"("},{id:7,type:"operator",content:")"},{id:8,type:"empty",content:""},{id:9,type:"number",content:"7"},{id:10,type:"number",content:"8"},{id:11,type:"number",content:"9"},{id:12,type:"operator",content:"/"},{id:13,type:"number",content:"4"},{id:14,type:"number",content:"5"},{id:15,type:"number",content:"6"},{id:16,type:"operator",content:"*"},{id:17,type:"number",content:"1"},{id:18,type:"number",content:"2"},{id:19,type:"number",content:"3"},{id:20,type:"operator",content:"+"},{id:24,type:"clear",content:"AC"},{id:21,type:"number",content:"0"},{id:22,type:"number",content:"."},{id:23,type:"operator",content:"-"}],{css:n}=Q();return e.jsxs("div",{className:n(ie.board),children:[e.jsxs("div",{className:n(ie.leftSlider),children:[t&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:n({m:0,td:"underline",mt:5}),children:"Options"}),t.map((l,b)=>l.type==="group"?e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:n({m:0}),children:l.title}),l.childs.map(w=>e.jsx("div",{role:"button",className:n(ie.field,H.ml1),onClick:()=>o(`${b+1}`,"option",{label:w.label,content:w.value},w.value.length),tabIndex:0,onKeyDown:void 0,children:w.label},`${w.value}${b+1}`))]}):e.jsx("div",{role:"button",className:n(ie.field),onClick:()=>o(`${b+1}`,"option",{label:l.label,content:l.value},l.value.length),tabIndex:0,onKeyDown:void 0,children:l.label},`${l.value}${b+1}`)),e.jsx("div",{role:"button",className:n(ie.field),onClick:()=>o(199,"field",{label:"Separator",content:"_bf_separator"}),tabIndex:0,onKeyDown:void 0,children:"Separator"})]}),e.jsx("h4",{className:n({m:0}),children:"Form Fields"}),s==null?void 0:s.map((l,b)=>e.jsx("div",{role:"button",className:n(ie.field),onClick:()=>o(`${b+1}`,"field",{label:l.name,content:l.key}),tabIndex:0,onKeyDown:void 0,children:l.name},`field-${b}`)),e.jsx("h4",{className:n({m:0,td:"underline",mt:5}),children:"Smart Tags"}),be.map((l,b)=>e.jsx("div",{role:"button",className:n(ie.field),onClick:()=>o(`${b+1}`,"field",{label:l.label,content:l.name,isFunction:l.custom}),tabIndex:0,onKeyDown:void 0,children:l.label},l.id))]}),e.jsxs("div",{className:n(ie.keyContainer),children:[p.map(l=>e.jsx("div",{role:"button",className:`custom-button ${n(ie.customButton)} ${l.type}`,onClick:()=>o(l.id,l.type,{content:l.content}),tabIndex:0,onKeyUp:void 0,children:l.content},l.id)),e.jsx("span",{role:"button",className:n(ie.crossButton),onClick:()=>Oe(),tabIndex:0,onKeyDown:void 0,children:e.jsx(q,{size:"12"})})]})]})}const ie={board:{w:310,h:225,p:2,brs:5,dy:"flex",ta:"left"},leftSlider:{w:"40%",h:"100%",bc:"#F8F8F8",brs:8,cr:"#6A6A6A",dy:"flex",fd:"column",p:5,mr:5,ow:"overlay"},keyContainer:{w:"60%",h:"100%",bc:"white",dy:"flex",flxp:"wrap",pn:"relative"},h4:{fw:"500"},field:{fw:"400",fs:"12px !important",brs:"8px",padding:"5px",cur:"pointer",":hover":{bc:"#E5E5E5"}},customButton:{w:"45px",h:"45px",brs:"10px",br:"none",bc:"white",cr:"black",dy:"flex",ai:"center",jc:"center",cur:"pointer",fw:"600",fs:"18px",lh:"17px",":hover":{bc:"#F8F8F8"},"&.empty:hover":{bc:"white",cur:"default"}},crossButton:{pn:"absolute",w:"20px",h:"20px",brs:"50%",bc:"#F4F4F4",dy:"flex",jc:"center",ai:"center",cur:"pointer",rt:"-5px",tp:"-5px"}};function He({label:o,onChange:t,value:s,disabled:p,type:n,textarea:l,className:b,options:w,formFields:x}){const{css:a}=Q(),h=Y(ve),u=qe(h),[y,r]=de.useState(()=>Be(s,u)),[c,f]=de.useState(y.length),[j,$]=de.useState(!1),B=de.useRef(null),C=y.length>0,i=g=>{let F="",v=0,W=0;for(!j&&r(d=>d.filter(D=>(D==null?void 0:D.type)!=="caret")),y.map(d=>{d.type==="field"?d.dataObj.isFunction?(v+=1,F+=`\${${d.dataObj.content}`):F+=`\${${d.dataObj.content}}`:(F+=d.dataObj.content,v&&d.dataObj.content==="("&&(W+=1),v&&d.dataObj.content===")"&&(W-=1,W||(F+="}",v-=1)))});v--;)F+="}";t(F)},k=()=>{!j&&r(g=>M(g,F=>{F.splice(c,0,{id:0,type:"caret",dataObj:{content:""}})}))},N=g=>{const{key:F}=g,v=g.target.selectionEnd;f(v),C&&O({key:F})},O=g=>{const{key:F}=g;if(g.preventDefault&&g.preventDefault(),(F==="ArrowUp"||F==="Home")&&c>0)r(v=>{const W=v.filter(d=>d.type!=="caret");return W.unshift({id:0,type:"caret",dataObj:{content:""}}),W}),f(0);else if((F==="ArrowDown"||F==="End")&&c<y.length-1){const v=y.length-1;r(W=>{const d=W.filter(D=>D.type!=="caret");return d.push({id:0,type:"caret",dataObj:{content:""}}),d}),f(v)}else if(F==="ArrowLeft"&&c>0){const v=c-1;f(v),r(W=>M(W,d=>{[d[v],d[v+1]]=[d[v+1],d[v]]}))}else if(F==="ArrowRight"&&c<y.length-1){const v=c+1;f(v),r(W=>M(W,d=>{[d[v-1],d[v]]=[d[v],d[v-1]]}))}else F==="Backspace"?c>0&&(r(v=>v.slice(0,c-1).concat(v.slice(c))),f(v=>v-1)):F==="Delete"?c<y.length&&r(v=>v.slice(0,c+1).concat(v.slice(c+2))):/^\s{1}/.test(F)?(r(v=>M(v,W=>{W.splice(c,0,{type:"space",dataObj:{content:F}})})),f(v=>v+1)):!isNaN(F)||F==="."?(r(v=>M(v,W=>{W.splice(c,0,{type:"number",dataObj:{content:F}})})),f(v=>v+1)):"+-*/(),<>".indexOf(F)!==-1?(r(v=>M(v,W=>{W.splice(c,0,{type:"operator",dataObj:{content:F}})})),f(v=>v+1)):/^[!@#$%^&*()\\=,.?"':{}[\]|_<>]$/.test(F)?(r(v=>M(v,W=>{W.splice(c,0,{type:"symbol",dataObj:{content:F}})})),f(v=>v+1)):/^([A-Z]|[a-z]){1}\b/.test(F)&&(r(v=>M(v,W=>{W.splice(c,0,{type:"letters",dataObj:{content:F}})})),f(v=>v+1))};function S(g,F="before"){F==="straight"?c!==g&&(r(v=>{const W=v.filter(d=>d.type!=="caret");return W.splice(g,0,{id:0,type:"caret",dataObj:{content:""}}),W}),f(g)):F==="before"&&c!==g-1?(c<g&&(g-=1),r(v=>{const W=v.filter(d=>d.type!=="caret");return W.splice(g,0,{id:0,type:"caret",dataObj:{content:""}}),W}),f(g)):F==="after"&&c!==g+1&&(g+=1,c<g&&(g-=1),r(v=>{const W=v.filter(d=>d.type!=="caret");return W.splice(g,0,{id:0,type:"caret",dataObj:{content:""}}),W}),f(g))}const _=g=>{const F=g.target.selectionStart;f(F)},E=g=>{const F=g.pageX,v=g.pageY;if(g.target.classList.contains("calculator-field")){const W=g.target,d=W.children;if(W.children.length>1){let D=0;for(D=0;D<d.length;D+=1){const U=d[D].getBoundingClientRect();if(!(v>U.y+U.height)){if(F<U.x){S(D,"straight");break}else if(d[D+1]&&d[D+1].getBoundingClientRect().y>U.y+U.height){S(D+1,"straight");break}}}D===d.length&&S(D-1,"straight")}}else{const{target:W}=g,d=W.parentElement.children;for(let D=0;D<d.length;D+=1)if(d[D]===W){const U=W.getBoundingClientRect(),A=U.width/2;if(F>A+U.x){S(D,"after");break}else{S(D,"before");break}}}},X=(g,F,v,W)=>{if(F==="clear"){r([]),f(0),t("");return}if(y.length===0)if(F==="back"&&s)t(s.slice(0,c-1)+s.slice(c)),f(d=>d-(W||1));else if(F!=="field"&&F!=="back"){const d=s.slice(0,c)+v.content+s.slice(c);f(D=>D+(W||1)),t(d)}else{const d=`${s.slice(0,c)}\${${v.content}}${s.slice(c)}`,D=Be(d,u);r(D),f(U=>U+(W||1))}else F==="back"?c>0&&(r(d=>d.slice(0,c-1).concat(d.slice(c))),f(d=>d-(W||1))):v.isFunction?(v.content=v.content.slice(0,v.content.indexOf("(")),r(d=>d.slice(0,c).concat([{id:g,type:F,dataObj:v},{id:g+1,type:"operator",dataObj:{content:"("}}],d.slice(c,c+1),[{id:g+2,type:"operator",dataObj:{content:")"}}],d.slice(c+1))),f(d=>d+(W||2))):(r(d=>d.slice(0,c).concat([{id:g,type:F,dataObj:v}],d.slice(c))),f(d=>d+(W||1)));setTimeout(()=>{var d;return(d=B.current)==null?void 0:d.focus()},0)};return e.jsxs("div",{className:a(xe.wrp),children:[C&&e.jsx("div",{className:`${a(xe.calculateField)} calculator-field`,role:"textbox",ref:B,onClick:E,onKeyDown:O,onFocus:k,onBlur:i,tabIndex:0,children:y.map((g,F)=>g&&e.jsxs("span",{className:`${a(xe[g.type])} ${g.dataObj.isFunction?a(xe.function):""}`,children:[g.dataObj.label||g.dataObj.content,g.type==="caret"&&e.jsx("span",{className:"caret"})]},`sp-${F}`))}),!C&&e.jsx(we,{label:o,type:n,disabled:p,onChange:g=>t(g.target.value),onKeyUp:N,onClick:_,value:s,textarea:l,className:`${b} cal-fld-inp`}),e.jsx(xt,{trigger:"click",theme:"light",maxWidth:"520px",onShow:()=>{var g;$(!0),(g=B.current)==null||g.focus()},onHidden:()=>{$(!1),B.current!==document.activeElement&&r(g=>g.filter(F=>(F==null?void 0:F.type)!=="caret"))},p:"5px",distance:"400",interactive:!0,content:e.jsx(wt,{clickAction:X,options:w,formFields:x}),children:e.jsx("span",{className:a(xe.dotOpt),children:e.jsx(vt,{size:"20"})})})]})}function Be(o,t){const s=[];if(/\${\w[^ ${}]*}|^\(/g.test(o)){const p=o.match(/\${\w[^ ${}]*}|\d|\D/g);p==null||p.map((n,l)=>{if(/^\s{1}/g.test(n))s.push({id:l,type:"space",dataObj:{content:n}});else if(/^([A-Z]|[a-z]){1}\b/g.test(n))s.push({id:l,type:"letters",dataObj:{content:n}});else if(!isNaN(n)||n===".")s.push({id:l,type:"number",dataObj:{content:n}});else if(/^[+\-*/(),<>]{1}$/g.test(n))s.push({id:l,type:"operator",dataObj:{content:n}});else if(/^[!@#$%^&*()\\=,.?"':{}[\]|_<>]$/g.test(n))s.push({id:l,type:"symbol",dataObj:{content:n}});else if(/\${\w[^]*[\d\D\s]\)}/g.test(n)){let b=n.replace(/^\${|}$/g,"");const w=b.slice(b.indexOf("("));b=b.replace(/\([ \d\D]*\)/g,"()");const x=be.find(a=>a.name===b);b=b.replace(/\([ \d\D]*\)/g,""),s.push({id:l,type:"field",dataObj:{label:x==null?void 0:x.label,content:b,isFunction:!0}}),s.push(...Be(w,t))}else if(/\${\w[^ ${}]*}/g.test(n)){const b=n.replace(/^\${|}$/g,""),w=t.find(x=>x.key===b);if(w)s.push({id:l,type:"field",dataObj:{label:w==null?void 0:w.name,content:w==null?void 0:w.key}});else{const x=be.find(a=>a.name===b);x?s.push({id:l,type:"field",dataObj:{label:x==null?void 0:x.label,content:x==null?void 0:x.name}}):s.push({id:l,type:"field",dataObj:{label:"Separator",content:n}})}}})}return s}const xe={wrp:{w:"100%",mnh:38,h:"auto",lh:1.5,brs:8,dy:"flex",p:0,mt:5},calculateField:{w:"100%",h:"auto",p:5,ta:"left",b:"1px solid var(--gray-3)",brs:"8px 0px 0px 8px",dy:"flex",rg:"3px",ai:"center",jc:"left",flxp:"wrap",cur:"text",":focus-visible":{oe:"none"},":focus":{bcr:"var(--b-50)",bs:"0 0 0 2px var(--b-50) inset"}},dotOpt:{dy:"inline-flex",ai:"center",bc:"hsl(0deg 0% 85%)",p:5,b:"none",brs:"0px 8px 8px 0px",":hover":{bc:"hsl(0deg 0% 80%)"}},field:{p:"1px 7px",bc:"#E5E8FF",m:"0px 1px",dy:"flex",lh:"1.4",ai:"center",fs:"15px",jc:"center",brs:"8px"},option:{p:"1px 7px",bc:"#e6e6e6",m:"0px 1px",dy:"flex",lh:"1.4",ai:"center",fs:"15px",jc:"center",brs:"11px"},operator:{fs:"17px",fw:"600",p:"0px 1px"},space:{fs:"17px",fw:"600",p:"0px 3px"},function:{mr:"0px !important",brs:"8px 0px 0px 8px !important",bc:"hsl(233deg 100% 90%)"},caret:{dy:"inline-block",w:0,pn:"relative",h:"20px"}},yt=(o,t="")=>{if(t==="")return o;const s=t.split("."),p=s.length-1;return s.slice(0,p).forEach(l=>{o=o[l]}),s.length?o[s[p]]:o},Nt=[{key:"_bf_form",name:"Form"}],Ke=o=>{const t=[];return o.forEach(s=>{typeof s=="object"&&!Array.isArray(s)?t.push(s):Array.isArray(s)&&t.push(...Ke(s))}),t},ye=o=>{var a;const t=Ee(ve),s=Ee(st),p=qe(t,[]),n=Ke(o.logics||[]),l=((a=o==null?void 0:o.actions)==null?void 0:a.fields)||[],b=[...n,...l].map(h=>h.field).filter(h=>h),w=p.filter(h=>h.type==="repeater").map(h=>h.key);let x="";if(w.forEach(h=>{s[h].lg.map(c=>c.i).some(c=>b.includes(c))&&(x=h)}),x){w.splice(w.indexOf(x),1);const h=w.reduce((u,y)=>{const c=s[y].lg.map(f=>f.i);return[...u,...c]},[]);return p.filter(u=>!h.includes(u.key)&&!w.includes(u.key))}return p};function gt({action:o,lgcGrp:t,lgcGrpInd:s,actionInd:p,condGrpInd:n,actionType:l,formFields:b}){var E,X,g,F,v,W;const w=K(V),x=Y(ve),a=K(L),{css:h}=Q();let u="",y="";b!==null&&b.map(d=>{d.key===o.field&&(y=d.type,u=d.key)});const r=()=>{var D,U,A,J,I,te,G,se;if(y==="razorpay")return;let d;if(d=(U=(D=x==null?void 0:x[u])==null?void 0:D.opt)==null?void 0:U.map(R=>({label:R.lbl,value:R.val||R.lbl})),y==="select"){const{optionsList:R}=(x==null?void 0:x[u])||{};if(o.action==="value")return R.reduce((ae,ce)=>{const P=Object.keys(ce)[0],ue=Object.values(ce)[0];return ae.push({type:"group",title:P,childs:ue.map(re=>({label:re.lbl,value:re.val||re.lbl}))}),ae},[]);if(o.action==="activelist")return R.reduce((ae,ce)=>{const P=Object.keys(ce)[0];return ae.push({label:P,value:P}),ae},[])}if(y==="decision-box"){const R=x==null?void 0:x[u];return[{label:(A=R==null?void 0:R.msg)==null?void 0:A.checked,value:(J=R==null?void 0:R.msg)==null?void 0:J.checked},{label:(I=R==null?void 0:R.msg)==null?void 0:I.unchecked,value:(te=R==null?void 0:R.msg)==null?void 0:te.unchecked}]}return d||(d=(se=(G=x==null?void 0:x[u])==null?void 0:G.options)==null?void 0:se.map(R=>({label:R.lbl,value:R.val||R.code||R.i||R.lbl}))),d},c=d=>{w(D=>M(D,U=>{const{fields:A}=U[s].conditions[n].actions;A[p].action=d})),a(D=>z(T({},D),{unsaved:!0}))},f=d=>{w(D=>M(D,U=>{const{fields:A}=U[s].conditions[n].actions;A[p].val=d})),a(D=>z(T({},D),{unsaved:!0}))},j=d=>{w(D=>M(D,U=>{const{fields:A}=U[s].conditions[n].actions;A[p].field=d,A[p].val=""})),a(D=>z(T({},D),{unsaved:!0}))},$=()=>{w(d=>M(d,D=>{const{fields:U}=D[s].conditions[n].actions;U.length>1&&U.splice(p,1)})),a(d=>z(T({},d),{unsaved:!0}))},B=((E=x[o.field])==null?void 0:E.typ)||"",C=((X=x[o.field])==null?void 0:X.typ)!=="file-up"&&((g=x[o.field])==null?void 0:g.typ)!=="advanced-file-up",i=((F=x[o.field])==null?void 0:F.typ)!=="button",k=((v=x[o.field])==null?void 0:v.typ)==="title",N=l!=="onsubmit",O=l!=="onvalidate",S=((W=x[o.field])==null?void 0:W.typ)==="decision-box",_=o.field==="_bf_form";return e.jsxs("div",{className:"flx pos-rel btcd-logic-blk",children:[e.jsxs(fe,{label:"Form Fields",value:o.field||"",onChange:d=>j(d.target.value),style:{width:720},children:[e.jsx("option",{value:"",children:m("Select One")}),b.map(d=>e.jsx("option",{value:d.key,children:d.name},`ff-Ab-${d.key}`)),Nt.map(d=>e.jsx("option",{value:d.key,children:d.name},`ff-Ab-${d.key}`))]}),e.jsx("div",{className:h({w:100,flx:"align-center",h:35,mt:5}),children:e.jsx("div",{className:h({w:"100%",bd:"#b9c5ff",h:"0.5px"})})}),e.jsxs(fe,{label:"Action",onChange:d=>c(d.target.value),value:o.action||"",style:{width:400},className:"w-4",children:[e.jsx("option",{value:"",children:m("Select One")}),_&&e.jsx("option",z(T({value:"save_draft"},!je&&{disabled:!0}),{children:m(`Save Draft ${je?"":"(PRO)"}`)})),!_&&e.jsxs(e.Fragment,{children:[!i&&t.action_type==="oninput"&&e.jsx("option",{value:"click",children:m("Click")}),C&&i&&O&&e.jsx("option",{value:"value",children:m("Value")}),N&&O&&e.jsx("option",{value:"enable",children:m("Enable")}),N&&O&&e.jsx("option",{value:"disable",children:m("Disable")}),N&&O&&C&&i&&e.jsx("option",{value:"readonly",children:m("Readonly")}),N&&O&&C&&i&&e.jsx("option",{value:"writeable",children:m("Writeable")}),N&&O&&e.jsx("option",{value:"hide",children:m("Hide")}),N&&O&&e.jsx("option",{value:"show",children:m("Show")}),l==="onvalidate"&&e.jsx("option",{value:"required",children:m("Required")}),l==="onvalidate"&&e.jsx("option",{value:"notrequired",children:m("Not Required")}),B==="select"&&e.jsx("option",{value:"activelist",children:m("Active List")}),N&&O&&C&&i&&e.jsx("option",{value:S?"ct":"lbl",children:m("Label")}),N&&O&&C&&i&&e.jsx("option",{value:"sub-titl",children:m("Sub Title")}),N&&O&&C&&i&&!k&&e.jsx("option",{value:"hlp-txt",children:m("Helper Text")}),k&&e.jsx("option",{value:"title",children:m("Title")})]})]}),["value","activelist","lbl","ct","sub-titl","hlp-txt","title"].includes(o.action)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:h({w:100,flx:"align-center",h:35,mt:5}),children:e.jsx("div",{className:h({w:"100%",bd:"#b9c5ff",h:"0.5px"})})}),e.jsx(He,{label:"Value",type:y.match(/select|check|radio|number/g)?"text":y,onChange:f,value:o.val||"",options:r(),formFields:b})]}),e.jsx("div",{className:"btcd-li-side-btn",children:e.jsx(Z,{onClick:$,icn:!0,className:"ml-2 sh-sm white",children:e.jsx(Ce,{})})})]})}function Ct({lgcGrp:o,lgcGrpInd:t,condGrp:s,condGrpInd:p}){const{css:n}=Q(),[l,b]=ne(V),w=K(L),{fields:x}=s.actions,a=()=>{const h=M(l,u=>{const{fields:y}=u[t].conditions[p].actions;let r="disable";u[t].action_type==="onsubmit"&&(r="value"),y.push({field:"",action:r})});b(h),w(u=>z(T({},u),{unsaved:!0}))};return e.jsxs("div",{className:n(H.mt2),children:[e.jsx("div",{className:n(At.title),children:e.jsx("b",{className:"txt-dp",children:"Field Actions"})}),x.map((h,u)=>e.jsx("div",{className:`mt-2 ${s.cond_type==="always"&&"ml-4"}`,children:e.jsx(gt,{lgcGrp:o,lgcGrpInd:t,condGrpInd:p,action:h,actionInd:u,actionType:o.action_type,formFields:ye(s)})},`atn-${u+22}`)),e.jsx(pe,{msg:"Add More",children:e.jsx(Z,{onClick:()=>a(),icn:!0,className:`blue sh-sm mt-2 ${s.cond_type==="always"&&"ml-4"}`,children:e.jsx(q,{size:"14",className:"icn-rotate-45"})})})]})}const At={title:{mb:7},chip:{mnh:30,dy:"flex !important",ai:"center",w:60,mt:9,mb:9}};function _t({lgcGrpInd:o,condGrpInd:t,enableAction:s,checkKeyInArr:p,getValueFromArr:n}){const{css:l}=Q(),[b,w]=ne(V),x=K(L),a=Y(lt),h=u=>{const y=M(b,r=>{const{success:c}=r[o].conditions[t].actions,f=c.find(j=>j.type==="integ");f&&(f.details.id=u.map(j=>j.value))});w(y),x(r=>z(T({},r),{unsaved:!0}))};return e.jsxs("div",{className:l(H.mt2),children:[e.jsx(ge,{onChange:u=>s(u.target.checked,"integ"),title:m("Integration"),checked:p("integ"),className:l(H.flxc)}),p("integ")&&e.jsx(me,{action:u=>h(u),jsonValue:!0,value:n("integ","id"),titleClassName:l({mt:5,ml:28,w:"67.5%"}),className:"w-10",isMultiple:je,options:a==null?void 0:a.map((u,y)=>({label:u.name,value:u.id?JSON.stringify({id:String(u.id)}):JSON.stringify({index:String(y)})})),placeholder:m("Select Integation")})]})}function $t({lgcGrpInd:o,condGrpInd:t,enableAction:s,checkKeyInArr:p,getValueFromArr:n}){var u,y;const{css:l}=Q(),[b,w]=ne(V),x=K(L),a=Y(Se),h=r=>{const c=M(b,f=>{const{success:j}=f[o].conditions[t].actions,$=j.find(B=>B.type==="redirectPage");$&&($.details.id=r)});w(c),x(f=>z(T({},f),{unsaved:!0}))};return e.jsxs("div",{className:l(H.mt2),children:[e.jsx(ge,{onChange:r=>s(r.target.checked,"redirectPage"),title:m("Redirect URL"),checked:p("redirectPage"),className:l(H.flxc)}),p("redirectPage")&&e.jsx("div",{className:l({mt:5,ml:28}),children:e.jsxs("select",{className:"btcd-paper-inp w-7",onChange:r=>h(r.target.value),value:n("redirectPage","id"),children:[e.jsx("option",{value:"",children:m("Select Page To Redirect")}),(y=(u=a==null?void 0:a.type)==null?void 0:u.redirectPage)==null?void 0:y.map((r,c)=>e.jsx("option",{value:r.id?JSON.stringify({id:String(r.id)}):JSON.stringify({index:String(c)}),children:r.title},`sr-${c+2.5}`))]})})]})}function Ft({lgcGrpInd:o,condGrpInd:t,enableAction:s,checkKeyInArr:p,getValueFromArr:n}){var u,y;const{css:l}=Q(),[b,w]=ne(V),x=K(L),a=Y(Se),h=r=>{const c=M(b,f=>{const{success:j}=f[o].conditions[t].actions,$=j.find(B=>B.type==="successMsg");$&&($.details.id=r)});w(c),x(f=>z(T({},f),{unsaved:!0}))};return e.jsxs("div",{className:l(H.mt2),children:[e.jsx(ge,{onChange:r=>s(r.target.checked,"successMsg"),title:m("Success Message"),checked:p("successMsg"),className:l(H.flxc)}),p("successMsg")&&e.jsx("div",{className:l({mt:5,ml:28}),children:e.jsxs("select",{className:"btcd-paper-inp w-7",onChange:r=>h(r.target.value),value:n("successMsg","id"),children:[e.jsx("option",{value:"",children:m("Select Message")}),(y=(u=a==null?void 0:a.type)==null?void 0:u.successMsg)==null?void 0:y.map((r,c)=>e.jsx("option",{value:r.id?JSON.stringify({id:String(r.id)}):JSON.stringify({index:String(c)}),children:r.title},`sm-${c+2.3}`))]})})]})}function Ot({lgcGrpInd:o,condGrp:t,condGrpInd:s}){var a,h;const[p,n]=ne(V),l=K(L),b=Y(Se),{failure:w}=t.actions,x=u=>{const y=M(p,r=>{r[o].conditions[s].actions.failure=u});n(y),l(r=>z(T({},r),{unsaved:!0}))};return e.jsxs(fe,{onChange:u=>x(u.target.value),value:w,label:"Error Message",className:"w-7 mt-3",children:[e.jsx("option",{value:"",children:m("Select Message")}),(h=(a=b==null?void 0:b.type)==null?void 0:a.successMsg)==null?void 0:h.map((u,y)=>e.jsx("option",{value:u.id?JSON.stringify({id:String(u.id)}):JSON.stringify({index:String(y)}),children:u.title},`vm-${y+2.7}`))]})}function Te({lgcGrp:o,lgcGrpInd:t,condGrp:s,condGrpInd:p}){const{css:n}=Q(),[l,b]=ne(V),w=K(L),{success:x}=s.actions,a=(r,c)=>{const f=M(l,j=>{const{success:$}=j[t].conditions[p].actions;if(r)c==="mailNotify"?$.push({type:c,details:{}}):c==="dblOptin"?$.push({type:c,details:{}}):$.push({type:c,details:{id:""}});else for(let B=0;B<$.length;B+=1)if($[B].type===c){$.splice(B,1);break}});b(f),w(j=>z(T({},j),{unsaved:!0}))},h=r=>x==null?void 0:x.some(c=>c.type===r),u=r=>{const c=M(l,f=>{const{actions:j}=f[t].conditions[p];j.avoid_delete=r});b(c),w(f=>z(T({},f),{unsaved:!0}))},y=(r,c)=>{const f=x.find(j=>j.type===r);return f!==void 0?f.details[c]:""};return e.jsxs(e.Fragment,{children:[o.action_type!=="onvalidate"&&o.action_run!=="delete"&&e.jsx(Ct,{lgcGrp:o,lgcGrpInd:t,condGrp:s,condGrpInd:p}),(o.action_type==="onsubmit"||o.action_run==="delete")&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:n(H.mt3,H.mb1),children:e.jsx("b",{className:"txt-dp",children:"Additional Actions"})}),e.jsxs("div",{className:s.cond_type==="always"?"ml-4":"",children:[o.action_run!=="delete"&&e.jsx(Ft,{lgcGrpInd:t,condGrpInd:p,enableAction:a,checkKeyInArr:h,getValueFromArr:y}),!o.action_run.match(/^(delete|edit)$/)&&e.jsx($t,{lgcGrpInd:t,condGrpInd:p,enableAction:a,checkKeyInArr:h,getValueFromArr:y}),o.action_run!=="delete"&&e.jsx(_t,{lgcGrpInd:t,condGrpInd:p,enableAction:a,checkKeyInArr:h,getValueFromArr:y}),e.jsx(Re,{title:m("Email Notification"),lgcGrpInd:t,condGrpInd:p,actionKey:"mailNotify",enableAction:a,checkKeyInArr:h,getValueFromArr:y}),e.jsx(Re,{title:m("Double Opt-in"),lgcGrpInd:t,condGrpInd:p,actionKey:"dblOptin",enableAction:a,checkKeyInArr:h,getValueFromArr:y})]})]}),o.action_run==="delete"&&e.jsx(oe,{className:n({mt:5,ml:s.cond_type==="always"?12:-8}),onChange:r=>u(r.target.checked),checked:l[t].avoid_delete,title:e.jsx("small",{className:"txt-dp",children:"Prevent Delete"})}),o.action_type==="onvalidate"&&o.action_run!=="delete"&&e.jsx(Ot,{lgcGrpInd:t,condGrp:s,condGrpInd:p})]})}const Bt={equal:{label:m("Equal"),notFields:["button"]},not_equal:{label:m("Not Equal"),notFields:["button","user"]},null:{label:m("Is Null"),notFields:["button","user"]},not_null:{label:m("Is Not Null"),notFields:["button","user"]},contain:{label:m("Contain"),notFields:["button","date","time","datetime-local","month","week","user"]},contain_all:{label:m("Contain All"),fields:["select"]},not_contain:{label:m("Not Contain"),notFields:["button","date","time","datetime-local","month","week","user"]},greater:{label:m("Greater Than"),fields:["number","date","time","datetime-local"]},less:{label:m("Less Than"),fields:["number","date","time","datetime-local"]},greater_or_equal:{label:m("Greater Than or Equal"),fields:["number","date","time","datetime-local"]},less_or_equal:{label:m("Less Than or Equal"),fields:["number","date","time","datetime-local"]},start_with:{label:m("Start With"),notFields:["button","color","url","password","email","date","time","datetime-local","month","week","user"]},end_with:{label:m("End With"),notFields:["button","color","url","password","email","date","time","datetime-local","month","week","user"]},between:{label:m("Between"),fields:["number","date","time","datetime-local"]},on_click:{label:m("On Click"),fields:["button.btnTyp:button"]}};function $e({logic:o,fieldVal:t,delLogic:s,lgcInd:p,subLgcInd:n,subSubLgcInd:l,value:b,addInlineLogic:w,changeLogic:x,logicValue:a,changeValue:h,changeSmartKey:u,changeFormField:y,smartTagAllowed:r,formFields:c}){var g,F,v,W,d,D,U;const{css:f}=Q(),j=Y(ve);let $=!1,B="",C="",i="";(g=c==null?void 0:c.find)==null||g.call(c,A=>{if(A.key===t)return A.type.match(/^(check|radio|select|html-select)$/)?B="text":B=A.type,C=A.type,i=A.key,!0});const k=[{label:m("Logged In"),value:"logged_in"},{label:m("Logged Out"),value:"logged_out"}],N=()=>{var J,I,te,G,se,R,ae,ce;if(C==="razorpay")return;let A;if(C==="user"?A=k:A=(I=(J=j==null?void 0:j[i])==null?void 0:J.opt)==null?void 0:I.map(P=>({label:P.lbl,value:P.val||P.lbl})),C==="select"){const{optionsList:P}=(j==null?void 0:j[i])||{};return P.reduce((ue,re)=>{const Xe=Object.keys(re)[0],Ye=Object.values(re)[0];return ue.push({type:"group",title:Xe,childs:Ye.map(Ae=>({label:Ae.lbl,value:Ae.val||Ae.lbl}))}),ue},[])}if(B==="decision-box"){const P=j==null?void 0:j[i];return[{label:(te=P==null?void 0:P.msg)==null?void 0:te.checked,value:(G=P==null?void 0:P.msg)==null?void 0:G.checked},{label:(se=P==null?void 0:P.msg)==null?void 0:se.unchecked,value:(R=P==null?void 0:P.msg)==null?void 0:R.unchecked}]}return A||(A=(ce=(ae=j==null?void 0:j[i])==null?void 0:ae.options)==null?void 0:ce.map(P=>({label:P.lbl,value:P.val||P.code||P.i||P.lbl}))),A},O=(A,J)=>J.find(I=>{if(I===A)return!0;if(!I.includes("."))return!1;const te=I.indexOf("."),G=I.substring(0,te);if(A!==G)return!1;const se=I.substring(te+1);if(!se)return!1;const[R,ae]=se.split(":");return R.split(".").reduce((ue,re)=>ue[re],j[i])===ae}),S=A=>be.find(J=>A===`\${${J.name}}`);B||(B=((F=S(t))==null?void 0:F.type)||""),$||($=((v=S(t))==null?void 0:v.singleSelect)||!1);const _=A=>{var te;const J=((te=S(t))==null?void 0:te.type)||A;return J?Object.entries(Bt).reduce((G,[se,R])=>R.notFields&&O(J,R.notFields)?G:R.fields?O(J,R.fields)?[...G,{key:se,lbl:R.label}]:G:[...G,{key:se,lbl:R.label}],[]):[]},E=A=>A==="${_bf_custom_date_format()}"?m("Date Format"):A==="${_bf_user_meta_key()}"?m("Meta Key"):A==="${_bf_query_param()}"?m("Query Param"):"Smart Key",X=["null","not_null","on_click"];return e.jsxs("div",{className:`${f(ze.lgcBlk)} btcd-logic-blk`,children:[e.jsxs("div",{className:f(ze.processDgrm),children:[e.jsx("div",{className:"block-wrapper",children:e.jsx("div",{className:"block-content",children:e.jsxs(fe,{label:"Form Fields",value:t,onChange:A=>y(A.target.value,p,n,l),children:[e.jsx("option",{value:"",children:m("Select Form Field")}),!!c.length&&e.jsx("optgroup",{label:"Form Fields",children:c.map(A=>!A.type.match(/^(file-up|recaptcha)$/)&&e.jsx("option",{value:A.key,children:A.name},`ff-lb-${A.key}`))}),r&&e.jsx("optgroup",{label:`General Smart Codes ${je?"":"(PRO)"}`,children:(W=be)==null?void 0:W.map(({name:A,label:J})=>e.jsx("option",{value:`\${${A}}`,disabled:!je,children:J},`ff-rm-${A}`))})]})})}),((d=S(t))==null?void 0:d.functionParam)&&e.jsx("div",{className:"block-wrapper",children:e.jsx("div",{className:"block-content",children:e.jsxs(fe,{label:"Field Parameter",onChange:A=>u(A.target.value,p,n,l),value:o.smartKey||"",children:[e.jsx("option",{value:"",children:m("Select Form Field")}),!!c.length&&e.jsx("optgroup",{label:"Form Fields",children:c.map(A=>!A.type.match(/^(file-up|recaptcha)$/)&&e.jsx("option",{value:A.key,children:A.name},`ff-lb-${A.key}`))})]})})}),((D=S(t))==null?void 0:D.custom)&&!((U=S(t))!=null&&U.functionParam)&&e.jsx("div",{className:"block-wrapper",children:e.jsx("div",{className:"block-content",children:e.jsx(we,{label:E(t),type:"text",onChange:A=>u(A.target.value,p,n,l),value:o.smartKey||""})})}),e.jsx("div",{className:"block-wrapper",children:e.jsx("div",{className:"block-content",children:e.jsxs(fe,{label:"Logic",value:a,onChange:A=>x(A.target.value,p,n,l),children:[e.jsx("option",{value:"",children:m("Select One")}),_(B).map(({key:A,lbl:J})=>e.jsx("option",{value:A,children:J},A))]})})}),a!=="between"&&a!=="not between"&&!X.includes(a)&&e.jsx("div",{className:"block-wrapper",children:e.jsx("div",{className:"block-content",children:B.match(/user|select|check|radio/g)?e.jsx(_e,{className:"msl-wrp-options btcd-paper-drpdwn",defaultValue:b||"",onChange:A=>h(A,p,n,l),options:N(),fldType:B,singleSelect:$}):e.jsx(He,{label:"Value",type:B.match(/select|check|radio|number/g)?"text":B,disabled:a==="null"||a==="not_null",onChange:A=>h(A,p,n,l),value:b||"",options:N(),formFields:c})})}),(a==="between"||a==="not between")&&e.jsx("div",{className:"block-wrapper",children:e.jsxs("div",{className:"block-group",children:[e.jsx("div",{className:"block-wrapper",children:e.jsx("div",{className:"block-content",children:C.match(/select|check|radio/g)?e.jsx(_e,{className:"msl-wrp-options btcd-paper-drpdwn",defaultValue:b.min||"",onChange:A=>h(A,p,n,l,"min"),options:N(),customValue:!0,fldType:C}):e.jsx(we,{label:"Min Value",type:B,disabled:a==="null"||a==="not_null",onChange:A=>h(A.target.value,p,n,l,"min"),value:b.min||""})})}),e.jsx("div",{className:"block-wrapper",children:e.jsx("div",{className:"block-content",children:C.match(/select|check|radio/g)?e.jsx(_e,{className:"msl-wrp-options btcd-paper-drpdwn",defaultValue:b.max||"",onChange:A=>h(A,p,n,l,"max"),options:N(),customValue:!0,fldType:C}):e.jsx(we,{label:"Max Value",type:B,disabled:a==="null"||a==="not_null",onChange:A=>h(A.target.value,p,n,l,"max"),value:b.max||""})})})]})})]}),e.jsxs("div",{className:"btcd-li-side-btn",children:[e.jsx(Z,{onClick:()=>s(p,n,l),icn:!0,className:"ml-2 white mr-2 sh-sm",children:e.jsx(Ce,{size:"16"})}),e.jsxs(Z,{onClick:()=>w("and",p,n,l),className:"white mr-2 sh-sm",children:[e.jsx(q,{size:"10",className:"icn-rotate-45 mr-1"}),"AND"]}),e.jsxs(Z,{onClick:()=>w("or",p,n,l),className:"white sh-sm",children:[e.jsx(q,{size:"10",className:"icn-rotate-45 mr-1"}),"OR"]})]})]})}const ze={lgcBlk:{pn:"relative",dy:"flex",cg:15,rg:15,my:5,":hover":{bc:"#F0F0F0"}},lgcGrp:{b:"0.5px solid #D5D5D5",brs:8,p:10,ml:20},blkItm:{w:"100%"},processDgrm:{"--linethick":"1px","--linewidth":"1.5em","--line-color":"#b9c5ff",flx:"align-center",w:"100%",m:0,p:0,ls:"none",ta:"center","& > .block-wrapper":{flex:"1 1 auto"},"& .block-wrapper>.block-content":{cr:"#666",brs:10},"& .block-wrapper::before, & .block-wrapper::after, & .block-group::before, & .block-group::after, & .block-content::before, & .block-content::after":{bse:"solid",bcr:"var(--line-color)"},"& .block-wrapper .block-group .block-wrapper:first-child .block-content::before, &  .block-wrapper .block-group .block-wrapper:first-child::before":{btlr:10},"&  .block-wrapper .block-group .block-wrapper:first-child .block-content::after, & .block-wrapper .block-group .block-wrapper:first-child::after":{btrr:10},"&  .block-wrapper .block-group .block-wrapper:last-child .block-content::before, &  .block-wrapper .block-group .block-wrapper:last-child::before":{bblr:10},"&  .block-wrapper .block-group .block-wrapper:last-child .block-content::after, &  .block-wrapper .block-group .block-wrapper:last-child::after":{bbrr:10},"& ol, & .block-group, & .block-wrapper":{ls:"none",ta:"center"},"& .block-wrapper":{pn:"relative",mb:0,w:"100%"},"& > .block-wrapper, & ol > .block-wrapper, & .block-group > .block-wrapper":{p:"4px 0"},"&  .block-group":{pn:"relative",pl:"var(--linewidth)"},"& .block-group::before, &  .block-group::after":{pn:"absolute",ct:'""',tp:"50%",w:"var(--linewidth)",dy:"block",bwh:"var(--linethick) 0 0"},"& .block-group::before":{lt:0},"&  .block-group::after":{rt:0},"&  .block-group>.block-wrapper::after, &  .block-group>.block-wrapper::before":{pn:"absolute",ct:'""',tp:0,bm:0,w:"var(--linewidth)",h:"100%",dy:"block"},"&  .block-group>.block-wrapper::before":{lt:0,bwh:"0 0 0 var(--linethick)"},"&  .block-group>.block-wrapper::after":{rt:0,bwh:"0 var(--linethick) 0 0"},"&  .block-group>.block-wrapper:first-child::before, &  .block-group>.block-wrapper:first-child::after":{tp:"50%",bm:"auto",h:"50%"},"&  .block-group>.block-wrapper:last-child::before, &  .block-group>.block-wrapper:last-child::after":{tp:0,bm:"auto",h:"50%"},"&  .block-group>.block-wrapper:first-child:last-child::before, &  .block-group>.block-wrapper:first-child:last-child::after":{tp:0,bm:"auto",h:"50%"},"&  .block-wrapper>.block-content":{pn:"relative",ml:"var(--linewidth)"},"& >.block-wrapper:first-child>.block-content":{ml:0},"&  .block-wrapper:not(:last-child) .block-wrapper>.block-content":{mr:"var(--linewidth)"},"&  .block-wrapper>.block-content::before, &  .block-wrapper>.block-content::after":{ct:'""',tp:"50%",w:"var(--linewidth)",pn:"absolute",bwh:"var(--linethick) 0 0",h:"50%"},"&  .block-wrapper>.block-content::after":{rt:"calc(0em - var(--linewidth) + 2px)",mr:"calc(0px - var(--linethick))"},"&  .block-wrapper>.block-content::before":{lt:"calc(0em - var(--linewidth) + 2px)",ml:"calc(0px - var(--linethick))"},"&  .block-wrapper:last-child>.block-content::after, & .block-wrapper:last-child>.block-content::before":{tp:0,bwh:"0 0 var(--linethick)"},"& >.block-wrapper:first-child>.block-content::before, & >.block-wrapper:first-child>.block-group::before, & >.block-wrapper:first-child>.block-group>.block-wrapper::before, & >.block-wrapper:first-child>.block-group>.block-wrapper>.block-content:first-child::before, & >.block-wrapper:first-child>.block-group>.block-wrapper>ol>.block-wrapper:first-child>.block-content::before, & >.block-wrapper:last-child>.block-content::after, & >.block-wrapper:last-child>.block-group::after":{b:0},"& >.block-wrapper>.block-content::after,  &  ol>.block-wrapper>.block-content::after, & >.block-wrapper>.block-group::after,  &  ol>.block-wrapper>.block-group::after":{dy:"none"},"& >.block-wrapper>.block-content, &  ol>.block-wrapper>.block-content":{mr:0},"& >.block-wrapper>.block-group,  &  ol>.block-wrapper>.block-group":{pr:0},"& >.block-wrapper:last-child>.block-content::after,  &  ol>.block-wrapper:last-child>.block-content::after,  & >.block-wrapper:last-child>.block-group::after,  &  ol>.block-wrapper:last-child>.block-group::after":{dy:"block"},"& >.block-wrapper:last-child>.block-content, & ol>.block-wrapper:last-child>.block-content":{mr:0},"&  .block-wrapper:last-child>.block-group::after,  &  .block-wrapper:last-child>.block-group>.block-wrapper::after,  &  .block-wrapper:last-child>.block-group>.block-wrapper>.block-content::after":{dy:"none"}}};function Fe({logic:o,nested:t,onChange:s,className:p=null}){return e.jsx("div",{children:e.jsxs("select",{value:o,onChange:s,className:`btcd-logic-chip ${p} ${t&&"scl-8"}`,children:[e.jsx("option",{value:"or",children:m("OR")}),e.jsx("option",{value:"and",children:m("AND")})]})})}function St({lgcGrp:o,lgcGrpInd:t,condGrp:s,condGrpInd:p}){var C;const{css:n}=Q(),[l,b]=ne(V),w=K(L),x=Y(ve),a=(i,k,N)=>{const O=M(l,S=>{const _=S[t].conditions[p].logics;if(_.length>1)if(N!==void 0)if(_[i][k].length===N+1)if(_[i][k].length===3){const E=_[i][k][N-2];_[i].splice(k,1),_[i].push(E)}else _[i][k].splice(N-1,2);else if(_[i][k].length===3){const E=_[i][k][N+2];_[i].splice(k,1),_[i].push(E)}else _[i][k].splice(N,2);else if(k!==void 0)if(_[i].length===k+1)if(_[i].length===3){const E=_[i][k-2];_.splice(i,1),_.splice(i,0,E)}else _[i].splice(k-1,2);else if(_[i].length===3){const E=_[i][k+2];_.splice(i,1),_.splice(i,0,E)}else _[i].splice(k,2);else i!==0?_.splice(i-1,2):_.splice(i,2)});b(O),w(S=>z(T({},S),{unsaved:!0}))},h=(i,k,N,O)=>{const S=M(l,_=>{const E=_[t].conditions[p].logics;O!==void 0?(i==="null"&&(E[k][N][O].val=""),E[k][N][O].logic=i):N!==void 0?(i==="null"&&(E[k][N].val=""),E[k][N].logic=i):(i==="null"&&(E[k].val=""),E[k].logic=i)});b(S),w(_=>z(T({},_),{unsaved:!0}))},u=(i,k,N,O)=>{const S=M(l,_=>{const E=_[t].conditions[p].logics;O!==void 0?E[k][N][O]=i:N!==void 0?E[k][N]=i:E[k]=i});b(S),w(_=>z(T({},_),{unsaved:!0}))},y=(i,k,N,O)=>O!==void 0?i[k][N][O]:N!==void 0?i[k][N]:i[k],r=(i,k,N,O,S="")=>{const _=M(l,E=>{const X=E[t].conditions[p].logics,g=y(X,k,N,O);S?(typeof g.val=="string"&&(g.val={}),g.val[S]=i):g.val=i});b(_),w(E=>z(T({},E),{unsaved:!0}))},c=(i,k,N,O)=>{const S=be.find(E=>E.name===i),_=M(l,E=>{const X=E[t].conditions[p].logics,g=y(X,k,N,O);g.field=i,g.val="",S!=null&&S.custom||delete g.smartKey});b(_),w(E=>z(T({},E),{unsaved:!0}))},f=(i,k,N,O)=>{const S=M(l,_=>{const E=_[t].conditions[p].logics;O!==void 0?E[k][N].splice(O+1,0,i,{field:"",logic:"",val:""}):N!==void 0?E[k].splice(N+1,0,i,{field:"",logic:"",val:""}):E.splice(k+1,0,i,{field:"",logic:"",val:""})});b(S),w(_=>z(T({},_),{unsaved:!0}))},j=(i,k,N,O)=>{const S=M(l,_=>{const E=_[t].conditions[p].logics,X=y(E,k,N,O);X.smartKey=i});b(S),w(_=>z(T({},_),{unsaved:!0}))},$=(i,k)=>{if(o.action_type!=="oninput")return!0;const N=i.findIndex(O=>O.field&&O.field in x);return N>=0&&N!==k},B=(i,k,N=0)=>{const O=[i],S={field:"",logic:"",val:""};N?O.push([S,i,S]):O.push(S),b(_=>M(_,E=>{const{logics:X}=_[t].conditions[p],g=[...X[k],...O];E[t].conditions[p].logics[k]=g}))};return(C=s==null?void 0:s.logics)==null?void 0:C.map((i,k)=>e.jsxs("span",{children:[typeof i=="object"&&!Array.isArray(i)&&e.jsx($e,{logic:i,fieldVal:i.field,changeFormField:c,changeValue:r,changeSmartKey:j,logicValue:i.logic,changeLogic:h,addInlineLogic:f,delLogic:a,lgcGrpInd:t,lgcInd:k,value:i.val,actionType:o==null?void 0:o.action_type,smartTagAllowed:$(s.logics,k),formFields:ye(s)}),typeof i=="string"&&e.jsx(Fe,{logic:i,onChange:N=>u(N.target.value,k)}),Array.isArray(i)&&e.jsxs("div",{className:"p-2 br-10 btcd-logic-grp mt-2 mb-2 pl-4 pr-4",children:[i.map((N,O)=>e.jsxs("span",{children:[typeof N=="object"&&!Array.isArray(N)&&e.jsx($e,{logic:N,fieldVal:N.field,changeFormField:c,changeValue:r,changeSmartKey:j,logicValue:N.logic,changeLogic:h,addInlineLogic:f,delLogic:a,lgcGrpInd:t,lgcInd:k,subLgcInd:O,value:N.val,actionType:o==null?void 0:o.action_type,smartTagAllowed:$(i,O),formFields:ye(s)}),typeof N=="string"&&e.jsx(Fe,{logic:N,nested:!0,onChange:S=>u(S.target.value,k,O)}),Array.isArray(N)&&e.jsxs("div",{className:"p-2 br-10 btcd-logic-grp mt-2 mb-2 pl-4 pr-4",children:[N.map((S,_)=>e.jsxs("span",{children:[typeof S=="object"&&!Array.isArray(S)&&e.jsx($e,{logic:S,fieldVal:S.field,changeFormField:c,changeValue:r,changeSmartKey:j,logicValue:S.logic,changeLogic:h,addInlineLogic:f,delLogic:a,lgcGrpInd:t,lgcInd:k,subLgcInd:O,subSubLgcInd:_,value:S.val,actionType:o==null?void 0:o.action_type,smartTagAllowed:$(N,_),formFields:ye(s)}),typeof S=="string"&&e.jsx(Fe,{logic:S,nested:!0,onChange:E=>u(E.target.value,k,O,_)})]},`subsubLogic-${_+90}`)),e.jsxs(Ne,{place:"bottom",children:[e.jsx(pe,{msg:"Add Logic",children:e.jsx(Z,{icn:!0,className:"blue sh-sm",children:e.jsx(q,{size:"14",className:"icn-rotate-45"})})}),e.jsxs("div",{children:[e.jsxs("button",{type:"button",className:n(he.addItemBtn),onClick:()=>f("and",k,O,N.length),children:[e.jsx(q,{size:"9",className:"icn-rotate-45 mr-1"}),"Add AND"]}),e.jsxs("button",{type:"button",className:n(he.addItemBtn),onClick:()=>f("or",k,O,N.length),children:[e.jsx(q,{size:"9",className:"icn-rotate-45 mr-1"}),"Add OR"]})]})]})]})]},`subLogic-${O*7}`)),e.jsxs(Ne,{place:"bottom",children:[e.jsx(pe,{msg:"Add Logic",children:e.jsx(Z,{icn:!0,className:"blue sh-sm",children:e.jsx(q,{size:"14",className:"icn-rotate-45"})})}),e.jsxs("div",{children:[e.jsxs("button",{type:"button",className:n(he.addItemBtn),onClick:()=>B("and",k),children:[e.jsx(q,{size:"9",className:"icn-rotate-45 mr-1"}),"Add AND"]}),e.jsxs("button",{type:"button",className:n(he.addItemBtn),onClick:()=>B("or",k),children:[e.jsx(q,{size:"9",className:"icn-rotate-45 mr-1"}),"Add OR"]}),e.jsxs("button",{type:"button",className:n(he.addItemBtn),onClick:()=>B("and",k,1),children:[e.jsx(q,{size:"9",className:"icn-rotate-45 mr-1"}),"Add AND Group"]}),e.jsxs("button",{type:"button",className:n(he.addItemBtn),onClick:()=>B("or",k,1),children:[e.jsx(q,{size:"9",className:"icn-rotate-45 mr-1"}),"Add OR Group"]})]})]})]})]},`logic-${k+44}`))}const he={addItemBtn:{dy:"block",w:"100%",b:0,oe:0,brs:8,ta:"left",cr:"#444",fs:12,fw:500,p:5,pr:20,bd:"none",curp:1,":hover":{bc:"#EFEFEF"}}};function Wt({lgcGrpInd:o,lgcGrp:t}){var x;const{css:s}=Q(),p=K(V),n=K(L),l=a=>a.replace(/-/g," ").split(" ").map(h=>ot(h)).join(" "),b=a=>{Oe(),p(h=>M(h,u=>{const{conditions:y}=u[o],r=z(T({},ke),{cond_type:a});a==="else"&&delete r.logics,a==="else-if"&&y[y.length-1].cond_type==="else"?y.splice(y.length-1,0,r):y.push(r)})),n(h=>z(T({},h),{unsaved:!0}))},w=(a,h,u="",y=0)=>{Oe();const r=[a],c={field:"",logic:"",val:""};y?r.push([c,a,c]):r.push(c),p(f=>M(f,j=>{let $=j[o].conditions[h].logics;$=yt($,u),$.push(...r)})),n(f=>z(T({},f),{unsaved:!0}))};return e.jsxs("div",{className:s(le.container),children:[e.jsxs("div",{className:s(le.section),children:[t.action_behaviour==="cond"&&e.jsxs("div",{className:s(le.sideBdr),children:[e.jsx("div",{className:s(le.sideBdrLn)}),e.jsx("div",{className:s(le.sideBdrCrl)})]}),(x=t==null?void 0:t.conditions)==null?void 0:x.map((a,h)=>e.jsxs(de.Fragment,{children:[t.action_behaviour==="cond"&&a.cond_type!=="else"&&e.jsxs(Me,{title:l(a.cond_type),accordionActions:a.cond_type!=="if"&&e.jsx(Pe,{lgcGrpInd:o,condGrpInd:h}),children:[e.jsx(St,{lgcGrp:t,lgcGrpInd:o,condGrp:a,condGrpInd:h}),e.jsx("div",{className:"mt-1",children:e.jsxs(Ne,{place:"bottom",children:[e.jsx(pe,{msg:"Add Logic",children:e.jsx(Z,{icn:!0,className:"blue sh-sm",children:e.jsx(q,{size:"14",className:"icn-rotate-45"})})}),e.jsxs("div",{children:[e.jsxs("button",{type:"button",className:s(le.addItemBtn),onClick:()=>w("and",h),children:[e.jsx(q,{size:"9",className:"icn-rotate-45 mr-1"}),"Add AND"]}),e.jsxs("button",{type:"button",className:s(le.addItemBtn),onClick:()=>w("or",h),children:[e.jsx(q,{size:"9",className:"icn-rotate-45 mr-1"}),"Add OR"]}),e.jsxs("button",{type:"button",className:s(le.addItemBtn),onClick:()=>w("and",h,"",1),children:[e.jsx(q,{size:"9",className:"icn-rotate-45 mr-1"}),"Add AND Group"]}),e.jsxs("button",{type:"button",className:s(le.addItemBtn),onClick:()=>w("or",h,"",1),children:[e.jsx(q,{size:"9",className:"icn-rotate-45 mr-1"}),"Add OR Group"]})]})]})})]},a.cond_type+0),t.action_behaviour==="cond"&&e.jsx(Me,{title:a.cond_type==="else"?"Else":"Then",titleOutline:a.cond_type!=="else",accordionActions:a.cond_type==="else"&&e.jsx(Pe,{lgcGrpInd:o,condGrpInd:h,add:!1,clone:!1}),children:e.jsx(Te,{lgcGrp:t,lgcGrpInd:o,condGrp:a,condGrpInd:h})},a.cond_type+1),t.action_behaviour!=="cond"&&e.jsx(Te,{lgcGrp:t,lgcGrpInd:o,condGrp:a,condGrpInd:h})]},`wkf-${h+99}`))]}),t.action_behaviour==="cond"&&e.jsxs(Ne,{place:"bottom",children:[e.jsx(pe,{msg:"Add Condition",children:e.jsx(Z,{icn:!0,className:"blue sh-sm ml-2",children:e.jsx(q,{size:"14",className:"icn-rotate-45"})})}),e.jsxs("div",{children:[e.jsxs("button",{type:"button",className:s(le.addItemBtn),onClick:()=>b("else-if"),children:[e.jsx(q,{size:"9",className:"icn-rotate-45 mr-1"}),"Add Else If"]}),t.conditions[t.conditions.length-1].cond_type!=="else"&&e.jsxs("button",{type:"button",className:s(le.addItemBtn),onClick:()=>b("else"),children:[e.jsx(q,{size:"9",className:"icn-rotate-45 mr-1"}),"Add Else"]})]})]})]})}const Pe=({lgcGrpInd:o,condGrpInd:t,add:s,clone:p,remove:n})=>{const[l,b]=de.useState({show:!1}),w=K(V),x=K(L),a=()=>{b({show:!1})},h=()=>{b({show:!1}),w(f=>M(f,j=>{j[o].conditions.splice(t,1)})),x(f=>z(T({},f),{unsaved:!0}))},u=()=>{b({btnTxt:"Delete",body:"Are you sure to delete this logic?",btnClass:"",action:()=>{h(),a()},show:!0})},y=()=>{w(f=>M(f,j=>{j[o].conditions.splice(t+1,0,it(j[o].conditions[t]))})),x(f=>z(T({},f),{unsaved:!0}))},r=()=>{w(f=>M(f,j=>{j[o].conditions.splice(t+1,0,z(T({},ke),{cond_type:"else-if"}))})),x(f=>z(T({},f),{unsaved:!0}))},c=f=>typeof f=="boolean"?f:!0;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[c(s)&&e.jsx(pe,{msg:"Add Else If",children:e.jsx(Z,{onClick:r,icn:!0,className:"white ml-2 sh-sm",children:e.jsx(jt,{size:"16"})})}),c(p)&&e.jsx(pe,{msg:"Clone",children:e.jsx(Z,{onClick:y,icn:!0,className:"white ml-2 sh-sm",children:e.jsx(at,{size:"16"})})}),c(n)&&e.jsx(pe,{msg:"Delete",children:e.jsx(Z,{onClick:u,icn:!0,className:"white ml-2 sh-sm",children:e.jsx(Ce,{size:"16"})})})]}),e.jsx(Je,{show:l.show,close:a,btnTxt:l.btnTxt,btnClass:l.btnClass,body:l.body,action:l.action})]})},le={container:{mt:10},section:{pn:"relative",w:"100%",zx:1,mb:10,pb:10},sideBdr:{flx:"center",fd:"column",w:50,pn:"absolute",h:"100%",zx:-1},sideBdrLn:{w:2,bc:"var(--b-50)",h:"100%"},sideBdrCrl:{brs:"50%",bc:"var(--b-50)",h:8,w:8,mt:-1},addItemBtn:{dy:"block",w:"100%",b:0,oe:0,brs:8,ta:"left",cr:"#444",fs:12,fw:500,p:5,pr:20,bd:"none",curp:1,":hover":{bc:"#EFEFEF"}}};function Dt({lgcGrpInd:o,lgcGrp:t}){var x;const[s,p]=ne(V),n=K(L),l=a=>{const h=M(s,u=>{a==="delete"?delete u[o].action_type:u[o].action_type===void 0&&(u[o].action_type="onload"),u[o].action_run=a});p(h),n(u=>z(T({},u),{unsaved:!0}))},b=a=>{const h=M(s,u=>{a==="onsubmit"&&u[o].conditions.forEach(r=>{var f,j;const c=(j=(f=r.actions)==null?void 0:f.fields)==null?void 0:j.length;for(let $=0;$<c;$+=1)r.actions.fields[$].action="value"}),u[o].action_behaviour="cond",u[o].conditions.forEach(r=>{a==="onvalidate"?(r.actions.failure="",delete r.actions.fields,delete r.actions.success):(r.actions.fields=[{field:"",action:"value"}],r.actions.success=[],delete r.actions.failure)});const[y]=u[o].conditions;y.cond_type="if",y.logics||(y.logics=ke.logics),u[o].action_type=a});p(h),n(u=>z(T({},u),{unsaved:!0}))},w=a=>{const h=M(s,u=>{u[o].action_behaviour=a;const[y]=u[o].conditions;y.cond_type=a==="cond"?"if":a,a==="always"?delete y.logics:a==="cond"&&(y.logics=ke.logics),u[o].conditions=[y]});p(h),n(u=>z(T({},u),{unsaved:!0}))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("b",{className:"txt-dp",children:e.jsx("small",{children:"Action Run When:"})}),e.jsx("br",{}),e.jsxs("div",{className:"ml-2",children:[e.jsx(oe,{radio:!0,onChange:a=>l(a.target.value),title:e.jsx("small",{className:"txt-dp",children:m("Record Create/Edit")}),checked:t.action_run==="create_edit",value:"create_edit"}),e.jsx(oe,{radio:!0,onChange:a=>l(a.target.value),title:e.jsx("small",{className:"txt-dp",children:m("Record Create")}),checked:t.action_run==="create",value:"create"}),e.jsx(oe,{radio:!0,onChange:a=>l(a.target.value),title:e.jsx("small",{className:"txt-dp",children:m("Record Edit")}),checked:t.action_run==="edit",value:"edit"}),e.jsx(oe,{radio:!0,onChange:a=>l(a.target.value),title:e.jsx("small",{className:"txt-dp",children:m("Record Delete")}),checked:t.action_run==="delete",value:"delete"})]})]}),t.action_run!=="delete"&&e.jsxs("div",{children:[e.jsx("b",{className:"txt-dp",children:e.jsx("small",{children:"Action Effect:"})}),e.jsx("br",{}),e.jsxs("div",{className:"ml-2",children:[e.jsx(oe,{radio:!0,onChange:a=>b(a.target.value),title:e.jsx("small",{className:"txt-dp",children:m("On Form Load")}),checked:t.action_type==="onload",value:"onload"}),e.jsx(oe,{radio:!0,onChange:a=>b(a.target.value),title:e.jsx("small",{className:"txt-dp",children:m("On Field Input")}),checked:t.action_type==="oninput",value:"oninput"}),e.jsx(oe,{radio:!0,onChange:a=>b(a.target.value),title:e.jsx("small",{className:"txt-dp",children:m("On Form Validate")}),checked:t.action_type==="onvalidate",value:"onvalidate"}),e.jsx(oe,{radio:!0,onChange:a=>b(a.target.value),title:e.jsx("small",{className:"txt-dp",children:m("On Form Submit")}),checked:t.action_type==="onsubmit",value:"onsubmit"})]})]}),e.jsxs("div",{children:[e.jsx("b",{className:"txt-dp",children:e.jsx("small",{children:"Action Behaviour:"})}),e.jsx("br",{}),e.jsxs("div",{className:"ml-2",children:[!((x=t==null?void 0:t.action_type)!=null&&x.match(/^(onvalidate|oninput)$/))&&e.jsx(oe,{radio:!0,onChange:a=>w(a.target.value),name:`ab-${o+121}`,title:e.jsx("small",{className:"txt-dp",children:m("Always")}),checked:t.action_behaviour==="always",value:"always"}),e.jsx(oe,{radio:!0,onChange:a=>w(a.target.value),title:e.jsx("small",{className:"txt-dp",children:m("Condition")}),checked:t.action_behaviour==="cond",value:"cond"})]})]})]})}function ts(){const o=Y(nt),[t,s]=de.useState({show:!1}),[p,n]=ne(V),l=K(L),{css:b}=Q(),w=Y(Ue),{isPro:x}=w,a=j=>{switch(j){case"onload":return m("On Load");case"oninput":return m("On Field Input");case"onvalidate":return m("On Form Validate");case"onsubmit":return m("On Form Submit");case"create_edit":return m("Record Create/Edit");case"create":return m("Record Create");case"edit":return m("Record Edit");case"delete":return m("Record Delete");case"always":return m("Always");case"cond":return m("With Condition")}},h=()=>{const j=M(p,$=>{$.unshift({title:`Action ${p.length+1}`,action_type:"onload",action_run:"create_edit",action_behaviour:"cond",conditions:[T({},ke)]})});n(j),l($=>z(T({},$),{unsaved:!0}))},u=j=>{if(p[j].id){const $=ct({formID:o,id:p[j].id},"bitforms_delete_workflow").then(B=>{if(B!==void 0&&B.success){const C=M(p,i=>{i.splice(j,1)});n(C)}});rt.promise($,{success:"Successfully Deleted.",loading:"Deleting...",error:"Error occurred, Try again."})}else{const $=M(p,B=>{B.splice(j,1)});n($)}},y=(j,$)=>{const B=M(p,C=>{C[$].title=j.target.value});n(B),l(C=>z(T({},C),{unsaved:!0}))},r=()=>{t.show=!1,s(T({},t))},c=j=>{t.btnTxt="Delete",t.body="Are you sure to delete this conditional logic?",t.btnClass="",t.action=()=>{u(j),r()},t.show=!0,s(T({},t))},f=({oldIndex:j,newIndex:$})=>{j!==$&&(n(B=>ut(B,j,$)),l(B=>z(T({},B),{unsaved:!0})))};return e.jsxs("div",{className:"btcd-workflow",style:{width:"93%"},children:[e.jsx(Je,{show:t.show,close:r,btnTxt:t.btnTxt,btnClass:t.btnClass,body:t.body,action:t.action}),e.jsx("h2",{children:m("Conditional Logics")}),(!x&&!p.length||x)&&e.jsxs(Z,{className:"blue",onClick:h,children:[e.jsx(q,{size:"10",className:"icn-rotate-45 mr-1"}),m("Add Conditional Logic")]}),p.length===0&&e.jsxs("div",{className:b(H.btcdEmpty,H.txCenter),children:[e.jsx(ht,{size:"50"}),m("Empty")]}),e.jsx(dt,{onSortEnd:f,useDragHandle:!0,children:p.map((j,$)=>e.jsxs(pt,{index:$,children:[e.jsxs("div",{className:"workflow-grp d-flx mt-2",children:[e.jsxs(bt,{customTitle:e.jsx(mt,{className:"workflow-drg-handle mr-1 flx"}),title:`${j.title}`,header:e.jsxs("small",{className:"f-right txt-dp mr-4",children:[e.jsxs("span",{className:"mr-2",children:[e.jsx("i",{className:"btcd-chat-dot mr-1"}),a(j.action_run)]}),j.action_type!==void 0&&e.jsxs("span",{className:"mr-2",children:[e.jsx("i",{className:"btcd-chat-dot mr-1"}),a(j.action_type)]}),e.jsxs("span",{children:[e.jsx("i",{className:"btcd-chat-dot mr-1"}),a(j.action_behaviour)]})]}),titleEditable:!0,onTitleChange:B=>y(B,$),notScroll:!0,cls:x?"w-9":"w-10",children:[e.jsx(Dt,{lgcGrpInd:$,lgcGrp:j}),e.jsx(Wt,{lgcGrpInd:$,lgcGrp:j})]}),x&&e.jsx("div",{className:"mt-2",children:e.jsx(Z,{onClick:()=>c($),icn:!0,className:"ml-2 sh-sm btcd-menu-btn tooltip",style:{"--tooltip-txt":'"Delete Action"'},children:e.jsx(Ce,{size:"16"})})})]}),!x&&e.jsxs("div",{className:"txt-center bg-pro p-5 mt-2",children:[m("For")," ",e.jsx("span",{className:"txt-pro",children:m("UNLIMITED")})," ",m("Conditional Logics"),", ",e.jsx("a",{href:"https://www.bitapps.pro/bit-form",target:"_blank",rel:"noreferrer",children:e.jsx("b",{className:"txt-pro",children:m("Buy Premium")})})]})]},`workflows-grp-${$+13}`))}),p.length>1&&e.jsxs("div",{className:b(H.w9,{fs:13},H.mt4),children:[e.jsx("strong",{children:"Note: "}),"Conditional Logics are triggered based on the order of the logic groups. The higher the logic group, the higher the priority. If you want to change the priority, you can sort by drag and drop the logic group."]})]})}export{ts as default};
