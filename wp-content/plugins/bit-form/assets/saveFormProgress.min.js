var saveFormProgress=function(){"use strict";return async function(e){const a=e?[e]:Object.keys(window?.bf_globals||{}),t={};return await Promise.all(a.map((async e=>{const a=bfSelect(`#form-${e}`),n=window?.bf_globals?.[e];if(a){const r=new URL(n?.ajaxURL),d="bitforms_save_partial_form_progress";r.searchParams.append("action",d),n?.entryId&&(r.searchParams.append("_ajax_nonce",n.nonce||""),r.searchParams.append("entryID",n.entryId),r.searchParams.append("formID",n.formId));let s=new FormData(a);"undefined"!=typeof advancedFileHandle&&(s=advancedFileHandle(n,s)),n.GCLID&&s.set("GCLID",n.GCLID);const i=[];Object.entries(n?.fields||{}).forEach((e=>{e[1]?.valid?.hide&&i.push(e[0])})),i.length&&s.append("hidden_fields",i);const o=await fetch(r,{method:"POST",body:s,keepalive:!0}),c=await o.json();if(t[e]=c,c?.success){if("user_id"in c?.data&&!c?.data?.user_id){const e=c.data.fields;e.entryId=c.data.entry_id,localStorage.setItem(`bitform-partial-form-${n.formId}`,JSON.stringify(e))}c.data.entry_id&&(setHiddenFld({name:"entryID",value:c.data.entry_id,type:"number"},a),bf_globals[e].entryId=c.data.entry_id)}}}))),t}}();
