var UE=Object.defineProperty,VE=Object.defineProperties;var zE=Object.getOwnPropertyDescriptors;var ql=Object.getOwnPropertySymbols;var Fp=Object.prototype.hasOwnProperty,Gp=Object.prototype.propertyIsEnumerable;var Bp=Math.pow,Dp=(t,e,s)=>e in t?UE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,_=(t,e)=>{for(var s in e||(e={}))Fp.call(e,s)&&Dp(t,s,e[s]);if(ql)for(var s of ql(e))Gp.call(e,s)&&Dp(t,s,e[s]);return t},A=(t,e)=>VE(t,zE(e));var kp=(t,e)=>{var s={};for(var i in t)Fp.call(t,i)&&e.indexOf(i)<0&&(s[i]=t[i]);if(t!=null&&ql)for(var i of ql(t))e.indexOf(i)<0&&Gp.call(t,i)&&(s[i]=t[i]);return s};var kh=(t,e,s)=>{if(!e.has(t))throw TypeError("Cannot "+s)};var r=(t,e,s)=>(kh(t,e,"read from private field"),s?s.call(t):e.get(t)),b=(t,e,s)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,s)},x=(t,e,s,i)=>(kh(t,e,"write to private field"),i?i.call(t,s):e.set(t,s),s);var l=(t,e,s)=>(kh(t,e,"access private method"),s);var Yl=(t,e,s)=>new Promise((i,n)=>{var a=c=>{try{d(s.next(c))}catch(h){n(h)}},o=c=>{try{d(s.throw(c))}catch(h){n(h)}},d=c=>c.done?i(c.value):Promise.resolve(c.value).then(a,o);d((s=s.apply(t,e)).next())});import{j as f,o as ap,u as et,d4 as WE,at as Mn,r as j,d5 as R,d6 as $,bi as ls,e as Wi,a3 as fe,az as At,d7 as HE,h as An,aw as Rt,$ as zl,d8 as mt,F as ja,c1 as Ua,P as Hi,ak as yh,l as ve,y as Fr,s as op,c3 as lp,_ as tn,c7 as cp,d1 as Lh,d9 as dp,f as qE,aH as Wf,c5 as Hf,ao as qf,bh as Yf,cm as Xf,a8 as hp,bO as Zf,p as Qf,t as Jf,cg as Kf,da as lc,db as tm,bZ as Mc,U as Io,I as em,bg as sm,L as YE,c4 as im,av as nm,dc as rm,E as XE,O as ZE,aG as QE}from"./main-398.js";import{$ as am,B as JE}from"./bf-760-79.js";import{C as KE}from"./bf-782-101.js";import{R as om,s as $c,a as Xh,F as Nc,b as lm,c as cm,r as dm,d as tb}from"./bf-413-98.js";import{R as _t}from"./bf-61-291.js";/* empty css          */import"./bf-354-65.js";import"./bf-491-73.js";import"./bf-827-74.js";import"./bf-314-99.js";import"./bf-233-100.js";import"./bf-235-102.js";import"./bf-864-103.js";import"./bf-466-135.js";import"./bf-228-136.js";function eb({size:t,stroke:e=3}){return f.jsx("svg",{height:t,width:t,viewBox:"0 0 20 20",strokeWidth:e,children:f.jsx("g",{fill:"none",children:f.jsx("path",{d:"M6.97 4.78a.75.75 0 0 0 1.06 0l1.22-1.22v3.19a.75.75 0 0 0 1.5 0V3.56l1.22 1.22a.75.75 0 1 0 1.06-1.06l-2.5-2.5a.75.75 0 0 0-1.06 0l-2.5 2.5a.75.75 0 0 0 0 1.06zM4.78 8.03a.75.75 0 0 0-1.06-1.06l-2.5 2.5a.75.75 0 0 0 0 1.06l2.5 2.5a.75.75 0 0 0 1.06-1.06l-1.22-1.22h3.19a.75.75 0 0 0 0-1.5H3.56l1.22-1.22zm10.44-1.06a.75.75 0 0 1 1.06 0l2.5 2.5a.75.75 0 0 1 0 1.06l-2.5 2.5a.75.75 0 1 1-1.06-1.06l1.22-1.22h-3.19a.75.75 0 0 1 0-1.5h3.19l-1.22-1.22a.75.75 0 0 1 0-1.06zm-5.97 9.47l-1.22-1.22a.75.75 0 0 0-1.06 1.06l2.5 2.5a.75.75 0 0 0 1.06 0l2.5-2.5a.75.75 0 1 0-1.06-1.06l-1.22 1.22v-3.19a.75.75 0 0 0-1.5 0v3.19z",fill:"currentColor"})})})}var fs,Ps,zr,ss,Ve,vi,To,vo,xo,So,Xn,en,ze,Wc,hm,Hc,um,qc,pm,Yc,fm,xi,Gn,Xc,mm,sn,Tr,Ro,Zh,nn,vr,Wr,cc;class sb{constructor(e,s){b(this,Wc);b(this,Hc);b(this,qc);b(this,Yc);b(this,xi);b(this,Xc);b(this,sn);b(this,Ro);b(this,nn);b(this,Wr);b(this,fs,null);b(this,Ps,null);b(this,zr,null);b(this,ss,null);b(this,Ve,{});b(this,vi,null);b(this,To,null);b(this,vo,null);b(this,xo,null);b(this,So,null);b(this,Xn,null);b(this,en,[]);b(this,ze,{document:{},formID:null,configSetting:{},ajaxURL:null,nonce:null,uploadFileToServer:null});Object.assign(r(this,ze),s),x(this,vi,s.fieldKey),x(this,ss,s.window?s.window:window),x(this,zr,s.document?s.document:document),typeof e=="string"?x(this,fs,r(this,zr).querySelector(e)):x(this,fs,e),x(this,To,r(this,ze).formID),x(this,Ve,r(this,ze).configSetting),x(this,vo,r(this,ze).ajaxURL),x(this,xo,r(this,ze).nonce),x(this,So,r(this,ze).uploadFileToServer),this.uploaded_files=[],this.on_select_upload=!1,this.init()}init(){this.files=[];const e=[];r(this,Ve).allowFileSizeValidation&&e.push(r(this,ss).bit_filepond_plugin_file_validate_size),r(this,Ve).allowFileTypeValidation&&e.push(r(this,ss).bit_filepond_plugin_file_validate_type),r(this,Ve).allowImageCrop&&e.push(r(this,ss).bit_filepond_plugin_image_crop),r(this,Ve).allowImagePreview&&e.push(r(this,ss).bit_filepond_plugin_image_preview),r(this,Ve).allowImageResize&&e.push(r(this,ss).bit_filepond_plugin_image_resize),r(this,Ve).allowImageTransform&&e.push(r(this,ss).bit_filepond_plugin_image_transform),r(this,Ve).allowImageValidateSize&&e.push(r(this,ss).bit_filepond_plugin_image_validate_size),r(this,Ve).allowPreview&&e.push(r(this,ss).bit_filepond_plugin_media_preview);const{create:s,registerPlugin:i}=r(this,ss).bit_filepond;if(i(...e),x(this,Ps,s(r(this,Ve))),r(this,fs).appendChild(r(this,Ps).element),setTimeout(()=>{r(this,fs)&&r(this,fs).parentNode.parentNode.querySelector(`.${r(this,vi)}-lbl`).setAttribute("for",l(this,Wr,cc).call(this,'input[name="filepond"]').id)},1e3),r(this,ze).onFileUpdate&&r(this,Ps).on("updatefiles",r(this,ze).onFileUpdate),r(this,So)){const n=new URL(r(this,vo));this.on_select_upload=r(this,Ve).instantUpload,n.searchParams.append("_ajax_nonce",r(this,xo));let a=null;r(this,Ps).setOptions({server:{process:(o,d,c,h,u,p,g)=>{const m=new FormData;n.searchParams.has("action")&&n.searchParams.delete("action"),n.searchParams.append("action","bitforms_file_upload"),m.append(r(this,vi),d,d.name),m.append("fieldKey",r(this,vi)),m.append("formID",r(this,To));const E=new XMLHttpRequest;return E.open("POST",n.href),E.upload.onprogress=I=>{p(I.lengthComputable,I.loaded,I.total)},E.onload=()=>{var I,T;a=JSON.parse(E.responseText),E.status>=200&&E.status<300?(this.uploaded_files.push((I=a==null?void 0:a.data)==null?void 0:I.file_name),h((T=a==null?void 0:a.data)==null?void 0:T.file_name)):u()},E.send(m),{abort:()=>{E.abort(),g()}}},revert:(o,d,c)=>{if(this.uploaded_files.find(u=>u===o)){const u=this.uploaded_files.indexOf(o);this.uploaded_files.splice(u,1),n.searchParams.has("action")&&n.searchParams.delete("action"),n.searchParams.append("action","bitforms_file_delete"),n.searchParams.append("file_name",o);const p=new XMLHttpRequest;return p.open("DELETE",n.href),p.onload=()=>{p.status>=200&&p.status<300?d():c()},p.send(),{abort:()=>{p.abort()}}}}},labelFileProcessingError:()=>a==null?void 0:a.data}),r(this,Ps).on("updatefiles",()=>{this.files=[],this.files=r(this,Ps).getFiles()})}r(this,ze).oldFiles&&l(this,Wc,hm).call(this,r(this,ze).oldFiles)}reset(){r(this,Ps).destroy(r(this,Ps).element),r(this,fs).innerHTML="",this.init()}}fs=new WeakMap,Ps=new WeakMap,zr=new WeakMap,ss=new WeakMap,Ve=new WeakMap,vi=new WeakMap,To=new WeakMap,vo=new WeakMap,xo=new WeakMap,So=new WeakMap,Xn=new WeakMap,en=new WeakMap,ze=new WeakMap,Wc=new WeakSet,hm=function(e){const s=JSON.parse(e);x(this,en,JSON.parse(e)),x(this,Xn,l(this,xi,Gn).call(this,"div")),l(this,sn,Tr).call(this,r(this,Xn),"old-file-list"),s.forEach(n=>{l(this,Hc,um).call(this,n)});const i=l(this,xi,Gn).call(this,"input");i.type="hidden",i.name=`${r(this,vi)}_old`,i.value=r(this,en).toString(),r(this,fs).appendChild(r(this,Xn)),r(this,fs).appendChild(i)},Hc=new WeakSet,um=function(e){const s=l(this,xi,Gn).call(this,"div"),i=e.replace(/( |\.|\(|\))/g,"");s.id=`file-wrp-${i}`,l(this,sn,Tr).call(this,s,"file-wrpr");const n=l(this,xi,Gn).call(this,"div");l(this,sn,Tr).call(this,n,"file-details");const a=l(this,xi,Gn).call(this,"a");l(this,sn,Tr).call(this,a,"file-title"),l(this,nn,vr).call(this,a,"target","_blank"),l(this,nn,vr).call(this,a,"href",`${r(this,ze).baseDLURL}&fileID=${e}`),l(this,Ro,Zh).call(this,a,e),n.append(a),s.append(n);const o=l(this,xi,Gn).call(this,"button");l(this,sn,Tr).call(this,o,"cross-btn"),l(this,nn,vr).call(this,o,"data-file-id",i),l(this,nn,vr).call(this,o,"data-file-name",e),l(this,nn,vr).call(this,o,"type","button"),l(this,Ro,Zh).call(this,o,"Ã—"),l(this,Xc,mm).call(this,o,"click",d=>l(this,qc,pm).call(this,d)),s.append(o),r(this,Xn).appendChild(s)},qc=new WeakSet,pm=function(e){const s=e.target.getAttribute("data-file-id"),i=e.target.getAttribute("data-file-name");l(this,Yc,fm).call(this,`#file-wrp-${s}`),x(this,en,r(this,en).filter(n=>n!==i)),l(this,Wr,cc).call(this,`input[name="${r(this,vi)}_old"]`).value=r(this,en).toString()},Yc=new WeakSet,fm=function(e){var s;(s=l(this,Wr,cc).call(this,e))==null||s.remove()},xi=new WeakSet,Gn=function(e){return r(this,zr).createElement(e)},Xc=new WeakSet,mm=function(e,s,i){e.addEventListener(s,i)},sn=new WeakSet,Tr=function(e,s){e.classList.add(s)},Ro=new WeakSet,Zh=function(e,s){e.textContent=s},nn=new WeakSet,vr=function(e,s,i){var n;(n=e==null?void 0:e.setAttribute)==null||n.call(e,s,i)},Wr=new WeakSet,cc=function(e){return r(this,fs).querySelector(e)||console.error("selector not found",e)};/*!
* FilePond 4.30.4
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit https://pqina.nl/filepond/ for details.
*/const ib=t=>t instanceof HTMLElement,nb=(t,e=[],s=[])=>{const i=_({},t),n=[],a=[],o=()=>_({},i),d=()=>{const E=[...n];return n.length=0,E},c=()=>{const E=[...a];a.length=0,E.forEach(({type:I,data:T})=>{h(I,T)})},h=(E,I,T)=>{if(T&&!document.hidden){a.push({type:E,data:I});return}m[E]&&m[E](I),n.push({type:E,data:I})},u=(E,...I)=>g[E]?g[E](...I):null,p={getState:o,processActionQueue:d,processDispatchQueue:c,dispatch:h,query:u};let g={};e.forEach(E=>{g=_(_({},E(i)),g)});let m={};return s.forEach(E=>{m=_(_({},E(h,u,i)),m)}),p},rb=(t,e,s)=>{if(typeof s=="function"){t[e]=s;return}Object.defineProperty(t,e,_({},s))},Ct=(t,e)=>{for(const s in t)t.hasOwnProperty(s)&&e(s,t[s])},Ln=t=>{const e={};return Ct(t,s=>{rb(e,s,t[s])}),e},Gt=(t,e,s=null)=>{if(s===null)return t.getAttribute(e)||t.hasAttribute(e);t.setAttribute(e,s)},ab="http://www.w3.org/2000/svg",ob=["svg","path"],jp=t=>ob.includes(t),Pc=(t,e,s={})=>{typeof e=="object"&&(s=e,e=null);const i=jp(t)?document.createElementNS(ab,t):document.createElement(t);return e&&(jp(t)?Gt(i,"class",e):i.className=e),Ct(s,(n,a)=>{Gt(i,n,a)}),i},lb=t=>(e,s)=>{typeof s!="undefined"&&t.children[s]?t.insertBefore(e,t.children[s]):t.appendChild(e)},cb=(t,e)=>(s,i)=>(typeof i!="undefined"?e.splice(i,0,s):e.push(s),s),db=(t,e)=>s=>(e.splice(e.indexOf(s),1),s.element.parentNode&&t.removeChild(s.element),s),hb=(()=>typeof window!="undefined"&&typeof window.document!="undefined")(),gm=()=>hb,ub=gm()?Pc("svg"):{},pb="children"in ub?t=>t.children.length:t=>t.childNodes.length,Em=(t,e,s,i)=>{const n=s[0]||t.left,a=s[1]||t.top,o=n+t.width,d=a+t.height*(i[1]||1),c={element:_({},t),inner:{left:t.left,top:t.top,right:t.right,bottom:t.bottom},outer:{left:n,top:a,right:o,bottom:d}};return e.filter(h=>!h.isRectIgnored()).map(h=>h.rect).forEach(h=>{Up(c.inner,_({},h.inner)),Up(c.outer,_({},h.outer))}),Vp(c.inner),c.outer.bottom+=c.element.marginBottom,c.outer.right+=c.element.marginRight,Vp(c.outer),c},Up=(t,e)=>{e.top+=t.top,e.right+=t.left,e.bottom+=t.top,e.left+=t.left,e.bottom>t.bottom&&(t.bottom=e.bottom),e.right>t.right&&(t.right=e.right)},Vp=t=>{t.width=t.right-t.left,t.height=t.bottom-t.top},Hn=t=>typeof t=="number",fb=(t,e,s,i=.001)=>Math.abs(t-e)<i&&Math.abs(s)<i,mb=({stiffness:t=.5,damping:e=.75,mass:s=10}={})=>{let i=null,n=null,a=0,o=!1;const h=Ln({interpolate:(u,p)=>{if(o)return;if(!(Hn(i)&&Hn(n))){o=!0,a=0;return}const g=-(n-i)*t;a+=g/s,n+=a,a*=e,fb(n,i,a)||p?(n=i,a=0,o=!0,h.onupdate(n),h.oncomplete(n)):h.onupdate(n)},target:{set:u=>{if(Hn(u)&&!Hn(n)&&(n=u),i===null&&(i=u,n=u),i=u,n===i||typeof i=="undefined"){o=!0,a=0,h.onupdate(n),h.oncomplete(n);return}o=!1},get:()=>i},resting:{get:()=>o},onupdate:u=>{},oncomplete:u=>{}});return h},gb=t=>t<.5?2*t*t:-1+(4-2*t)*t,Eb=({duration:t=500,easing:e=gb,delay:s=0}={})=>{let i=null,n,a,o=!0,d=!1,c=null;const u=Ln({interpolate:(p,g)=>{o||c===null||(i===null&&(i=p),!(p-i<s)&&(n=p-i-s,n>=t||g?(n=1,a=d?0:1,u.onupdate(a*c),u.oncomplete(a*c),o=!0):(a=n/t,u.onupdate((n>=0?e(d?1-a:a):0)*c))))},target:{get:()=>d?0:c,set:p=>{if(c===null){c=p,u.onupdate(p),u.oncomplete(p);return}p<c?(c=1,d=!0):(d=!1,c=p),o=!1,i=null}},resting:{get:()=>o},onupdate:p=>{},oncomplete:p=>{}});return u},zp={spring:mb,tween:Eb},bb=(t,e,s)=>{const i=t[e]&&typeof t[e][s]=="object"?t[e][s]:t[e]||t,n=typeof i=="string"?i:i.type,a=typeof i=="object"?_({},i):{};return zp[n]?zp[n](a):null},up=(t,e,s,i=!1)=>{e=Array.isArray(e)?e:[e],e.forEach(n=>{t.forEach(a=>{let o=a,d=()=>s[a],c=h=>s[a]=h;typeof a=="object"&&(o=a.key,d=a.getter||d,c=a.setter||c),!(n[o]&&!i)&&(n[o]={get:d,set:c})})})},Ib=({mixinConfig:t,viewProps:e,viewInternalAPI:s,viewExternalAPI:i})=>{const n=_({},e),a=[];return Ct(t,(o,d)=>{const c=bb(d);if(!c)return;c.onupdate=u=>{e[o]=u},c.target=n[o],up([{key:o,setter:u=>{c.target!==u&&(c.target=u)},getter:()=>e[o]}],[s,i],e,!0),a.push(c)}),{write:o=>{let d=document.hidden,c=!0;return a.forEach(h=>{h.resting||(c=!1),h.interpolate(o,d)}),c},destroy:()=>{}}},_b=t=>(e,s)=>{t.addEventListener(e,s)},wb=t=>(e,s)=>{t.removeEventListener(e,s)},Tb=({mixinConfig:t,viewProps:e,viewInternalAPI:s,viewExternalAPI:i,viewState:n,view:a})=>{const o=[],d=_b(a.element),c=wb(a.element);return i.on=(h,u)=>{o.push({type:h,fn:u}),d(h,u)},i.off=(h,u)=>{o.splice(o.findIndex(p=>p.type===h&&p.fn===u),1),c(h,u)},{write:()=>!0,destroy:()=>{o.forEach(h=>{c(h.type,h.fn)})}}},vb=({mixinConfig:t,viewProps:e,viewExternalAPI:s})=>{up(t,s,e)},Re=t=>t!=null,xb={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},Sb=({mixinConfig:t,viewProps:e,viewInternalAPI:s,viewExternalAPI:i,view:n})=>{const a=_({},e),o={};up(t,[s,i],e);const d=()=>[e.translateX||0,e.translateY||0],c=()=>[e.scaleX||0,e.scaleY||0],h=()=>n.rect?Em(n.rect,n.childViews,d(),c()):null;return s.rect={get:h},i.rect={get:h},t.forEach(u=>{e[u]=typeof a[u]=="undefined"?xb[u]:a[u]}),{write:()=>{if(Rb(o,e))return Cb(n.element,e),Object.assign(o,_({},e)),!0},destroy:()=>{}}},Rb=(t,e)=>{if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const s in e)if(e[s]!==t[s])return!0;return!1},Cb=(t,{opacity:e,perspective:s,translateX:i,translateY:n,scaleX:a,scaleY:o,rotateX:d,rotateY:c,rotateZ:h,originX:u,originY:p,width:g,height:m})=>{let E="",I="";(Re(u)||Re(p))&&(I+=`transform-origin: ${u||0}px ${p||0}px;`),Re(s)&&(E+=`perspective(${s}px) `),(Re(i)||Re(n))&&(E+=`translate3d(${i||0}px, ${n||0}px, 0) `),(Re(a)||Re(o))&&(E+=`scale3d(${Re(a)?a:1}, ${Re(o)?o:1}, 1) `),Re(h)&&(E+=`rotateZ(${h}rad) `),Re(d)&&(E+=`rotateX(${d}rad) `),Re(c)&&(E+=`rotateY(${c}rad) `),E.length&&(I+=`transform:${E};`),Re(e)&&(I+=`opacity:${e};`,e===0&&(I+="visibility:hidden;"),e<1&&(I+="pointer-events:none;")),Re(m)&&(I+=`height:${m}px;`),Re(g)&&(I+=`width:${g}px;`);const T=t.elementCurrentStyle||"";(I.length!==T.length||I!==T)&&(t.style.cssText=I,t.elementCurrentStyle=I)},Ob={styles:Sb,listeners:Tb,animations:Ib,apis:vb},Wp=(t={},e={},s={})=>(e.layoutCalculated||(t.paddingTop=parseInt(s.paddingTop,10)||0,t.marginTop=parseInt(s.marginTop,10)||0,t.marginRight=parseInt(s.marginRight,10)||0,t.marginBottom=parseInt(s.marginBottom,10)||0,t.marginLeft=parseInt(s.marginLeft,10)||0,e.layoutCalculated=!0),t.left=e.offsetLeft||0,t.top=e.offsetTop||0,t.width=e.offsetWidth||0,t.height=e.offsetHeight||0,t.right=t.left+t.width,t.bottom=t.top+t.height,t.scrollTop=e.scrollTop,t.hidden=e.offsetParent===null,t),Bt=({tag:t="div",name:e=null,attributes:s={},read:i=()=>{},write:n=()=>{},create:a=()=>{},destroy:o=()=>{},filterFrameActionsForChild:d=(m,E)=>E,didCreateView:c=()=>{},didWriteView:h=()=>{},ignoreRect:u=!1,ignoreRectUpdate:p=!1,mixins:g=[]}={})=>(m,E={})=>{const I=Pc(t,`filepond--${e}`,s),T=window.getComputedStyle(I,null),C=Wp();let w=null,v=!1;const S=[],O=[],L={},P={},y=[n],D=[i],V=[o],k=()=>I,B=()=>S.concat(),X=()=>L,N=Q=>(st,ct)=>st(Q,ct),W=()=>w||(w=Em(C,S,[0,0],[1,1]),w),F=()=>T,M=()=>{w=null,S.forEach(ct=>ct._read()),!(p&&C.width&&C.height)&&Wp(C,I,T);const st={root:lt,props:E,rect:C};D.forEach(ct=>ct(st))},G=(Q,st,ct)=>{let pt=st.length===0;return y.forEach(ht=>{ht({props:E,root:lt,actions:st,timestamp:Q,shouldOptimize:ct})===!1&&(pt=!1)}),O.forEach(ht=>{ht.write(Q)===!1&&(pt=!1)}),S.filter(ht=>!!ht.element.parentNode).forEach(ht=>{ht._write(Q,d(ht,st),ct)||(pt=!1)}),S.forEach((ht,Ys)=>{ht.element.parentNode||(lt.appendChild(ht.element,Ys),ht._read(),ht._write(Q,d(ht,st),ct),pt=!1)}),v=pt,h({props:E,root:lt,actions:st,timestamp:Q}),pt},U=()=>{O.forEach(Q=>Q.destroy()),V.forEach(Q=>{Q({root:lt,props:E})}),S.forEach(Q=>Q._destroy())},H={element:{get:k},style:{get:F},childViews:{get:B}},Y=A(_({},H),{rect:{get:W},ref:{get:X},is:Q=>e===Q,appendChild:lb(I),createChildView:N(m),linkView:Q=>(S.push(Q),Q),unlinkView:Q=>{S.splice(S.indexOf(Q),1)},appendChildView:cb(I,S),removeChildView:db(I,S),registerWriter:Q=>y.push(Q),registerReader:Q=>D.push(Q),registerDestroyer:Q=>V.push(Q),invalidateLayout:()=>I.layoutCalculated=!1,dispatch:m.dispatch,query:m.query}),at={element:{get:k},childViews:{get:B},rect:{get:W},resting:{get:()=>v},isRectIgnored:()=>u,_read:M,_write:G,_destroy:U},ot=A(_({},H),{rect:{get:()=>C}});Object.keys(g).sort((Q,st)=>Q==="styles"?1:st==="styles"?-1:0).forEach(Q=>{const st=Ob[Q]({mixinConfig:g[Q],viewProps:E,viewState:P,viewInternalAPI:Y,viewExternalAPI:at,view:Ln(ot)});st&&O.push(st)});const lt=Ln(Y);a({root:lt,props:E});const Et=pb(I);return S.forEach((Q,st)=>{lt.appendChild(Q.element,Et+st)}),c(lt),Ln(at)},yb=(t,e,s=60)=>{const i="__framePainter";if(window[i]){window[i].readers.push(t),window[i].writers.push(e);return}window[i]={readers:[t],writers:[e]};const n=window[i],a=1e3/s;let o=null,d=null,c=null,h=null;const u=()=>{document.hidden?(c=()=>window.setTimeout(()=>p(performance.now()),a),h=()=>window.clearTimeout(d)):(c=()=>window.requestAnimationFrame(p),h=()=>window.cancelAnimationFrame(d))};document.addEventListener("visibilitychange",()=>{h&&h(),u(),p(performance.now())});const p=g=>{d=c(p),o||(o=g);const m=g-o;m<=a||(o=g-m%a,n.readers.forEach(E=>E()),n.writers.forEach(E=>E(g)))};return u(),p(performance.now()),{pause:()=>{h(d)}}},Be=(t,e)=>({root:s,props:i,actions:n=[],timestamp:a,shouldOptimize:o})=>{n.filter(d=>t[d.type]).forEach(d=>t[d.type]({root:s,props:i,action:d.data,timestamp:a,shouldOptimize:o})),e&&e({root:s,props:i,actions:n,timestamp:a,shouldOptimize:o})},Hp=(t,e)=>e.parentNode.insertBefore(t,e),qp=(t,e)=>e.parentNode.insertBefore(t,e.nextSibling),Ah=t=>Array.isArray(t),qi=t=>t==null,Lb=t=>t.trim(),Mh=t=>""+t,Ab=(t,e=",")=>qi(t)?[]:Ah(t)?t:Mh(t).split(e).map(Lb).filter(s=>s.length),bm=t=>typeof t=="boolean",Im=t=>bm(t)?t:t==="true",Ge=t=>typeof t=="string",_m=t=>Hn(t)?t:Ge(t)?Mh(t).replace(/[a-z]+/gi,""):0,dc=t=>parseInt(_m(t),10),Yp=t=>parseFloat(_m(t)),Va=t=>Hn(t)&&isFinite(t)&&Math.floor(t)===t,Xp=(t,e=1e3)=>{if(Va(t))return t;let s=Mh(t).trim();return/MB$/i.test(s)?(s=s.replace(/MB$i/,"").trim(),dc(s)*e*e):/KB/i.test(s)?(s=s.replace(/KB$i/,"").trim(),dc(s)*e):dc(s)},qn=t=>typeof t=="function",Mb=t=>{let e=self,s=t.split("."),i=null;for(;i=s.shift();)if(e=e[i],!e)return null;return e},Zp={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},$b=t=>{const e={};return e.url=Ge(t)?t:t.url||"",e.timeout=t.timeout?parseInt(t.timeout,10):0,e.headers=t.headers?t.headers:{},Ct(Zp,s=>{e[s]=Nb(s,t[s],Zp[s],e.timeout,e.headers)}),e.process=t.process||Ge(t)||t.url?e.process:null,e.remove=t.remove||null,delete e.headers,e},Nb=(t,e,s,i,n)=>{if(e===null)return null;if(typeof e=="function")return e;const a={url:s==="GET"||s==="PATCH"?`?${t}=`:"",method:s,headers:n,withCredentials:!1,timeout:i,onload:null,ondata:null,onerror:null};if(Ge(e))return a.url=e,a;if(Object.assign(a,e),Ge(a.headers)){const o=a.headers.split(/:(.+)/);a.headers={header:o[0],value:o[1]}}return a.withCredentials=Im(a.withCredentials),a},Pb=t=>$b(t),Db=t=>t===null,ie=t=>typeof t=="object"&&t!==null,Fb=t=>ie(t)&&Ge(t.url)&&ie(t.process)&&ie(t.revert)&&ie(t.restore)&&ie(t.fetch),Qh=t=>Ah(t)?"array":Db(t)?"null":Va(t)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(t)?"bytes":Fb(t)?"api":typeof t,Gb=t=>t.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'),Bb={array:Ab,boolean:Im,int:t=>Qh(t)==="bytes"?Xp(t):dc(t),number:Yp,float:Yp,bytes:Xp,string:t=>qn(t)?t:Mh(t),function:t=>Mb(t),serverapi:Pb,object:t=>{try{return JSON.parse(Gb(t))}catch(e){return null}}},kb=(t,e)=>Bb[e](t),wm=(t,e,s)=>{if(t===e)return t;let i=Qh(t);if(i!==s){const n=kb(t,s);if(i=Qh(n),n===null)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${s}"`;t=n}return t},jb=(t,e)=>{let s=t;return{enumerable:!0,get:()=>s,set:i=>{s=wm(i,t,e)}}},Ub=t=>{const e={};return Ct(t,s=>{const i=t[s];e[s]=jb(i[0],i[1])}),Ln(e)},Vb=t=>({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:Ub(t)}),$h=(t,e="-")=>t.split(/(?=[A-Z])/).map(s=>s.toLowerCase()).join(e),zb=(t,e)=>{const s={};return Ct(e,i=>{s[i]={get:()=>t.getState().options[i],set:n=>{t.dispatch(`SET_${$h(i,"_").toUpperCase()}`,{value:n})}}}),s},Wb=t=>(e,s,i)=>{const n={};return Ct(t,a=>{const o=$h(a,"_").toUpperCase();n[`SET_${o}`]=d=>{try{i.options[a]=d.value}catch(c){}e(`DID_SET_${o}`,{value:i.options[a]})}}),n},Hb=t=>e=>{const s={};return Ct(t,i=>{s[`GET_${$h(i,"_").toUpperCase()}`]=n=>e.options[i]}),s},Ls={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},pp=()=>Math.random().toString(36).substring(2,11),fp=(t,e)=>t.splice(e,1),qb=(t,e)=>{e?t():document.hidden?Promise.resolve(1).then(t):setTimeout(t,0)},Nh=()=>{const t=[],e=(i,n)=>{fp(t,t.findIndex(a=>a.event===i&&(a.cb===n||!n)))},s=(i,n,a)=>{t.filter(o=>o.event===i).map(o=>o.cb).forEach(o=>qb(()=>o(...n),a))};return{fireSync:(i,...n)=>{s(i,n,!0)},fire:(i,...n)=>{s(i,n,!1)},on:(i,n)=>{t.push({event:i,cb:n})},onOnce:(i,n)=>{t.push({event:i,cb:(...a)=>{e(i,n),n(...a)}})},off:e}},Tm=(t,e,s)=>{Object.getOwnPropertyNames(t).filter(i=>!s.includes(i)).forEach(i=>Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i)))},Yb=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],Ye=t=>{const e={};return Tm(t,e,Yb),e},Xb=t=>{t.forEach((e,s)=>{e.released&&fp(t,s)})},it={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},Xt={INPUT:1,LIMBO:2,LOCAL:3},vm=t=>/[^0-9]+/.exec(t),xm=()=>vm(1.1.toLocaleString())[0],Zb=()=>{const t=xm(),e=1e3.toLocaleString(),s=1e3.toString();return e!==s?vm(e)[0]:t==="."?",":"."},z={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},mp=[],Ws=(t,e,s)=>new Promise((i,n)=>{const a=mp.filter(d=>d.key===t).map(d=>d.cb);if(a.length===0){i(e);return}const o=a.shift();a.reduce((d,c)=>d.then(h=>c(h,s)),o(e,s)).then(d=>i(d)).catch(d=>n(d))}),Ir=(t,e,s)=>mp.filter(i=>i.key===t).map(i=>i.cb(e,s)),Qb=(t,e)=>mp.push({key:t,cb:e}),Jb=t=>Object.assign(Gr,t),Dc=()=>_({},Gr),Kb=t=>{Ct(t,(e,s)=>{Gr[e]&&(Gr[e][0]=wm(s,Gr[e][0],Gr[e][1]))})},Gr={id:[null,z.STRING],name:["filepond",z.STRING],disabled:[!1,z.BOOLEAN],className:[null,z.STRING],required:[!1,z.BOOLEAN],captureMethod:[null,z.STRING],allowSyncAcceptAttribute:[!0,z.BOOLEAN],allowDrop:[!0,z.BOOLEAN],allowBrowse:[!0,z.BOOLEAN],allowPaste:[!0,z.BOOLEAN],allowMultiple:[!1,z.BOOLEAN],allowReplace:[!0,z.BOOLEAN],allowRevert:[!0,z.BOOLEAN],allowRemove:[!0,z.BOOLEAN],allowProcess:[!0,z.BOOLEAN],allowReorder:[!1,z.BOOLEAN],allowDirectoriesOnly:[!1,z.BOOLEAN],storeAsFile:[!1,z.BOOLEAN],forceRevert:[!1,z.BOOLEAN],maxFiles:[null,z.INT],checkValidity:[!1,z.BOOLEAN],itemInsertLocationFreedom:[!0,z.BOOLEAN],itemInsertLocation:["before",z.STRING],itemInsertInterval:[75,z.INT],dropOnPage:[!1,z.BOOLEAN],dropOnElement:[!0,z.BOOLEAN],dropValidation:[!1,z.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],z.ARRAY],instantUpload:[!0,z.BOOLEAN],maxParallelUploads:[2,z.INT],allowMinimumUploadDuration:[!0,z.BOOLEAN],chunkUploads:[!1,z.BOOLEAN],chunkForce:[!1,z.BOOLEAN],chunkSize:[5e6,z.INT],chunkRetryDelays:[[500,1e3,3e3],z.ARRAY],server:[null,z.SERVER_API],fileSizeBase:[1e3,z.INT],labelFileSizeBytes:["bytes",z.STRING],labelFileSizeKilobytes:["KB",z.STRING],labelFileSizeMegabytes:["MB",z.STRING],labelFileSizeGigabytes:["GB",z.STRING],labelDecimalSeparator:[xm(),z.STRING],labelThousandsSeparator:[Zb(),z.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',z.STRING],labelInvalidField:["Field contains invalid files",z.STRING],labelFileWaitingForSize:["Waiting for size",z.STRING],labelFileSizeNotAvailable:["Size not available",z.STRING],labelFileCountSingular:["file in list",z.STRING],labelFileCountPlural:["files in list",z.STRING],labelFileLoading:["Loading",z.STRING],labelFileAdded:["Added",z.STRING],labelFileLoadError:["Error during load",z.STRING],labelFileRemoved:["Removed",z.STRING],labelFileRemoveError:["Error during remove",z.STRING],labelFileProcessing:["Uploading",z.STRING],labelFileProcessingComplete:["Upload complete",z.STRING],labelFileProcessingAborted:["Upload cancelled",z.STRING],labelFileProcessingError:["Error during upload",z.STRING],labelFileProcessingRevertError:["Error during revert",z.STRING],labelTapToCancel:["tap to cancel",z.STRING],labelTapToRetry:["tap to retry",z.STRING],labelTapToUndo:["tap to undo",z.STRING],labelButtonRemoveItem:["Remove",z.STRING],labelButtonAbortItemLoad:["Abort",z.STRING],labelButtonRetryItemLoad:["Retry",z.STRING],labelButtonAbortItemProcessing:["Cancel",z.STRING],labelButtonUndoItemProcessing:["Undo",z.STRING],labelButtonRetryItemProcessing:["Retry",z.STRING],labelButtonProcessItem:["Upload",z.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',z.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',z.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',z.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',z.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',z.STRING],oninit:[null,z.FUNCTION],onwarning:[null,z.FUNCTION],onerror:[null,z.FUNCTION],onactivatefile:[null,z.FUNCTION],oninitfile:[null,z.FUNCTION],onaddfilestart:[null,z.FUNCTION],onaddfileprogress:[null,z.FUNCTION],onaddfile:[null,z.FUNCTION],onprocessfilestart:[null,z.FUNCTION],onprocessfileprogress:[null,z.FUNCTION],onprocessfileabort:[null,z.FUNCTION],onprocessfilerevert:[null,z.FUNCTION],onprocessfile:[null,z.FUNCTION],onprocessfiles:[null,z.FUNCTION],onremovefile:[null,z.FUNCTION],onpreparefile:[null,z.FUNCTION],onupdatefiles:[null,z.FUNCTION],onreorderfiles:[null,z.FUNCTION],beforeDropFile:[null,z.FUNCTION],beforeAddFile:[null,z.FUNCTION],beforeRemoveFile:[null,z.FUNCTION],beforePrepareFile:[null,z.FUNCTION],stylePanelLayout:[null,z.STRING],stylePanelAspectRatio:[null,z.STRING],styleItemPanelAspectRatio:[null,z.STRING],styleButtonRemoveItemPosition:["left",z.STRING],styleButtonProcessItemPosition:["right",z.STRING],styleLoadIndicatorPosition:["right",z.STRING],styleProgressIndicatorPosition:["right",z.STRING],styleButtonRemoveItemAlign:[!1,z.BOOLEAN],files:[[],z.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],z.ARRAY]},Yn=(t,e)=>qi(e)?t[0]||null:Va(e)?t[e]||null:(typeof e=="object"&&(e=e.id),t.find(s=>s.id===e)||null),Sm=t=>{if(qi(t))return t;if(/:/.test(t)){const e=t.split(":");return e[1]/e[0]}return parseFloat(t)},Hs=t=>t.filter(e=>!e.archived),Rm={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4};let Xl=null;const tI=()=>{if(Xl===null)try{const t=new DataTransfer;t.items.add(new File(["hello world"],"This_Works.txt"));const e=document.createElement("input");e.setAttribute("type","file"),e.files=t.files,Xl=e.files.length===1}catch(t){Xl=!1}return Xl},eI=[it.LOAD_ERROR,it.PROCESSING_ERROR,it.PROCESSING_REVERT_ERROR],sI=[it.LOADING,it.PROCESSING,it.PROCESSING_QUEUED,it.INIT],iI=[it.PROCESSING_COMPLETE],nI=t=>eI.includes(t.status),rI=t=>sI.includes(t.status),aI=t=>iI.includes(t.status),Qp=t=>ie(t.options.server)&&(ie(t.options.server.process)||qn(t.options.server.process)),oI=t=>({GET_STATUS:()=>{const e=Hs(t.items),{EMPTY:s,ERROR:i,BUSY:n,IDLE:a,READY:o}=Rm;return e.length===0?s:e.some(nI)?i:e.some(rI)?n:e.some(aI)?o:a},GET_ITEM:e=>Yn(t.items,e),GET_ACTIVE_ITEM:e=>Yn(Hs(t.items),e),GET_ACTIVE_ITEMS:()=>Hs(t.items),GET_ITEMS:()=>t.items,GET_ITEM_NAME:e=>{const s=Yn(t.items,e);return s?s.filename:null},GET_ITEM_SIZE:e=>{const s=Yn(t.items,e);return s?s.fileSize:null},GET_STYLES:()=>Object.keys(t.options).filter(e=>/^style/.test(e)).map(e=>({name:e,value:t.options[e]})),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(t.options.stylePanelLayout)?1:Sm(t.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>t.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:e=>Hs(t.items).filter(s=>s.status===e),GET_TOTAL_ITEMS:()=>Hs(t.items).length,SHOULD_UPDATE_FILE_INPUT:()=>t.options.storeAsFile&&tI()&&!Qp(t),IS_ASYNC:()=>Qp(t),GET_FILE_SIZE_LABELS:e=>({labelBytes:e("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:e("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:e("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:e("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0})}),lI=t=>{const e=Hs(t.items).length;if(!t.options.allowMultiple)return e===0;const s=t.options.maxFiles;return s===null||e<s},Cm=(t,e,s)=>Math.max(Math.min(s,t),e),cI=(t,e,s)=>t.splice(e,0,s),dI=(t,e,s)=>qi(e)?null:typeof s=="undefined"?(t.push(e),e):(s=Cm(s,0,t.length),cI(t,s,e),e),Jh=t=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(t),Wl=t=>t.split("/").pop().split("?").shift(),Ph=t=>t.split(".").pop(),hI=t=>{if(typeof t!="string")return"";const e=t.split("/").pop();return/svg/.test(e)?"svg":/zip|compressed/.test(e)?"zip":/plain/.test(e)?"txt":/msword/.test(e)?"doc":/[a-z]+/.test(e)?e==="jpeg"?"jpg":e:""},Xa=(t,e="")=>(e+t).slice(-e.length),Om=(t=new Date)=>`${t.getFullYear()}-${Xa(t.getMonth()+1,"00")}-${Xa(t.getDate(),"00")}_${Xa(t.getHours(),"00")}-${Xa(t.getMinutes(),"00")}-${Xa(t.getSeconds(),"00")}`,Ba=(t,e,s=null,i=null)=>{const n=typeof s=="string"?t.slice(0,t.size,s):t.slice(0,t.size,t.type);return n.lastModifiedDate=new Date,t._relativePath&&(n._relativePath=t._relativePath),Ge(e)||(e=Om()),e&&i===null&&Ph(e)?n.name=e:(i=i||hI(n.type),n.name=e+(i?"."+i:"")),n},uI=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,ym=(t,e)=>{const s=uI();if(s){const i=new s;return i.append(t),i.getBlob(e)}return new Blob([t],{type:e})},pI=(t,e)=>{const s=new ArrayBuffer(t.length),i=new Uint8Array(s);for(let n=0;n<t.length;n++)i[n]=t.charCodeAt(n);return ym(s,e)},Lm=t=>(/^data:(.+);/.exec(t)||[])[1]||null,fI=t=>t.split(",")[1].replace(/\s/g,""),mI=t=>atob(fI(t)),gI=t=>{const e=Lm(t),s=mI(t);return pI(s,e)},EI=(t,e,s)=>Ba(gI(t),e,null,s),bI=t=>{if(!/^content-disposition:/i.test(t))return null;const e=t.split(/filename=|filename\*=.+''/).splice(1).map(s=>s.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(s=>s.length);return e.length?decodeURI(e[e.length-1]):null},II=t=>{if(/content-length:/i.test(t)){const e=t.match(/[0-9]+/)[0];return e?parseInt(e,10):null}return null},_I=t=>/x-content-transfer-id:/i.test(t)&&(t.split(":")[1]||"").trim()||null,gp=t=>{const e={source:null,name:null,size:null},s=t.split(`
`);for(let i of s){const n=bI(i);if(n){e.name=n;continue}const a=II(i);if(a){e.size=a;continue}const o=_I(i);if(o){e.source=o;continue}}return e},wI=t=>{const e={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},s=()=>e.progress,i=()=>{e.request&&e.request.abort&&e.request.abort()},n=()=>{const d=e.source;o.fire("init",d),d instanceof File?o.fire("load",d):d instanceof Blob?o.fire("load",Ba(d,d.name)):Jh(d)?o.fire("load",EI(d)):a(d)},a=d=>{if(!t){o.fire("error",{type:"error",body:"Can't load URL",code:400});return}e.timestamp=Date.now(),e.request=t(d,c=>{e.duration=Date.now()-e.timestamp,e.complete=!0,c instanceof Blob&&(c=Ba(c,c.name||Wl(d))),o.fire("load",c instanceof Blob?c:c?c.body:null)},c=>{o.fire("error",typeof c=="string"?{type:"error",code:0,body:c}:c)},(c,h,u)=>{if(u&&(e.size=u),e.duration=Date.now()-e.timestamp,!c){e.progress=null;return}e.progress=h/u,o.fire("progress",e.progress)},()=>{o.fire("abort")},c=>{const h=gp(typeof c=="string"?c:c.headers);o.fire("meta",{size:e.size||h.size,filename:h.name,source:h.source})})},o=A(_({},Nh()),{setSource:d=>e.source=d,getProgress:s,abort:i,load:n});return o},Jp=t=>/GET|HEAD/.test(t),gr=(t,e,s)=>{const i={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{n=!0,o.abort()}};let n=!1,a=!1;s=_({method:"POST",headers:{},withCredentials:!1},s),e=encodeURI(e),Jp(s.method)&&t&&(e=`${e}${encodeURIComponent(typeof t=="string"?t:JSON.stringify(t))}`);const o=new XMLHttpRequest,d=Jp(s.method)?o:o.upload;return d.onprogress=c=>{n||i.onprogress(c.lengthComputable,c.loaded,c.total)},o.onreadystatechange=()=>{o.readyState<2||o.readyState===4&&o.status===0||a||(a=!0,i.onheaders(o))},o.onload=()=>{o.status>=200&&o.status<300?i.onload(o):i.onerror(o)},o.onerror=()=>i.onerror(o),o.onabort=()=>{n=!0,i.onabort()},o.ontimeout=()=>i.ontimeout(o),o.open(s.method,e,!0),Va(s.timeout)&&(o.timeout=s.timeout),Object.keys(s.headers).forEach(c=>{const h=unescape(encodeURIComponent(s.headers[c]));o.setRequestHeader(c,h)}),s.responseType&&(o.responseType=s.responseType),s.withCredentials&&(o.withCredentials=!0),o.send(t),i},Mt=(t,e,s,i)=>({type:t,code:e,body:s,headers:i}),Er=t=>e=>{t(Mt("error",0,"Timeout",e.getAllResponseHeaders()))},Kp=t=>/\?/.test(t),mo=(...t)=>{let e="";return t.forEach(s=>{e+=Kp(e)&&Kp(s)?s.replace(/\?/,"&"):s}),e},jh=(t="",e)=>{if(typeof e=="function")return e;if(!e||!Ge(e.url))return null;const s=e.onload||(n=>n),i=e.onerror||(n=>null);return(n,a,o,d,c,h)=>{const u=gr(n,mo(t,e.url),A(_({},e),{responseType:"blob"}));return u.onload=p=>{const g=p.getAllResponseHeaders(),m=gp(g).name||Wl(n);a(Mt("load",p.status,e.method==="HEAD"?null:Ba(s(p.response),m),g))},u.onerror=p=>{o(Mt("error",p.status,i(p.response)||p.statusText,p.getAllResponseHeaders()))},u.onheaders=p=>{h(Mt("headers",p.status,null,p.getAllResponseHeaders()))},u.ontimeout=Er(o),u.onprogress=d,u.onabort=c,u}},cs={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},TI=(t,e,s,i,n,a,o,d,c,h,u)=>{const p=[],{chunkTransferId:g,chunkServer:m,chunkSize:E,chunkRetryDelays:I}=u,T={serverId:g,aborted:!1},C=e.ondata||(N=>N),w=e.onload||((N,W)=>W==="HEAD"?N.getResponseHeader("Upload-Offset"):N.response),v=e.onerror||(N=>null),S=N=>{const W=new FormData;ie(n)&&W.append(s,JSON.stringify(n));const F=typeof e.headers=="function"?e.headers(i,n):A(_({},e.headers),{"Upload-Length":i.size}),M=A(_({},e),{headers:F}),G=gr(C(W),mo(t,e.url),M);G.onload=U=>N(w(U,M.method)),G.onerror=U=>o(Mt("error",U.status,v(U.response)||U.statusText,U.getAllResponseHeaders())),G.ontimeout=Er(o)},O=N=>{const W=mo(t,m.url,T.serverId),M={headers:typeof e.headers=="function"?e.headers(T.serverId):_({},e.headers),method:"HEAD"},G=gr(null,W,M);G.onload=U=>N(w(U,M.method)),G.onerror=U=>o(Mt("error",U.status,v(U.response)||U.statusText,U.getAllResponseHeaders())),G.ontimeout=Er(o)},L=Math.floor(i.size/E);for(let N=0;N<=L;N++){const W=N*E,F=i.slice(W,W+E,"application/offset+octet-stream");p[N]={index:N,size:F.size,offset:W,data:F,file:i,progress:0,retries:[...I],status:cs.QUEUED,error:null,request:null,timeout:null}}const P=()=>a(T.serverId),y=N=>N.status===cs.QUEUED||N.status===cs.ERROR,D=N=>{if(T.aborted)return;if(N=N||p.find(y),!N){p.every(H=>H.status===cs.COMPLETE)&&P();return}N.status=cs.PROCESSING,N.progress=null;const W=m.ondata||(H=>H),F=m.onerror||(H=>null),M=mo(t,m.url,T.serverId),G=typeof m.headers=="function"?m.headers(N):A(_({},m.headers),{"Content-Type":"application/offset+octet-stream","Upload-Offset":N.offset,"Upload-Length":i.size,"Upload-Name":i.name}),U=N.request=gr(W(N.data),M,A(_({},m),{headers:G}));U.onload=()=>{N.status=cs.COMPLETE,N.request=null,B()},U.onprogress=(H,Y,at)=>{N.progress=H?Y:null,k()},U.onerror=H=>{N.status=cs.ERROR,N.request=null,N.error=F(H.response)||H.statusText,V(N)||o(Mt("error",H.status,F(H.response)||H.statusText,H.getAllResponseHeaders()))},U.ontimeout=H=>{N.status=cs.ERROR,N.request=null,V(N)||Er(o)(H)},U.onabort=()=>{N.status=cs.QUEUED,N.request=null,c()}},V=N=>N.retries.length===0?!1:(N.status=cs.WAITING,clearTimeout(N.timeout),N.timeout=setTimeout(()=>{D(N)},N.retries.shift()),!0),k=()=>{const N=p.reduce((F,M)=>F===null||M.progress===null?null:F+M.progress,0);if(N===null)return d(!1,0,0);const W=p.reduce((F,M)=>F+M.size,0);d(!0,N,W)},B=()=>{p.filter(W=>W.status===cs.PROCESSING).length>=1||D()},X=()=>{p.forEach(N=>{clearTimeout(N.timeout),N.request&&N.request.abort()})};return T.serverId?O(N=>{T.aborted||(p.filter(W=>W.offset<N).forEach(W=>{W.status=cs.COMPLETE,W.progress=W.size}),B())}):S(N=>{T.aborted||(h(N),T.serverId=N,B())}),{abort:()=>{T.aborted=!0,X()}}},vI=(t,e,s,i)=>(n,a,o,d,c,h,u)=>{if(!n)return;const p=i.chunkUploads,g=p&&n.size>i.chunkSize,m=p&&(g||i.chunkForce);if(n instanceof Blob&&m)return TI(t,e,s,n,a,o,d,c,h,u,i);const E=e.ondata||(O=>O),I=e.onload||(O=>O),T=e.onerror||(O=>null),C=typeof e.headers=="function"?e.headers(n,a)||{}:_({},e.headers),w=A(_({},e),{headers:C});var v=new FormData;ie(a)&&v.append(s,JSON.stringify(a)),(n instanceof Blob?[{name:null,file:n}]:n).forEach(O=>{v.append(s,O.file,O.name===null?O.file.name:`${O.name}${O.file.name}`)});const S=gr(E(v),mo(t,e.url),w);return S.onload=O=>{o(Mt("load",O.status,I(O.response),O.getAllResponseHeaders()))},S.onerror=O=>{d(Mt("error",O.status,T(O.response)||O.statusText,O.getAllResponseHeaders()))},S.ontimeout=Er(d),S.onprogress=c,S.onabort=h,S},xI=(t="",e,s,i)=>typeof e=="function"?(...n)=>e(s,...n,i):!e||!Ge(e.url)?null:vI(t,e,s,i),Za=(t="",e)=>{if(typeof e=="function")return e;if(!e||!Ge(e.url))return(n,a)=>a();const s=e.onload||(n=>n),i=e.onerror||(n=>null);return(n,a,o)=>{const d=gr(n,t+e.url,e);return d.onload=c=>{a(Mt("load",c.status,s(c.response),c.getAllResponseHeaders()))},d.onerror=c=>{o(Mt("error",c.status,i(c.response)||c.statusText,c.getAllResponseHeaders()))},d.ontimeout=Er(o),d}},Am=(t=0,e=1)=>t+Math.random()*(e-t),SI=(t,e=1e3,s=0,i=25,n=250)=>{let a=null;const o=Date.now(),d=()=>{let c=Date.now()-o,h=Am(i,n);c+h>e&&(h=c+h-e);let u=c/e;if(u>=1||document.hidden){t(1);return}t(u),a=setTimeout(d,h)};return e>0&&d(),{clear:()=>{clearTimeout(a)}}},RI=(t,e)=>{const s={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:i}=e,n=(u,p)=>{const g=()=>{s.duration===0||s.progress===null||h.fire("progress",h.getProgress())},m=()=>{s.complete=!0,h.fire("load-perceived",s.response.body)};h.fire("start"),s.timestamp=Date.now(),s.perceivedPerformanceUpdater=SI(E=>{s.perceivedProgress=E,s.perceivedDuration=Date.now()-s.timestamp,g(),s.response&&s.perceivedProgress===1&&!s.complete&&m()},i?Am(750,1500):0),s.request=t(u,p,E=>{s.response=ie(E)?E:{type:"load",code:200,body:`${E}`,headers:{}},s.duration=Date.now()-s.timestamp,s.progress=1,h.fire("load",s.response.body),(!i||i&&s.perceivedProgress===1)&&m()},E=>{s.perceivedPerformanceUpdater.clear(),h.fire("error",ie(E)?E:{type:"error",code:0,body:`${E}`})},(E,I,T)=>{s.duration=Date.now()-s.timestamp,s.progress=E?I/T:null,g()},()=>{s.perceivedPerformanceUpdater.clear(),h.fire("abort",s.response?s.response.body:null)},E=>{h.fire("transfer",E)})},a=()=>{s.request&&(s.perceivedPerformanceUpdater.clear(),s.request.abort&&s.request.abort(),s.complete=!0)},o=()=>{a(),s.complete=!1,s.perceivedProgress=0,s.progress=0,s.timestamp=null,s.perceivedDuration=0,s.duration=0,s.request=null,s.response=null},d=i?()=>s.progress?Math.min(s.progress,s.perceivedProgress):null:()=>s.progress||null,c=i?()=>Math.min(s.duration,s.perceivedDuration):()=>s.duration,h=A(_({},Nh()),{process:n,abort:a,getProgress:d,getDuration:c,reset:o});return h},Mm=t=>t.substring(0,t.lastIndexOf("."))||t,CI=t=>{let e=[t.name,t.size,t.type];return t instanceof Blob||Jh(t)?e[0]=t.name||Om():Jh(t)?(e[1]=t.length,e[2]=Lm(t)):Ge(t)&&(e[0]=Wl(t),e[1]=0,e[2]="application/octet-stream"),{name:e[0],size:e[1],type:e[2]}},ka=t=>!!(t instanceof File||t instanceof Blob&&t.name),$m=t=>{if(!ie(t))return t;const e=Ah(t)?[]:{};for(const s in t){if(!t.hasOwnProperty(s))continue;const i=t[s];e[s]=i&&ie(i)?$m(i):i}return e},OI=(t=null,e=null,s=null)=>{const i=pp(),n={archived:!1,frozen:!1,released:!1,source:null,file:s,serverFileReference:e,transferId:null,processingAborted:!1,status:e?it.PROCESSING_COMPLETE:it.INIT,activeLoader:null,activeProcessor:null};let a=null;const o={},d=y=>n.status=y,c=(y,...D)=>{n.released||n.frozen||L.fire(y,...D)},h=()=>Ph(n.file.name),u=()=>n.file.type,p=()=>n.file.size,g=()=>n.file,m=(y,D,V)=>{if(n.source=y,L.fireSync("init"),n.file){L.fireSync("load-skip");return}n.file=CI(y),D.on("init",()=>{c("load-init")}),D.on("meta",k=>{n.file.size=k.size,n.file.filename=k.filename,k.source&&(t=Xt.LIMBO,n.serverFileReference=k.source,n.status=it.PROCESSING_COMPLETE),c("load-meta")}),D.on("progress",k=>{d(it.LOADING),c("load-progress",k)}),D.on("error",k=>{d(it.LOAD_ERROR),c("load-request-error",k)}),D.on("abort",()=>{d(it.INIT),c("load-abort")}),D.on("load",k=>{n.activeLoader=null;const B=N=>{n.file=ka(N)?N:n.file,t===Xt.LIMBO&&n.serverFileReference?d(it.PROCESSING_COMPLETE):d(it.IDLE),c("load")},X=N=>{n.file=k,c("load-meta"),d(it.LOAD_ERROR),c("load-file-error",N)};if(n.serverFileReference){B(k);return}V(k,B,X)}),D.setSource(y),n.activeLoader=D,D.load()},E=()=>{n.activeLoader&&n.activeLoader.load()},I=()=>{if(n.activeLoader){n.activeLoader.abort();return}d(it.INIT),c("load-abort")},T=(y,D)=>{if(n.processingAborted){n.processingAborted=!1;return}if(d(it.PROCESSING),a=null,!(n.file instanceof Blob)){L.on("load",()=>{T(y,D)});return}y.on("load",B=>{n.transferId=null,n.serverFileReference=B}),y.on("transfer",B=>{n.transferId=B}),y.on("load-perceived",B=>{n.activeProcessor=null,n.transferId=null,n.serverFileReference=B,d(it.PROCESSING_COMPLETE),c("process-complete",B)}),y.on("start",()=>{c("process-start")}),y.on("error",B=>{n.activeProcessor=null,d(it.PROCESSING_ERROR),c("process-error",B)}),y.on("abort",B=>{n.activeProcessor=null,n.serverFileReference=B,d(it.IDLE),c("process-abort"),a&&a()}),y.on("progress",B=>{c("process-progress",B)});const V=B=>{n.archived||y.process(B,_({},o))},k=console.error;D(n.file,V,k),n.activeProcessor=y},C=()=>{n.processingAborted=!1,d(it.PROCESSING_QUEUED)},w=()=>new Promise(y=>{if(!n.activeProcessor){n.processingAborted=!0,d(it.IDLE),c("process-abort"),y();return}a=()=>{y()},n.activeProcessor.abort()}),v=(y,D)=>new Promise((V,k)=>{const B=n.serverFileReference!==null?n.serverFileReference:n.transferId;if(B===null){V();return}y(B,()=>{n.serverFileReference=null,n.transferId=null,V()},X=>{if(!D){V();return}d(it.PROCESSING_REVERT_ERROR),c("process-revert-error"),k(X)}),d(it.IDLE),c("process-revert")}),S=(y,D,V)=>{const k=y.split("."),B=k[0],X=k.pop();let N=o;k.forEach(W=>N=N[W]),JSON.stringify(N[X])!==JSON.stringify(D)&&(N[X]=D,c("metadata-update",{key:B,value:o[B],silent:V}))},L=A(_({id:{get:()=>i},origin:{get:()=>t,set:y=>t=y},serverId:{get:()=>n.serverFileReference},transferId:{get:()=>n.transferId},status:{get:()=>n.status},filename:{get:()=>n.file.name},filenameWithoutExtension:{get:()=>Mm(n.file.name)},fileExtension:{get:h},fileType:{get:u},fileSize:{get:p},file:{get:g},relativePath:{get:()=>n.file._relativePath},source:{get:()=>n.source},getMetadata:y=>$m(y?o[y]:o),setMetadata:(y,D,V)=>{if(ie(y)){const k=y;return Object.keys(k).forEach(B=>{S(B,k[B],D)}),y}return S(y,D,V),D},extend:(y,D)=>P[y]=D,abortLoad:I,retryLoad:E,requestProcessing:C,abortProcessing:w,load:m,process:T,revert:v},Nh()),{freeze:()=>n.frozen=!0,release:()=>n.released=!0,released:{get:()=>n.released},archive:()=>n.archived=!0,archived:{get:()=>n.archived}}),P=Ln(L);return P},yI=(t,e)=>qi(e)?0:Ge(e)?t.findIndex(s=>s.id===e):-1,tf=(t,e)=>{const s=yI(t,e);if(!(s<0))return t[s]||null},ef=(t,e,s,i,n,a)=>{const o=gr(null,t,{method:"GET",responseType:"blob"});return o.onload=d=>{const c=d.getAllResponseHeaders(),h=gp(c).name||Wl(t);e(Mt("load",d.status,Ba(d.response,h),c))},o.onerror=d=>{s(Mt("error",d.status,d.statusText,d.getAllResponseHeaders()))},o.onheaders=d=>{a(Mt("headers",d.status,null,d.getAllResponseHeaders()))},o.ontimeout=Er(s),o.onprogress=i,o.onabort=n,o},sf=t=>(t.indexOf("//")===0&&(t=location.protocol+t),t.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),LI=t=>(t.indexOf(":")>-1||t.indexOf("//")>-1)&&sf(location.href)!==sf(t),Zl=t=>(...e)=>qn(t)?t(...e):t,AI=t=>!ka(t.file),Uh=(t,e)=>{clearTimeout(e.listUpdateTimeout),e.listUpdateTimeout=setTimeout(()=>{t("DID_UPDATE_ITEMS",{items:Hs(e.items)})},0)},nf=(t,...e)=>new Promise(s=>{if(!t)return s(!0);const i=t(...e);if(i==null)return s(!0);if(typeof i=="boolean")return s(i);typeof i.then=="function"&&i.then(s)}),Vh=(t,e)=>{t.items.sort((s,i)=>e(Ye(s),Ye(i)))},ds=(t,e)=>(o={})=>{var d=o,{query:s,success:i=()=>{},failure:n=()=>{}}=d,a=kp(d,["query","success","failure"]);const c=Yn(t.items,s);if(!c){n({error:Mt("error",0,"Item not found"),file:null});return}e(c,i,n,a||{})},MI=(t,e,s)=>({ABORT_ALL:()=>{Hs(s.items).forEach(i=>{i.freeze(),i.abortLoad(),i.abortProcessing()})},DID_SET_FILES:({value:i=[]})=>{const n=i.map(o=>({source:o.source?o.source:o,options:o.options}));let a=Hs(s.items);a.forEach(o=>{n.find(d=>d.source===o.source||d.source===o.file)||t("REMOVE_ITEM",{query:o,remove:!1})}),a=Hs(s.items),n.forEach((o,d)=>{a.find(c=>c.source===o.source||c.file===o.source)||t("ADD_ITEM",A(_({},o),{interactionMethod:Ls.NONE,index:d}))})},DID_UPDATE_ITEM_METADATA:({id:i,action:n,change:a})=>{a.silent||(clearTimeout(s.itemUpdateTimeout),s.itemUpdateTimeout=setTimeout(()=>{const o=tf(s.items,i);if(!e("IS_ASYNC")){Ws("SHOULD_PREPARE_OUTPUT",!1,{item:o,query:e,action:n,change:a}).then(u=>{const p=e("GET_BEFORE_PREPARE_FILE");p&&(u=p(o,u)),u&&t("REQUEST_PREPARE_OUTPUT",{query:i,item:o,success:g=>{t("DID_PREPARE_OUTPUT",{id:i,file:g})}},!0)});return}o.origin===Xt.LOCAL&&t("DID_LOAD_ITEM",{id:o.id,error:null,serverFileReference:o.source});const d=()=>{setTimeout(()=>{t("REQUEST_ITEM_PROCESSING",{query:i})},32)},c=u=>{o.revert(Za(s.options.server.url,s.options.server.revert),e("GET_FORCE_REVERT")).then(u?d:()=>{}).catch(()=>{})},h=u=>{o.abortProcessing().then(u?d:()=>{})};if(o.status===it.PROCESSING_COMPLETE)return c(s.options.instantUpload);if(o.status===it.PROCESSING)return h(s.options.instantUpload);s.options.instantUpload&&d()},0))},MOVE_ITEM:({query:i,index:n})=>{const a=Yn(s.items,i);if(!a)return;const o=s.items.indexOf(a);n=Cm(n,0,s.items.length-1),o!==n&&s.items.splice(n,0,s.items.splice(o,1)[0])},SORT:({compare:i})=>{Vh(s,i),t("DID_SORT_ITEMS",{items:e("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:i,index:n,interactionMethod:a,success:o=()=>{},failure:d=()=>{}})=>{let c=n;if(n===-1||typeof n=="undefined"){const m=e("GET_ITEM_INSERT_LOCATION"),E=e("GET_TOTAL_ITEMS");c=m==="before"?0:E}const h=e("GET_IGNORED_FILES"),u=m=>ka(m)?!h.includes(m.name.toLowerCase()):!qi(m),g=i.filter(u).map(m=>new Promise((E,I)=>{t("ADD_ITEM",{interactionMethod:a,source:m.source||m,success:E,failure:I,index:c++,options:m.options||{}})}));Promise.all(g).then(o).catch(d)},ADD_ITEM:({source:i,index:n=-1,interactionMethod:a,success:o=()=>{},failure:d=()=>{},options:c={}})=>{if(qi(i)){d({error:Mt("error",0,"No source"),file:null});return}if(ka(i)&&s.options.ignoredFiles.includes(i.name.toLowerCase()))return;if(!lI(s)){if(s.options.allowMultiple||!s.options.allowMultiple&&!s.options.allowReplace){const w=Mt("warning",0,"Max files");t("DID_THROW_MAX_FILES",{source:i,error:w}),d({error:w,file:null});return}const C=Hs(s.items)[0];if(C.status===it.PROCESSING_COMPLETE||C.status===it.PROCESSING_REVERT_ERROR){const w=e("GET_FORCE_REVERT");if(C.revert(Za(s.options.server.url,s.options.server.revert),w).then(()=>{w&&t("ADD_ITEM",{source:i,index:n,interactionMethod:a,success:o,failure:d,options:c})}).catch(()=>{}),w)return}t("REMOVE_ITEM",{query:C.id})}const h=c.type==="local"?Xt.LOCAL:c.type==="limbo"?Xt.LIMBO:Xt.INPUT,u=OI(h,h===Xt.INPUT?null:i,c.file);Object.keys(c.metadata||{}).forEach(C=>{u.setMetadata(C,c.metadata[C])}),Ir("DID_CREATE_ITEM",u,{query:e,dispatch:t});const p=e("GET_ITEM_INSERT_LOCATION");s.options.itemInsertLocationFreedom||(n=p==="before"?-1:s.items.length),dI(s.items,u,n),qn(p)&&i&&Vh(s,p);const g=u.id;u.on("init",()=>{t("DID_INIT_ITEM",{id:g})}),u.on("load-init",()=>{t("DID_START_ITEM_LOAD",{id:g})}),u.on("load-meta",()=>{t("DID_UPDATE_ITEM_META",{id:g})}),u.on("load-progress",C=>{t("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:g,progress:C})}),u.on("load-request-error",C=>{const w=Zl(s.options.labelFileLoadError)(C);if(C.code>=400&&C.code<500){t("DID_THROW_ITEM_INVALID",{id:g,error:C,status:{main:w,sub:`${C.code} (${C.body})`}}),d({error:C,file:Ye(u)});return}t("DID_THROW_ITEM_LOAD_ERROR",{id:g,error:C,status:{main:w,sub:s.options.labelTapToRetry}})}),u.on("load-file-error",C=>{t("DID_THROW_ITEM_INVALID",{id:g,error:C.status,status:C.status}),d({error:C.status,file:Ye(u)})}),u.on("load-abort",()=>{t("REMOVE_ITEM",{query:g})}),u.on("load-skip",()=>{t("COMPLETE_LOAD_ITEM",{query:g,item:u,data:{source:i,success:o}})}),u.on("load",()=>{const C=w=>{if(!w){t("REMOVE_ITEM",{query:g});return}u.on("metadata-update",v=>{t("DID_UPDATE_ITEM_METADATA",{id:g,change:v})}),Ws("SHOULD_PREPARE_OUTPUT",!1,{item:u,query:e}).then(v=>{const S=e("GET_BEFORE_PREPARE_FILE");S&&(v=S(u,v));const O=()=>{t("COMPLETE_LOAD_ITEM",{query:g,item:u,data:{source:i,success:o}}),Uh(t,s)};if(v){t("REQUEST_PREPARE_OUTPUT",{query:g,item:u,success:L=>{t("DID_PREPARE_OUTPUT",{id:g,file:L}),O()}},!0);return}O()})};Ws("DID_LOAD_ITEM",u,{query:e,dispatch:t}).then(()=>{nf(e("GET_BEFORE_ADD_FILE"),Ye(u)).then(C)}).catch(w=>{if(!w||!w.error||!w.status)return C(!1);t("DID_THROW_ITEM_INVALID",{id:g,error:w.error,status:w.status})})}),u.on("process-start",()=>{t("DID_START_ITEM_PROCESSING",{id:g})}),u.on("process-progress",C=>{t("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:g,progress:C})}),u.on("process-error",C=>{t("DID_THROW_ITEM_PROCESSING_ERROR",{id:g,error:C,status:{main:Zl(s.options.labelFileProcessingError)(C),sub:s.options.labelTapToRetry}})}),u.on("process-revert-error",C=>{t("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:g,error:C,status:{main:Zl(s.options.labelFileProcessingRevertError)(C),sub:s.options.labelTapToRetry}})}),u.on("process-complete",C=>{t("DID_COMPLETE_ITEM_PROCESSING",{id:g,error:null,serverFileReference:C}),t("DID_DEFINE_VALUE",{id:g,value:C})}),u.on("process-abort",()=>{t("DID_ABORT_ITEM_PROCESSING",{id:g})}),u.on("process-revert",()=>{t("DID_REVERT_ITEM_PROCESSING",{id:g}),t("DID_DEFINE_VALUE",{id:g,value:null})}),t("DID_ADD_ITEM",{id:g,index:n,interactionMethod:a}),Uh(t,s);const{url:m,load:E,restore:I,fetch:T}=s.options.server||{};u.load(i,wI(h===Xt.INPUT?Ge(i)&&LI(i)&&T?jh(m,T):ef:h===Xt.LIMBO?jh(m,I):jh(m,E)),(C,w,v)=>{Ws("LOAD_FILE",C,{query:e}).then(w).catch(v)})},REQUEST_PREPARE_OUTPUT:({item:i,success:n,failure:a=()=>{}})=>{const o={error:Mt("error",0,"Item not found"),file:null};if(i.archived)return a(o);Ws("PREPARE_OUTPUT",i.file,{query:e,item:i}).then(d=>{Ws("COMPLETE_PREPARE_OUTPUT",d,{query:e,item:i}).then(c=>{if(i.archived)return a(o);n(c)})})},COMPLETE_LOAD_ITEM:({item:i,data:n})=>{const{success:a,source:o}=n,d=e("GET_ITEM_INSERT_LOCATION");if(qn(d)&&o&&Vh(s,d),t("DID_LOAD_ITEM",{id:i.id,error:null,serverFileReference:i.origin===Xt.INPUT?null:o}),a(Ye(i)),i.origin===Xt.LOCAL){t("DID_LOAD_LOCAL_ITEM",{id:i.id});return}if(i.origin===Xt.LIMBO){t("DID_COMPLETE_ITEM_PROCESSING",{id:i.id,error:null,serverFileReference:o}),t("DID_DEFINE_VALUE",{id:i.id,value:i.serverId||o});return}e("IS_ASYNC")&&s.options.instantUpload&&t("REQUEST_ITEM_PROCESSING",{query:i.id})},RETRY_ITEM_LOAD:ds(s,i=>{i.retryLoad()}),REQUEST_ITEM_PREPARE:ds(s,(i,n,a)=>{t("REQUEST_PREPARE_OUTPUT",{query:i.id,item:i,success:o=>{t("DID_PREPARE_OUTPUT",{id:i.id,file:o}),n({file:i,output:o})},failure:a},!0)}),REQUEST_ITEM_PROCESSING:ds(s,(i,n,a)=>{if(!(i.status===it.IDLE||i.status===it.PROCESSING_ERROR)){const d=()=>t("REQUEST_ITEM_PROCESSING",{query:i,success:n,failure:a}),c=()=>document.hidden?d():setTimeout(d,32);i.status===it.PROCESSING_COMPLETE||i.status===it.PROCESSING_REVERT_ERROR?i.revert(Za(s.options.server.url,s.options.server.revert),e("GET_FORCE_REVERT")).then(c).catch(()=>{}):i.status===it.PROCESSING&&i.abortProcessing().then(c);return}i.status!==it.PROCESSING_QUEUED&&(i.requestProcessing(),t("DID_REQUEST_ITEM_PROCESSING",{id:i.id}),t("PROCESS_ITEM",{query:i,success:n,failure:a},!0))}),PROCESS_ITEM:ds(s,(i,n,a)=>{const o=e("GET_MAX_PARALLEL_UPLOADS");if(e("GET_ITEMS_BY_STATUS",it.PROCESSING).length===o){s.processingQueue.push({id:i.id,success:n,failure:a});return}if(i.status===it.PROCESSING)return;const c=()=>{const u=s.processingQueue.shift();if(!u)return;const{id:p,success:g,failure:m}=u,E=Yn(s.items,p);if(!E||E.archived){c();return}t("PROCESS_ITEM",{query:p,success:g,failure:m},!0)};i.onOnce("process-complete",()=>{n(Ye(i)),c();const u=s.options.server;if(s.options.instantUpload&&i.origin===Xt.LOCAL&&qn(u.remove)){const m=()=>{};i.origin=Xt.LIMBO,s.options.server.remove(i.source,m,m)}e("GET_ITEMS_BY_STATUS",it.PROCESSING_COMPLETE).length===s.items.length&&t("DID_COMPLETE_ITEM_PROCESSING_ALL")}),i.onOnce("process-error",u=>{a({error:u,file:Ye(i)}),c()});const h=s.options;i.process(RI(xI(h.server.url,h.server.process,h.name,{chunkTransferId:i.transferId,chunkServer:h.server.patch,chunkUploads:h.chunkUploads,chunkForce:h.chunkForce,chunkSize:h.chunkSize,chunkRetryDelays:h.chunkRetryDelays}),{allowMinimumUploadDuration:e("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),(u,p,g)=>{Ws("PREPARE_OUTPUT",u,{query:e,item:i}).then(m=>{t("DID_PREPARE_OUTPUT",{id:i.id,file:m}),p(m)}).catch(g)})}),RETRY_ITEM_PROCESSING:ds(s,i=>{t("REQUEST_ITEM_PROCESSING",{query:i})}),REQUEST_REMOVE_ITEM:ds(s,i=>{nf(e("GET_BEFORE_REMOVE_FILE"),Ye(i)).then(n=>{n&&t("REMOVE_ITEM",{query:i})})}),RELEASE_ITEM:ds(s,i=>{i.release()}),REMOVE_ITEM:ds(s,(i,n,a,o)=>{const d=()=>{const h=i.id;tf(s.items,h).archive(),t("DID_REMOVE_ITEM",{error:null,id:h,item:i}),Uh(t,s),n(Ye(i))},c=s.options.server;i.origin===Xt.LOCAL&&c&&qn(c.remove)&&o.remove!==!1?(t("DID_START_ITEM_REMOVE",{id:i.id}),c.remove(i.source,()=>d(),h=>{t("DID_THROW_ITEM_REMOVE_ERROR",{id:i.id,error:Mt("error",0,h,null),status:{main:Zl(s.options.labelFileRemoveError)(h),sub:s.options.labelTapToRetry}})})):((o.revert&&i.origin!==Xt.LOCAL&&i.serverId!==null||s.options.chunkUploads&&i.file.size>s.options.chunkSize||s.options.chunkUploads&&s.options.chunkForce)&&i.revert(Za(s.options.server.url,s.options.server.revert),e("GET_FORCE_REVERT")),d())}),ABORT_ITEM_LOAD:ds(s,i=>{i.abortLoad()}),ABORT_ITEM_PROCESSING:ds(s,i=>{if(i.serverId){t("REVERT_ITEM_PROCESSING",{id:i.id});return}i.abortProcessing().then(()=>{s.options.instantUpload&&t("REMOVE_ITEM",{query:i.id})})}),REQUEST_REVERT_ITEM_PROCESSING:ds(s,i=>{if(!s.options.instantUpload){t("REVERT_ITEM_PROCESSING",{query:i});return}const n=d=>{d&&t("REVERT_ITEM_PROCESSING",{query:i})},a=e("GET_BEFORE_REMOVE_FILE");if(!a)return n(!0);const o=a(Ye(i));if(o==null)return n(!0);if(typeof o=="boolean")return n(o);typeof o.then=="function"&&o.then(n)}),REVERT_ITEM_PROCESSING:ds(s,i=>{i.revert(Za(s.options.server.url,s.options.server.revert),e("GET_FORCE_REVERT")).then(()=>{(s.options.instantUpload||AI(i))&&t("REMOVE_ITEM",{query:i.id})}).catch(()=>{})}),SET_OPTIONS:({options:i})=>{const n=Object.keys(i),a=$I.filter(d=>n.includes(d));[...a,...Object.keys(i).filter(d=>!a.includes(d))].forEach(d=>{t(`SET_${$h(d,"_").toUpperCase()}`,{value:i[d]})})}}),$I=["server"],Ep=t=>t,Yi=t=>document.createElement(t),$t=(t,e)=>{let s=t.childNodes[0];s?e!==s.nodeValue&&(s.nodeValue=e):(s=document.createTextNode(e),t.appendChild(s))},rf=(t,e,s,i)=>{const n=(i%360-90)*Math.PI/180;return{x:t+s*Math.cos(n),y:e+s*Math.sin(n)}},NI=(t,e,s,i,n,a)=>{const o=rf(t,e,s,n),d=rf(t,e,s,i);return["M",o.x,o.y,"A",s,s,0,a,0,d.x,d.y].join(" ")},PI=(t,e,s,i,n)=>{let a=1;return n>i&&n-i<=.5&&(a=0),i>n&&i-n>=.5&&(a=0),NI(t,e,s,Math.min(.9999,i)*360,Math.min(.9999,n)*360,a)},DI=({root:t,props:e})=>{e.spin=!1,e.progress=0,e.opacity=0;const s=Pc("svg");t.ref.path=Pc("path",{"stroke-width":2,"stroke-linecap":"round"}),s.appendChild(t.ref.path),t.ref.svg=s,t.appendChild(s)},FI=({root:t,props:e})=>{if(e.opacity===0)return;e.align&&(t.element.dataset.align=e.align);const s=parseInt(Gt(t.ref.path,"stroke-width"),10),i=t.rect.element.width*.5;let n=0,a=0;e.spin?(n=0,a=.5):(n=0,a=e.progress);const o=PI(i,i,i-s,n,a);Gt(t.ref.path,"d",o),Gt(t.ref.path,"stroke-opacity",e.spin||e.progress>0?1:0)},af=Bt({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:DI,write:FI,mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),GI=({root:t,props:e})=>{t.element.innerHTML=(e.icon||"")+`<span>${e.label}</span>`,e.isDisabled=!1},BI=({root:t,props:e})=>{const{isDisabled:s}=e,i=t.query("GET_DISABLED")||e.opacity===0;i&&!s?(e.isDisabled=!0,Gt(t.element,"disabled","disabled")):!i&&s&&(e.isDisabled=!1,t.element.removeAttribute("disabled"))},Nm=Bt({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:GI,write:BI}),Pm=(t,e=".",s=1e3,i={})=>{const{labelBytes:n="bytes",labelKilobytes:a="KB",labelMegabytes:o="MB",labelGigabytes:d="GB"}=i;t=Math.round(Math.abs(t));const c=s,h=s*s,u=s*s*s;return t<c?`${t} ${n}`:t<h?`${Math.floor(t/c)} ${a}`:t<u?`${of(t/h,1,e)} ${o}`:`${of(t/u,2,e)} ${d}`},of=(t,e,s)=>t.toFixed(e).split(".").filter(i=>i!=="0").join(s),kI=({root:t,props:e})=>{const s=Yi("span");s.className="filepond--file-info-main",Gt(s,"aria-hidden","true"),t.appendChild(s),t.ref.fileName=s;const i=Yi("span");i.className="filepond--file-info-sub",t.appendChild(i),t.ref.fileSize=i,$t(i,t.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),$t(s,Ep(t.query("GET_ITEM_NAME",e.id)))},Kh=({root:t,props:e})=>{$t(t.ref.fileSize,Pm(t.query("GET_ITEM_SIZE",e.id),".",t.query("GET_FILE_SIZE_BASE"),t.query("GET_FILE_SIZE_LABELS",t.query))),$t(t.ref.fileName,Ep(t.query("GET_ITEM_NAME",e.id)))},lf=({root:t,props:e})=>{if(Va(t.query("GET_ITEM_SIZE",e.id))){Kh({root:t,props:e});return}$t(t.ref.fileSize,t.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},jI=Bt({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:Be({DID_LOAD_ITEM:Kh,DID_UPDATE_ITEM_META:Kh,DID_THROW_ITEM_LOAD_ERROR:lf,DID_THROW_ITEM_INVALID:lf}),didCreateView:t=>{Ir("CREATE_VIEW",A(_({},t),{view:t}))},create:kI,mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),Dm=t=>Math.round(t*100),UI=({root:t})=>{const e=Yi("span");e.className="filepond--file-status-main",t.appendChild(e),t.ref.main=e;const s=Yi("span");s.className="filepond--file-status-sub",t.appendChild(s),t.ref.sub=s,Fm({root:t,action:{progress:null}})},Fm=({root:t,action:e})=>{const s=e.progress===null?t.query("GET_LABEL_FILE_LOADING"):`${t.query("GET_LABEL_FILE_LOADING")} ${Dm(e.progress)}%`;$t(t.ref.main,s),$t(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},VI=({root:t,action:e})=>{const s=e.progress===null?t.query("GET_LABEL_FILE_PROCESSING"):`${t.query("GET_LABEL_FILE_PROCESSING")} ${Dm(e.progress)}%`;$t(t.ref.main,s),$t(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},zI=({root:t})=>{$t(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING")),$t(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},WI=({root:t})=>{$t(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_ABORTED")),$t(t.ref.sub,t.query("GET_LABEL_TAP_TO_RETRY"))},HI=({root:t})=>{$t(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),$t(t.ref.sub,t.query("GET_LABEL_TAP_TO_UNDO"))},cf=({root:t})=>{$t(t.ref.main,""),$t(t.ref.sub,"")},Qa=({root:t,action:e})=>{$t(t.ref.main,e.status.main),$t(t.ref.sub,e.status.sub)},qI=Bt({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:Be({DID_LOAD_ITEM:cf,DID_REVERT_ITEM_PROCESSING:cf,DID_REQUEST_ITEM_PROCESSING:zI,DID_ABORT_ITEM_PROCESSING:WI,DID_COMPLETE_ITEM_PROCESSING:HI,DID_UPDATE_ITEM_PROCESS_PROGRESS:VI,DID_UPDATE_ITEM_LOAD_PROGRESS:Fm,DID_THROW_ITEM_LOAD_ERROR:Qa,DID_THROW_ITEM_INVALID:Qa,DID_THROW_ITEM_PROCESSING_ERROR:Qa,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:Qa,DID_THROW_ITEM_REMOVE_ERROR:Qa}),didCreateView:t=>{Ir("CREATE_VIEW",A(_({},t),{view:t}))},create:UI,mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),tu={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},eu=[];Ct(tu,t=>{eu.push(t)});const es=t=>{if(su(t)==="right")return 0;const e=t.ref.buttonRemoveItem.rect.element;return e.hidden?null:e.width+e.left},YI=t=>t.ref.buttonAbortItemLoad.rect.element.width,Ql=t=>Math.floor(t.ref.buttonRemoveItem.rect.element.height/4),XI=t=>Math.floor(t.ref.buttonRemoveItem.rect.element.left/2),ZI=t=>t.query("GET_STYLE_LOAD_INDICATOR_POSITION"),QI=t=>t.query("GET_STYLE_PROGRESS_INDICATOR_POSITION"),su=t=>t.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),JI={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:ZI},processProgressIndicator:{opacity:0,align:QI},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},df={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:es},status:{translateX:es}},zh={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},Br={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:es},status:{translateX:es,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:es},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:su},info:{translateX:es},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:su},buttonRemoveItem:{opacity:1},info:{translateX:es},status:{opacity:1,translateX:es}},DID_LOAD_ITEM:df,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:es},status:{translateX:es}},DID_START_ITEM_PROCESSING:zh,DID_REQUEST_ITEM_PROCESSING:zh,DID_UPDATE_ITEM_PROCESS_PROGRESS:zh,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:es}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:es},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:df},KI=Bt({create:({root:t})=>{t.element.innerHTML=t.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),t_=({root:t,props:e})=>{const s=Object.keys(tu).reduce((E,I)=>(E[I]=_({},tu[I]),E),{}),{id:i}=e,n=t.query("GET_ALLOW_REVERT"),a=t.query("GET_ALLOW_REMOVE"),o=t.query("GET_ALLOW_PROCESS"),d=t.query("GET_INSTANT_UPLOAD"),c=t.query("IS_ASYNC"),h=t.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");let u;c?o&&!n?u=E=>!/RevertItemProcessing/.test(E):!o&&n?u=E=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(E):!o&&!n&&(u=E=>!/Process/.test(E)):u=E=>!/Process/.test(E);const p=u?eu.filter(u):eu.concat();if(d&&n&&(s.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",s.RevertItemProcessing.icon="GET_ICON_REMOVE"),c&&!n){const E=Br.DID_COMPLETE_ITEM_PROCESSING;E.info.translateX=XI,E.info.translateY=Ql,E.status.translateY=Ql,E.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(c&&!o&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(E=>{Br[E].status.translateY=Ql}),Br.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=YI),h&&n){s.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";const E=Br.DID_COMPLETE_ITEM_PROCESSING;E.info.translateX=es,E.status.translateY=Ql,E.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}a||(s.RemoveItem.disabled=!0),Ct(s,(E,I)=>{const T=t.createChildView(Nm,{label:t.query(I.label),icon:t.query(I.icon),opacity:0});p.includes(E)&&t.appendChildView(T),I.disabled&&(T.element.setAttribute("disabled","disabled"),T.element.setAttribute("hidden","hidden")),T.element.dataset.align=t.query(`GET_STYLE_${I.align}`),T.element.classList.add(I.className),T.on("click",C=>{C.stopPropagation(),!I.disabled&&t.dispatch(I.action,{query:i})}),t.ref[`button${E}`]=T}),t.ref.processingCompleteIndicator=t.appendChildView(t.createChildView(KI)),t.ref.processingCompleteIndicator.element.dataset.align=t.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),t.ref.info=t.appendChildView(t.createChildView(jI,{id:i})),t.ref.status=t.appendChildView(t.createChildView(qI,{id:i}));const g=t.appendChildView(t.createChildView(af,{opacity:0,align:t.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));g.element.classList.add("filepond--load-indicator"),t.ref.loadProgressIndicator=g;const m=t.appendChildView(t.createChildView(af,{opacity:0,align:t.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));m.element.classList.add("filepond--process-indicator"),t.ref.processProgressIndicator=m,t.ref.activeStyles=[]},e_=({root:t,actions:e,props:s})=>{s_({root:t,actions:e,props:s});let i=e.concat().filter(n=>/^DID_/.test(n.type)).reverse().find(n=>Br[n.type]);if(i){t.ref.activeStyles=[];const n=Br[i.type];Ct(JI,(a,o)=>{const d=t.ref[a];Ct(o,(c,h)=>{const u=n[a]&&typeof n[a][c]!="undefined"?n[a][c]:h;t.ref.activeStyles.push({control:d,key:c,value:u})})})}t.ref.activeStyles.forEach(({control:n,key:a,value:o})=>{n[a]=typeof o=="function"?o(t):o})},s_=Be({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:t,action:e})=>{t.ref.buttonAbortItemProcessing.label=e.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:t,action:e})=>{t.ref.buttonAbortItemLoad.label=e.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:t,action:e})=>{t.ref.buttonAbortItemRemoval.label=e.value},DID_REQUEST_ITEM_PROCESSING:({root:t})=>{t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:t})=>{t.ref.loadProgressIndicator.spin=!0,t.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:t})=>{t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:t,action:e})=>{t.ref.loadProgressIndicator.spin=!1,t.ref.loadProgressIndicator.progress=e.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:t,action:e})=>{t.ref.processProgressIndicator.spin=!1,t.ref.processProgressIndicator.progress=e.progress}}),i_=Bt({create:t_,write:e_,didCreateView:t=>{Ir("CREATE_VIEW",A(_({},t),{view:t}))},name:"file"}),n_=({root:t,props:e})=>{t.ref.fileName=Yi("legend"),t.appendChild(t.ref.fileName),t.ref.file=t.appendChildView(t.createChildView(i_,{id:e.id})),t.ref.data=!1},r_=({root:t,props:e})=>{$t(t.ref.fileName,Ep(t.query("GET_ITEM_NAME",e.id)))},a_=Bt({create:n_,ignoreRect:!0,write:Be({DID_LOAD_ITEM:r_}),didCreateView:t=>{Ir("CREATE_VIEW",A(_({},t),{view:t}))},tag:"fieldset",name:"file-wrapper"}),hf={type:"spring",damping:.6,mass:7},o_=({root:t,props:e})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:hf},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:hf},styles:["translateY"]}}].forEach(s=>{l_(t,s,e.name)}),t.element.classList.add(`filepond--${e.name}`),t.ref.scalable=null},l_=(t,e,s)=>{const i=Bt({name:`panel-${e.name} filepond--${s}`,mixins:e.mixins,ignoreRectUpdate:!0}),n=t.createChildView(i,e.props);t.ref[e.name]=t.appendChildView(n)},c_=({root:t,props:e})=>{if((t.ref.scalable===null||e.scalable!==t.ref.scalable)&&(t.ref.scalable=bm(e.scalable)?e.scalable:!0,t.element.dataset.scalable=t.ref.scalable),!e.height)return;const s=t.ref.top.rect.element,i=t.ref.bottom.rect.element,n=Math.max(s.height+i.height,e.height);t.ref.center.translateY=s.height,t.ref.center.scaleY=(n-s.height-i.height)/100,t.ref.bottom.translateY=n-i.height},Gm=Bt({name:"panel",read:({root:t,props:e})=>e.heightCurrent=t.ref.bottom.translateY,write:c_,create:o_,ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),d_=t=>{const e=t.map(i=>i.id);let s;return{setIndex:i=>{s=i},getIndex:()=>s,getItemIndex:i=>e.indexOf(i.id)}},uf={type:"spring",stiffness:.75,damping:.45,mass:10},pf="spring",ff={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},h_=({root:t,props:e})=>{if(t.ref.handleClick=i=>t.dispatch("DID_ACTIVATE_ITEM",{id:e.id}),t.element.id=`filepond--item-${e.id}`,t.element.addEventListener("click",t.ref.handleClick),t.ref.container=t.appendChildView(t.createChildView(a_,{id:e.id})),t.ref.panel=t.appendChildView(t.createChildView(Gm,{name:"item-panel"})),t.ref.panel.height=null,e.markedForRemoval=!1,!t.query("GET_ALLOW_REORDER"))return;t.element.dataset.dragState="idle";const s=i=>{if(!i.isPrimary)return;let n=!1;const a={x:i.pageX,y:i.pageY};e.dragOrigin={x:t.translateX,y:t.translateY},e.dragCenter={x:i.offsetX,y:i.offsetY};const o=d_(t.query("GET_ACTIVE_ITEMS"));t.dispatch("DID_GRAB_ITEM",{id:e.id,dragState:o});const d=h=>{if(!h.isPrimary)return;h.stopPropagation(),h.preventDefault(),e.dragOffset={x:h.pageX-a.x,y:h.pageY-a.y},e.dragOffset.x*e.dragOffset.x+e.dragOffset.y*e.dragOffset.y>16&&!n&&(n=!0,t.element.removeEventListener("click",t.ref.handleClick)),t.dispatch("DID_DRAG_ITEM",{id:e.id,dragState:o})},c=h=>{h.isPrimary&&(document.removeEventListener("pointermove",d),document.removeEventListener("pointerup",c),e.dragOffset={x:h.pageX-a.x,y:h.pageY-a.y},t.dispatch("DID_DROP_ITEM",{id:e.id,dragState:o}),n&&setTimeout(()=>t.element.addEventListener("click",t.ref.handleClick),0))};document.addEventListener("pointermove",d),document.addEventListener("pointerup",c)};t.element.addEventListener("pointerdown",s)},u_=Be({DID_UPDATE_PANEL_HEIGHT:({root:t,action:e})=>{t.height=e.height}}),p_=Be({DID_GRAB_ITEM:({root:t,props:e})=>{e.dragOrigin={x:t.translateX,y:t.translateY}},DID_DRAG_ITEM:({root:t})=>{t.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:t,props:e})=>{e.dragOffset=null,e.dragOrigin=null,t.element.dataset.dragState="drop"}},({root:t,actions:e,props:s,shouldOptimize:i})=>{t.element.dataset.dragState==="drop"&&t.scaleX<=1&&(t.element.dataset.dragState="idle");let n=e.concat().filter(o=>/^DID_/.test(o.type)).reverse().find(o=>ff[o.type]);n&&n.type!==s.currentState&&(s.currentState=n.type,t.element.dataset.filepondItemState=ff[s.currentState]||"");const a=t.query("GET_ITEM_PANEL_ASPECT_RATIO")||t.query("GET_PANEL_ASPECT_RATIO");a?i||(t.height=t.rect.element.width*a):(u_({root:t,actions:e,props:s}),!t.height&&t.ref.container.rect.element.height>0&&(t.height=t.ref.container.rect.element.height)),i&&(t.ref.panel.height=null),t.ref.panel.height=t.height}),f_=Bt({create:h_,write:p_,destroy:({root:t,props:e})=>{t.element.removeEventListener("click",t.ref.handleClick),t.dispatch("RELEASE_ITEM",{query:e.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:pf,scaleY:pf,translateX:uf,translateY:uf,opacity:{type:"tween",duration:150}}}});var bp=(t,e)=>Math.max(1,Math.floor((t+1)/e));const Ip=(t,e,s)=>{if(!s)return;const i=t.rect.element.width,n=e.length;let a=null;if(n===0||s.top<e[0].rect.element.top)return-1;const d=e[0].rect.element,c=d.marginLeft+d.marginRight,h=d.width+c,u=bp(i,h);if(u===1){for(let m=0;m<n;m++){const E=e[m],I=E.rect.outer.top+E.rect.element.height*.5;if(s.top<I)return m}return n}const p=d.marginTop+d.marginBottom,g=d.height+p;for(let m=0;m<n;m++){const E=m%u,I=Math.floor(m/u),T=E*h,C=I*g,w=C-d.marginTop,v=T+h,S=C+g+d.marginBottom;if(s.top<S&&s.top>w){if(s.left<v)return m;m!==n-1?a=m:a=null}}return a!==null?a:n},Jl={height:0,width:0,get getHeight(){return this.height},set setHeight(t){(this.height===0||t===0)&&(this.height=t)},get getWidth(){return this.width},set setWidth(t){(this.width===0||t===0)&&(this.width=t)},setDimensions:function(t,e){(this.height===0||t===0)&&(this.height=t),(this.width===0||e===0)&&(this.width=e)}},m_=({root:t})=>{Gt(t.element,"role","list"),t.ref.lastItemSpanwDate=Date.now()},g_=({root:t,action:e})=>{const{id:s,index:i,interactionMethod:n}=e;t.ref.addIndex=i;const a=Date.now();let o=a,d=1;if(n!==Ls.NONE){d=0;const c=t.query("GET_ITEM_INSERT_INTERVAL"),h=a-t.ref.lastItemSpanwDate;o=h<c?a+(c-h):a}t.ref.lastItemSpanwDate=o,t.appendChildView(t.createChildView(f_,{spawnDate:o,id:s,opacity:d,interactionMethod:n}),i)},mf=(t,e,s,i=0,n=1)=>{t.dragOffset?(t.translateX=null,t.translateY=null,t.translateX=t.dragOrigin.x+t.dragOffset.x,t.translateY=t.dragOrigin.y+t.dragOffset.y,t.scaleX=1.025,t.scaleY=1.025):(t.translateX=e,t.translateY=s,Date.now()>t.spawnDate&&(t.opacity===0&&E_(t,e,s,i,n),t.scaleX=1,t.scaleY=1,t.opacity=1))},E_=(t,e,s,i,n)=>{t.interactionMethod===Ls.NONE?(t.translateX=null,t.translateX=e,t.translateY=null,t.translateY=s):t.interactionMethod===Ls.DROP?(t.translateX=null,t.translateX=e-i*20,t.translateY=null,t.translateY=s-n*10,t.scaleX=.8,t.scaleY=.8):t.interactionMethod===Ls.BROWSE?(t.translateY=null,t.translateY=s-30):t.interactionMethod===Ls.API&&(t.translateX=null,t.translateX=e-30,t.translateY=null)},b_=({root:t,action:e})=>{const{id:s}=e,i=t.childViews.find(n=>n.id===s);i&&(i.scaleX=.9,i.scaleY=.9,i.opacity=0,i.markedForRemoval=!0)},Wh=t=>t.rect.element.height+t.rect.element.marginBottom*.5+t.rect.element.marginTop*.5,I_=t=>t.rect.element.width+t.rect.element.marginLeft*.5+t.rect.element.marginRight*.5,__=({root:t,action:e})=>{const{id:s,dragState:i}=e,n=t.query("GET_ITEM",{id:s}),a=t.childViews.find(T=>T.id===s),o=t.childViews.length,d=i.getItemIndex(n);if(!a)return;const c={x:a.dragOrigin.x+a.dragOffset.x+a.dragCenter.x,y:a.dragOrigin.y+a.dragOffset.y+a.dragCenter.y},h=Wh(a),u=I_(a);let p=Math.floor(t.rect.outer.width/u);p>o&&(p=o);const g=Math.floor(o/p+1);Jl.setHeight=h*g,Jl.setWidth=u*p;var m={y:Math.floor(c.y/h),x:Math.floor(c.x/u),getGridIndex:function(){return c.y>Jl.getHeight||c.y<0||c.x>Jl.getWidth||c.x<0?d:this.y*p+this.x},getColIndex:function(){const C=t.query("GET_ACTIVE_ITEMS"),w=t.childViews.filter(k=>k.rect.element.height),v=C.map(k=>w.find(B=>B.id===k.id)),S=v.findIndex(k=>k===a),O=Wh(a),L=v.length;let P=L,y=0,D=0,V=0;for(let k=0;k<L;k++)if(y=Wh(v[k]),V=D,D=V+y,c.y<D){if(S>k){if(c.y<V+O){P=k;break}continue}P=k;break}return P}};const E=p>1?m.getGridIndex():m.getColIndex();t.dispatch("MOVE_ITEM",{query:a,index:E});const I=i.getIndex();if(I===void 0||I!==E){if(i.setIndex(E),I===void 0)return;t.dispatch("DID_REORDER_ITEMS",{items:t.query("GET_ACTIVE_ITEMS"),origin:d,target:E})}},w_=Be({DID_ADD_ITEM:g_,DID_REMOVE_ITEM:b_,DID_DRAG_ITEM:__}),T_=({root:t,props:e,actions:s,shouldOptimize:i})=>{w_({root:t,props:e,actions:s});const{dragCoordinates:n}=e,a=t.rect.element.width,o=t.childViews.filter(v=>v.rect.element.height),d=t.query("GET_ACTIVE_ITEMS").map(v=>o.find(S=>S.id===v.id)).filter(v=>v),c=n?Ip(t,d,n):null,h=t.ref.addIndex||null;t.ref.addIndex=null;let u=0,p=0,g=0;if(d.length===0)return;const m=d[0].rect.element,E=m.marginTop+m.marginBottom,I=m.marginLeft+m.marginRight,T=m.width+I,C=m.height+E,w=bp(a,T);if(w===1){let v=0,S=0;d.forEach((O,L)=>{if(c){let D=L-c;D===-2?S=-E*.25:D===-1?S=-E*.75:D===0?S=E*.75:D===1?S=E*.25:S=0}i&&(O.translateX=null,O.translateY=null),O.markedForRemoval||mf(O,0,v+S);let y=(O.rect.element.height+E)*(O.markedForRemoval?O.opacity:1);v+=y})}else{let v=0,S=0;d.forEach((O,L)=>{L===c&&(u=1),L===h&&(g+=1),O.markedForRemoval&&O.opacity<.5&&(p-=1);const P=L+g+u+p,y=P%w,D=Math.floor(P/w),V=y*T,k=D*C,B=Math.sign(V-v),X=Math.sign(k-S);v=V,S=k,!O.markedForRemoval&&(i&&(O.translateX=null,O.translateY=null),mf(O,V,k,B,X))})}},v_=(t,e)=>e.filter(s=>s.data&&s.data.id?t.id===s.data.id:!0),x_=Bt({create:m_,write:T_,tag:"ul",name:"list",didWriteView:({root:t})=>{t.childViews.filter(e=>e.markedForRemoval&&e.opacity===0&&e.resting).forEach(e=>{e._destroy(),t.removeChildView(e)})},filterFrameActionsForChild:v_,mixins:{apis:["dragCoordinates"]}}),S_=({root:t,props:e})=>{t.ref.list=t.appendChildView(t.createChildView(x_)),e.dragCoordinates=null,e.overflowing=!1},R_=({root:t,props:e,action:s})=>{t.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(e.dragCoordinates={left:s.position.scopeLeft-t.ref.list.rect.element.left,top:s.position.scopeTop-(t.rect.outer.top+t.rect.element.marginTop+t.rect.element.scrollTop)})},C_=({props:t})=>{t.dragCoordinates=null},O_=Be({DID_DRAG:R_,DID_END_DRAG:C_}),y_=({root:t,props:e,actions:s})=>{if(O_({root:t,props:e,actions:s}),t.ref.list.dragCoordinates=e.dragCoordinates,e.overflowing&&!e.overflow&&(e.overflowing=!1,t.element.dataset.state="",t.height=null),e.overflow){const i=Math.round(e.overflow);i!==t.height&&(e.overflowing=!0,t.element.dataset.state="overflow",t.height=i)}},L_=Bt({create:S_,write:y_,name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),qs=(t,e,s,i="")=>{s?Gt(t,e,i):t.removeAttribute(e)},A_=t=>{if(!(!t||t.value==="")){try{t.value=""}catch(e){}if(t.value){const e=Yi("form"),s=t.parentNode,i=t.nextSibling;e.appendChild(t),e.reset(),i?s.insertBefore(t,i):s.appendChild(t)}}},M_=({root:t,props:e})=>{t.element.id=`filepond--browser-${e.id}`,Gt(t.element,"name",t.query("GET_NAME")),Gt(t.element,"aria-controls",`filepond--assistant-${e.id}`),Gt(t.element,"aria-labelledby",`filepond--drop-label-${e.id}`),Bm({root:t,action:{value:t.query("GET_ACCEPTED_FILE_TYPES")}}),km({root:t,action:{value:t.query("GET_ALLOW_MULTIPLE")}}),jm({root:t,action:{value:t.query("GET_ALLOW_DIRECTORIES_ONLY")}}),iu({root:t}),Um({root:t,action:{value:t.query("GET_REQUIRED")}}),Vm({root:t,action:{value:t.query("GET_CAPTURE_METHOD")}}),t.ref.handleChange=s=>{if(!t.element.value)return;const i=Array.from(t.element.files).map(n=>(n._relativePath=n.webkitRelativePath,n));setTimeout(()=>{e.onload(i),A_(t.element)},250)},t.element.addEventListener("change",t.ref.handleChange)},Bm=({root:t,action:e})=>{t.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&qs(t.element,"accept",!!e.value,e.value?e.value.join(","):"")},km=({root:t,action:e})=>{qs(t.element,"multiple",e.value)},jm=({root:t,action:e})=>{qs(t.element,"webkitdirectory",e.value)},iu=({root:t})=>{const e=t.query("GET_DISABLED"),s=t.query("GET_ALLOW_BROWSE"),i=e||!s;qs(t.element,"disabled",i)},Um=({root:t,action:e})=>{e.value?t.query("GET_TOTAL_ITEMS")===0&&qs(t.element,"required",!0):qs(t.element,"required",!1)},Vm=({root:t,action:e})=>{qs(t.element,"capture",!!e.value,e.value===!0?"":e.value)},gf=({root:t})=>{const{element:e}=t;t.query("GET_TOTAL_ITEMS")>0?(qs(e,"required",!1),qs(e,"name",!1)):(qs(e,"name",!0,t.query("GET_NAME")),t.query("GET_CHECK_VALIDITY")&&e.setCustomValidity(""),t.query("GET_REQUIRED")&&qs(e,"required",!0))},$_=({root:t})=>{t.query("GET_CHECK_VALIDITY")&&t.element.setCustomValidity(t.query("GET_LABEL_INVALID_FIELD"))},N_=Bt({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:M_,destroy:({root:t})=>{t.element.removeEventListener("change",t.ref.handleChange)},write:Be({DID_LOAD_ITEM:gf,DID_REMOVE_ITEM:gf,DID_THROW_ITEM_INVALID:$_,DID_SET_DISABLED:iu,DID_SET_ALLOW_BROWSE:iu,DID_SET_ALLOW_DIRECTORIES_ONLY:jm,DID_SET_ALLOW_MULTIPLE:km,DID_SET_ACCEPTED_FILE_TYPES:Bm,DID_SET_CAPTURE_METHOD:Vm,DID_SET_REQUIRED:Um})}),Ef={ENTER:13,SPACE:32},P_=({root:t,props:e})=>{const s=Yi("label");Gt(s,"for",`filepond--browser-${e.id}`),Gt(s,"id",`filepond--drop-label-${e.id}`),Gt(s,"aria-hidden","true"),t.ref.handleKeyDown=i=>{(i.keyCode===Ef.ENTER||i.keyCode===Ef.SPACE)&&(i.preventDefault(),t.ref.label.click())},t.ref.handleClick=i=>{i.target===s||s.contains(i.target)||t.ref.label.click()},s.addEventListener("keydown",t.ref.handleKeyDown),t.element.addEventListener("click",t.ref.handleClick),zm(s,e.caption),t.appendChild(s),t.ref.label=s},zm=(t,e)=>{t.innerHTML=e;const s=t.querySelector(".filepond--label-action");return s&&Gt(s,"tabindex","0"),e},D_=Bt({name:"drop-label",ignoreRect:!0,create:P_,destroy:({root:t})=>{t.ref.label.addEventListener("keydown",t.ref.handleKeyDown),t.element.removeEventListener("click",t.ref.handleClick)},write:Be({DID_SET_LABEL_IDLE:({root:t,action:e})=>{zm(t.ref.label,e.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),F_=Bt({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),G_=({root:t})=>{const e=t.rect.element.width*.5,s=t.rect.element.height*.5;t.ref.blob=t.appendChildView(t.createChildView(F_,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:e,translateY:s}))},B_=({root:t,action:e})=>{if(!t.ref.blob){G_({root:t});return}t.ref.blob.translateX=e.position.scopeLeft,t.ref.blob.translateY=e.position.scopeTop,t.ref.blob.scaleX=1,t.ref.blob.scaleY=1,t.ref.blob.opacity=1},k_=({root:t})=>{t.ref.blob&&(t.ref.blob.opacity=0)},j_=({root:t})=>{t.ref.blob&&(t.ref.blob.scaleX=2.5,t.ref.blob.scaleY=2.5,t.ref.blob.opacity=0)},U_=({root:t,props:e,actions:s})=>{V_({root:t,props:e,actions:s});const{blob:i}=t.ref;s.length===0&&i&&i.opacity===0&&(t.removeChildView(i),t.ref.blob=null)},V_=Be({DID_DRAG:B_,DID_DROP:j_,DID_END_DRAG:k_}),z_=Bt({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:U_}),Wm=(t,e)=>{try{const s=new DataTransfer;e.forEach(i=>{i instanceof File?s.items.add(i):s.items.add(new File([i],i.name,{type:i.type}))}),t.files=s.files}catch(s){return!1}return!0},W_=({root:t})=>t.ref.fields={},Dh=(t,e)=>t.ref.fields[e],_p=t=>{t.query("GET_ACTIVE_ITEMS").forEach(e=>{t.ref.fields[e.id]&&t.element.appendChild(t.ref.fields[e.id])})},bf=({root:t})=>_p(t),H_=({root:t,action:e})=>{const n=!(t.query("GET_ITEM",e.id).origin===Xt.LOCAL)&&t.query("SHOULD_UPDATE_FILE_INPUT"),a=Yi("input");a.type=n?"file":"hidden",a.name=t.query("GET_NAME"),a.disabled=t.query("GET_DISABLED"),t.ref.fields[e.id]=a,_p(t)},q_=({root:t,action:e})=>{const s=Dh(t,e.id);if(!s||(e.serverFileReference!==null&&(s.value=e.serverFileReference),!t.query("SHOULD_UPDATE_FILE_INPUT")))return;const i=t.query("GET_ITEM",e.id);Wm(s,[i.file])},Y_=({root:t,action:e})=>{t.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout(()=>{const s=Dh(t,e.id);s&&Wm(s,[e.file])},0)},X_=({root:t})=>{t.element.disabled=t.query("GET_DISABLED")},Z_=({root:t,action:e})=>{const s=Dh(t,e.id);s&&(s.parentNode&&s.parentNode.removeChild(s),delete t.ref.fields[e.id])},Q_=({root:t,action:e})=>{const s=Dh(t,e.id);s&&(e.value===null?s.removeAttribute("value"):s.value=e.value,_p(t))},J_=Be({DID_SET_DISABLED:X_,DID_ADD_ITEM:H_,DID_LOAD_ITEM:q_,DID_REMOVE_ITEM:Z_,DID_DEFINE_VALUE:Q_,DID_PREPARE_OUTPUT:Y_,DID_REORDER_ITEMS:bf,DID_SORT_ITEMS:bf}),K_=Bt({tag:"fieldset",name:"data",create:W_,write:J_,ignoreRect:!0}),tw=t=>"getRootNode"in t?t.getRootNode():document,ew=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],sw=["css","csv","html","txt"],iw={zip:"zip|compressed",epub:"application/epub+zip"},Hm=(t="")=>(t=t.toLowerCase(),ew.includes(t)?"image/"+(t==="jpg"?"jpeg":t==="svg"?"svg+xml":t):sw.includes(t)?"text/"+t:iw[t]||""),wp=t=>new Promise((e,s)=>{const i=hw(t);if(i.length&&!nw(t))return e(i);rw(t).then(e)}),nw=t=>t.files?t.files.length>0:!1,rw=t=>new Promise((e,s)=>{const i=(t.items?Array.from(t.items):[]).filter(n=>aw(n)).map(n=>ow(n));if(!i.length){e(t.files?Array.from(t.files):[]);return}Promise.all(i).then(n=>{const a=[];n.forEach(o=>{a.push.apply(a,o)}),e(a.filter(o=>o).map(o=>(o._relativePath||(o._relativePath=o.webkitRelativePath),o)))}).catch(console.error)}),aw=t=>{if(qm(t)){const e=Tp(t);if(e)return e.isFile||e.isDirectory}return t.kind==="file"},ow=t=>new Promise((e,s)=>{if(dw(t)){lw(Tp(t)).then(e).catch(s);return}e([t.getAsFile()])}),lw=t=>new Promise((e,s)=>{const i=[];let n=0,a=0;const o=()=>{a===0&&n===0&&e(i)},d=c=>{n++;const h=c.createReader(),u=()=>{h.readEntries(p=>{if(p.length===0){n--,o();return}p.forEach(g=>{g.isDirectory?d(g):(a++,g.file(m=>{const E=cw(m);g.fullPath&&(E._relativePath=g.fullPath),i.push(E),a--,o()}))}),u()},s)};u()};d(t)}),cw=t=>{if(t.type.length)return t;const e=t.lastModifiedDate,s=t.name,i=Hm(Ph(t.name));return i.length&&(t=t.slice(0,t.size,i),t.name=s,t.lastModifiedDate=e),t},dw=t=>qm(t)&&(Tp(t)||{}).isDirectory,qm=t=>"webkitGetAsEntry"in t,Tp=t=>t.webkitGetAsEntry(),hw=t=>{let e=[];try{if(e=pw(t),e.length)return e;e=uw(t)}catch(s){}return e},uw=t=>{let e=t.getData("url");return typeof e=="string"&&e.length?[e]:[]},pw=t=>{let e=t.getData("text/html");if(typeof e=="string"&&e.length){const s=e.match(/src\s*=\s*"(.+?)"/);if(s)return[s[1]]}return[]},Fc=[],br=t=>({pageLeft:t.pageX,pageTop:t.pageY,scopeLeft:t.offsetX||t.layerX,scopeTop:t.offsetY||t.layerY}),fw=(t,e,s)=>{const i=mw(e),n={element:t,filterElement:s,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return n.destroy=i.addListener(n),n},mw=t=>{const e=Fc.find(i=>i.element===t);if(e)return e;const s=gw(t);return Fc.push(s),s},gw=t=>{const e=[],s={dragenter:bw,dragover:Iw,dragleave:ww,drop:_w},i={};Ct(s,(a,o)=>{i[a]=o(t,e),t.addEventListener(a,i[a],!1)});const n={element:t,addListener:a=>(e.push(a),()=>{e.splice(e.indexOf(a),1),e.length===0&&(Fc.splice(Fc.indexOf(n),1),Ct(s,o=>{t.removeEventListener(o,i[o],!1)}))})};return n},Ew=(t,e)=>("elementFromPoint"in t||(t=document),t.elementFromPoint(e.x,e.y)),vp=(t,e)=>{const s=tw(e),i=Ew(s,{x:t.pageX-window.pageXOffset,y:t.pageY-window.pageYOffset});return i===e||e.contains(i)};let Ym=null;const Kl=(t,e)=>{try{t.dropEffect=e}catch(s){}},bw=(t,e)=>s=>{s.preventDefault(),Ym=s.target,e.forEach(i=>{const{element:n,onenter:a}=i;vp(s,n)&&(i.state="enter",a(br(s)))})},Iw=(t,e)=>s=>{s.preventDefault();const i=s.dataTransfer;wp(i).then(n=>{let a=!1;e.some(o=>{const{filterElement:d,element:c,onenter:h,onexit:u,ondrag:p,allowdrop:g}=o;Kl(i,"copy");const m=g(n);if(!m){Kl(i,"none");return}if(vp(s,c)){if(a=!0,o.state===null){o.state="enter",h(br(s));return}if(o.state="over",d&&!m){Kl(i,"none");return}p(br(s))}else d&&!a&&Kl(i,"none"),o.state&&(o.state=null,u(br(s)))})})},_w=(t,e)=>s=>{s.preventDefault();const i=s.dataTransfer;wp(i).then(n=>{e.forEach(a=>{const{filterElement:o,element:d,ondrop:c,onexit:h,allowdrop:u}=a;if(a.state=null,!(o&&!vp(s,d))){if(!u(n))return h(br(s));c(br(s),n)}})})},ww=(t,e)=>s=>{Ym===s.target&&e.forEach(i=>{const{onexit:n}=i;i.state=null,n(br(s))})},Tw=(t,e,s)=>{t.classList.add("filepond--hopper");const{catchesDropsOnPage:i,requiresDropOnElement:n,filterItems:a=u=>u}=s,o=fw(t,i?document.documentElement:t,n);let d="",c="";o.allowdrop=u=>e(a(u)),o.ondrop=(u,p)=>{const g=a(p);if(!e(g)){h.ondragend(u);return}c="drag-drop",h.onload(g,u)},o.ondrag=u=>{h.ondrag(u)},o.onenter=u=>{c="drag-over",h.ondragstart(u)},o.onexit=u=>{c="drag-exit",h.ondragend(u)};const h={updateHopperState:()=>{d!==c&&(t.dataset.hopperState=c,d=c)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{o.destroy()}};return h};let nu=!1;const Vr=[],Xm=t=>{const e=document.activeElement;if(e&&/textarea|input/i.test(e.nodeName)){let s=!1,i=e;for(;i!==document.body;){if(i.classList.contains("filepond--root")){s=!0;break}i=i.parentNode}if(!s)return}wp(t.clipboardData).then(s=>{s.length&&Vr.forEach(i=>i(s))})},vw=t=>{Vr.includes(t)||(Vr.push(t),!nu&&(nu=!0,document.addEventListener("paste",Xm)))},xw=t=>{fp(Vr,Vr.indexOf(t)),Vr.length===0&&(document.removeEventListener("paste",Xm),nu=!1)},Sw=()=>{const t=s=>{e.onload(s)},e={destroy:()=>{xw(t)},onload:()=>{}};return vw(t),e},Rw=({root:t,props:e})=>{t.element.id=`filepond--assistant-${e.id}`,Gt(t.element,"role","status"),Gt(t.element,"aria-live","polite"),Gt(t.element,"aria-relevant","additions")};let If=null,_f=null;const Hh=[],Fh=(t,e)=>{t.element.textContent=e},Cw=t=>{t.element.textContent=""},Zm=(t,e,s)=>{const i=t.query("GET_TOTAL_ITEMS");Fh(t,`${s} ${e}, ${i} ${i===1?t.query("GET_LABEL_FILE_COUNT_SINGULAR"):t.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(_f),_f=setTimeout(()=>{Cw(t)},1500)},Qm=t=>t.element.parentNode.contains(document.activeElement),Ow=({root:t,action:e})=>{if(!Qm(t))return;t.element.textContent="";const s=t.query("GET_ITEM",e.id);Hh.push(s.filename),clearTimeout(If),If=setTimeout(()=>{Zm(t,Hh.join(", "),t.query("GET_LABEL_FILE_ADDED")),Hh.length=0},750)},yw=({root:t,action:e})=>{if(!Qm(t))return;const s=e.item;Zm(t,s.filename,t.query("GET_LABEL_FILE_REMOVED"))},Lw=({root:t,action:e})=>{const i=t.query("GET_ITEM",e.id).filename,n=t.query("GET_LABEL_FILE_PROCESSING_COMPLETE");Fh(t,`${i} ${n}`)},wf=({root:t,action:e})=>{const i=t.query("GET_ITEM",e.id).filename,n=t.query("GET_LABEL_FILE_PROCESSING_ABORTED");Fh(t,`${i} ${n}`)},tc=({root:t,action:e})=>{const i=t.query("GET_ITEM",e.id).filename;Fh(t,`${e.status.main} ${i} ${e.status.sub}`)},Aw=Bt({create:Rw,ignoreRect:!0,ignoreRectUpdate:!0,write:Be({DID_LOAD_ITEM:Ow,DID_REMOVE_ITEM:yw,DID_COMPLETE_ITEM_PROCESSING:Lw,DID_ABORT_ITEM_PROCESSING:wf,DID_REVERT_ITEM_PROCESSING:wf,DID_THROW_ITEM_REMOVE_ERROR:tc,DID_THROW_ITEM_LOAD_ERROR:tc,DID_THROW_ITEM_INVALID:tc,DID_THROW_ITEM_PROCESSING_ERROR:tc}),tag:"span",name:"assistant"}),Jm=(t,e="-")=>t.replace(new RegExp(`${e}.`,"g"),s=>s.charAt(1).toUpperCase()),Km=(t,e=16,s=!0)=>{let i=Date.now(),n=null;return(...a)=>{clearTimeout(n);const o=Date.now()-i,d=()=>{i=Date.now(),t(...a)};o<e?s||(n=setTimeout(d,e-o)):d()}},Mw=1e6,Gc=t=>t.preventDefault(),$w=({root:t,props:e})=>{const s=t.query("GET_ID");s&&(t.element.id=s);const i=t.query("GET_CLASS_NAME");i&&i.split(" ").filter(c=>c.length).forEach(c=>{t.element.classList.add(c)}),t.ref.label=t.appendChildView(t.createChildView(D_,A(_({},e),{translateY:null,caption:t.query("GET_LABEL_IDLE")}))),t.ref.list=t.appendChildView(t.createChildView(L_,{translateY:null})),t.ref.panel=t.appendChildView(t.createChildView(Gm,{name:"panel-root"})),t.ref.assistant=t.appendChildView(t.createChildView(Aw,_({},e))),t.ref.data=t.appendChildView(t.createChildView(K_,_({},e))),t.ref.measure=Yi("div"),t.ref.measure.style.height="100%",t.element.appendChild(t.ref.measure),t.ref.bounds=null,t.query("GET_STYLES").filter(c=>!qi(c.value)).map(({name:c,value:h})=>{t.element.dataset[c]=h}),t.ref.widthPrevious=null,t.ref.widthUpdated=Km(()=>{t.ref.updateHistory=[],t.dispatch("DID_RESIZE_ROOT")},250),t.ref.previousAspectRatio=null,t.ref.updateHistory=[];const n=window.matchMedia("(pointer: fine) and (hover: hover)").matches,a="PointerEvent"in window;t.query("GET_ALLOW_REORDER")&&a&&!n&&(t.element.addEventListener("touchmove",Gc,{passive:!1}),t.element.addEventListener("gesturestart",Gc));const o=t.query("GET_CREDITS");if(o.length===2){const c=document.createElement("a");c.className="filepond--credits",c.setAttribute("aria-hidden","true"),c.href=o[0],c.tabindex=-1,c.target="_blank",c.rel="noopener noreferrer",c.textContent=o[1],t.element.appendChild(c),t.ref.credits=c}},Nw=({root:t,props:e,actions:s})=>{if(Bw({root:t,props:e,actions:s}),s.filter(L=>/^DID_SET_STYLE_/.test(L.type)).filter(L=>!qi(L.data.value)).map(({type:L,data:P})=>{const y=Jm(L.substring(8).toLowerCase(),"_");t.element.dataset[y]=P.value,t.invalidateLayout()}),t.rect.element.hidden)return;t.rect.element.width!==t.ref.widthPrevious&&(t.ref.widthPrevious=t.rect.element.width,t.ref.widthUpdated());let i=t.ref.bounds;i||(i=t.ref.bounds=Fw(t),t.element.removeChild(t.ref.measure),t.ref.measure=null);const{hopper:n,label:a,list:o,panel:d}=t.ref;n&&n.updateHopperState();const c=t.query("GET_PANEL_ASPECT_RATIO"),h=t.query("GET_ALLOW_MULTIPLE"),u=t.query("GET_TOTAL_ITEMS"),p=h?t.query("GET_MAX_FILES")||Mw:1,g=u===p,m=s.find(L=>L.type==="DID_ADD_ITEM");if(g&&m){const L=m.data.interactionMethod;a.opacity=0,h?a.translateY=-40:L===Ls.API?a.translateX=40:L===Ls.BROWSE?a.translateY=40:a.translateY=30}else g||(a.opacity=1,a.translateX=0,a.translateY=0);const E=Pw(t),I=Dw(t),T=a.rect.element.height,C=!h||g?0:T,w=g?o.rect.element.marginTop:0,v=u===0?0:o.rect.element.marginBottom,S=C+w+I.visual+v,O=C+w+I.bounds+v;if(o.translateY=Math.max(0,C-o.rect.element.marginTop)-E.top,c){const L=t.rect.element.width,P=L*c;c!==t.ref.previousAspectRatio&&(t.ref.previousAspectRatio=c,t.ref.updateHistory=[]);const y=t.ref.updateHistory;y.push(L);const D=2;if(y.length>D*2){const k=y.length,B=k-10;let X=0;for(let N=k;N>=B;N--)if(y[N]===y[N-2]&&X++,X>=D)return}d.scalable=!1,d.height=P;const V=P-C-(v-E.bottom)-(g?w:0);I.visual>V?o.overflow=V:o.overflow=null,t.height=P}else if(i.fixedHeight){d.scalable=!1;const L=i.fixedHeight-C-(v-E.bottom)-(g?w:0);I.visual>L?o.overflow=L:o.overflow=null}else if(i.cappedHeight){const L=S>=i.cappedHeight,P=Math.min(i.cappedHeight,S);d.scalable=!0,d.height=L?P:P-E.top-E.bottom;const y=P-C-(v-E.bottom)-(g?w:0);S>i.cappedHeight&&I.visual>y?o.overflow=y:o.overflow=null,t.height=Math.min(i.cappedHeight,O-E.top-E.bottom)}else{const L=u>0?E.top+E.bottom:0;d.scalable=!0,d.height=Math.max(T,S-L),t.height=Math.max(T,O-L)}t.ref.credits&&d.heightCurrent&&(t.ref.credits.style.transform=`translateY(${d.heightCurrent}px)`)},Pw=t=>{const e=t.ref.list.childViews[0].childViews[0];return e?{top:e.rect.element.marginTop,bottom:e.rect.element.marginBottom}:{top:0,bottom:0}},Dw=t=>{let e=0,s=0;const i=t.ref.list,n=i.childViews[0],a=n.childViews.filter(w=>w.rect.element.height),o=t.query("GET_ACTIVE_ITEMS").map(w=>a.find(v=>v.id===w.id)).filter(w=>w);if(o.length===0)return{visual:e,bounds:s};const d=n.rect.element.width,c=Ip(n,o,i.dragCoordinates),h=o[0].rect.element,u=h.marginTop+h.marginBottom,p=h.marginLeft+h.marginRight,g=h.width+p,m=h.height+u,E=typeof c!="undefined"&&c>=0?1:0,I=o.find(w=>w.markedForRemoval&&w.opacity<.45)?-1:0,T=o.length+E+I,C=bp(d,g);return C===1?o.forEach(w=>{const v=w.rect.element.height+u;s+=v,e+=v*w.opacity}):(s=Math.ceil(T/C)*m,e=s),{visual:e,bounds:s}},Fw=t=>{const e=t.ref.measureHeight||null;return{cappedHeight:parseInt(t.style.maxHeight,10)||null,fixedHeight:e===0?null:e}},xp=(t,e)=>{const s=t.query("GET_ALLOW_REPLACE"),i=t.query("GET_ALLOW_MULTIPLE"),n=t.query("GET_TOTAL_ITEMS");let a=t.query("GET_MAX_FILES");const o=e.length;return!i&&o>1?(t.dispatch("DID_THROW_MAX_FILES",{source:e,error:Mt("warning",0,"Max files")}),!0):(a=i?a:1,!i&&s?!1:Va(a)&&n+o>a?(t.dispatch("DID_THROW_MAX_FILES",{source:e,error:Mt("warning",0,"Max files")}),!0):!1)},Gw=(t,e,s)=>{const i=t.childViews[0];return Ip(i,e,{left:s.scopeLeft-i.rect.element.left,top:s.scopeTop-(t.rect.outer.top+t.rect.element.marginTop+t.rect.element.scrollTop)})},Tf=t=>{const e=t.query("GET_ALLOW_DROP"),s=t.query("GET_DISABLED"),i=e&&!s;if(i&&!t.ref.hopper){const n=Tw(t.element,a=>{const o=t.query("GET_BEFORE_DROP_FILE")||(()=>!0);return t.query("GET_DROP_VALIDATION")?a.every(c=>Ir("ALLOW_HOPPER_ITEM",c,{query:t.query}).every(h=>h===!0)&&o(c)):!0},{filterItems:a=>{const o=t.query("GET_IGNORED_FILES");return a.filter(d=>ka(d)?!o.includes(d.name.toLowerCase()):!0)},catchesDropsOnPage:t.query("GET_DROP_ON_PAGE"),requiresDropOnElement:t.query("GET_DROP_ON_ELEMENT")});n.onload=(a,o)=>{const c=t.ref.list.childViews[0].childViews.filter(u=>u.rect.element.height),h=t.query("GET_ACTIVE_ITEMS").map(u=>c.find(p=>p.id===u.id)).filter(u=>u);Ws("ADD_ITEMS",a,{dispatch:t.dispatch}).then(u=>{if(xp(t,u))return!1;t.dispatch("ADD_ITEMS",{items:u,index:Gw(t.ref.list,h,o),interactionMethod:Ls.DROP})}),t.dispatch("DID_DROP",{position:o}),t.dispatch("DID_END_DRAG",{position:o})},n.ondragstart=a=>{t.dispatch("DID_START_DRAG",{position:a})},n.ondrag=Km(a=>{t.dispatch("DID_DRAG",{position:a})}),n.ondragend=a=>{t.dispatch("DID_END_DRAG",{position:a})},t.ref.hopper=n,t.ref.drip=t.appendChildView(t.createChildView(z_))}else!i&&t.ref.hopper&&(t.ref.hopper.destroy(),t.ref.hopper=null,t.removeChildView(t.ref.drip))},vf=(t,e)=>{const s=t.query("GET_ALLOW_BROWSE"),i=t.query("GET_DISABLED"),n=s&&!i;n&&!t.ref.browser?t.ref.browser=t.appendChildView(t.createChildView(N_,A(_({},e),{onload:a=>{Ws("ADD_ITEMS",a,{dispatch:t.dispatch}).then(o=>{if(xp(t,o))return!1;t.dispatch("ADD_ITEMS",{items:o,index:-1,interactionMethod:Ls.BROWSE})})}})),0):!n&&t.ref.browser&&(t.removeChildView(t.ref.browser),t.ref.browser=null)},xf=t=>{const e=t.query("GET_ALLOW_PASTE"),s=t.query("GET_DISABLED"),i=e&&!s;i&&!t.ref.paster?(t.ref.paster=Sw(),t.ref.paster.onload=n=>{Ws("ADD_ITEMS",n,{dispatch:t.dispatch}).then(a=>{if(xp(t,a))return!1;t.dispatch("ADD_ITEMS",{items:a,index:-1,interactionMethod:Ls.PASTE})})}):!i&&t.ref.paster&&(t.ref.paster.destroy(),t.ref.paster=null)},Bw=Be({DID_SET_ALLOW_BROWSE:({root:t,props:e})=>{vf(t,e)},DID_SET_ALLOW_DROP:({root:t})=>{Tf(t)},DID_SET_ALLOW_PASTE:({root:t})=>{xf(t)},DID_SET_DISABLED:({root:t,props:e})=>{Tf(t),xf(t),vf(t,e),t.query("GET_DISABLED")?t.element.dataset.disabled="disabled":t.element.removeAttribute("data-disabled")}}),kw=Bt({name:"root",read:({root:t})=>{t.ref.measure&&(t.ref.measureHeight=t.ref.measure.offsetHeight)},create:$w,write:Nw,destroy:({root:t})=>{t.ref.paster&&t.ref.paster.destroy(),t.ref.hopper&&t.ref.hopper.destroy(),t.element.removeEventListener("touchmove",Gc),t.element.removeEventListener("gesturestart",Gc)},mixins:{styles:["height"]}}),jw=(t={})=>{let e=null;const s=Dc(),i=nb(Vb(s),[oI,Hb(s)],[MI,Wb(s)]);i.dispatch("SET_OPTIONS",{options:t});const n=()=>{document.hidden||i.dispatch("KICK")};document.addEventListener("visibilitychange",n);let a=null,o=!1,d=!1,c=null,h=null;const u=()=>{o||(o=!0),clearTimeout(a),a=setTimeout(()=>{o=!1,c=null,h=null,d&&(d=!1,i.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",u);const p=kw(i,{id:pp()});let g=!1,m=!1;const E={_read:()=>{o&&(h=window.innerWidth,c||(c=h),!d&&h!==c&&(i.dispatch("DID_START_RESIZE"),d=!0)),m&&g&&(g=p.element.offsetParent===null),!g&&(p._read(),m=p.rect.element.hidden)},_write:F=>{const M=i.processActionQueue().filter(G=>!/^SET_/.test(G.type));g&&!M.length||(w(M),g=p._write(F,M,d),Xb(i.query("GET_ITEMS")),g&&i.processDispatchQueue())}},I=F=>M=>{const G={type:F};if(!M)return G;if(M.hasOwnProperty("error")&&(G.error=M.error?_({},M.error):null),M.status&&(G.status=_({},M.status)),M.file&&(G.output=M.file),M.source)G.file=M.source;else if(M.item||M.id){const U=M.item?M.item:i.query("GET_ITEM",M.id);G.file=U?Ye(U):null}return M.items&&(G.items=M.items.map(Ye)),/progress/.test(F)&&(G.progress=M.progress),M.hasOwnProperty("origin")&&M.hasOwnProperty("target")&&(G.origin=M.origin,G.target=M.target),G},T={DID_DESTROY:I("destroy"),DID_INIT:I("init"),DID_THROW_MAX_FILES:I("warning"),DID_INIT_ITEM:I("initfile"),DID_START_ITEM_LOAD:I("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:I("addfileprogress"),DID_LOAD_ITEM:I("addfile"),DID_THROW_ITEM_INVALID:[I("error"),I("addfile")],DID_THROW_ITEM_LOAD_ERROR:[I("error"),I("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[I("error"),I("removefile")],DID_PREPARE_OUTPUT:I("preparefile"),DID_START_ITEM_PROCESSING:I("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:I("processfileprogress"),DID_ABORT_ITEM_PROCESSING:I("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:I("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:I("processfiles"),DID_REVERT_ITEM_PROCESSING:I("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[I("error"),I("processfile")],DID_REMOVE_ITEM:I("removefile"),DID_UPDATE_ITEMS:I("updatefiles"),DID_ACTIVATE_ITEM:I("activatefile"),DID_REORDER_ITEMS:I("reorderfiles")},C=F=>{const M=_({pond:W},F);delete M.type,p.element.dispatchEvent(new CustomEvent(`FilePond:${F.type}`,{detail:M,bubbles:!0,cancelable:!0,composed:!0}));const G=[];F.hasOwnProperty("error")&&G.push(F.error),F.hasOwnProperty("file")&&G.push(F.file);const U=["type","error","file"];Object.keys(F).filter(Y=>!U.includes(Y)).forEach(Y=>G.push(F[Y])),W.fire(F.type,...G);const H=i.query(`GET_ON${F.type.toUpperCase()}`);H&&H(...G)},w=F=>{F.length&&F.filter(M=>T[M.type]).forEach(M=>{const G=T[M.type];(Array.isArray(G)?G:[G]).forEach(U=>{M.type==="DID_INIT_ITEM"?C(U(M.data)):setTimeout(()=>{C(U(M.data))},0)})})},v=F=>i.dispatch("SET_OPTIONS",{options:F}),S=F=>i.query("GET_ACTIVE_ITEM",F),O=F=>new Promise((M,G)=>{i.dispatch("REQUEST_ITEM_PREPARE",{query:F,success:U=>{M(U)},failure:U=>{G(U)}})}),L=(F,M={})=>new Promise((G,U)=>{D([{source:F,options:M}],{index:M.index}).then(H=>G(H&&H[0])).catch(U)}),P=F=>F.file&&F.id,y=(F,M)=>(typeof F=="object"&&!P(F)&&!M&&(M=F,F=void 0),i.dispatch("REMOVE_ITEM",A(_({},M),{query:F})),i.query("GET_ACTIVE_ITEM",F)===null),D=(...F)=>new Promise((M,G)=>{const U=[],H={};if(Ah(F[0]))U.push.apply(U,F[0]),Object.assign(H,F[1]||{});else{const Y=F[F.length-1];typeof Y=="object"&&!(Y instanceof Blob)&&Object.assign(H,F.pop()),U.push(...F)}i.dispatch("ADD_ITEMS",{items:U,index:H.index,interactionMethod:Ls.API,success:M,failure:G})}),V=()=>i.query("GET_ACTIVE_ITEMS"),k=F=>new Promise((M,G)=>{i.dispatch("REQUEST_ITEM_PROCESSING",{query:F,success:U=>{M(U)},failure:U=>{G(U)}})}),B=(...F)=>{const M=Array.isArray(F[0])?F[0]:F,G=M.length?M:V();return Promise.all(G.map(O))},X=(...F)=>{const M=Array.isArray(F[0])?F[0]:F;if(!M.length){const G=V().filter(U=>!(U.status===it.IDLE&&U.origin===Xt.LOCAL)&&U.status!==it.PROCESSING&&U.status!==it.PROCESSING_COMPLETE&&U.status!==it.PROCESSING_REVERT_ERROR);return Promise.all(G.map(k))}return Promise.all(M.map(k))},N=(...F)=>{const M=Array.isArray(F[0])?F[0]:F;let G;typeof M[M.length-1]=="object"?G=M.pop():Array.isArray(F[0])&&(G=F[1]);const U=V();return M.length?M.map(Y=>Hn(Y)?U[Y]?U[Y].id:null:Y).filter(Y=>Y).map(Y=>y(Y,G)):Promise.all(U.map(Y=>y(Y,G)))},W=A(_(_(_({},Nh()),E),zb(i,s)),{setOptions:v,addFile:L,addFiles:D,getFile:S,processFile:k,prepareFile:O,removeFile:y,moveFile:(F,M)=>i.dispatch("MOVE_ITEM",{query:F,index:M}),getFiles:V,processFiles:X,removeFiles:N,prepareFiles:B,sort:F=>i.dispatch("SORT",{compare:F}),browse:()=>{var F=p.element.querySelector("input[type=file]");F&&F.click()},destroy:()=>{W.fire("destroy",p.element),i.dispatch("ABORT_ALL"),p._destroy(),window.removeEventListener("resize",u),document.removeEventListener("visibilitychange",n),i.dispatch("DID_DESTROY")},insertBefore:F=>Hp(p.element,F),insertAfter:F=>qp(p.element,F),appendTo:F=>F.appendChild(p.element),replaceElement:F=>{Hp(p.element,F),F.parentNode.removeChild(F),e=F},restoreElement:()=>{e&&(qp(e,p.element),p.element.parentNode.removeChild(p.element),e=null)},isAttachedTo:F=>p.element===F||e===F,element:{get:()=>p.element},status:{get:()=>i.query("GET_STATUS")}});return i.dispatch("DID_INIT"),Ln(W)},tg=(t={})=>{const e={};return Ct(Dc(),(i,n)=>{e[i]=n[0]}),jw(_(_({},e),t))},Uw=t=>t.charAt(0).toLowerCase()+t.slice(1),Vw=t=>Jm(t.replace(/^data-/,"")),eg=(t,e)=>{Ct(e,(s,i)=>{Ct(t,(n,a)=>{const o=new RegExp(s);if(!o.test(n)||(delete t[n],i===!1))return;if(Ge(i)){t[i]=a;return}const c=i.group;ie(i)&&!t[c]&&(t[c]={}),t[c][Uw(n.replace(o,""))]=a}),i.mapping&&eg(t[i.group],i.mapping)})},zw=(t,e={})=>{const s=[];Ct(t.attributes,n=>{s.push(t.attributes[n])});const i=s.filter(n=>n.name).reduce((n,a)=>{const o=Gt(t,a.name);return n[Vw(a.name)]=o===a.name?!0:o,n},{});return eg(i,e),i},Ww=(t,e={})=>{const s={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};Ir("SET_ATTRIBUTE_TO_OPTION_MAP",s);const i=_({},e),n=zw(t.nodeName==="FIELDSET"?t.querySelector("input[type=file]"):t,s);Object.keys(n).forEach(o=>{ie(n[o])?(ie(i[o])||(i[o]={}),Object.assign(i[o],n[o])):i[o]=n[o]}),i.files=(e.files||[]).concat(Array.from(t.querySelectorAll("input:not([type=file])")).map(o=>({source:o.value,options:{type:o.dataset.type}})));const a=tg(i);return t.files&&Array.from(t.files).forEach(o=>{a.addFile(o)}),a.replaceElement(t),a},Hw=(...t)=>ib(t[0])?Ww(...t):tg(...t),qw=["fire","_read","_write"],Sf=t=>{const e={};return Tm(t,e,qw),e},Yw=(t,e)=>t.replace(/(?:{([a-zA-Z]+)})/g,(s,i)=>e[i]),Xw=t=>{const e=new Blob(["(",t.toString(),")()"],{type:"application/javascript"}),s=URL.createObjectURL(e),i=new Worker(s);return{transfer:(n,a)=>{},post:(n,a,o)=>{const d=pp();i.onmessage=c=>{c.data.id===d&&a(c.data.message)},i.postMessage({id:d,message:n},o)},terminate:()=>{i.terminate(),URL.revokeObjectURL(s)}}},Zw=t=>new Promise((e,s)=>{const i=new Image;i.onload=()=>{e(i)},i.onerror=n=>{s(n)},i.src=t}),sg=(t,e)=>{const s=t.slice(0,t.size,t.type);return s.lastModifiedDate=t.lastModifiedDate,s.name=e,s},Qw=t=>sg(t,t.name),Rf=[],Jw=t=>{if(Rf.includes(t))return;Rf.push(t);const e=t({addFilter:Qb,utils:{Type:z,forin:Ct,isString:Ge,isFile:ka,toNaturalFileSize:Pm,replaceInString:Yw,getExtensionFromFilename:Ph,getFilenameWithoutExtension:Mm,guesstimateMimeType:Hm,getFileFromBlob:Ba,getFilenameFromURL:Wl,createRoute:Be,createWorker:Xw,createView:Bt,createItemAPI:Ye,loadImage:Zw,copyFile:Qw,renameFile:sg,createBlob:ym,applyFilterChain:Ws,text:$t,getNumericAspectRatioFromString:Sm},views:{fileActionButton:Nm}});Jb(e.options)},Kw=()=>Object.prototype.toString.call(window.operamini)==="[object OperaMini]",tT=()=>"Promise"in window,eT=()=>"slice"in Blob.prototype,sT=()=>"URL"in window&&"createObjectURL"in window.URL,iT=()=>"visibilityState"in document,nT=()=>"performance"in window,rT=()=>"supports"in(window.CSS||{}),aT=()=>/MSIE|Trident/.test(window.navigator.userAgent),ru=(()=>{const t=gm()&&!Kw()&&iT()&&tT()&&eT()&&sT()&&nT()&&(rT()||aT());return()=>t})(),Zi={apps:[]},oT="filepond",_r=()=>{};let ig={},ng={},rg={},au={},hc=_r,uc=_r,ou=_r,lu=_r,cu=_r,du=_r,hu=_r;if(ru()){yb(()=>{Zi.apps.forEach(s=>s._read())},s=>{Zi.apps.forEach(i=>i._write(s))});const t=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:ru,create:hc,destroy:uc,parse:ou,find:lu,registerPlugin:cu,setOptions:hu}})),document.removeEventListener("DOMContentLoaded",t)};document.readyState!=="loading"?setTimeout(()=>t(),0):document.addEventListener("DOMContentLoaded",t);const e=()=>Ct(Dc(),(s,i)=>{au[s]=i[1]});ig=_({},Rm),rg=_({},Xt),ng=_({},it),au={},e(),hc=(...s)=>{const i=Hw(...s);return i.on("destroy",uc),Zi.apps.push(i),Sf(i)},uc=s=>{const i=Zi.apps.findIndex(n=>n.isAttachedTo(s));return i>=0?(Zi.apps.splice(i,1)[0].restoreElement(),!0):!1},ou=s=>Array.from(s.querySelectorAll(`.${oT}`)).filter(a=>!Zi.apps.find(o=>o.isAttachedTo(a))).map(a=>hc(a)),lu=s=>{const i=Zi.apps.find(n=>n.isAttachedTo(s));return i?Sf(i):null},cu=(...s)=>{s.forEach(Jw),e()},du=()=>{const s={};return Ct(Dc(),(i,n)=>{s[i]=n[0]}),s},hu=s=>(ie(s)&&(Zi.apps.forEach(i=>{i.setOptions(s)}),Kb(s)),du())}var Cf=Object.freeze({__proto__:null,get FileOrigin(){return rg},get FileStatus(){return ng},get OptionTypes(){return au},get Status(){return ig},get create(){return hc},get destroy(){return uc},get find(){return lu},get getOptions(){return du},get parse(){return ou},get registerPlugin(){return cu},get setOptions(){return hu},supported:ru});/*!
* FilePondPluginFileValidateSize 2.2.7
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit https://pqina.nl/filepond/ for details.
*/const ag=({addFilter:t,utils:e})=>{const{Type:s,replaceInString:i,toNaturalFileSize:n}=e;return t("ALLOW_HOPPER_ITEM",(a,{query:o})=>{if(!o("GET_ALLOW_FILE_SIZE_VALIDATION"))return!0;const d=o("GET_MAX_FILE_SIZE");if(d!==null&&a.size>d)return!1;const c=o("GET_MIN_FILE_SIZE");return!(c!==null&&a.size<c)}),t("LOAD_FILE",(a,{query:o})=>new Promise((d,c)=>{if(!o("GET_ALLOW_FILE_SIZE_VALIDATION"))return d(a);const h=o("GET_FILE_VALIDATE_SIZE_FILTER");if(h&&!h(a))return d(a);const u=o("GET_MAX_FILE_SIZE");if(u!==null&&a.size>u){c({status:{main:o("GET_LABEL_MAX_FILE_SIZE_EXCEEDED"),sub:i(o("GET_LABEL_MAX_FILE_SIZE"),{filesize:n(u,".",o("GET_FILE_SIZE_BASE"),o("GET_FILE_SIZE_LABELS",o))})}});return}const p=o("GET_MIN_FILE_SIZE");if(p!==null&&a.size<p){c({status:{main:o("GET_LABEL_MIN_FILE_SIZE_EXCEEDED"),sub:i(o("GET_LABEL_MIN_FILE_SIZE"),{filesize:n(p,".",o("GET_FILE_SIZE_BASE"),o("GET_FILE_SIZE_LABELS",o))})}});return}const g=o("GET_MAX_TOTAL_FILE_SIZE");if(g!==null&&o("GET_ACTIVE_ITEMS").reduce((E,I)=>E+I.fileSize,0)>g){c({status:{main:o("GET_LABEL_MAX_TOTAL_FILE_SIZE_EXCEEDED"),sub:i(o("GET_LABEL_MAX_TOTAL_FILE_SIZE"),{filesize:n(g,".",o("GET_FILE_SIZE_BASE"),o("GET_FILE_SIZE_LABELS",o))})}});return}d(a)})),{options:{allowFileSizeValidation:[!0,s.BOOLEAN],maxFileSize:[null,s.INT],minFileSize:[null,s.INT],maxTotalFileSize:[null,s.INT],fileValidateSizeFilter:[null,s.FUNCTION],labelMinFileSizeExceeded:["File is too small",s.STRING],labelMinFileSize:["Minimum file size is {filesize}",s.STRING],labelMaxFileSizeExceeded:["File is too large",s.STRING],labelMaxFileSize:["Maximum file size is {filesize}",s.STRING],labelMaxTotalFileSizeExceeded:["Maximum total size exceeded",s.STRING],labelMaxTotalFileSize:["Maximum total file size is {filesize}",s.STRING]}}},lT=typeof window!="undefined"&&typeof window.document!="undefined";lT&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:ag}));/*!
* FilePondPluginFileValidateType 1.2.8
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit https://pqina.nl/filepond/ for details.
*/const og=({addFilter:t,utils:e})=>{const{Type:s,isString:i,replaceInString:n,guesstimateMimeType:a,getExtensionFromFilename:o,getFilenameFromURL:d}=e,c=(m,E)=>{const I=(/^[^/]+/.exec(m)||[]).pop(),T=E.slice(0,-2);return I===T},h=(m,E)=>m.some(I=>/\*$/.test(I)?c(E,I):I===E),u=m=>{let E="";if(i(m)){const I=d(m),T=o(I);T&&(E=a(T))}else E=m.type;return E},p=(m,E,I)=>{if(E.length===0)return!0;const T=u(m);return I?new Promise((C,w)=>{I(m,T).then(v=>{h(E,v)?C():w()}).catch(w)}):h(E,T)},g=m=>E=>m[E]===null?!1:m[E]||E;return t("SET_ATTRIBUTE_TO_OPTION_MAP",m=>Object.assign(m,{accept:"acceptedFileTypes"})),t("ALLOW_HOPPER_ITEM",(m,{query:E})=>E("GET_ALLOW_FILE_TYPE_VALIDATION")?p(m,E("GET_ACCEPTED_FILE_TYPES")):!0),t("LOAD_FILE",(m,{query:E})=>new Promise((I,T)=>{if(!E("GET_ALLOW_FILE_TYPE_VALIDATION")){I(m);return}const C=E("GET_ACCEPTED_FILE_TYPES"),w=E("GET_FILE_VALIDATE_TYPE_DETECT_TYPE"),v=p(m,C,w),S=()=>{const O=C.map(g(E("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP"))).filter(P=>P!==!1),L=O.filter(function(P,y){return O.indexOf(P)===y});T({status:{main:E("GET_LABEL_FILE_TYPE_NOT_ALLOWED"),sub:n(E("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES"),{allTypes:L.join(", "),allButLastType:L.slice(0,-1).join(", "),lastType:L[O.length-1]})}})};if(typeof v=="boolean")return v?I(m):S();v.then(()=>{I(m)}).catch(S)})),{options:{allowFileTypeValidation:[!0,s.BOOLEAN],acceptedFileTypes:[[],s.ARRAY],labelFileTypeNotAllowed:["File is of invalid type",s.STRING],fileValidateTypeLabelExpectedTypes:["Expects {allButLastType} or {lastType}",s.STRING],fileValidateTypeLabelExpectedTypesMap:[{},s.OBJECT],fileValidateTypeDetectType:[null,s.FUNCTION]}}},cT=typeof window!="undefined"&&typeof window.document!="undefined";cT&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:og}));/*!
* FilePondPluginImageCrop 2.0.6
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit https://pqina.nl/filepond/ for details.
*/const Of=t=>/^image/.test(t.type),lg=({addFilter:t,utils:e})=>{const{Type:s,isFile:i,getNumericAspectRatioFromString:n}=e,a=(h,u)=>!(!Of(h.file)||!u("GET_ALLOW_IMAGE_CROP")),o=h=>typeof h=="object",d=h=>typeof h=="number",c=(h,u)=>h.setMetadata("crop",Object.assign({},h.getMetadata("crop"),u));return t("DID_CREATE_ITEM",(h,{query:u})=>{h.extend("setImageCrop",p=>{if(!(!a(h,u)||!o(center)))return h.setMetadata("crop",p),p}),h.extend("setImageCropCenter",p=>{if(!(!a(h,u)||!o(p)))return c(h,{center:p})}),h.extend("setImageCropZoom",p=>{if(!(!a(h,u)||!d(p)))return c(h,{zoom:Math.max(1,p)})}),h.extend("setImageCropRotation",p=>{if(!(!a(h,u)||!d(p)))return c(h,{rotation:p})}),h.extend("setImageCropFlip",p=>{if(!(!a(h,u)||!o(p)))return c(h,{flip:p})}),h.extend("setImageCropAspectRatio",p=>{if(!a(h,u)||typeof p=="undefined")return;const g=h.getMetadata("crop"),m=n(p),E={center:{x:.5,y:.5},flip:g?Object.assign({},g.flip):{horizontal:!1,vertical:!1},rotation:0,zoom:1,aspectRatio:m};return h.setMetadata("crop",E),E})}),t("DID_LOAD_ITEM",(h,{query:u})=>new Promise((p,g)=>{const m=h.file;if(!i(m)||!Of(m)||!u("GET_ALLOW_IMAGE_CROP")||h.getMetadata("crop"))return p(h);const I=u("GET_IMAGE_CROP_ASPECT_RATIO");h.setMetadata("crop",{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},rotation:0,zoom:1,aspectRatio:I?n(I):null}),p(h)})),{options:{allowImageCrop:[!0,s.BOOLEAN],imageCropAspectRatio:[null,s.STRING]}}},dT=typeof window!="undefined"&&typeof window.document!="undefined";dT&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:lg}));/*!
* FilePondPluginImagePreview 4.6.11
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit https://pqina.nl/filepond/ for details.
*/const hT=t=>/^image/.test(t.type),yf=(t,e)=>_o(t.x*e,t.y*e),Lf=(t,e)=>_o(t.x+e.x,t.y+e.y),uT=t=>{const e=Math.sqrt(t.x*t.x+t.y*t.y);return e===0?{x:0,y:0}:_o(t.x/e,t.y/e)},ec=(t,e,s)=>{const i=Math.cos(e),n=Math.sin(e),a=_o(t.x-s.x,t.y-s.y);return _o(s.x+i*a.x-n*a.y,s.y+n*a.x+i*a.y)},_o=(t=0,e=0)=>({x:t,y:e}),Xe=(t,e,s=1,i)=>{if(typeof t=="string")return parseFloat(t)*s;if(typeof t=="number")return t*(i?e[i]:Math.min(e.width,e.height))},pT=(t,e,s)=>{const i=t.borderStyle||t.lineStyle||"solid",n=t.backgroundColor||t.fontColor||"transparent",a=t.borderColor||t.lineColor||"transparent",o=Xe(t.borderWidth||t.lineWidth,e,s),d=t.lineCap||"round",c=t.lineJoin||"round",h=typeof i=="string"?"":i.map(p=>Xe(p,e,s)).join(","),u=t.opacity||1;return{"stroke-linecap":d,"stroke-linejoin":c,"stroke-width":o||0,"stroke-dasharray":h,stroke:a,fill:n,opacity:u}},hs=t=>t!=null,fT=(t,e,s=1)=>{let i=Xe(t.x,e,s,"width")||Xe(t.left,e,s,"width"),n=Xe(t.y,e,s,"height")||Xe(t.top,e,s,"height"),a=Xe(t.width,e,s,"width"),o=Xe(t.height,e,s,"height"),d=Xe(t.right,e,s,"width"),c=Xe(t.bottom,e,s,"height");return hs(n)||(hs(o)&&hs(c)?n=e.height-o-c:n=c),hs(i)||(hs(a)&&hs(d)?i=e.width-a-d:i=d),hs(a)||(hs(i)&&hs(d)?a=e.width-i-d:a=0),hs(o)||(hs(n)&&hs(c)?o=e.height-n-c:o=0),{x:i||0,y:n||0,width:a||0,height:o||0}},mT=t=>t.map((e,s)=>`${s===0?"M":"L"} ${e.x} ${e.y}`).join(" "),gi=(t,e)=>Object.keys(e).forEach(s=>t.setAttribute(s,e[s])),gT="http://www.w3.org/2000/svg",kr=(t,e)=>{const s=document.createElementNS(gT,t);return e&&gi(s,e),s},ET=t=>gi(t,_(_({},t.rect),t.styles)),bT=t=>{const e=t.rect.x+t.rect.width*.5,s=t.rect.y+t.rect.height*.5,i=t.rect.width*.5,n=t.rect.height*.5;return gi(t,_({cx:e,cy:s,rx:i,ry:n},t.styles))},IT={contain:"xMidYMid meet",cover:"xMidYMid slice"},_T=(t,e)=>{gi(t,A(_(_({},t.rect),t.styles),{preserveAspectRatio:IT[e.fit]||"none"}))},wT={left:"start",center:"middle",right:"end"},TT=(t,e,s,i)=>{const n=Xe(e.fontSize,s,i),a=e.fontFamily||"sans-serif",o=e.fontWeight||"normal",d=wT[e.textAlign]||"start";gi(t,A(_(_({},t.rect),t.styles),{"stroke-width":0,"font-weight":o,"font-size":n,"font-family":a,"text-anchor":d})),t.text!==e.text&&(t.text=e.text,t.textContent=e.text.length?e.text:" ")},vT=(t,e,s,i)=>{gi(t,A(_(_({},t.rect),t.styles),{fill:"none"}));const n=t.childNodes[0],a=t.childNodes[1],o=t.childNodes[2],d=t.rect,c={x:t.rect.x+t.rect.width,y:t.rect.y+t.rect.height};if(gi(n,{x1:d.x,y1:d.y,x2:c.x,y2:c.y}),!e.lineDecoration)return;a.style.display="none",o.style.display="none";const h=uT({x:c.x-d.x,y:c.y-d.y}),u=Xe(.05,s,i);if(e.lineDecoration.indexOf("arrow-begin")!==-1){const p=yf(h,u),g=Lf(d,p),m=ec(d,2,g),E=ec(d,-2,g);gi(a,{style:"display:block;",d:`M${m.x},${m.y} L${d.x},${d.y} L${E.x},${E.y}`})}if(e.lineDecoration.indexOf("arrow-end")!==-1){const p=yf(h,-u),g=Lf(c,p),m=ec(c,2,g),E=ec(c,-2,g);gi(o,{style:"display:block;",d:`M${m.x},${m.y} L${c.x},${c.y} L${E.x},${E.y}`})}},xT=(t,e,s,i)=>{gi(t,A(_({},t.styles),{fill:"none",d:mT(e.points.map(n=>({x:Xe(n.x,s,i,"width"),y:Xe(n.y,s,i,"height")})))}))},sc=t=>e=>kr(t,{id:e.id}),ST=t=>{const e=kr("image",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return e.onload=()=>{e.setAttribute("opacity",t.opacity||1)},e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.src),e},RT=t=>{const e=kr("g",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round"}),s=kr("line");e.appendChild(s);const i=kr("path");e.appendChild(i);const n=kr("path");return e.appendChild(n),e},CT={image:ST,rect:sc("rect"),ellipse:sc("ellipse"),text:sc("text"),path:sc("path"),line:RT},OT={rect:ET,ellipse:bT,image:_T,text:TT,path:xT,line:vT},yT=(t,e)=>CT[t](e),LT=(t,e,s,i,n)=>{e!=="path"&&(t.rect=fT(s,i,n)),t.styles=pT(s,i,n),OT[e](t,s,i,n)},AT=["x","y","left","top","right","bottom","width","height"],MT=t=>typeof t=="string"&&/%/.test(t)?parseFloat(t)/100:t,$T=t=>{const[e,s]=t,i=s.points?{}:AT.reduce((n,a)=>(n[a]=MT(s[a]),n),{});return[e,_(_({zIndex:0},s),i)]},NT=(t,e)=>t[1].zIndex>e[1].zIndex?1:t[1].zIndex<e[1].zIndex?-1:0,PT=t=>t.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:({root:e,props:s})=>{if(!s.dirty)return;const{crop:i,resize:n,markup:a}=s,o=s.width,d=s.height;let c=i.width,h=i.height;if(n){const{size:m}=n;let E=m&&m.width,I=m&&m.height;const T=n.mode,C=n.upscale;E&&!I&&(I=E),I&&!E&&(E=I);const w=c<E&&h<I;if(!w||w&&C){let v=E/c,S=I/h;if(T==="force")c=E,h=I;else{let O;T==="cover"?O=Math.max(v,S):T==="contain"&&(O=Math.min(v,S)),c=c*O,h=h*O}}}const u={width:o,height:d};e.element.setAttribute("width",u.width),e.element.setAttribute("height",u.height);const p=Math.min(o/c,d/h);e.element.innerHTML="";const g=e.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");a.filter(g).map($T).sort(NT).forEach(m=>{const[E,I]=m,T=yT(E,I);LT(T,E,I,u,p),e.element.appendChild(T)})}}),go=(t,e)=>({x:t,y:e}),DT=(t,e)=>t.x*e.x+t.y*e.y,Af=(t,e)=>go(t.x-e.x,t.y-e.y),FT=(t,e)=>DT(Af(t,e),Af(t,e)),Mf=(t,e)=>Math.sqrt(FT(t,e)),$f=(t,e)=>{const s=t,i=1.5707963267948966,n=e,a=1.5707963267948966-e,o=Math.sin(i),d=Math.sin(n),c=Math.sin(a),h=Math.cos(a),u=s/o,p=u*d,g=u*c;return go(h*p,h*g)},GT=(t,e)=>{const s=t.width,i=t.height,n=$f(s,e),a=$f(i,e),o=go(t.x+Math.abs(n.x),t.y-Math.abs(n.y)),d=go(t.x+t.width+Math.abs(a.y),t.y+Math.abs(a.x)),c=go(t.x-Math.abs(a.y),t.y+t.height-Math.abs(a.x));return{width:Mf(o,d),height:Mf(o,c)}},BT=(t,e,s=1)=>{const i=t.height/t.width;let n=1,a=e,o=1,d=i;d>a&&(d=a,o=d/i);const c=Math.max(n/o,a/d),h=t.width/(s*c*o),u=h*e;return{width:h,height:u}},cg=(t,e,s,i)=>{const n=i.x>.5?1-i.x:i.x,a=i.y>.5?1-i.y:i.y,o=n*2*t.width,d=a*2*t.height,c=GT(e,s);return Math.max(c.width/o,c.height/d)},dg=(t,e)=>{let s=t.width,i=s*e;i>t.height&&(i=t.height,s=i/e);const n=(t.width-s)*.5,a=(t.height-i)*.5;return{x:n,y:a,width:s,height:i}},kT=(t,e={})=>{let{zoom:s,rotation:i,center:n,aspectRatio:a}=e;a||(a=t.height/t.width);const o=BT(t,a,s),d={x:o.width*.5,y:o.height*.5},c={x:0,y:0,width:o.width,height:o.height,center:d},h=typeof e.scaleToFit=="undefined"||e.scaleToFit,u=cg(t,dg(c,a),i,h?n:{x:.5,y:.5}),p=s*u;return{widthFloat:o.width/p,heightFloat:o.height/p,width:Math.round(o.width/p),height:Math.round(o.height/p)}},ti={type:"spring",stiffness:.5,damping:.45,mass:10},jT=t=>t.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:({root:e,props:s})=>{e.appendChild(s.image)}}),UT=t=>t.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:ti,originY:ti,scaleX:ti,scaleY:ti,translateX:ti,translateY:ti,rotateZ:ti}},create:({root:e,props:s})=>{s.width=s.image.width,s.height=s.image.height,e.ref.bitmap=e.appendChildView(e.createChildView(jT(t),{image:s.image}))},write:({root:e,props:s})=>{const{flip:i}=s.crop,{bitmap:n}=e.ref;n.scaleX=i.horizontal?-1:1,n.scaleY=i.vertical?-1:1}}),VT=t=>t.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function({root:e,props:s}){s.background&&(e.element.style.backgroundColor=s.background)},create:({root:e,props:s})=>{e.ref.image=e.appendChildView(e.createChildView(UT(t),Object.assign({},s))),e.ref.createMarkup=()=>{e.ref.markup||(e.ref.markup=e.appendChildView(e.createChildView(PT(t),Object.assign({},s))))},e.ref.destroyMarkup=()=>{e.ref.markup&&(e.removeChildView(e.ref.markup),e.ref.markup=null)};const i=e.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");i!==null&&(i==="grid"?e.element.dataset.transparencyIndicator=i:e.element.dataset.transparencyIndicator="color")},write:({root:e,props:s,shouldOptimize:i})=>{const{crop:n,markup:a,resize:o,dirty:d,width:c,height:h}=s;e.ref.image.crop=n;const u={x:0,y:0,width:c,height:h,center:{x:c*.5,y:h*.5}},p={width:e.ref.image.width,height:e.ref.image.height},g={x:n.center.x*p.width,y:n.center.y*p.height},m={x:u.center.x-p.width*n.center.x,y:u.center.y-p.height*n.center.y},E=Math.PI*2+n.rotation%(Math.PI*2),I=n.aspectRatio||p.height/p.width,T=typeof n.scaleToFit=="undefined"||n.scaleToFit,C=cg(p,dg(u,I),E,T?n.center:{x:.5,y:.5}),w=n.zoom*C;a&&a.length?(e.ref.createMarkup(),e.ref.markup.width=c,e.ref.markup.height=h,e.ref.markup.resize=o,e.ref.markup.dirty=d,e.ref.markup.markup=a,e.ref.markup.crop=kT(p,n)):e.ref.markup&&e.ref.destroyMarkup();const v=e.ref.image;if(i){v.originX=null,v.originY=null,v.translateX=null,v.translateY=null,v.rotateZ=null,v.scaleX=null,v.scaleY=null;return}v.originX=g.x,v.originY=g.y,v.translateX=m.x,v.translateY=m.y,v.rotateZ=E,v.scaleX=w,v.scaleY=w}}),zT=t=>t.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:ti,scaleY:ti,translateY:ti,opacity:{type:"tween",duration:400}}},create:({root:e,props:s})=>{e.ref.clip=e.appendChildView(e.createChildView(VT(t),{id:s.id,image:s.image,crop:s.crop,markup:s.markup,resize:s.resize,dirty:s.dirty,background:s.background}))},write:({root:e,props:s,shouldOptimize:i})=>{const{clip:n}=e.ref,{image:a,crop:o,markup:d,resize:c,dirty:h}=s;if(n.crop=o,n.markup=d,n.resize=c,n.dirty=h,n.opacity=i?0:1,i||e.rect.element.hidden)return;const u=a.height/a.width;let p=o.aspectRatio||u;const g=e.rect.inner.width,m=e.rect.inner.height;let E=e.query("GET_IMAGE_PREVIEW_HEIGHT");const I=e.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),T=e.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),C=e.query("GET_PANEL_ASPECT_RATIO"),w=e.query("GET_ALLOW_MULTIPLE");C&&!w&&(E=g*C,p=C);let v=E!==null?E:Math.max(I,Math.min(g*p,T)),S=v/p;S>g&&(S=g,v=S*p),v>m&&(v=m,S=m/p),n.width=S,n.height=v}});let WT=`<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">
    <defs>
        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">
            <stop offset='50%' stop-color='#000000'/>
            <stop offset='56%' stop-color='#0a0a0a'/>
            <stop offset='63%' stop-color='#262626'/>
            <stop offset='69%' stop-color='#4f4f4f'/>
            <stop offset='75%' stop-color='#808080'/>
            <stop offset='81%' stop-color='#b1b1b1'/>
            <stop offset='88%' stop-color='#dadada'/>
            <stop offset='94%' stop-color='#f6f6f6'/>
            <stop offset='100%' stop-color='#ffffff'/>
        </radialGradient>
        <mask id="mask-__UID__">
            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>
        </mask>
    </defs>
    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>
</svg>`,Nf=0;const HT=t=>t.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:({root:e,props:s})=>{let i=WT;if(document.querySelector("base")){const n=new URL(window.location.href.replace(window.location.hash,"")).href;i=i.replace(/url\(\#/g,"url("+n+"#")}Nf++,e.element.classList.add(`filepond--image-preview-overlay-${s.status}`),e.element.innerHTML=i.replace(/__UID__/g,Nf)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}}),qT=function(){self.onmessage=t=>{createImageBitmap(t.data.message.file).then(e=>{self.postMessage({id:t.data.id,message:e},[e])})}},YT=function(){self.onmessage=t=>{const e=t.data.message.imageData,s=t.data.message.colorMatrix,i=e.data,n=i.length,a=s[0],o=s[1],d=s[2],c=s[3],h=s[4],u=s[5],p=s[6],g=s[7],m=s[8],E=s[9],I=s[10],T=s[11],C=s[12],w=s[13],v=s[14],S=s[15],O=s[16],L=s[17],P=s[18],y=s[19];let D=0,V=0,k=0,B=0,X=0;for(;D<n;D+=4)V=i[D]/255,k=i[D+1]/255,B=i[D+2]/255,X=i[D+3]/255,i[D]=Math.max(0,Math.min((V*a+k*o+B*d+X*c+h)*255,255)),i[D+1]=Math.max(0,Math.min((V*u+k*p+B*g+X*m+E)*255,255)),i[D+2]=Math.max(0,Math.min((V*I+k*T+B*C+X*w+v)*255,255)),i[D+3]=Math.max(0,Math.min((V*S+k*O+B*L+X*P+y)*255,255));self.postMessage({id:t.data.id,message:e},[e.data.buffer])}},XT=(t,e)=>{let s=new Image;s.onload=()=>{const i=s.naturalWidth,n=s.naturalHeight;s=null,e(i,n)},s.src=t},ZT={1:()=>[1,0,0,1,0,0],2:t=>[-1,0,0,1,t,0],3:(t,e)=>[-1,0,0,-1,t,e],4:(t,e)=>[1,0,0,-1,0,e],5:()=>[0,1,1,0,0,0],6:(t,e)=>[0,1,-1,0,e,0],7:(t,e)=>[0,-1,-1,0,e,t],8:t=>[0,-1,1,0,0,t]},QT=(t,e,s,i)=>{i!==-1&&t.transform.apply(t,ZT[i](e,s))},JT=(t,e,s,i)=>{e=Math.round(e),s=Math.round(s);const n=document.createElement("canvas");n.width=e,n.height=s;const a=n.getContext("2d");return i>=5&&i<=8&&([e,s]=[s,e]),QT(a,e,s,i),a.drawImage(t,0,0,e,s),n},hg=t=>/^image/.test(t.type)&&!/svg/.test(t.type),KT=10,tv=10,ev=t=>{const e=Math.min(KT/t.width,tv/t.height),s=document.createElement("canvas"),i=s.getContext("2d"),n=s.width=Math.ceil(t.width*e),a=s.height=Math.ceil(t.height*e);i.drawImage(t,0,0,n,a);let o=null;try{o=i.getImageData(0,0,n,a).data}catch(g){return null}const d=o.length;let c=0,h=0,u=0,p=0;for(;p<d;p+=4)c+=o[p]*o[p],h+=o[p+1]*o[p+1],u+=o[p+2]*o[p+2];return c=qh(c,d),h=qh(h,d),u=qh(u,d),{r:c,g:h,b:u}},qh=(t,e)=>Math.floor(Math.sqrt(t/(e/4))),sv=(t,e)=>(e=e||document.createElement("canvas"),e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e),iv=t=>{let e;try{e=new ImageData(t.width,t.height)}catch(s){e=document.createElement("canvas").getContext("2d").createImageData(t.width,t.height)}return e.data.set(new Uint8ClampedArray(t.data)),e},nv=t=>new Promise((e,s)=>{const i=new Image;i.crossOrigin="Anonymous",i.onload=()=>{e(i)},i.onerror=n=>{s(n)},i.src=t}),rv=t=>{const e=HT(t),s=zT(t),{createWorker:i}=t.utils,n=(w,v,S)=>new Promise(O=>{w.ref.imageData||(w.ref.imageData=S.getContext("2d").getImageData(0,0,S.width,S.height));const L=iv(w.ref.imageData);if(!v||v.length!==20)return S.getContext("2d").putImageData(L,0,0),O();const P=i(YT);P.post({imageData:L,colorMatrix:v},y=>{S.getContext("2d").putImageData(y,0,0),P.terminate(),O()},[L.data.buffer])}),a=(w,v)=>{w.removeChildView(v),v.image.width=1,v.image.height=1,v._destroy()},o=({root:w})=>{const v=w.ref.images.shift();return v.opacity=0,v.translateY=-15,w.ref.imageViewBin.push(v),v},d=({root:w,props:v,image:S})=>{const O=v.id,L=w.query("GET_ITEM",{id:O});if(!L)return;const P=L.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},y=w.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR");let D,V,k=!1;w.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(D=L.getMetadata("markup")||[],V=L.getMetadata("resize"),k=!0);const B=w.appendChildView(w.createChildView(s,{id:O,image:S,crop:P,resize:V,markup:D,dirty:k,background:y,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),w.childViews.length);w.ref.images.push(B),B.opacity=1,B.scaleX=1,B.scaleY=1,B.translateY=0,setTimeout(()=>{w.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:O})},250)},c=({root:w,props:v})=>{const S=w.query("GET_ITEM",{id:v.id});if(!S)return;const O=w.ref.images[w.ref.images.length-1];O.crop=S.getMetadata("crop"),O.background=w.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),w.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(O.dirty=!0,O.resize=S.getMetadata("resize"),O.markup=S.getMetadata("markup"))},h=({root:w,props:v,action:S})=>{if(!/crop|filter|markup|resize/.test(S.change.key)||!w.ref.images.length)return;const O=w.query("GET_ITEM",{id:v.id});if(O){if(/filter/.test(S.change.key)){const L=w.ref.images[w.ref.images.length-1];n(w,S.change.value,L.image);return}if(/crop|markup|resize/.test(S.change.key)){const L=O.getMetadata("crop"),P=w.ref.images[w.ref.images.length-1];if(L&&L.aspectRatio&&P.crop&&P.crop.aspectRatio&&Math.abs(L.aspectRatio-P.crop.aspectRatio)>1e-5){const y=o({root:w});d({root:w,props:v,image:sv(y.image)})}else c({root:w,props:v})}}},u=w=>{const S=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./);return(S?parseInt(S[1]):null)<=58?!1:"createImageBitmap"in window&&hg(w)},p=({root:w,props:v})=>{const{id:S}=v,O=w.query("GET_ITEM",S);if(!O)return;const L=URL.createObjectURL(O.file);XT(L,(P,y)=>{w.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:S,width:P,height:y})})},g=({root:w,props:v})=>{const{id:S}=v,O=w.query("GET_ITEM",S);if(!O)return;const L=URL.createObjectURL(O.file),P=()=>{nv(L).then(y)},y=D=>{URL.revokeObjectURL(L);const k=(O.getMetadata("exif")||{}).orientation||-1;let{width:B,height:X}=D;if(!B||!X)return;k>=5&&k<=8&&([B,X]=[X,B]);const N=Math.max(1,window.devicePixelRatio*.75),F=w.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*N,M=X/B,G=w.rect.element.width,U=w.rect.element.height;let H=G,Y=H*M;M>1?(H=Math.min(B,G*F),Y=H*M):(Y=Math.min(X,U*F),H=Y/M);const at=JT(D,H,Y,k),ot=()=>{const Et=w.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?ev(data):null;O.setMetadata("color",Et,!0),"close"in D&&D.close(),w.ref.overlayShadow.opacity=1,d({root:w,props:v,image:at})},lt=O.getMetadata("filter");lt?n(w,lt,at).then(ot):ot()};if(u(O.file)){const D=i(qT);D.post({file:O.file},V=>{if(D.terminate(),!V){P();return}y(V)})}else P()},m=({root:w})=>{const v=w.ref.images[w.ref.images.length-1];v.translateY=0,v.scaleX=1,v.scaleY=1,v.opacity=1},E=({root:w})=>{w.ref.overlayShadow.opacity=1,w.ref.overlayError.opacity=0,w.ref.overlaySuccess.opacity=0},I=({root:w})=>{w.ref.overlayShadow.opacity=.25,w.ref.overlayError.opacity=1},T=({root:w})=>{w.ref.overlayShadow.opacity=.25,w.ref.overlaySuccess.opacity=1},C=({root:w})=>{w.ref.images=[],w.ref.imageData=null,w.ref.imageViewBin=[],w.ref.overlayShadow=w.appendChildView(w.createChildView(e,{opacity:0,status:"idle"})),w.ref.overlaySuccess=w.appendChildView(w.createChildView(e,{opacity:0,status:"success"})),w.ref.overlayError=w.appendChildView(w.createChildView(e,{opacity:0,status:"failure"}))};return t.utils.createView({name:"image-preview-wrapper",create:C,styles:["height"],apis:["height"],destroy:({root:w})=>{w.ref.images.forEach(v=>{v.image.width=1,v.image.height=1})},didWriteView:({root:w})=>{w.ref.images.forEach(v=>{v.dirty=!1})},write:t.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:m,DID_IMAGE_PREVIEW_CONTAINER_CREATE:p,DID_FINISH_CALCULATE_PREVIEWSIZE:g,DID_UPDATE_ITEM_METADATA:h,DID_THROW_ITEM_LOAD_ERROR:I,DID_THROW_ITEM_PROCESSING_ERROR:I,DID_THROW_ITEM_INVALID:I,DID_COMPLETE_ITEM_PROCESSING:T,DID_START_ITEM_PROCESSING:E,DID_REVERT_ITEM_PROCESSING:E},({root:w})=>{const v=w.ref.imageViewBin.filter(S=>S.opacity===0);w.ref.imageViewBin=w.ref.imageViewBin.filter(S=>S.opacity>0),v.forEach(S=>a(w,S)),v.length=0})})},ug=t=>{const{addFilter:e,utils:s}=t,{Type:i,createRoute:n,isFile:a}=s,o=rv(t);return e("CREATE_VIEW",d=>{const{is:c,view:h,query:u}=d;if(!c("file")||!u("GET_ALLOW_IMAGE_PREVIEW"))return;const p=({root:T,props:C})=>{const{id:w}=C,v=u("GET_ITEM",w);if(!v||!a(v.file)||v.archived)return;const S=v.file;if(!hT(S)||!u("GET_IMAGE_PREVIEW_FILTER_ITEM")(v))return;const O="createImageBitmap"in(window||{}),L=u("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!O&&L&&S.size>L)return;T.ref.imagePreview=h.appendChildView(h.createChildView(o,{id:w}));const P=T.query("GET_IMAGE_PREVIEW_HEIGHT");P&&T.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:v.id,height:P});const y=!O&&S.size>u("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");T.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:w},y)},g=(T,C)=>{if(!T.ref.imagePreview)return;let{id:w}=C;const v=T.query("GET_ITEM",{id:w});if(!v)return;const S=T.query("GET_PANEL_ASPECT_RATIO"),O=T.query("GET_ITEM_PANEL_ASPECT_RATIO"),L=T.query("GET_IMAGE_PREVIEW_HEIGHT");if(S||O||L)return;let{imageWidth:P,imageHeight:y}=T.ref;if(!P||!y)return;const D=T.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),V=T.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),B=(v.getMetadata("exif")||{}).orientation||-1;if(B>=5&&B<=8&&([P,y]=[y,P]),!hg(v.file)||T.query("GET_IMAGE_PREVIEW_UPSCALE")){const G=2048/P;P*=G,y*=G}const X=y/P,N=(v.getMetadata("crop")||{}).aspectRatio||X;let W=Math.max(D,Math.min(y,V));const F=T.rect.element.width,M=Math.min(F*N,W);T.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:v.id,height:M})},m=({root:T})=>{T.ref.shouldRescale=!0},E=({root:T,action:C})=>{C.change.key==="crop"&&(T.ref.shouldRescale=!0)},I=({root:T,action:C})=>{T.ref.imageWidth=C.width,T.ref.imageHeight=C.height,T.ref.shouldRescale=!0,T.ref.shouldDrawPreview=!0,T.dispatch("KICK")};h.registerWriter(n({DID_RESIZE_ROOT:m,DID_STOP_RESIZE:m,DID_LOAD_ITEM:p,DID_IMAGE_PREVIEW_CALCULATE_SIZE:I,DID_UPDATE_ITEM_METADATA:E},({root:T,props:C})=>{T.ref.imagePreview&&(T.rect.element.hidden||(T.ref.shouldRescale&&(g(T,C),T.ref.shouldRescale=!1),T.ref.shouldDrawPreview&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{T.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:C.id})})}),T.ref.shouldDrawPreview=!1)))}))}),{options:{allowImagePreview:[!0,i.BOOLEAN],imagePreviewFilterItem:[()=>!0,i.FUNCTION],imagePreviewHeight:[null,i.INT],imagePreviewMinHeight:[44,i.INT],imagePreviewMaxHeight:[256,i.INT],imagePreviewMaxFileSize:[null,i.INT],imagePreviewZoomFactor:[2,i.INT],imagePreviewUpscale:[!1,i.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,i.INT],imagePreviewTransparencyIndicator:[null,i.STRING],imagePreviewCalculateAverageImageColor:[!1,i.BOOLEAN],imagePreviewMarkupShow:[!0,i.BOOLEAN],imagePreviewMarkupFilter:[()=>!0,i.FUNCTION]}}},av=typeof window!="undefined"&&typeof window.document!="undefined";av&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:ug}));/*!
* FilePondPluginImageResize 2.0.10
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit https://pqina.nl/filepond/ for details.
*/const ov=t=>/^image/.test(t.type),lv=(t,e)=>{let s=new Image;s.onload=()=>{const i=s.naturalWidth,n=s.naturalHeight;s=null,e({width:i,height:n})},s.onerror=()=>e(null),s.src=t},pg=({addFilter:t,utils:e})=>{const{Type:s}=e;return t("DID_LOAD_ITEM",(i,{query:n})=>new Promise((a,o)=>{const d=i.file;if(!ov(d)||!n("GET_ALLOW_IMAGE_RESIZE"))return a(i);const c=n("GET_IMAGE_RESIZE_MODE"),h=n("GET_IMAGE_RESIZE_TARGET_WIDTH"),u=n("GET_IMAGE_RESIZE_TARGET_HEIGHT"),p=n("GET_IMAGE_RESIZE_UPSCALE");if(h===null&&u===null)return a(i);const g=h===null?u:h,m=u===null?g:u,E=URL.createObjectURL(d);lv(E,I=>{if(URL.revokeObjectURL(E),!I)return a(i);let{width:T,height:C}=I;const w=(i.getMetadata("exif")||{}).orientation||-1;if(w>=5&&w<=8&&([T,C]=[C,T]),T===g&&C===m)return a(i);if(!p){if(c==="cover"){if(T<=g||C<=m)return a(i)}else if(T<=g&&C<=g)return a(i)}i.setMetadata("resize",{mode:c,upscale:p,size:{width:g,height:m}}),a(i)})})),{options:{allowImageResize:[!0,s.BOOLEAN],imageResizeMode:["cover",s.STRING],imageResizeUpscale:[!0,s.BOOLEAN],imageResizeTargetWidth:[null,s.INT],imageResizeTargetHeight:[null,s.INT]}}},cv=typeof window!="undefined"&&typeof window.document!="undefined";cv&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:pg}));/*!
* FilePondPluginImageTransform 3.8.7
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit https://pqina.nl/filepond/ for details.
*/const dv=t=>/^image/.test(t.type),hv=t=>t.substr(0,t.lastIndexOf("."))||t,uv={jpeg:"jpg","svg+xml":"svg"},pv=(t,e)=>{const s=hv(t),i=e.split("/")[1],n=uv[i]||i;return`${s}.${n}`},fv=t=>/jpeg|png|svg\+xml/.test(t)?t:"image/jpeg",mv=t=>/^image/.test(t.type),gv={1:()=>[1,0,0,1,0,0],2:t=>[-1,0,0,1,t,0],3:(t,e)=>[-1,0,0,-1,t,e],4:(t,e)=>[1,0,0,-1,0,e],5:()=>[0,1,1,0,0,0],6:(t,e)=>[0,1,-1,0,e,0],7:(t,e)=>[0,-1,-1,0,e,t],8:t=>[0,-1,1,0,0,t]},Ev=(t,e,s)=>(s===-1&&(s=1),gv[s](t,e)),Eo=(t,e)=>({x:t,y:e}),bv=(t,e)=>t.x*e.x+t.y*e.y,Pf=(t,e)=>Eo(t.x-e.x,t.y-e.y),Iv=(t,e)=>bv(Pf(t,e),Pf(t,e)),Df=(t,e)=>Math.sqrt(Iv(t,e)),Ff=(t,e)=>{const s=t,i=1.5707963267948966,n=e,a=1.5707963267948966-e,o=Math.sin(i),d=Math.sin(n),c=Math.sin(a),h=Math.cos(a),u=s/o,p=u*d,g=u*c;return Eo(h*p,h*g)},_v=(t,e)=>{const s=t.width,i=t.height,n=Ff(s,e),a=Ff(i,e),o=Eo(t.x+Math.abs(n.x),t.y-Math.abs(n.y)),d=Eo(t.x+t.width+Math.abs(a.y),t.y+Math.abs(a.x)),c=Eo(t.x-Math.abs(a.y),t.y+t.height-Math.abs(a.x));return{width:Df(o,d),height:Df(o,c)}},fg=(t,e,s=0,i={x:.5,y:.5})=>{const n=i.x>.5?1-i.x:i.x,a=i.y>.5?1-i.y:i.y,o=n*2*t.width,d=a*2*t.height,c=_v(e,s);return Math.max(c.width/o,c.height/d)},mg=(t,e)=>{let s=t.width,i=s*e;i>t.height&&(i=t.height,s=i/e);const n=(t.width-s)*.5,a=(t.height-i)*.5;return{x:n,y:a,width:s,height:i}},Gf=(t,e,s=1)=>{const i=t.height/t.width;let n=1,a=e,o=1,d=i;d>a&&(d=a,o=d/i);const c=Math.max(n/o,a/d),h=t.width/(s*c*o),u=h*e;return{width:h,height:u}},gg=t=>{t.width=1,t.height=1,t.getContext("2d").clearRect(0,0,1,1)},Bf=t=>t&&(t.horizontal||t.vertical),wv=(t,e,s)=>{if(e<=1&&!Bf(s))return t.width=t.naturalWidth,t.height=t.naturalHeight,t;const i=document.createElement("canvas"),n=t.naturalWidth,a=t.naturalHeight,o=e>=5&&e<=8;o?(i.width=a,i.height=n):(i.width=n,i.height=a);const d=i.getContext("2d");if(e&&d.transform.apply(d,Ev(n,a,e)),Bf(s)){const c=[1,0,0,1,0,0];(!o&&s.horizontal||o&s.vertical)&&(c[0]=-1,c[4]=n),(!o&&s.vertical||o&&s.horizontal)&&(c[3]=-1,c[5]=a),d.transform(...c)}return d.drawImage(t,0,0,n,a),i},Tv=(t,e,s={},i={})=>{const{canvasMemoryLimit:n,background:a=null}=i,o=s.zoom||1,d=wv(t,e,s.flip),c={width:d.width,height:d.height},h=s.aspectRatio||c.height/c.width;let u=Gf(c,h,o);if(n){const v=u.width*u.height;if(v>n){const S=Math.sqrt(n)/Math.sqrt(v);c.width=Math.floor(c.width*S),c.height=Math.floor(c.height*S),u=Gf(c,h,o)}}const p=document.createElement("canvas"),g={x:u.width*.5,y:u.height*.5},m={x:0,y:0,width:u.width,height:u.height,center:g},E=typeof s.scaleToFit=="undefined"||s.scaleToFit,I=o*fg(c,mg(m,h),s.rotation,E?s.center:{x:.5,y:.5});p.width=Math.round(u.width/I),p.height=Math.round(u.height/I),g.x/=I,g.y/=I;const T={x:g.x-c.width*(s.center?s.center.x:.5),y:g.y-c.height*(s.center?s.center.y:.5)},C=p.getContext("2d");a&&(C.fillStyle=a,C.fillRect(0,0,p.width,p.height)),C.translate(g.x,g.y),C.rotate(s.rotation||0),C.drawImage(d,T.x-g.x,T.y-g.y,c.width,c.height);const w=C.getImageData(0,0,p.width,p.height);return gg(p),w},vv=(()=>typeof window!="undefined"&&typeof window.document!="undefined")();vv&&(HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,s){var i=this.toDataURL(e,s).split(",")[1];setTimeout(function(){for(var n=atob(i),a=n.length,o=new Uint8Array(a),d=0;d<a;d++)o[d]=n.charCodeAt(d);t(new Blob([o],{type:e||"image/png"}))})}}));const xv=(t,e,s=null)=>new Promise(i=>{const n=s?s(t):t;Promise.resolve(n).then(a=>{a.toBlob(i,e.type,e.quality)})}),Bc=(t,e)=>wo(t.x*e,t.y*e),kc=(t,e)=>wo(t.x+e.x,t.y+e.y),Eg=t=>{const e=Math.sqrt(t.x*t.x+t.y*t.y);return e===0?{x:0,y:0}:wo(t.x/e,t.y/e)},yn=(t,e,s)=>{const i=Math.cos(e),n=Math.sin(e),a=wo(t.x-s.x,t.y-s.y);return wo(s.x+i*a.x-n*a.y,s.y+n*a.x+i*a.y)},wo=(t=0,e=0)=>({x:t,y:e}),pe=(t,e,s=1,i)=>{if(typeof t=="string")return parseFloat(t)*s;if(typeof t=="number")return t*(i?e[i]:Math.min(e.width,e.height))},wr=(t,e,s)=>{const i=t.borderStyle||t.lineStyle||"solid",n=t.backgroundColor||t.fontColor||"transparent",a=t.borderColor||t.lineColor||"transparent",o=pe(t.borderWidth||t.lineWidth,e,s),d=t.lineCap||"round",c=t.lineJoin||"round",h=typeof i=="string"?"":i.map(p=>pe(p,e,s)).join(","),u=t.opacity||1;return{"stroke-linecap":d,"stroke-linejoin":c,"stroke-width":o||0,"stroke-dasharray":h,stroke:a,fill:n,opacity:u}},us=t=>t!=null,za=(t,e,s=1)=>{let i=pe(t.x,e,s,"width")||pe(t.left,e,s,"width"),n=pe(t.y,e,s,"height")||pe(t.top,e,s,"height"),a=pe(t.width,e,s,"width"),o=pe(t.height,e,s,"height"),d=pe(t.right,e,s,"width"),c=pe(t.bottom,e,s,"height");return us(n)||(us(o)&&us(c)?n=e.height-o-c:n=c),us(i)||(us(a)&&us(d)?i=e.width-a-d:i=d),us(a)||(us(i)&&us(d)?a=e.width-i-d:a=0),us(o)||(us(n)&&us(c)?o=e.height-n-c:o=0),{x:i||0,y:n||0,width:a||0,height:o||0}},Sv=t=>t.map((e,s)=>`${s===0?"M":"L"} ${e.x} ${e.y}`).join(" "),Ei=(t,e)=>Object.keys(e).forEach(s=>t.setAttribute(s,e[s])),Rv="http://www.w3.org/2000/svg",jr=(t,e)=>{const s=document.createElementNS(Rv,t);return e&&Ei(s,e),s},Cv=t=>Ei(t,_(_({},t.rect),t.styles)),Ov=t=>{const e=t.rect.x+t.rect.width*.5,s=t.rect.y+t.rect.height*.5,i=t.rect.width*.5,n=t.rect.height*.5;return Ei(t,_({cx:e,cy:s,rx:i,ry:n},t.styles))},yv={contain:"xMidYMid meet",cover:"xMidYMid slice"},Lv=(t,e)=>{Ei(t,A(_(_({},t.rect),t.styles),{preserveAspectRatio:yv[e.fit]||"none"}))},Av={left:"start",center:"middle",right:"end"},Mv=(t,e,s,i)=>{const n=pe(e.fontSize,s,i),a=e.fontFamily||"sans-serif",o=e.fontWeight||"normal",d=Av[e.textAlign]||"start";Ei(t,A(_(_({},t.rect),t.styles),{"stroke-width":0,"font-weight":o,"font-size":n,"font-family":a,"text-anchor":d})),t.text!==e.text&&(t.text=e.text,t.textContent=e.text.length?e.text:" ")},$v=(t,e,s,i)=>{Ei(t,A(_(_({},t.rect),t.styles),{fill:"none"}));const n=t.childNodes[0],a=t.childNodes[1],o=t.childNodes[2],d=t.rect,c={x:t.rect.x+t.rect.width,y:t.rect.y+t.rect.height};if(Ei(n,{x1:d.x,y1:d.y,x2:c.x,y2:c.y}),!e.lineDecoration)return;a.style.display="none",o.style.display="none";const h=Eg({x:c.x-d.x,y:c.y-d.y}),u=pe(.05,s,i);if(e.lineDecoration.indexOf("arrow-begin")!==-1){const p=Bc(h,u),g=kc(d,p),m=yn(d,2,g),E=yn(d,-2,g);Ei(a,{style:"display:block;",d:`M${m.x},${m.y} L${d.x},${d.y} L${E.x},${E.y}`})}if(e.lineDecoration.indexOf("arrow-end")!==-1){const p=Bc(h,-u),g=kc(c,p),m=yn(c,2,g),E=yn(c,-2,g);Ei(o,{style:"display:block;",d:`M${m.x},${m.y} L${c.x},${c.y} L${E.x},${E.y}`})}},Nv=(t,e,s,i)=>{Ei(t,A(_({},t.styles),{fill:"none",d:Sv(e.points.map(n=>({x:pe(n.x,s,i,"width"),y:pe(n.y,s,i,"height")})))}))},ic=t=>e=>jr(t,{id:e.id}),Pv=t=>{const e=jr("image",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return e.onload=()=>{e.setAttribute("opacity",t.opacity||1)},e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.src),e},Dv=t=>{const e=jr("g",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round"}),s=jr("line");e.appendChild(s);const i=jr("path");e.appendChild(i);const n=jr("path");return e.appendChild(n),e},Fv={image:Pv,rect:ic("rect"),ellipse:ic("ellipse"),text:ic("text"),path:ic("path"),line:Dv},Gv={rect:Cv,ellipse:Ov,image:Lv,text:Mv,path:Nv,line:$v},Bv=(t,e)=>Fv[t](e),kv=(t,e,s,i,n)=>{e!=="path"&&(t.rect=za(s,i,n)),t.styles=wr(s,i,n),Gv[e](t,s,i,n)},bg=(t,e)=>t[1].zIndex>e[1].zIndex?1:t[1].zIndex<e[1].zIndex?-1:0,jv=(t,e={},s,i)=>new Promise(n=>{const{background:a=null}=i,o=new FileReader;o.onloadend=()=>{const d=o.result,c=document.createElement("div");c.style.cssText="position:absolute;pointer-events:none;width:0;height:0;visibility:hidden;",c.innerHTML=d;const h=c.querySelector("svg");document.body.appendChild(c);const u=h.getBBox();c.parentNode.removeChild(c);const p=c.querySelector("title"),g=h.getAttribute("viewBox")||"",m=h.getAttribute("width")||"",E=h.getAttribute("height")||"";let I=parseFloat(m)||null,T=parseFloat(E)||null;const C=(m.match(/[a-z]+/)||[])[0]||"",w=(E.match(/[a-z]+/)||[])[0]||"",v=g.split(" ").map(parseFloat),S=v.length?{x:v[0],y:v[1],width:v[2],height:v[3]}:u;let O=I!=null?I:S.width,L=T!=null?T:S.height;h.style.overflow="visible",h.setAttribute("width",O),h.setAttribute("height",L);let P="";if(s&&s.length){const lt={width:O,height:L};P=s.sort(bg).reduce((Et,Q)=>{const st=Bv(Q[0],Q[1]);return kv(st,Q[0],Q[1],lt),st.removeAttribute("id"),st.getAttribute("opacity")===1&&st.removeAttribute("opacity"),Et+`
`+st.outerHTML+`
`},""),P=`

<g>${P.replace(/&nbsp;/g," ")}</g>

`}const y=e.aspectRatio||L/O,D=O,V=D*y,k=typeof e.scaleToFit=="undefined"||e.scaleToFit,B=e.center?e.center.x:.5,X=e.center?e.center.y:.5,N=fg({width:O,height:L},mg({width:D,height:V},y),e.rotation,k?{x:B,y:X}:{x:.5,y:.5}),W=e.zoom*N,F=e.rotation*(180/Math.PI),M={x:D*.5,y:V*.5},G={x:M.x-O*B,y:M.y-L*X},U=[`rotate(${F} ${M.x} ${M.y})`,`translate(${M.x} ${M.y})`,`scale(${W})`,`translate(${-M.x} ${-M.y})`,`translate(${G.x} ${G.y})`],H=e.flip&&e.flip.horizontal,Y=e.flip&&e.flip.vertical,at=[`scale(${H?-1:1} ${Y?-1:1})`,`translate(${H?-O:0} ${Y?-L:0})`],ot=`<?xml version="1.0" encoding="UTF-8"?>
<svg width="${D}${C}" height="${V}${w}" 
viewBox="0 0 ${D} ${V}" ${a?'style="background:'+a+'" ':""}
preserveAspectRatio="xMinYMin"
xmlns:xlink="http://www.w3.org/1999/xlink"
xmlns="http://www.w3.org/2000/svg">
<!-- Generated by PQINA - https://pqina.nl/ -->
<title>${p?p.textContent:""}</title>
<g transform="${U.join(" ")}">
<g transform="${at.join(" ")}">
${h.outerHTML}${P}
</g>
</g>
</svg>`;n(ot)},o.readAsText(t)}),Uv=t=>{let e;try{e=new ImageData(t.width,t.height)}catch(s){e=document.createElement("canvas").getContext("2d").createImageData(t.width,t.height)}return e.data.set(t.data),e},Vv=()=>{const t={resize:u,filter:h},e=(p,g)=>(p.forEach(m=>{g=t[m.type](g,m.data)}),g),s=(p,g)=>{let m=p.transforms,E=null;if(m.forEach(I=>{I.type==="filter"&&(E=I)}),E){let I=null;m.forEach(T=>{T.type==="resize"&&(I=T)}),I&&(I.data.matrix=E.data,m=m.filter(T=>T.type!=="filter"))}g(e(m,p.imageData))};self.onmessage=p=>{s(p.data.message,g=>{self.postMessage({id:p.data.id,message:g},[g.data.buffer])})};const i=1,n=1,a=1;function o(p,g,m){const E=g[p]/255,I=g[p+1]/255,T=g[p+2]/255,C=g[p+3]/255,w=E*m[0]+I*m[1]+T*m[2]+C*m[3]+m[4],v=E*m[5]+I*m[6]+T*m[7]+C*m[8]+m[9],S=E*m[10]+I*m[11]+T*m[12]+C*m[13]+m[14],O=E*m[15]+I*m[16]+T*m[17]+C*m[18]+m[19],L=Math.max(0,w*O)+i*(1-O),P=Math.max(0,v*O)+n*(1-O),y=Math.max(0,S*O)+a*(1-O);g[p]=Math.max(0,Math.min(1,L))*255,g[p+1]=Math.max(0,Math.min(1,P))*255,g[p+2]=Math.max(0,Math.min(1,y))*255}const d=self.JSON.stringify([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]);function c(p){return self.JSON.stringify(p||[])===d}function h(p,g){if(!g||c(g))return p;const m=p.data,E=m.length,I=g[0],T=g[1],C=g[2],w=g[3],v=g[4],S=g[5],O=g[6],L=g[7],P=g[8],y=g[9],D=g[10],V=g[11],k=g[12],B=g[13],X=g[14],N=g[15],W=g[16],F=g[17],M=g[18],G=g[19];let U=0,H=0,Y=0,at=0,ot=0,lt=0,Et=0,Q=0,st=0,ct=0,pt=0,ht=0;for(;U<E;U+=4)H=m[U]/255,Y=m[U+1]/255,at=m[U+2]/255,ot=m[U+3]/255,lt=H*I+Y*T+at*C+ot*w+v,Et=H*S+Y*O+at*L+ot*P+y,Q=H*D+Y*V+at*k+ot*B+X,st=H*N+Y*W+at*F+ot*M+G,ct=Math.max(0,lt*st)+i*(1-st),pt=Math.max(0,Et*st)+n*(1-st),ht=Math.max(0,Q*st)+a*(1-st),m[U]=Math.max(0,Math.min(1,ct))*255,m[U+1]=Math.max(0,Math.min(1,pt))*255,m[U+2]=Math.max(0,Math.min(1,ht))*255;return p}function u(p,g){let{mode:m="contain",upscale:E=!1,width:I,height:T,matrix:C}=g;if(C=!C||c(C)?null:C,!I&&!T)return h(p,C);if(I===null?I=T:T===null&&(T=I),m!=="force"){let B=I/p.width,X=T/p.height,N=1;if(m==="cover"?N=Math.max(B,X):m==="contain"&&(N=Math.min(B,X)),N>1&&E===!1)return h(p,C);I=p.width*N,T=p.height*N}const w=p.width,v=p.height,S=Math.round(I),O=Math.round(T),L=p.data,P=new Uint8ClampedArray(S*O*4),y=w/S,D=v/O,V=Math.ceil(y*.5),k=Math.ceil(D*.5);for(let B=0;B<O;B++)for(let X=0;X<S;X++){let N=(X+B*S)*4,W=0,F=0,M=0,G=0,U=0,H=0,Y=0,at=(B+.5)*D;for(let ot=Math.floor(B*D);ot<(B+1)*D;ot++){let lt=Math.abs(at-(ot+.5))/k,Et=(X+.5)*y,Q=lt*lt;for(let st=Math.floor(X*y);st<(X+1)*y;st++){let ct=Math.abs(Et-(st+.5))/V,pt=Math.sqrt(Q+ct*ct);if(pt>=-1&&pt<=1&&(W=2*pt*pt*pt-3*pt*pt+1,W>0)){ct=4*(st+ot*w);let ht=L[ct+3];Y+=W*ht,M+=W,ht<255&&(W=W*ht/250),G+=W*L[ct],U+=W*L[ct+1],H+=W*L[ct+2],F+=W}}}P[N]=G/F,P[N+1]=U/F,P[N+2]=H/F,P[N+3]=Y/M,C&&o(N,P,C)}return{data:P,width:S,height:O}}},zv=(t,e)=>{if(t.getUint32(e+4,!1)!==1165519206)return;e+=4;const s=t.getUint16(e+=6,!1)===18761;e+=t.getUint32(e+4,s);const i=t.getUint16(e,s);e+=2;for(let n=0;n<i;n++)if(t.getUint16(e+n*12,s)===274)return t.setUint16(e+n*12+8,1,s),!0;return!1},Wv=t=>{const e=new DataView(t);if(e.getUint16(0)!==65496)return null;let s=2,i,n,a=!1;for(;s<e.byteLength&&(i=e.getUint16(s,!1),n=e.getUint16(s+2,!1)+2,!(!(i>=65504&&i<=65519||i===65534)||(a||(a=zv(e,s)),s+n>e.byteLength)));)s+=n;return t.slice(0,s)},Hv=t=>new Promise(e=>{const s=new FileReader;s.onload=()=>e(Wv(s.result)||null),s.readAsArrayBuffer(t.slice(0,256*1024))}),qv=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,Yv=(t,e)=>{const s=qv();if(s){const i=new s;return i.append(t),i.getBlob(e)}return new Blob([t],{type:e})},Xv=()=>Math.random().toString(36).substr(2,9),Zv=t=>{const e=new Blob(["(",t.toString(),")()"],{type:"application/javascript"}),s=URL.createObjectURL(e),i=new Worker(s),n=[];return{transfer:()=>{},post:(a,o,d)=>{const c=Xv();n[c]=o,i.onmessage=h=>{const u=n[h.data.id];u&&(u(h.data.message),delete n[h.data.id])},i.postMessage({id:c,message:a},d)},terminate:()=>{i.terminate(),URL.revokeObjectURL(s)}}},Qv=t=>new Promise((e,s)=>{const i=new Image;i.onload=()=>{e(i)},i.onerror=n=>{s(n)},i.src=t}),Jv=t=>t.reduce((e,s)=>e.then(i=>s().then(Array.prototype.concat.bind(i))),Promise.resolve([])),Kv=(t,e)=>new Promise(s=>{const i={width:t.width,height:t.height},n=t.getContext("2d"),a=e.sort(bg).map(o=>()=>new Promise(d=>{ax[o[0]](n,i,o[1],d)&&d()}));Jv(a).then(()=>s(t))}),Wa=(t,e)=>{t.beginPath(),t.lineCap=e["stroke-linecap"],t.lineJoin=e["stroke-linejoin"],t.lineWidth=e["stroke-width"],e["stroke-dasharray"].length&&t.setLineDash(e["stroke-dasharray"].split(",")),t.fillStyle=e.fill,t.strokeStyle=e.stroke,t.globalAlpha=e.opacity||1},Ha=t=>{t.fill(),t.stroke(),t.globalAlpha=1},tx=(t,e,s)=>{const i=za(s,e),n=wr(s,e);return Wa(t,n),t.rect(i.x,i.y,i.width,i.height),Ha(t),!0},ex=(t,e,s)=>{const i=za(s,e),n=wr(s,e);Wa(t,n);const a=i.x,o=i.y,d=i.width,c=i.height,h=.5522848,u=d/2*h,p=c/2*h,g=a+d,m=o+c,E=a+d/2,I=o+c/2;return t.moveTo(a,I),t.bezierCurveTo(a,I-p,E-u,o,E,o),t.bezierCurveTo(E+u,o,g,I-p,g,I),t.bezierCurveTo(g,I+p,E+u,m,E,m),t.bezierCurveTo(E-u,m,a,I+p,a,I),Ha(t),!0},sx=(t,e,s,i)=>{const n=za(s,e),a=wr(s,e);Wa(t,a);const o=new Image;new URL(s.src,window.location.href).origin!==window.location.origin&&(o.crossOrigin=""),o.onload=()=>{if(s.fit==="cover"){const c=n.width/n.height,h=c>1?o.width:o.height*c,u=c>1?o.width/c:o.height,p=o.width*.5-h*.5,g=o.height*.5-u*.5;t.drawImage(o,p,g,h,u,n.x,n.y,n.width,n.height)}else if(s.fit==="contain"){const c=Math.min(n.width/o.width,n.height/o.height),h=c*o.width,u=c*o.height,p=n.x+n.width*.5-h*.5,g=n.y+n.height*.5-u*.5;t.drawImage(o,0,0,o.width,o.height,p,g,h,u)}else t.drawImage(o,0,0,o.width,o.height,n.x,n.y,n.width,n.height);Ha(t),i()},o.src=s.src},ix=(t,e,s)=>{const i=za(s,e),n=wr(s,e);Wa(t,n);const a=pe(s.fontSize,e),o=s.fontFamily||"sans-serif",d=s.fontWeight||"normal",c=s.textAlign||"left";return t.font=`${d} ${a}px ${o}`,t.textAlign=c,t.fillText(s.text,i.x,i.y),Ha(t),!0},nx=(t,e,s)=>{const i=wr(s,e);Wa(t,i),t.beginPath();const n=s.points.map(o=>({x:pe(o.x,e,1,"width"),y:pe(o.y,e,1,"height")}));t.moveTo(n[0].x,n[0].y);const a=n.length;for(let o=1;o<a;o++)t.lineTo(n[o].x,n[o].y);return Ha(t),!0},rx=(t,e,s)=>{const i=za(s,e),n=wr(s,e);Wa(t,n),t.beginPath();const a={x:i.x,y:i.y},o={x:i.x+i.width,y:i.y+i.height};t.moveTo(a.x,a.y),t.lineTo(o.x,o.y);const d=Eg({x:o.x-a.x,y:o.y-a.y}),c=.04*Math.min(e.width,e.height);if(s.lineDecoration.indexOf("arrow-begin")!==-1){const h=Bc(d,c),u=kc(a,h),p=yn(a,2,u),g=yn(a,-2,u);t.moveTo(p.x,p.y),t.lineTo(a.x,a.y),t.lineTo(g.x,g.y)}if(s.lineDecoration.indexOf("arrow-end")!==-1){const h=Bc(d,-c),u=kc(o,h),p=yn(o,2,u),g=yn(o,-2,u);t.moveTo(p.x,p.y),t.lineTo(o.x,o.y),t.lineTo(g.x,g.y)}return Ha(t),!0},ax={rect:tx,ellipse:ex,image:sx,text:ix,line:rx,path:nx},ox=t=>{const e=document.createElement("canvas");return e.width=t.width,e.height=t.height,e.getContext("2d").putImageData(t,0,0),e},lx=(t,e,s={})=>new Promise((i,n)=>{if(!t||!mv(t))return n({status:"not an image file",file:t});const{stripImageHead:a,beforeCreateBlob:o,afterCreateBlob:d,canvasMemoryLimit:c}=s,{crop:h,size:u,filter:p,markup:g,output:m}=e,E=e.image&&e.image.orientation?Math.max(1,Math.min(8,e.image.orientation)):null,I=m&&m.quality,T=I===null?null:I/100,C=m&&m.type||null,w=m&&m.background||null,v=[];u&&(typeof u.width=="number"||typeof u.height=="number")&&v.push({type:"resize",data:u}),p&&p.length===20&&v.push({type:"filter",data:p});const S=P=>{const y=d?d(P):P;Promise.resolve(y).then(i)},O=(P,y)=>{const D=ox(P),V=g.length?Kv(D,g):D;Promise.resolve(V).then(k=>{xv(k,y,o).then(B=>{if(gg(k),a)return S(B);Hv(t).then(X=>{X!==null&&(B=new Blob([X,B.slice(20)],{type:B.type})),S(B)})}).catch(n)})};if(/svg/.test(t.type)&&C===null)return jv(t,h,g,{background:w}).then(P=>{i(Yv(P,"image/svg+xml"))});const L=URL.createObjectURL(t);Qv(L).then(P=>{URL.revokeObjectURL(L);const y=Tv(P,E,h,{canvasMemoryLimit:c,background:w}),D={quality:T,type:C||t.type};if(!v.length)return O(y,D);const V=Zv(Vv);V.post({transforms:v,imageData:y},k=>{O(Uv(k),D),V.terminate()},[y.data.buffer])}).catch(n)}),cx=["x","y","left","top","right","bottom","width","height"],dx=t=>typeof t=="string"&&/%/.test(t)?parseFloat(t)/100:t,hx=t=>{const[e,s]=t,i=s.points?{}:cx.reduce((n,a)=>(n[a]=dx(s[a]),n),{});return[e,_(_({zIndex:0},s),i)]},ux=t=>new Promise((e,s)=>{const i=new Image;i.src=URL.createObjectURL(t);const n=()=>{const o=i.naturalWidth,d=i.naturalHeight;o&&d&&(URL.revokeObjectURL(i.src),clearInterval(a),e({width:o,height:d}))};i.onerror=o=>{URL.revokeObjectURL(i.src),clearInterval(a),s(o)};const a=setInterval(n,1);n()});typeof window!="undefined"&&typeof window.document!="undefined"&&(HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,s){const i=this;setTimeout(()=>{const n=i.toDataURL(e,s).split(",")[1],a=atob(n);let o=a.length;const d=new Uint8Array(o);for(;o--;)d[o]=a.charCodeAt(o);t(new Blob([d],{type:e||"image/png"}))})}}));const Sp=typeof window!="undefined"&&typeof window.document!="undefined",px=Sp&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Ig=({addFilter:t,utils:e})=>{const{Type:s,forin:i,getFileFromBlob:n,isFile:a}=e,o=["crop","resize","filter","markup","output"],d=u=>(p,g,m)=>p(g,u?u(m):m),c=u=>u.aspectRatio===null&&u.rotation===0&&u.zoom===1&&u.center&&u.center.x===.5&&u.center.y===.5&&u.flip&&u.flip.horizontal===!1&&u.flip.vertical===!1;t("SHOULD_PREPARE_OUTPUT",(u,{query:p})=>new Promise(g=>{g(!p("IS_ASYNC"))}));const h=(u,p,g)=>new Promise(m=>{if(!u("GET_ALLOW_IMAGE_TRANSFORM")||g.archived||!a(p)||!dv(p))return m(!1);ux(p).then(()=>{const E=u("GET_IMAGE_TRANSFORM_IMAGE_FILTER");if(E){const I=E(p);if(I==null)return handleRevert(!0);if(typeof I=="boolean")return m(I);if(typeof I.then=="function")return I.then(m)}m(!0)}).catch(E=>{m(!1)})});return t("DID_CREATE_ITEM",(u,{query:p,dispatch:g})=>{p("GET_ALLOW_IMAGE_TRANSFORM")&&u.extend("requestPrepare",()=>new Promise((m,E)=>{g("REQUEST_PREPARE_OUTPUT",{query:u.id,item:u,success:m,failure:E},!0)}))}),t("PREPARE_OUTPUT",(u,{query:p,item:g})=>new Promise(m=>{h(p,u,g).then(E=>{if(!E)return m(u);const I=[];p("GET_IMAGE_TRANSFORM_VARIANTS_INCLUDE_ORIGINAL")&&I.push(()=>new Promise(y=>{y({name:p("GET_IMAGE_TRANSFORM_VARIANTS_ORIGINAL_NAME"),file:u})})),p("GET_IMAGE_TRANSFORM_VARIANTS_INCLUDE_DEFAULT")&&I.push((y,D,V)=>new Promise(k=>{y(D,V).then(B=>k({name:p("GET_IMAGE_TRANSFORM_VARIANTS_DEFAULT_NAME"),file:B}))}));const T=p("GET_IMAGE_TRANSFORM_VARIANTS")||{};i(T,(y,D)=>{const V=d(D);I.push((k,B,X)=>new Promise(N=>{V(k,B,X).then(W=>N({name:y,file:W}))}))});const C=p("GET_IMAGE_TRANSFORM_OUTPUT_QUALITY"),w=p("GET_IMAGE_TRANSFORM_OUTPUT_QUALITY_MODE"),v=C===null?null:C/100,S=p("GET_IMAGE_TRANSFORM_OUTPUT_MIME_TYPE"),O=p("GET_IMAGE_TRANSFORM_CLIENT_TRANSFORMS")||o;g.setMetadata("output",{type:S,quality:v,client:O},!0);const L=(y,D)=>new Promise((V,k)=>{const B=_({},D);Object.keys(B).filter(Y=>Y!=="exif").forEach(Y=>{O.indexOf(Y)===-1&&delete B[Y]});const{resize:X,exif:N,output:W,crop:F,filter:M,markup:G}=B,U={image:{orientation:N?N.orientation:null},output:W&&(W.type||typeof W.quality=="number"||W.background)?{type:W.type,quality:typeof W.quality=="number"?W.quality*100:null,background:W.background||p("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR")||null}:void 0,size:X&&(X.size.width||X.size.height)?_({mode:X.mode,upscale:X.upscale},X.size):void 0,crop:F&&!c(F)?_({},F):void 0,markup:G&&G.length?G.map(hx):[],filter:M};if(U.output){const Y=W.type?W.type!==y.type:!1,at=/\/jpe?g$/.test(y.type),ot=W.quality!==null?at&&w==="always":!1;if(!!!(U.size||U.crop||U.filter||Y||ot))return V(y)}const H={beforeCreateBlob:p("GET_IMAGE_TRANSFORM_BEFORE_CREATE_BLOB"),afterCreateBlob:p("GET_IMAGE_TRANSFORM_AFTER_CREATE_BLOB"),canvasMemoryLimit:p("GET_IMAGE_TRANSFORM_CANVAS_MEMORY_LIMIT"),stripImageHead:p("GET_IMAGE_TRANSFORM_OUTPUT_STRIP_IMAGE_HEAD")};lx(y,U,H).then(Y=>{const at=n(Y,pv(y.name,fv(Y.type)));V(at)}).catch(k)}),P=I.map(y=>y(L,u,g.getMetadata()));Promise.all(P).then(y=>{m(y.length===1&&y[0].name===null?y[0].file:y)})})})),{options:{allowImageTransform:[!0,s.BOOLEAN],imageTransformImageFilter:[null,s.FUNCTION],imageTransformOutputMimeType:[null,s.STRING],imageTransformOutputQuality:[null,s.INT],imageTransformOutputStripImageHead:[!0,s.BOOLEAN],imageTransformClientTransforms:[null,s.ARRAY],imageTransformOutputQualityMode:["always",s.STRING],imageTransformVariants:[null,s.OBJECT],imageTransformVariantsIncludeDefault:[!0,s.BOOLEAN],imageTransformVariantsDefaultName:[null,s.STRING],imageTransformVariantsIncludeOriginal:[!1,s.BOOLEAN],imageTransformVariantsOriginalName:["original_",s.STRING],imageTransformBeforeCreateBlob:[null,s.FUNCTION],imageTransformAfterCreateBlob:[null,s.FUNCTION],imageTransformCanvasMemoryLimit:[Sp&&px?4096*4096:null,s.INT],imageTransformCanvasBackgroundColor:[null,s.STRING]}}};Sp&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Ig}));/*!
* FilePondPluginImageValidateSize 1.2.7
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit https://pqina.nl/filepond/ for details.
*/const fx=t=>/^image/.test(t.type),mx=t=>new Promise((e,s)=>{const i=document.createElement("img");i.src=URL.createObjectURL(t),i.onerror=a=>{clearInterval(n),s(a)};const n=setInterval(()=>{i.naturalWidth&&i.naturalHeight&&(clearInterval(n),URL.revokeObjectURL(i.src),e({width:i.naturalWidth,height:i.naturalHeight}))},1)}),_g=({addFilter:t,utils:e})=>{const{Type:s,replaceInString:i,isFile:n}=e,a=(o,d,c)=>new Promise((h,u)=>{const p=({width:g,height:m})=>{const{minWidth:E,minHeight:I,maxWidth:T,maxHeight:C,minResolution:w,maxResolution:v}=d,S=g*m;g<E||m<I?u("TOO_SMALL"):g>T||m>C?u("TOO_BIG"):w!==null&&S<w?u("TOO_LOW_RES"):v!==null&&S>v&&u("TOO_HIGH_RES"),h()};mx(o).then(p).catch(()=>{if(!c){u();return}c(o,d).then(p).catch(()=>u())})});return t("LOAD_FILE",(o,{query:d})=>new Promise((c,h)=>{if(!n(o)||!fx(o)||!d("GET_ALLOW_IMAGE_VALIDATE_SIZE")){c(o);return}const u={minWidth:d("GET_IMAGE_VALIDATE_SIZE_MIN_WIDTH"),minHeight:d("GET_IMAGE_VALIDATE_SIZE_MIN_HEIGHT"),maxWidth:d("GET_IMAGE_VALIDATE_SIZE_MAX_WIDTH"),maxHeight:d("GET_IMAGE_VALIDATE_SIZE_MAX_HEIGHT"),minResolution:d("GET_IMAGE_VALIDATE_SIZE_MIN_RESOLUTION"),maxResolution:d("GET_IMAGE_VALIDATE_SIZE_MAX_RESOLUTION")},p=d("GET_IMAGE_VALIDATE_SIZE_MEASURE");a(o,u,p).then(()=>{c(o)}).catch(g=>{const m=g?{TOO_SMALL:{label:d("GET_IMAGE_VALIDATE_SIZE_LABEL_IMAGE_SIZE_TOO_SMALL"),details:d("GET_IMAGE_VALIDATE_SIZE_LABEL_EXPECTED_MIN_SIZE")},TOO_BIG:{label:d("GET_IMAGE_VALIDATE_SIZE_LABEL_IMAGE_SIZE_TOO_BIG"),details:d("GET_IMAGE_VALIDATE_SIZE_LABEL_EXPECTED_MAX_SIZE")},TOO_LOW_RES:{label:d("GET_IMAGE_VALIDATE_SIZE_LABEL_IMAGE_RESOLUTION_TOO_LOW"),details:d("GET_IMAGE_VALIDATE_SIZE_LABEL_EXPECTED_MIN_RESOLUTION")},TOO_HIGH_RES:{label:d("GET_IMAGE_VALIDATE_SIZE_LABEL_IMAGE_RESOLUTION_TOO_HIGH"),details:d("GET_IMAGE_VALIDATE_SIZE_LABEL_EXPECTED_MAX_RESOLUTION")}}[g]:{label:d("GET_IMAGE_VALIDATE_SIZE_LABEL_FORMAT_ERROR"),details:o.type};h({status:{main:m.label,sub:g?i(m.details,u):m.details}})})})),{options:{allowImageValidateSize:[!0,s.BOOLEAN],imageValidateSizeLabelFormatError:["Image type not supported",s.STRING],imageValidateSizeMeasure:[null,s.FUNCTION],imageValidateSizeMinResolution:[null,s.INT],imageValidateSizeMaxResolution:[null,s.INT],imageValidateSizeLabelImageResolutionTooLow:["Resolution is too low",s.STRING],imageValidateSizeLabelImageResolutionTooHigh:["Resolution is too high",s.STRING],imageValidateSizeLabelExpectedMinResolution:["Minimum resolution is {minResolution}",s.STRING],imageValidateSizeLabelExpectedMaxResolution:["Maximum resolution is {maxResolution}",s.STRING],imageValidateSizeMinWidth:[1,s.INT],imageValidateSizeMinHeight:[1,s.INT],imageValidateSizeMaxWidth:[65535,s.INT],imageValidateSizeMaxHeight:[65535,s.INT],imageValidateSizeLabelImageSizeTooSmall:["Image is too small",s.STRING],imageValidateSizeLabelImageSizeTooBig:["Image is too big",s.STRING],imageValidateSizeLabelExpectedMinSize:["Minimum size is {minWidth} Ã— {minHeight}",s.STRING],imageValidateSizeLabelExpectedMaxSize:["Maximum size is {maxWidth} Ã— {maxHeight}",s.STRING]}}},gx=typeof window!="undefined"&&typeof window.document!="undefined";gx&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:_g}));/*!
* FilePondPluginMediaPreview 1.0.1
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit undefined for details.
*/const jc=t=>/^video/.test(t.type),Ur=t=>/^audio/.test(t.type),bo=t=>/pdf$/.test(t.type);class Ex{constructor(e,s){this.mediaEl=e,this.audioElems=s,this.onplayhead=!1,this.duration=0,this.timelineWidth=this.audioElems.timeline.offsetWidth-this.audioElems.playhead.offsetWidth,this.moveplayheadFn=this.moveplayhead.bind(this),this.registerListeners()}registerListeners(){this.mediaEl.addEventListener("timeupdate",this.timeUpdate.bind(this),!1),this.mediaEl.addEventListener("canplaythrough",()=>this.duration=this.mediaEl.duration,!1),this.audioElems.timeline.addEventListener("click",this.timelineClicked.bind(this),!1),this.audioElems.button.addEventListener("click",this.play.bind(this)),this.audioElems.playhead.addEventListener("mousedown",this.mouseDown.bind(this),!1),window.addEventListener("mouseup",this.mouseUp.bind(this),!1)}play(){this.mediaEl.paused?this.mediaEl.play():this.mediaEl.pause(),this.audioElems.button.classList.toggle("play"),this.audioElems.button.classList.toggle("pause")}timeUpdate(){let e=this.mediaEl.currentTime/this.duration*100;this.audioElems.playhead.style.marginLeft=e+"%",this.mediaEl.currentTime===this.duration&&(this.audioElems.button.classList.toggle("play"),this.audioElems.button.classList.toggle("pause"))}moveplayhead(e){let s=e.clientX-this.getPosition(this.audioElems.timeline);s>=0&&s<=this.timelineWidth&&(this.audioElems.playhead.style.marginLeft=s+"px"),s<0&&(this.audioElems.playhead.style.marginLeft="0px"),s>this.timelineWidth&&(this.audioElems.playhead.style.marginLeft=this.timelineWidth-4+"px")}timelineClicked(e){this.moveplayhead(e),this.mediaEl.currentTime=this.duration*this.clickPercent(e)}mouseDown(){this.onplayhead=!0,window.addEventListener("mousemove",this.moveplayheadFn,!0),this.mediaEl.removeEventListener("timeupdate",this.timeUpdate.bind(this),!1)}mouseUp(e){window.removeEventListener("mousemove",this.moveplayheadFn,!0),this.onplayhead==!0&&(this.moveplayhead(e),this.mediaEl.currentTime=this.duration*this.clickPercent(e),this.mediaEl.addEventListener("timeupdate",this.timeUpdate.bind(this),!1)),this.onplayhead=!1}clickPercent(e){return(e.clientX-this.getPosition(this.audioElems.timeline))/this.timelineWidth}getPosition(e){return e.getBoundingClientRect().left}}const bx=t=>t.utils.createView({name:"media-preview",tag:"div",ignoreRect:!0,create:({root:e,props:s})=>{const i=e.query("GET_ITEM",{id:s.id});if(bo(i.file))e.ref.media=document.createElement("object"),e.ref.media.setAttribute("height",300),e.ref.media.setAttribute("width",320),e.ref.media.setAttribute("style","position:absolute;left:0;right:0;margin:auto;"),e.element.appendChild(e.ref.media);else{let n=Ur(i.file)?"audio":"video";if(e.ref.media=document.createElement(n),e.ref.media.setAttribute("controls",!0),e.element.appendChild(e.ref.media),Ur(i.file)){let a=document.createDocumentFragment();e.ref.audio=[],e.ref.audio.container=document.createElement("div"),e.ref.audio.button=document.createElement("span"),e.ref.audio.timeline=document.createElement("div"),e.ref.audio.playhead=document.createElement("div"),e.ref.audio.container.className="audioplayer",e.ref.audio.button.className="playpausebtn play",e.ref.audio.timeline.className="timeline",e.ref.audio.playhead.className="playhead",e.ref.audio.timeline.appendChild(e.ref.audio.playhead),e.ref.audio.container.appendChild(e.ref.audio.button),e.ref.audio.container.appendChild(e.ref.audio.timeline),a.appendChild(e.ref.audio.container),e.element.appendChild(a)}}},write:t.utils.createRoute({DID_MEDIA_PREVIEW_LOAD:({root:e,props:s})=>{const{id:i}=s,n=e.query("GET_ITEM",{id:i});if(!n)return;let a=window.URL||window.webkitURL,o=new Blob([n.file],{type:n.file.type});e.ref.media.type=n.file.type,bo(n.file)?e.ref.media.data=a.createObjectURL(o):e.ref.media.src=n.file.mock&&n.file.url||a.createObjectURL(o),Ur(n.file)&&new Ex(e.ref.media,e.ref.audio),e.ref.media.addEventListener("loadeddata",()=>{if(jc(n.file)||Ur(n.file)){let d=75;if(jc(n.file)){let c=e.ref.media.offsetWidth,h=e.ref.media.videoWidth/c;d=e.ref.media.videoHeight/h}e.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:i,height:d})}},!1),e.ref.media.addEventListener("load",()=>{bo(n.file)&&e.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:i,height:e.ref.media.scrollHeight})},!1)}})}),Ix=t=>{const e=({root:i,props:n})=>{const{id:a}=n;i.query("GET_ITEM",a)&&i.dispatch("DID_MEDIA_PREVIEW_LOAD",{id:a})},s=({root:i,props:n})=>{const a=bx(t);i.ref.media=i.appendChildView(i.createChildView(a,{id:n.id}))};return t.utils.createView({name:"media-preview-wrapper",create:s,write:t.utils.createRoute({DID_MEDIA_PREVIEW_CONTAINER_CREATE:e})})},wg=t=>{const{addFilter:e,utils:s}=t,{Type:i,createRoute:n}=s,a=Ix(t);return e("CREATE_VIEW",o=>{const{is:d,view:c,query:h}=o;if(!d("file"))return;const u=({root:p,props:g})=>{const{id:m}=g,E=h("GET_ITEM",m);!E||E.archived||!jc(E.file)&&!bo(E.file)&&!Ur(E.file)||(p.ref.mediaPreview=c.appendChildView(c.createChildView(a,{id:m})),p.dispatch("DID_MEDIA_PREVIEW_CONTAINER_CREATE",{id:m}))};c.registerWriter(n({DID_LOAD_ITEM:u},({root:p,props:g})=>{const{id:m}=g,E=h("GET_ITEM",m);!jc(E.file)&&!bo(E.file)&&!Ur(E.file)||p.rect.element.hidden}))}),{options:{allowPdfPreview:[!0,i.BOOLEAN],allowVideoPreview:[!0,i.BOOLEAN],allowAudioPreview:[!0,i.BOOLEAN]}}},_x=typeof window!="undefined"&&typeof window.document!="undefined";_x&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:wg}));function Zt({formID:t,fieldKey:e,fieldData:s,children:i,noLabel:n,noErrMsg:a,isBuilder:o}){var S,O,L,P,y,D,V,k,B,X;const{"*":d}=ap(),c=et(WE),h=et(Mn),{styleMode:u}=h,[p,g,m]=d.split("/"),E=u&&p==="theme-customize"&&["err-msg","err-txt","err-txt-pre-i","err-txt-suf-i"].indexOf(g)>=0,I=u&&p==="field-theme-customize"&&["err-msg","err-txt","err-txt-pre-i","err-txt-suf-i"].indexOf(g)>=0&&m===e,T=((S=s.valid)==null?void 0:S.hide)||!1,C=((L=(O=s.err)==null?void 0:O.req)==null?void 0:L.dflt)||"",w=j.useRef(null),v=N=>{const W=N.getBoundingClientRect();return W.top>=0&&W.left>=0&&W.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&W.right<=(window.innerWidth||document.documentElement.clientWidth)};if(C&&w.current){const N=w.current,W=document.body.getBoundingClientRect(),M=N.getBoundingClientRect().top-W.top;v(N)||window.scroll({top:M,behavior:"smooth"})}return f.jsxs("div",A(_({ref:w,"data-testid":`${e}-fld-wrp`,"data-dev-fld-wrp":e,className:`${e}-fld-wrp ${R(e,"fld-wrp")} ${u?"":"drag"} ${T?"fld-hide":""}`,style:{direction:c}},$(e,"fld-wrp")),{children:[!n&&f.jsxs("div",A(_({"data-testid":`${e}-lbl-wrp`,"data-dev-lbl-wrp":e,className:`${e}-lbl-wrp ${R(e,"lbl-wrp")}`},$(e,"lbl-wrp")),{children:[!((P=s==null?void 0:s.valid)!=null&&P.hideLbl)&&"lbl"in s&&f.jsxs("label",A(_({"data-testid":`${e}-lbl`,"data-dev-lbl":e,title:s.lbl,className:`${e}-lbl ${R(e,"lbl")}`,htmlFor:e},$(e,"lbl")),{children:[((y=s.valid)==null?void 0:y.req)&&((D=s.valid)==null?void 0:D.reqShow)&&((V=s.valid)==null?void 0:V.reqPos)==="before"&&f.jsx("span",A(_({"data-testid":`${e}-req-smbl`,"data-dev-req-smbl":e,className:`${e}-req-smbl ${R(e,"req-smbl")}`},$(e,"req-smbl")),{children:"*"})),s.lblPreIcn&&f.jsx("img",_({"data-testid":`${e}-lbl-pre-i`,"data-dev-lbl-pre-i":e,className:`${e}-lbl-pre-i ${R(e,"lbl-pre-i")}`,src:s.lblPreIcn,alt:""},$(e,"lbl-pre-i"))),f.jsx(ls,{html:s.lbl.replace(/\$_bf_\$/g,"\\")}),s.lblSufIcn&&f.jsx("img",_({"data-testid":`${e}-lbl-suf-i`,"data-dev-lbl-suf-i":e,className:`${e}-lbl-suf-i ${R(e,"lbl-suf-i")}`,src:s.lblSufIcn,alt:""},$(e,"lbl-suf-i"))),((k=s.valid)==null?void 0:k.req)&&((B=s.valid)==null?void 0:B.reqShow)&&((X=s.valid)==null?void 0:X.reqPos)!=="before"&&f.jsx("span",A(_({"data-testid":`${e}-req-smbl`,"data-dev-req-smbl":e,className:`${e}-req-smbl ${R(e,"req-smbl")}`},$(e,"req-smbl")),{children:"*"}))]})),(s.subtitle||s.subTlePreIcn||s.subTleSufIcn)&&f.jsxs("div",A(_({"data-testid":`${e}-sub-titl`,"data-dev-sub-titl":e,className:`${e}-sub-titl ${R(e,"sub-titl")}`},$(e,"sub-titl")),{children:[s.subTlePreIcn&&f.jsx("img",_({"data-testid":`${e}-sub-titl-pre-i`,"data-dev-sub-titl-pre-i":e,className:`${e}-sub-titl-pre-i ${R(e,"sub-titl-pre-i")}`,src:s.subTlePreIcn,alt:""},$(e,"sub-titl-pre-i"))),f.jsx(ls,{html:s.subtitle||""}),s.subTleSufIcn&&f.jsx("img",_({"data-testid":`${e}-sub-titl-suf-i`,"data-dev-sub-titl-suf-i":e,className:`${e}-sub-titl-suf-i ${R(e,"sub-titl-suf-i")}`,src:s.subTleSufIcn,alt:""},$(e,"sub-titl-suf-i")))]}))]})),f.jsxs("div",A(_({"data-testid":`${e}-inp-wrp`,className:`${e}-inp-wrp ${R(e,"inp-wrp")}`},$(e,"inp-wrp")),{children:[i,(s.helperTxt||s.hlpPreIcn||s.hlpSufIcn)&&f.jsxs("div",A(_({"data-testid":`${e}-hlp-txt`,"data-dev-hlp-txt":e,className:`${e}-hlp-txt ${R(e,"hlp-txt")}`},$(e,"hlp-txt")),{children:[s.hlpPreIcn&&f.jsx("img",_({"data-testid":`${e}-hlp-txt-pre-i`,"data-dev-hlp-txt-pre-i":e,className:`${e}-hlp-txt-pre-i ${R(e,"hlp-txt-pre-i")}`,src:s.hlpPreIcn,alt:""},$(e,"hlp-txt-pre-i"))),f.jsx(ls,{html:s.helperTxt||""}),s.hlpSufIcn&&f.jsx("img",_({"data-testid":`${e}-hlp-txt-suf-i`,"data-dev-hlp-txt-suf-i":e,className:`${e}-hlp-txt-suf-i ${R(e,"hlp-txt-suf-i")}`,src:s.hlpSufIcn,alt:""},$(e,"hlp-txt-suf-i")))]})),!a&&(E||I)&&f.jsxs("div",A(_({"data-testid":`${e}-err-msg`,"data-dev-err-msg":e,className:`${e}-err-msg ${R(e,"err-msg")}`},$(e,"err-msg")),{children:[s.errPreIcn&&f.jsx("img",_({"data-testid":`${e}-err-txt-pre-i`,"data-dev-err-txt-pre-i":e,className:`${e}-err-txt-pre-i ${R(e,"err-txt-pre-i")}`,src:s.errPreIcn,alt:""},$(e,"err-txt-pre-i"))),f.jsx("div",A(_({"data-testid":`${e}-err-txt`,"data-dev-err-txt":e,className:`${e}-err-txt ${R(e,"err-txt")}`},$(e,"err-txt")),{children:f.jsx(ls,{html:`${C||"This is an example of an error message. this message will vary by a condition or validation check."} `})})),s.errSufIcn&&f.jsx("img",_({"data-testid":`${e}-err-txt-suf-i`,"data-dev-err-txt-suf-i":e,className:`${e}-err-txt-suf-i ${R(e,"err-txt-suf-i")}`,src:s.errSufIcn,alt:""},$(e,"err-txt-suf-i")))]}))]}))]}))}function wx({attr:t,formID:e,fieldKey:s,styleClasses:i}){const[n]=Wi(fe),a=n[s],{config:o}=a,[d,c]=j.useState(0),h=j.useRef(null),u=j.useRef(null);j.useEffect(()=>{const g=document.getElementById("bit-grid-layout").contentWindow;g.bit_filepond||(g.bit_filepond=Cf),g.bit_filepond_plugin_image_preview||(g.bit_filepond_plugin_image_preview=ug),g.bit_filepond_plugin_file_validate_size||(g.bit_filepond_plugin_file_validate_size=ag),g.bit_filepond_plugin_file_validate_type||(g.bit_filepond_plugin_file_validate_type=og),g.bit_filepond_plugin_image_crop||(g.bit_filepond_plugin_image_crop=lg),g.bit_filepond_plugin_image_resize||(g.bit_filepond_plugin_image_resize=pg),g.bit_filepond_plugin_image_transform||(g.bit_filepond_plugin_image_transform=Ig),g.bit_filepond_plugin_image_validate_size||(g.bit_filepond_plugin_image_validate_size=_g),g.bit_filepond_plugin_media_preview||(g.bit_filepond_plugin_media_preview=wg);const m={configSetting:o,fieldKey:s,window:g,document:document.getElementById("bit-grid-layout").contentDocument,formID:e,ajaxURL:typeof bits=="undefined"?bitFromsFront==null?void 0:bitFromsFront.ajaxURL:bits.ajaxURL,nonce:typeof bits=="undefined"?"":bits.nonce,uploadFileToServer:!0,onFileUpdate:()=>c(T=>T+1)};u!=null&&u.current||(u.current=At(`#filepond-${s}-container`));const E=h.current,I=u.current;E&&(Cf.destroy(u.current),I.firstChild&&I.removeChild(I.firstChild)),h.current=new sb(I,m),c(T=>T+1)},[a==null?void 0:a.config]);const p=(g,m=!1)=>{var E;if((E=At(`.${s}-inp-wrp .${g}`))==null||E.setAttribute(`data-dev-${g}`,s),m){const I=HE(`.${s}-inp-wrp .${g}`);I.length>0&&[...I].map(T=>{T.setAttribute(`data-dev-${g}`,s)})}};return j.useEffect(()=>{p("filepond--root"),p("filepond--drop-label"),p("filepond--label-action"),p("filepond--panel-root"),p("filepond--item-panel",!0),p("filepond--file-action-button",!0),p("filepond--drip-blob"),p("filepond--file")},[d]),f.jsxs(f.Fragment,{children:[f.jsx(_t,{styleClasses:i}),f.jsxs(Zt,{formID:e,fieldKey:s,fieldData:t,children:[f.jsx("input",_(_({hidden:!0,id:s,type:"file",className:"filepond",name:"filepond"},"disabled"in a.valid&&{disabled:a.valid.disabled}),"readonly"in a.valid&&{readOnly:a.valid.readonly})),f.jsx("div",{ref:u,id:`filepond-${s}-container`,className:`filepond-${s}-container ${a.valid.disabled?"disabled":""} ${a.valid.readonly?"readonly":""}`})]})]})}var Tx=j.memo(wx);function vx({fieldKey:t,attr:e,styleClasses:s,buttonDisabled:i,handleReset:n,formID:a,data:o}){const d=An(s);return f.jsxs(f.Fragment,{children:[f.jsx(_t,{styleClasses:d}),f.jsx(Zt,{formID:a,fieldKey:t,fieldData:e,noLabel:!0,noErrMsg:!0,children:f.jsx("div",A(_({"data-testid":`${t}-inp-fld-wrp`,className:`${t}-inp-fld-wrp ${R(t,"inp-fld-wrp")}`},$(t,"inp-fld-wrp")),{children:f.jsxs("button",A(_(_(A(_({"data-testid":t,"data-dev-btn":t,className:`${t}-btn ${R(t,"btn")}`},$(t,"btn")),{type:e.btnTyp}),e.btnTyp==="reset"&&{onClick:n}),"disabled"in e.valid&&{disabled:e.valid.disabled}),{name:e.fieldName,children:[e.btnPreIcn&&f.jsx("img",_({"data-testid":`${t}-btn-pre-i`,"data-dev-btn-pre-i":t,className:`${t}-btn-pre-i ${R(t,"btn-pre-i")}`,src:e.btnPreIcn,alt:""},$(t,"btn-pre-i"))),f.jsx(ls,{html:e.txt||""}),e.btnSufIcn&&f.jsx("img",_({"data-testid":`${t}-btn-suf-i`,"data-dev-btn-suf-i":t,className:`${t}-btn-suf-i ${R(t,"btn-suf-i")}`,src:e.btnSufIcn,alt:""},$(t,"btn-suf-i")))]}))}))})]})}function xx({attr:t,onBlurHandler:e,resetFieldValue:s,formID:i,fieldKey:n,styleClasses:a}){const o=et(fe),[d,c]=j.useState({checked:[]}),h=An(o[n]),[u,p]=j.useState(""),g=(m,E)=>{const{checked:I}=m.target;if(I)d.checked.push(E);else{const T=d.checked.indexOf(E);d.checked.splice(T,1),c({checked:d.checked})}Rt(n)};return f.jsxs(f.Fragment,{children:[f.jsx(_t,{styleClasses:a}),f.jsx(Zt,{formID:i,fieldKey:n,fieldData:t,children:f.jsxs("div",A(_({"data-testid":`${n}-cc`,"data-dev-cc":n,className:`${n}-cc ${R(n,"cc")}`},$(n,"cc")),{children:[f.jsx("svg",{className:`${n}-cks`,children:f.jsx("symbol",{id:`${n}-ck-svg`,viewBox:"0 0 12 10",children:f.jsx("polyline",{className:`${n}-ck-svgline`,points:"1.5 6 4.5 9 10.5 1"})})}),t.opt.map((m,E)=>f.jsxs("div",A(_({"data-testid":`${n}-cw`,"data-dev-cw":n,className:`${n}-cw ${R(n,"cw")}`},$(n,"cw")),{children:[f.jsx("input",_(A(_(A(_({"data-testid":`${n}-ci`,id:`${n}-chk-${E}`,type:"checkbox",className:`${n}-ci ${R(n,"ci")}`},(t.valid.disabled||m.disabled)&&{disabled:!0}),{defaultValue:m.val||m.lbl}),t.valid.req&&{required:!0}),{name:`${h.lbl}[]`,checked:d.checked.includes(E)||(m==null?void 0:m.check),onChange:I=>g(I,E)}),$(n,"ci"))),f.jsxs("label",A(_({"data-testid":`${n}-cl`,"data-dev-cl":n,"data-cl":!0,htmlFor:`${n}-chk-${E}`,className:`${n}-cl ${R(n,"cl")}`},$(n,"cl")),{children:[f.jsx("span",A(_({"data-testid":`${n}-bx`,"data-dev-bx":n,"data-bx":!0,className:`${n}-bx ${R(n,"bx")}`},$(n,"bx")),{children:f.jsx("svg",{width:"12",height:"10",viewBox:"0 0 12 10",className:`${n}-svgwrp ${R(n,"svgwrp")}`,children:f.jsx("use",{"data-ck-icn":!0,href:`#${n}-ck-svg`,className:`${n}-ck-icn ${R(n,"ck-icn")}`})})})),f.jsx("span",A(_({"data-testid":`${n}-ct`,"data-dev-ct":n,className:`${n}-ct ${R(n,"ct")}`},$(n,"ct")),{children:f.jsx(ls,{html:m.lbl})}))]}))]}),`opt-${E+24}`)),t.addOtherOpt&&f.jsxs("div",A(_({"data-testid":`${n}-cw`,"data-dev-cw":n,className:`${n}-cw ${R(n,"cw")}`},$(n,"cw")),{children:[f.jsx("input",_(A(_({"data-testid":`${n}-ci`,"data-oopt":n,id:`${n}-chk-${t.opt.length}`,type:"checkbox",className:`${n}-ci ${R(n,"ci")}`,disabled:t.valid.disabled,value:u},t.valid.req&&{required:!0}),{name:`${h.lbl}[]`,checked:d.checked.includes(t.opt.length),onChange:m=>g(m,t.opt.length)}),$(n,"ci"))),f.jsxs("label",A(_({"data-testid":`${n}-cl`,"data-dev-cl":n,"data-cl":!0,htmlFor:`${n}-chk-${t.opt.length}`,className:`${n}-cl ${R(n,"cl")}`},$(n,"cl")),{children:[f.jsx("span",A(_({"data-testid":`${n}-bx`,"data-dev-ck":n,"data-bx":!0,className:`${n}-bx ${n}-ck ${R(n,"ck")}`},$(n,"ck")),{children:f.jsx("svg",{width:"12",height:"10",viewBox:"0 0 12 10",className:`${n}-svgwrp ${R(n,"svgwrp")}`,children:f.jsx("use",{"data-ck-icn":!0,href:`#${n}-ck-svg`,className:`${n}-ck-icn ${R(n,"ck-icn")}`})})})),f.jsx("span",A(_({"data-testid":`${n}-ct`,"data-dev-ct":n,className:`${n}-ct ${R(n,"ct")}`},$(n,"ct")),{children:"Other.."}))]})),f.jsx("div",{"data-oinp-wrp":!0,className:`${n}-other-inp-wrp`,children:f.jsx("input",A(_(_(_({"data-testid":`${n}-other-inp`,"data-dev-other-inp":n,type:"text",className:`${n}-other-inp ${R(n,"other-inp")}`},t.valid.otherOptReq&&{required:!0}),"otherInpPh"in t&&{placeholder:t.otherInpPh}),!("otherInpPh"in t)&&{placeholder:"Other..."}),{value:u,onChange:m=>p(m.target.value)}))})]}),`opt-${t.opt.length+24}`)]}))})]})}var Vt,oe,Ot,rn,Hr,Ds,Zc,Qc,le,ei,Co,si,Si,ms,Zn,Fs,an,Oo,yo,Lo,qr,Qn,Jc,Ao,Yr,Xr,ii,ni,ce,gs,Es,Zr,Mo,$o,Qr,Jr,Kr,ta,Kc,Tg,td,vg,No,uu,ed,xg,sd,Sg,de,Ce,bs,Xs,id,Rg,nd,Cg,rd,Og,Jn,Ka,ea,pc,Po,pu,Do,fu,sa,fc,Fo,mu,Go,gu,Kn,to,Gs,Ii,tr,eo,dt,ut,We,ps,Bo,Eu,er,so,sr,io,ip,Rx,ko,bu,ad,yg,od,Lg,jo,Iu,on,xr,ld,Ag,Uo,_u,cd,Mg;class Sx{constructor(e,s){b(this,Kc);b(this,td);b(this,No);b(this,ed);b(this,sd);b(this,de);b(this,bs);b(this,id);b(this,nd);b(this,rd);b(this,Jn);b(this,ea);b(this,Po);b(this,Do);b(this,sa);b(this,Fo);b(this,Go);b(this,Kn);b(this,Gs);b(this,tr);b(this,dt);b(this,We);b(this,Bo);b(this,er);b(this,sr);b(this,ip);b(this,ko);b(this,ad);b(this,od);b(this,jo);b(this,on);b(this,ld);b(this,Uo);b(this,cd);b(this,Vt,void 0);b(this,oe,void 0);b(this,Ot,void 0);b(this,rn,void 0);b(this,Hr,void 0);b(this,Ds,void 0);b(this,Zc,"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>");b(this,Qc,void 0);b(this,le,void 0);b(this,ei,void 0);b(this,Co,void 0);b(this,si,void 0);b(this,Si,"");b(this,ms,[]);b(this,Zn,!0);b(this,Fs,!0);b(this,an,!0);b(this,Oo,!0);b(this,yo,!1);b(this,Lo,!1);b(this,qr,"");b(this,Qn,"Select a Country");b(this,Jc,"Search Country");b(this,Ao,"No Currency Found");b(this,Yr,370);b(this,Xr,30);b(this,ii,void 0);b(this,ni,{});b(this,ce,[]);b(this,gs,{});b(this,Es,{});b(this,Zr,"");b(this,Mo,"");b(this,$o,null);b(this,Qr,"");b(this,Jr,[]);b(this,Kr,void 0);b(this,ta,!1);l(this,Kc,Tg).call(this,s),typeof e=="string"?x(this,Vt,r(this,ii).querySelector(e)):x(this,Vt,e),this.fieldKey=r(this,Mo),this.init()}init(){var e;x(this,oe,l(this,de,Ce).call(this,`.${this.fieldKey}-country-hidden-input`)),x(this,Ot,l(this,de,Ce).call(this,`.${this.fieldKey}-dpd-wrp`)),x(this,rn,l(this,de,Ce).call(this,`.${this.fieldKey}-selected-country-img`)),x(this,Hr,l(this,de,Ce).call(this,`.${this.fieldKey}-selected-country-lbl`)),x(this,Ds,r(this,Fs)?l(this,de,Ce).call(this,`.${this.fieldKey}-inp-clr-btn`):{}),x(this,Qc,l(this,de,Ce).call(this,`.${this.fieldKey}-option-search-wrp`)),x(this,le,l(this,de,Ce).call(this,`.${this.fieldKey}-opt-search-input`)),x(this,ei,l(this,de,Ce).call(this,`.${this.fieldKey}-search-clear-btn`)),x(this,Co,l(this,de,Ce).call(this,`.${this.fieldKey}-option-wrp`)),x(this,si,l(this,de,Ce).call(this,`.${this.fieldKey}-option-list`)),this.setMenu({open:!1}),r(this,yo)&&l(this,id,Rg).call(this),r(this,Lo)&&l(this,nd,Cg).call(this),r(this,qr)&&l(this,ed,xg).call(this),l(this,sd,Sg).call(this),l(this,No,uu).call(this),r(this,ni).observeElm(r(this,oe),"value",(s,i)=>{l(this,Po,pu).call(this,s,i)}),r(this,Zn)||(e=r(this,rn))==null||e.remove(),r(this,an)&&(l(this,We,ps).call(this,r(this,le),"padding-right","35px"),l(this,We,ps).call(this,r(this,ei),"display","none"))}setSelectedCountryItem(e){if(x(this,Si,e),!r(this,Si))return;const s=l(this,Go,gu).call(this);s&&(r(this,Zn)&&r(this,rn)&&(r(this,rn).src=`${r(this,Zr)}${s.img}`),l(this,tr,eo).call(this,r(this,Hr),s.lbl),this.setMenu({open:!1}),this.value=s.val||s.lbl,r(this,Fs)&&(l(this,We,ps).call(this,r(this,Ds),"display","grid"),l(this,bs,Xs).call(this,r(this,Ds),"click",i=>{l(this,Do,fu).call(this,i)})),r(this,Kr)&&r(this,Kr).call(this,s.val||s.lbl),l(this,dt,ut).call(this,r(this,Ot),"aria-label",`${s.lbl} selected`),l(this,sa,fc).call(this,r(this,oe),"blur"),setTimeout(()=>{l(this,dt,ut).call(this,r(this,Ot),"aria-label",s.lbl)},100))}searchOptions(e){l(this,od,Lg).call(this,e);let s=[];e?(s=r(this,ce).filter(i=>i.lbl.toLowerCase().includes(e.toLowerCase())),s.length||(s=[{i:0,lbl:r(this,Ao)}]),x(this,ms,s),r(this,an)&&l(this,We,ps).call(this,r(this,ei),"display","grid")):(x(this,ms,r(this,ce)),r(this,an)&&l(this,We,ps).call(this,r(this,ei),"display","none")),l(this,Bo,Eu).call(this)}setMenu({open:e}){l(this,We,ps).call(this,r(this,Co),"max-height",`${e?r(this,Yr):0}px`),e?(l(this,ld,Ag).call(this),r(this,Vt).classList.add("menu-open"),l(this,bs,Xs).call(this,r(this,ii),"click",s=>l(this,jo,Iu).call(this,s)),r(this,le).tabIndex="0",r(this,ei).tabIndex="0",r(this,Ot).setAttribute("aria-expanded","true"),l(this,dt,ut).call(this,r(this,si),"aria-hidden",!1),l(this,dt,ut).call(this,r(this,le),"aria-hidden",!1),l(this,Bo,Eu).call(this)):(r(this,Vt).classList.remove("menu-open"),r(this,ii).removeEventListener("click",l(this,jo,Iu)),setTimeout(()=>{this.searchOptions("")},100),r(this,le).blur(),r(this,le).tabIndex="-1",r(this,ei).tabIndex="-1",r(this,Ot).setAttribute("aria-expanded","false"),l(this,dt,ut).call(this,r(this,si),"aria-hidden",!0),l(this,dt,ut).call(this,r(this,le),"aria-hidden",!0))}set disabled(e){String(e).toLowerCase()==="true"?(r(this,Vt).classList.add("disabled"),r(this,oe).disabled=!0,r(this,Fs)&&l(this,dt,ut).call(this,r(this,Ds),"tabindex","-1"),l(this,dt,ut).call(this,r(this,Ot),"aria-label","Country Field disabled"),l(this,dt,ut).call(this,r(this,Ot),"tabindex","-1"),this.setMenu({open:!1}),r(this,Jr).forEach(({selector:s,eventType:i,cb:n})=>{s.removeEventListener(i,n)})):String(e).toLowerCase()==="false"&&(r(this,Vt).classList.remove("disabled"),r(this,oe).removeAttribute("disabled"),l(this,dt,ut).call(this,r(this,Ot),"tabindex","0"),r(this,Fs)&&l(this,dt,ut).call(this,r(this,Ds),"tabindex","0"),l(this,dt,ut).call(this,r(this,Ot),"aria-label",r(this,Qn)),l(this,No,uu).call(this))}get disabled(){return r(this,oe).disabled}set readonly(e){String(e).toLowerCase()==="true"?(r(this,Vt).classList.add("disabled"),r(this,oe).readOnly=!0,l(this,dt,ut).call(this,r(this,Ot),"tabindex","-1"),r(this,Fs)&&l(this,dt,ut).call(this,r(this,Ds),"tabindex","-1"),this.setMenu({open:!1})):String(e).toLowerCase()==="false"&&(r(this,Vt).classList.remove("disabled"),r(this,oe).removeAttribute("readonly"),r(this,Fs)&&l(this,dt,ut).call(this,r(this,Ot),"tabindex","0"),l(this,dt,ut).call(this,r(this,Ds),"tabindex","0"))}get readonly(){return r(this,oe).readOnly}set value(e){r(this,oe).value=e}get value(){const e=l(this,Go,gu).call(this);return e.val||e.lbl}destroy(){r(this,si).innerHTML="",this.value="",l(this,cd,Mg).call(this)}reset(e){x(this,ta,!0),l(this,Do,fu).call(this),this.destroy(),this.init(),this.setSelectedCountryItem(e),x(this,ta,!1)}}Vt=new WeakMap,oe=new WeakMap,Ot=new WeakMap,rn=new WeakMap,Hr=new WeakMap,Ds=new WeakMap,Zc=new WeakMap,Qc=new WeakMap,le=new WeakMap,ei=new WeakMap,Co=new WeakMap,si=new WeakMap,Si=new WeakMap,ms=new WeakMap,Zn=new WeakMap,Fs=new WeakMap,an=new WeakMap,Oo=new WeakMap,yo=new WeakMap,Lo=new WeakMap,qr=new WeakMap,Qn=new WeakMap,Jc=new WeakMap,Ao=new WeakMap,Yr=new WeakMap,Xr=new WeakMap,ii=new WeakMap,ni=new WeakMap,ce=new WeakMap,gs=new WeakMap,Es=new WeakMap,Zr=new WeakMap,Mo=new WeakMap,$o=new WeakMap,Qr=new WeakMap,Jr=new WeakMap,Kr=new WeakMap,ta=new WeakMap,Kc=new WeakSet,Tg=function(e){x(this,ii,e.document||document),x(this,ni,e.window||window),x(this,Mo,e.fieldKey),x(this,qr,e.defaultValue),x(this,Qn,e.placeholder),x(this,Jc,e.searchPlaceholder||"Search Country"),x(this,Ao,e.noCountryFoundText||"No Country Found"),x(this,Xr,e.rowHeight||30),x(this,Yr,e.maxHeight||370),x(this,Zn,e.selectedFlagImage),x(this,Fs,e.selectedCountryClearable),x(this,an,e.searchClearable),x(this,Oo,e.optionFlagImage),x(this,yo,e.detectCountryByIp),x(this,Lo,e.detectCountryByGeo),x(this,Zr,e.assetsURL),x(this,Kr,e.onChange),x(this,gs,e.attributes||{}),x(this,Es,e.classNames||{}),typeof e.options=="string"&&(e.options=l(this,td,vg).call(this,e.options)),x(this,ce,e.options.filter(s=>!s.hide)),x(this,ms,r(this,ce))},td=new WeakSet,vg=function(e){const s=e.split("->");let i=r(this,ni);return s.forEach(n=>{i=i[n]}),i},No=new WeakSet,uu=function(){l(this,bs,Xs).call(this,r(this,Ot),"click",e=>{l(this,Uo,_u).call(this,e)}),l(this,bs,Xs).call(this,r(this,Ot),"keyup",e=>{l(this,Uo,_u).call(this,e)}),l(this,bs,Xs).call(this,r(this,Vt),"keydown",e=>{l(this,rd,Og).call(this,e)}),r(this,an)&&l(this,bs,Xs).call(this,r(this,ei),"click",()=>{this.searchOptions("")}),l(this,bs,Xs).call(this,r(this,le),"keyup",e=>{l(this,ad,yg).call(this,e)})},ed=new WeakSet,xg=function(){const e=r(this,ce).find(s=>{const i=r(this,qr);return s.i===i?!0:s.val?s.val===i:s.lbl===i});e&&this.setSelectedCountryItem(e.i)},sd=new WeakSet,Sg=function(){const e=r(this,oe).name,i=decodeURIComponent(`${r(this,ii).URL}`.replace(/\+/g,"%20")).replace(new RegExp(`.*${e}=([^&]*).*|(.*)`),"$1");i&&l(this,Po,pu).call(this,"",i)},de=new WeakSet,Ce=function(e){return r(this,Vt).querySelector(e)},bs=new WeakSet,Xs=function(e,s,i){e.addEventListener(s,i),r(this,Jr).push({selector:e,eventType:s,cb:i})},id=new WeakSet,Rg=function(){const{protocol:e}=r(this,ni).location;fetch(`${e}//www.cloudflare.com/cdn-cgi/trace`).then(s=>s.text()).then(s=>{const i=s.trim().split(`
`).reduce((n,a)=>{const[o,d]=a.split("=");return n[o]=d,n},{});this.setSelectedCountryItem(i==null?void 0:i.loc)})},nd=new WeakSet,Cg=function(){navigator.geolocation.getCurrentPosition(e=>{const{latitude:s,longitude:i}=e.coords,{protocol:n}=r(this,ni).location;fetch(`${n}//api.geonames.org/countryCodeJSON?username=bitcodezoho1&lat=${s}&lng=${i}`).then(a=>a.json()).then(a=>{this.setSelectedCountryItem(a.countryCode)})})},rd=new WeakSet,Og=function(e){var a,o;e.stopPropagation();const s=r(this,ii).activeElement;let i=null;if(l(this,on,xr).call(this)){const d=Number(s.dataset.index||-1);if(e.key==="ArrowDown"||!e.shiftKey&&e.key==="Tab"){if(e.preventDefault(),s===r(this,le))i=l(this,de,Ce).call(this,".option:not(.disabled-opt)");else if(s.classList.contains("option")){const c=l(this,ea,pc).call(this,d,"next"),h=l(this,Jn,Ka).call(this,c);h?i=h:c+1<r(this,ms).length&&((a=this.virtualOptionList)==null||a.scrollToIndex(c),setTimeout(()=>{const u=l(this,Jn,Ka).call(this,c);u&&u.focus()},50))}}else if(e.key==="ArrowUp"||e.shiftKey&&e.key==="Tab"){if(e.preventDefault(),s===r(this,le))i=r(this,Ot),l(this,on,xr).call(this)&&this.setMenu({open:!1});else if(s.classList.contains("option")){const c=l(this,ea,pc).call(this,d,"previous"),h=l(this,Jn,Ka).call(this,c);h?i=h:c>0?((o=this.virtualOptionList)==null||o.scrollToIndex(c),setTimeout(()=>{const u=l(this,Jn,Ka).call(this,c);u&&u.focus()},50)):h||(i=r(this,le))}}else e.key==="Escape"&&this.setMenu({open:!1})}else if(e.key>="a"&&e.key<="z"){clearTimeout(r(this,$o)),x(this,Qr,r(this,Qr)+e.key),x(this,$o,setTimeout(()=>{x(this,Qr,"")},300));const d=r(this,ce).find(c=>!c.disabled&&c.lbl.toLowerCase().startsWith(r(this,Qr)));d&&this.setSelectedCountryItem(d.i)}else if(e.key==="ArrowDown"||e.key==="ArrowUp"){e.preventDefault();const d=l(this,Fo,mu).call(this),c=e.key==="ArrowDown"?"next":"previous",h=l(this,ea,pc).call(this,d,c);h>-1&&h<r(this,ce).length&&(this.value=r(this,ce)[h].val||r(this,ce)[h].lbl,l(this,sa,fc).call(this,r(this,oe),"blur"))}i&&i.focus()},Jn=new WeakSet,Ka=function(e){return l(this,de,Ce).call(this,`.${this.fieldKey}-option-list .option[data-index="${e}"]`)},ea=new WeakSet,pc=function(e=-1,s){if(s==="next"){const i=r(this,ce).length;for(let n=e+1;n<i;n+=1)if(!r(this,ce)[n].disabled)return n}else if(s==="previous"){for(let i=e-1;i>=0;i-=1)if(!r(this,ce)[i].disabled)return i}},Po=new WeakSet,pu=function(e,s){const i=r(this,ce).find(n=>n.i===s||n.val===s||n.lbl===s);i&&e!==s&&this.setSelectedCountryItem(i.i),typeof bit_conditionals!="undefined"&&bit_conditionals({target:r(this,oe)})},Do=new WeakSet,fu=function(e){e==null||e.stopPropagation(),x(this,Si,""),r(this,Zn)&&(r(this,rn).src=r(this,Zc)),l(this,tr,eo).call(this,r(this,Hr),r(this,Qn)),r(this,Fs)&&l(this,We,ps).call(this,r(this,Ds),"display","none"),l(this,dt,ut).call(this,r(this,Ot),"aria-label","Selected country cleared"),r(this,ta)||r(this,Ot).focus(),this.setMenu({open:!1}),this.value="",l(this,sa,fc).call(this,r(this,oe),"blur"),setTimeout(()=>{l(this,dt,ut).call(this,r(this,Ot),"aria-label",r(this,Qn))},100)},sa=new WeakSet,fc=function(e,s){const i=new Event(s);e.dispatchEvent(i)},Fo=new WeakSet,mu=function(){return r(this,ms).findIndex(e=>e.i===r(this,Si))},Go=new WeakSet,gu=function(){return r(this,ce).find(e=>e.i===r(this,Si))},Kn=new WeakSet,to=function(e){return r(this,ii).createElement(e)},Gs=new WeakSet,Ii=function(e,s){e.classList.add(s)},tr=new WeakSet,eo=function(e,s){e.textContent=s},dt=new WeakSet,ut=function(e,s,i){var n;(n=e==null?void 0:e.setAttribute)==null||n.call(e,s,i)},We=new WeakSet,ps=function(e,s,i){e.style.setProperty(s,i,"important")},Bo=new WeakSet,Eu=function(){if(!l(this,on,xr).call(this))return;l(this,ko,bu).call(this);const e=l(this,Fo,mu).call(this),s=l(this,de,Ce).call(this,`.option[data-index="${e}"]`);s&&s.scrollIntoView({block:"nearest",inline:"nearest"})},er=new WeakSet,so=function(e,s){s.trim().split(/\b\s+\b/g).forEach(i=>l(this,Gs,Ii).call(this,e,i))},sr=new WeakSet,io=function(e,s){const i=s.length;if(i)for(let n=0;n<i;n+=1)l(this,dt,ut).call(this,e,s[n].key,s[n].value)},ip=new WeakSet,Rx=function(){const e=l(this,de,Ce).call(this,".option");if(!e)return;const s=r(this,ni).getComputedStyle(e),i=parseFloat(s.marginTop)+parseFloat(s.marginBottom),n=e.offsetHeight+i||0;n!==r(this,Xr)&&(x(this,Xr,n),r(this,si).innerHTML="",l(this,ko,bu).call(this))},ko=new WeakSet,bu=function(){r(this,si).innerHTML="";const e=r(this,ms).map((s,i)=>{const n=l(this,Kn,to).call(this,"li");if(l(this,dt,ut).call(this,n,"data-key",s.i),l(this,dt,ut).call(this,n,"data-index",i),"option"in r(this,gs)){const d=r(this,gs).option;l(this,sr,io).call(this,n,d)}if(l(this,dt,ut).call(this,n,"data-dev-option",this.fieldKey),!s.i)return l(this,tr,eo).call(this,n,s.lbl),l(this,Gs,Ii).call(this,n,"opt-not-found"),n;if(l(this,Gs,Ii).call(this,n,"option"),"option"in r(this,Es)){const d=r(this,Es).option;d&&l(this,er,so).call(this,n,d)}const a=l(this,Kn,to).call(this,"span");if(l(this,Gs,Ii).call(this,a,"opt-lbl-wrp"),"opt-lbl-wrp"in r(this,Es)){const d=r(this,Es)["opt-lbl-wrp"];d&&l(this,er,so).call(this,a,d)}if("opt-lbl-wrp"in r(this,gs)){const d=r(this,gs)["opt-lbl-wrp"];l(this,sr,io).call(this,a,d)}if(r(this,Oo)){const d=l(this,Kn,to).call(this,"img");if("opt-icn"in r(this,gs)){const c=r(this,gs)["opt-icn"];c&&l(this,sr,io).call(this,d,c)}if(l(this,Gs,Ii).call(this,d,"opt-icn"),"opt-icn"in r(this,Es)){const c=r(this,Es)["opt-icn"];c&&l(this,er,so).call(this,d,c)}d.src=`${r(this,Zr)}${s.img}`,d.alt=`${s.lbl} flag image`,d.loading="lazy",l(this,dt,ut).call(this,d,"aria-hidden",!0),a.append(d)}const o=l(this,Kn,to).call(this,"span");if("opt-lbl"in r(this,gs)){const d=r(this,gs)["opt-lbl"];l(this,sr,io).call(this,o,d)}if(l(this,Gs,Ii).call(this,o,"opt-lbl"),"opt-lbl"in r(this,Es)){const d=r(this,Es)["opt-lbl"];d&&l(this,er,so).call(this,o,d)}return l(this,tr,eo).call(this,o,s.lbl),a.append(o),n.tabIndex=l(this,on,xr).call(this)?"0":"-1",l(this,dt,ut).call(this,n,"role","option"),l(this,dt,ut).call(this,n,"aria-posinset",i+1),l(this,dt,ut).call(this,n,"aria-setsize",r(this,ms).length),l(this,bs,Xs).call(this,n,"click",d=>{this.setSelectedCountryItem(d.currentTarget.dataset.key)}),l(this,bs,Xs).call(this,n,"keyup",d=>{d.key==="Enter"&&this.setSelectedCountryItem(d.currentTarget.dataset.key)}),s.disabled&&l(this,Gs,Ii).call(this,n,"disabled-opt"),n.append(a),r(this,Si)===s.i?(l(this,Gs,Ii).call(this,n,"selected-opt"),l(this,dt,ut).call(this,n,"aria-selected",!0)):l(this,dt,ut).call(this,n,"aria-selected",!1),n});r(this,si).append(...e)},ad=new WeakSet,yg=function(e){var s;if(e.stopPropagation(),e.key==="Enter"&&r(this,ms).length){const i=(s=r(this,ms))==null?void 0:s[0].i;i&&(this.setSelectedCountryItem(i),this.searchOptions(""))}else this.searchOptions(e.target.value)},od=new WeakSet,Lg=function(e){r(this,le).value=e},jo=new WeakSet,Iu=function(e){r(this,Vt).contains(e.target)||this.setMenu({open:!1})},on=new WeakSet,xr=function(){return r(this,Vt).classList.contains("menu-open")},ld=new WeakSet,Ag=function(){const e=r(this,ni),s=r(this,Ot).getBoundingClientRect(),i=s.top,n=e.innerHeight-s.bottom;n<i&&n<r(this,Yr)?(l(this,We,ps).call(this,r(this,Vt),"flex-direction","column-reverse"),l(this,We,ps).call(this,r(this,Vt),"bottom","0%")):(l(this,We,ps).call(this,r(this,Vt),"flex-direction","column"),l(this,We,ps).call(this,r(this,Vt),"bottom","auto"))},Uo=new WeakSet,_u=function(e){e.code==="Space"&&(r(this,le).focus(),this.setMenu({open:!0})),e.type==="click"&&(l(this,on,xr).call(this)?this.setMenu({open:!1}):(r(this,le).focus(),this.setMenu({open:!0})))},cd=new WeakSet,Mg=function(){r(this,Jr).forEach(({selector:e,eventType:s,cb:i})=>{e.removeEventListener(s,i)})};function Gh(t,e,s,i=0){const n=new MutationObserver(o=>{o.forEach(d=>{if(d.attributeName===e){const{oldValue:c}=d,h=d.target[e];typeof s=="function"&&setTimeout(s.call(this,c,h),i)}})}),a={attributes:!0,attributeOldValue:!0,attributeFilter:[e]};return n.observe(t,a),n}var kf=11;function Cx(t,e){var s=e.attributes,i,n,a,o,d;if(!(e.nodeType===kf||t.nodeType===kf)){for(var c=s.length-1;c>=0;c--)i=s[c],n=i.name,a=i.namespaceURI,o=i.value,a?(n=i.localName||n,d=t.getAttributeNS(a,n),d!==o&&(i.prefix==="xmlns"&&(n=i.name),t.setAttributeNS(a,n,o))):(d=t.getAttribute(n),d!==o&&t.setAttribute(n,o));for(var h=t.attributes,u=h.length-1;u>=0;u--)i=h[u],n=i.name,a=i.namespaceURI,a?(n=i.localName||n,e.hasAttributeNS(a,n)||t.removeAttributeNS(a,n)):e.hasAttribute(n)||t.removeAttribute(n)}}var nc,Ox="http://www.w3.org/1999/xhtml",Ze=typeof document=="undefined"?void 0:document,yx=!!Ze&&"content"in Ze.createElement("template"),Lx=!!Ze&&Ze.createRange&&"createContextualFragment"in Ze.createRange();function Ax(t){var e=Ze.createElement("template");return e.innerHTML=t,e.content.childNodes[0]}function Mx(t){nc||(nc=Ze.createRange(),nc.selectNode(Ze.body));var e=nc.createContextualFragment(t);return e.childNodes[0]}function $x(t){var e=Ze.createElement("body");return e.innerHTML=t,e.childNodes[0]}function Nx(t){return t=t.trim(),yx?Ax(t):Lx?Mx(t):$x(t)}function rc(t,e){var s=t.nodeName,i=e.nodeName,n,a;return s===i?!0:(n=s.charCodeAt(0),a=i.charCodeAt(0),n<=90&&a>=97?s===i.toUpperCase():a<=90&&n>=97?i===s.toUpperCase():!1)}function Px(t,e){return!e||e===Ox?Ze.createElement(t):Ze.createElementNS(e,t)}function Dx(t,e){for(var s=t.firstChild;s;){var i=s.nextSibling;e.appendChild(s),s=i}return e}function Yh(t,e,s){t[s]!==e[s]&&(t[s]=e[s],t[s]?t.setAttribute(s,""):t.removeAttribute(s))}var jf={OPTION:function(t,e){var s=t.parentNode;if(s){var i=s.nodeName.toUpperCase();i==="OPTGROUP"&&(s=s.parentNode,i=s&&s.nodeName.toUpperCase()),i==="SELECT"&&!s.hasAttribute("multiple")&&(t.hasAttribute("selected")&&!e.selected&&(t.setAttribute("selected","selected"),t.removeAttribute("selected")),s.selectedIndex=-1)}Yh(t,e,"selected")},INPUT:function(t,e){Yh(t,e,"checked"),Yh(t,e,"disabled"),t.value!==e.value&&(t.value=e.value),e.hasAttribute("value")||t.removeAttribute("value")},TEXTAREA:function(t,e){var s=e.value;t.value!==s&&(t.value=s);var i=t.firstChild;if(i){var n=i.nodeValue;if(n==s||!s&&n==t.placeholder)return;i.nodeValue=s}},SELECT:function(t,e){if(!e.hasAttribute("multiple")){for(var s=-1,i=0,n=t.firstChild,a,o;n;)if(o=n.nodeName&&n.nodeName.toUpperCase(),o==="OPTGROUP")a=n,n=a.firstChild;else{if(o==="OPTION"){if(n.hasAttribute("selected")){s=i;break}i++}n=n.nextSibling,!n&&a&&(n=a.nextSibling,a=null)}t.selectedIndex=s}}},Ja=1,Uf=11,Vf=3,zf=8;function Qi(){}function Fx(t){if(t)return t.getAttribute&&t.getAttribute("id")||t.id}function Gx(t){return function(s,i,n){if(n||(n={}),typeof i=="string")if(s.nodeName==="#document"||s.nodeName==="HTML"||s.nodeName==="BODY"){var a=i;i=Ze.createElement("html"),i.innerHTML=a}else i=Nx(i);else i.nodeType===Uf&&(i=i.firstElementChild);var o=n.getNodeKey||Fx,d=n.onBeforeNodeAdded||Qi,c=n.onNodeAdded||Qi,h=n.onBeforeElUpdated||Qi,u=n.onElUpdated||Qi,p=n.onBeforeNodeDiscarded||Qi,g=n.onNodeDiscarded||Qi,m=n.onBeforeElChildrenUpdated||Qi,E=n.skipFromChildren||Qi,I=n.addChild||function(M,G){return M.appendChild(G)},T=n.childrenOnly===!0,C=Object.create(null),w=[];function v(M){w.push(M)}function S(M,G){if(M.nodeType===Ja)for(var U=M.firstChild;U;){var H=void 0;G&&(H=o(U))?v(H):(g(U),U.firstChild&&S(U,G)),U=U.nextSibling}}function O(M,G,U){p(M)!==!1&&(G&&G.removeChild(M),g(M),S(M,U))}function L(M){if(M.nodeType===Ja||M.nodeType===Uf)for(var G=M.firstChild;G;){var U=o(G);U&&(C[U]=G),L(G),G=G.nextSibling}}L(s);function P(M){c(M);for(var G=M.firstChild;G;){var U=G.nextSibling,H=o(G);if(H){var Y=C[H];Y&&rc(G,Y)?(G.parentNode.replaceChild(Y,G),D(Y,G)):P(G)}else P(G);G=U}}function y(M,G,U){for(;G;){var H=G.nextSibling;(U=o(G))?v(U):O(G,M,!0),G=H}}function D(M,G,U){var H=o(G);H&&delete C[H],!(!U&&(h(M,G)===!1||(t(M,G),u(M),m(M,G)===!1)))&&(M.nodeName!=="TEXTAREA"?V(M,G):jf.TEXTAREA(M,G))}function V(M,G){var U=E(M),H=G.firstChild,Y=M.firstChild,at,ot,lt,Et,Q;t:for(;H;){for(Et=H.nextSibling,at=o(H);!U&&Y;){if(lt=Y.nextSibling,H.isSameNode&&H.isSameNode(Y)){H=Et,Y=lt;continue t}ot=o(Y);var st=Y.nodeType,ct=void 0;if(st===H.nodeType&&(st===Ja?(at?at!==ot&&((Q=C[at])?lt===Q?ct=!1:(M.insertBefore(Q,Y),ot?v(ot):O(Y,M,!0),Y=Q):ct=!1):ot&&(ct=!1),ct=ct!==!1&&rc(Y,H),ct&&D(Y,H)):(st===Vf||st==zf)&&(ct=!0,Y.nodeValue!==H.nodeValue&&(Y.nodeValue=H.nodeValue))),ct){H=Et,Y=lt;continue t}ot?v(ot):O(Y,M,!0),Y=lt}if(at&&(Q=C[at])&&rc(Q,H))U||I(M,Q),D(Q,H);else{var pt=d(H);pt!==!1&&(pt&&(H=pt),H.actualize&&(H=H.actualize(M.ownerDocument||Ze)),I(M,H),P(H))}H=Et,Y=lt}y(M,Y,ot);var ht=jf[M.nodeName];ht&&ht(M,G)}var k=s,B=k.nodeType,X=i.nodeType;if(!T){if(B===Ja)X===Ja?rc(s,i)||(g(s),k=Dx(s,Px(i.nodeName,i.namespaceURI))):k=i;else if(B===Vf||B===zf){if(X===B)return k.nodeValue!==i.nodeValue&&(k.nodeValue=i.nodeValue),k;k=i}}if(k===i)g(s);else{if(i.isSameNode&&i.isSameNode(k))return;if(D(k,i,T),w)for(var N=0,W=w.length;N<W;N++){var F=C[w[N]];F&&O(F,F.parentNode,!1)}}return!T&&k!==s&&s.parentNode&&(k.actualize&&(k=k.actualize(s.ownerDocument||Ze)),s.parentNode.replaceChild(k,s)),k}}var Bx=Gx(Cx);function kx(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var jx="start",Ux="center",Vx="end",zx=function(){function t(e){var s=e.itemCount,i=e.itemSizeGetter,n=e.estimatedItemSize;kx(this,t),this._itemSizeGetter=i,this._itemCount=s,this._estimatedItemSize=n,this._itemSizeAndPositionData={},this._lastMeasuredIndex=-1}return t.prototype.getLastMeasuredIndex=function(){return this._lastMeasuredIndex},t.prototype.getSizeAndPositionForIndex=function(s){if(s<0||s>=this._itemCount)throw Error("Requested index "+s+" is outside of range 0.."+this._itemCount);if(s>this._lastMeasuredIndex){for(var i=this.getSizeAndPositionOfLastMeasuredItem(),n=i.offset+i.size,a=this._lastMeasuredIndex+1;a<=s;a++){var o=this._itemSizeGetter({index:a});if(o==null||isNaN(o))throw Error("Invalid size returned for index "+a+" of value "+o);this._itemSizeAndPositionData[a]={offset:n,size:o},n+=o}this._lastMeasuredIndex=s}return this._itemSizeAndPositionData[s]},t.prototype.getSizeAndPositionOfLastMeasuredItem=function(){return this._lastMeasuredIndex>=0?this._itemSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}},t.prototype.getTotalSize=function(){var s=this.getSizeAndPositionOfLastMeasuredItem();return s.offset+s.size+(this._itemCount-this._lastMeasuredIndex-1)*this._estimatedItemSize},t.prototype.getUpdatedOffsetForIndex=function(s){var i=s.align,n=i===void 0?jx:i,a=s.containerSize,o=s.targetIndex;if(a<=0)return 0;var d=this.getSizeAndPositionForIndex(o),c=d.offset,h=c-a+d.size,u=void 0;switch(n){case Vx:u=h;break;case Ux:u=c-(a-d.size)/2;break;default:u=c;break}var p=this.getTotalSize();return Math.max(0,Math.min(p-a,u))},t.prototype.getVisibleRange=function(s){var i=s.containerSize,n=s.offset,a=s.overscanCount,o=this.getTotalSize();if(o===0)return{};var d=n+i,c=this._findNearestItem(n),h=c,u=this.getSizeAndPositionForIndex(c);for(n=u.offset+u.size;n<d&&h<this._itemCount-1;)h++,n+=this.getSizeAndPositionForIndex(h).size;return a&&(c=Math.max(0,c-a),h=Math.min(h+a,this._itemCount)),{start:c,stop:h}},t.prototype.resetItem=function(s){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,s-1)},t.prototype._binarySearch=function(s){for(var i=s.low,n=s.high,a=s.offset,o=void 0,d=void 0;i<=n;){if(o=i+Math.floor((n-i)/2),d=this.getSizeAndPositionForIndex(o).offset,d===a)return o;d<a?i=o+1:d>a&&(n=o-1)}if(i>0)return i-1},t.prototype._exponentialSearch=function(s){for(var i=s.index,n=s.offset,a=1;i<this._itemCount&&this.getSizeAndPositionForIndex(i).offset<n;)i+=a,a*=2;return this._binarySearch({high:Math.min(i,this._itemCount-1),low:Math.floor(i/2),offset:n})},t.prototype._findNearestItem=function(s){if(isNaN(s))throw Error("Invalid offset "+s+" specified");s=Math.max(0,s);var i=this.getSizeAndPositionOfLastMeasuredItem(),n=Math.max(0,this._lastMeasuredIndex);return i.offset>=s?this._binarySearch({high:n,low:0,offset:s}):this._exponentialSearch({index:n,offset:s})},t}();function Wx(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Hx="position:relative; overflow:hidden; width:100%; min-height:100%; will-change: transform;",qx="position:absolute; top:0; left:0; height:100%; width:100%; overflow:visible;",Rp=function(){function t(e,s){var i=this;Wx(this,t),this.getRowHeight=function(n){var a=n.index,o=i.options.rowHeight;return typeof o=="function"?o(a):Array.isArray(o)?o[a]:o},this.container=e,this.options=s,this.state={},this._initializeSizeAndPositionManager(s.rowCount),this.render=this.render.bind(this),this.handleScroll=this.handleScroll.bind(this),this.componentDidMount()}return t.prototype.componentDidMount=function(){var s=this,i=this.options,n=i.onMount,a=i.initialScrollTop,o=i.initialIndex,d=i.height,c=a||o!=null&&this.getRowOffset(o)||0,h=this.inner=document.createElement("div"),u=this.content=document.createElement("div");h.setAttribute("style",Hx),u.setAttribute("style",qx),h.appendChild(u),this.container.appendChild(h),this.setState({offset:c,height:d},function(){c&&(s.container.scrollTop=c),s.container.addEventListener("scroll",s.handleScroll),typeof n=="function"&&n()})},t.prototype._initializeSizeAndPositionManager=function(s){this._sizeAndPositionManager=new zx({itemCount:s,itemSizeGetter:this.getRowHeight,estimatedItemSize:this.options.estimatedRowHeight||100})},t.prototype.setState=function(){var s=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments[1];this.state=Object.assign(this.state,i),requestAnimationFrame(function(){s.render(),typeof n=="function"&&n()})},t.prototype.resize=function(s,i){this.setState({height:s},i)},t.prototype.handleScroll=function(s){var i=this.options.onScroll,n=this.container.scrollTop;this.setState({offset:n}),typeof i=="function"&&i(n,s)},t.prototype.getRowOffset=function(s){var i=this._sizeAndPositionManager.getSizeAndPositionForIndex(s),n=i.offset;return n},t.prototype.scrollToIndex=function(s,i){var n=this.state.height,a=this._sizeAndPositionManager.getUpdatedOffsetForIndex({align:i,containerSize:n,targetIndex:s});this.container.scrollTop=a},t.prototype.setRowCount=function(s){this._initializeSizeAndPositionManager(s),this.render()},t.prototype.onRowsRendered=function(s){var i=this.options.onRowsRendered;typeof i=="function"&&i(s)},t.prototype.destroy=function(){this.container.removeEventListener("scroll",this.handleScroll),this.container.innerHTML=""},t.prototype.render=function(){for(var s=this.options,i=s.overscanCount,n=s.renderRow,a=this.state,o=a.height,d=a.offset,c=d===void 0?0:d,h=this._sizeAndPositionManager.getVisibleRange({containerSize:o,offset:c,overscanCount:i}),u=h.start,p=h.stop,g=document.createDocumentFragment(),m=u;m<=p;m++)g.appendChild(n(m));this.inner.style.height=this._sizeAndPositionManager.getTotalSize()+"px",this.content.style.top=this.getRowOffset(u)+"px",Bx(this.content,g,{childrenOnly:!0,getNodeKey:function(I){return I.nodeIndex}}),this.onRowsRendered({startIndex:u,stopIndex:p})},t}();const Yx=({fieldKey:t,formID:e,attr:s,styleClasses:i})=>{const n=j.useRef(null),a=j.useRef(null),d=et(fe)[t],c=et(zl),{options:h,ph:u}=d;return j.useEffect(()=>{const p=document.getElementById("bit-grid-layout").contentWindow;n!=null&&n.current||(n.current=At(`.${t}-country-fld-wrp`));const g=a.current,m=n.current;g&&m&&"destroy"in g&&g.destroy();const{selectedFlagImage:E,selectedCountryClearable:I,searchClearable:T,optionFlagImage:C,detectCountryByIp:w,detectCountryByGeo:v,defaultValue:S,searchPlaceholder:O,noCountryFoundText:L}=d.config;p.bit_virtualized_list||(p.bit_virtualized_list=Rp),p.observeElm||(p.observeElm=Gh);const P={fieldKey:t,selectedFlagImage:E,selectedCountryClearable:I,searchClearable:T,optionFlagImage:C,detectCountryByIp:w,detectCountryByGeo:v,defaultValue:S,placeholder:u,searchPlaceholder:O,noCountryFoundText:L,options:h,assetsURL:`${c.assetsURL}/../static/countries/`,document:document.getElementById("bit-grid-layout").contentDocument,window:p,attributes:{option:mt(t,"option"),"opt-lbl-wrp":mt(t,"opt-lbl-wrp"),"opt-icn":mt(t,"opt-icn"),"opt-lbl":mt(t,"opt-lbl")},classNames:{option:R(t,"option"),"opt-lbl-wrp":R(t,"opt-lbl-wrp"),"opt-icn":R(t,"opt-icn"),"opt-lbl":R(t,"opt-lbl")}};a.current=new Sx(m,P)},[d]),f.jsxs(f.Fragment,{children:[f.jsx(_t,{styleClasses:i}),f.jsx(Zt,{formID:e,fieldKey:t,fieldData:s,children:f.jsx("div",{className:`${t}-country-fld-container`,children:f.jsxs("div",A(_({"data-dev-country-fld-wrp":t,className:`${t}-country-fld-wrp ${R(t,"country-fld-wrp")} ${d.valid.disabled?"disabled":""} ${d.valid.readonly?"readonly":""}`,ref:n},$(t,"country-fld-wrp")),{children:[f.jsx("input",_(_({name:"country-name",type:"hidden",className:`${t}-country-hidden-input`},"disabled"in d.valid&&{disabled:d.valid.disabled}),"readonly"in d.valid&&{readOnly:d.valid.readonly})),f.jsxs("div",{"data-testid":`${t}-dpd-wrp`,className:`${t}-dpd-wrp`,"aria-live":"assertive","aria-label":"Select a Country",role:"combobox","aria-expanded":"false",tabIndex:d.valid.disabled?"-1":"0",children:[f.jsxs("div",{className:`${t}-selected-country-wrp`,children:[d.config.selectedFlagImage&&f.jsx("img",_({"data-dev-selected-country-img":t,className:`${t}-selected-country-img ${R(t,"selected-country-img")}`,"aria-hidden":"true",alt:"selected country flag",src:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>"},$(t,"selected-country-img"))),f.jsx("span",{"data-testid":`${t}-slctd-cntry-lbl`,"data-dev-selected-country-lbl":t,className:`${t}-selected-country-lbl`,children:u})]}),f.jsxs("div",{className:`${t}-dpd-btn-wrp`,children:[d.config.selectedCountryClearable&&f.jsx("button",A(_({"data-testid":`${t}-clr-slctd-cntry-btn`,type:"button",title:"Clear selected country value","data-dev-inp-clr-btn":t,className:`${t}-inp-clr-btn ${R(t,"inp-clr-btn")}`},$(t,"inp-clr-btn")),{children:f.jsxs("svg",{width:"15",height:"15",role:"img",title:"Cross icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),f.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})),f.jsx("div",{className:`${t}-dpd-down-btn`,children:f.jsx("svg",{width:"15",height:"15",viewBox:"0 0 24 24",title:"Cross icon",role:"img",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:f.jsx("polyline",{points:"6 9 12 15 18 9"})})})]})]}),f.jsx("div",A(_({className:`${t}-option-wrp  ${R(t,"option-wrp")}`,"data-dev-option-wrp":t},$(t,"option-search-wrp")),{children:f.jsxs("div",{className:`${t}-option-inner-wrp`,children:[f.jsxs("div",{className:`${t}-option-search-wrp`,"data-dev-option-search-wrp":t,children:[f.jsx("input",_({"data-testid":`${t}-opt-srch-inp`,type:"search","data-dev-opt-search-input":t,className:`${t}-opt-search-input ${R(t,"opt-search-input")}`,placeholder:d.config.searchPlaceholder,autoComplete:"country-name",tabIndex:"-1"},$(t,"opt-search-input"))),f.jsxs("svg",A(_({"data-dev-opt-search-icn":t,className:`${t}-opt-search-icn ${R(t,"opt-search-icn")}`,"aria-hidden":"true",width:"22",height:"22",role:"img",title:"Search icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},$(t,"opt-search-icn")),{children:[f.jsx("circle",{cx:"11",cy:"11",r:"8"}),f.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})),d.config.searchClearable&&f.jsx("button",A(_({"data-testid":`${t}-srch-clr-btn`,type:"button",title:"Clear search","data-dev-search-clear-btn":t,className:`${t}-search-clear-btn ${R(t,"search-clear-btn")}`,tabIndex:"-1"},$(t,"search-clear-btn")),{children:f.jsxs("svg",{width:"13",height:"13",role:"img",title:"Cross icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),f.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}))]}),f.jsx("ul",A(_({className:`${t}-option-list ${R(t,"option-list")}`,tabIndex:"-1",role:"listbox","aria-label":"country list","data-dev-option-list":t},$(t,"option-list")),{children:f.jsxs("li",{className:"option",children:[f.jsx("span",{className:"opt-prefix",children:"Prefix"}),f.jsxs("span",{className:"opt-lbl-wrp",children:[f.jsx("img",{className:"opt-icn",src:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>",alt:"Placeholder"}),f.jsx("span",{className:"opt-lbl",children:"Option"})]}),f.jsx("span",{className:"opt-suffix",children:"Suffix"})]})}))]})}))]}))})})]})};var dd,Oe,is,Ri,ln,Vo,ia,Ci,hd,ye,zo,bt,ri,cn,Wo,ir,Bs,Oi,dn,na,Z,Ho,ra,qo,ud,$g,pd,Ng,Yo,wu,aa,mc,Xo,Tu,fd,Pg,md,Dg,gd,Fg,oa,gc,zt,ne,Le,Qe,Ed,Gg,bd,Bg,la,Ec,Id,kg,nr,no,ca,bc,Zo,vu,_d,jg,Qo,xu,wd,Ug,Jo,Su,Ko,Ru,hn,Sr,ns,Ms,da,Ic,ft,gt,un,Rr,pn,Cr,Ie,ke,np,Zx,tl,Cu,el,Ou,sl,yu,Td,Vg,vd,zg,fn,Or,xd,Wg,il,Lu,Sd,Hg;class Xx{constructor(e,s){b(this,ud);b(this,pd);b(this,Yo);b(this,aa);b(this,Xo);b(this,fd);b(this,md);b(this,gd);b(this,oa);b(this,zt);b(this,Le);b(this,Ed);b(this,bd);b(this,la);b(this,Id);b(this,nr);b(this,ca);b(this,Zo);b(this,_d);b(this,Qo);b(this,wd);b(this,Jo);b(this,Ko);b(this,hn);b(this,ns);b(this,da);b(this,ft);b(this,un);b(this,pn);b(this,Ie);b(this,np);b(this,tl);b(this,el);b(this,sl);b(this,Td);b(this,vd);b(this,fn);b(this,xd);b(this,il);b(this,Sd);b(this,dd,"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>");b(this,Oe,null);b(this,is,null);b(this,Ri,null);b(this,ln,null);b(this,Vo,null);b(this,ia,null);b(this,Ci,null);b(this,hd,null);b(this,ye,null);b(this,zo,null);b(this,bt,null);b(this,ri,null);b(this,cn,null);b(this,Wo,30);b(this,ir,!1);b(this,Bs,[]);b(this,Oi,void 0);b(this,dn,{});b(this,na,"");b(this,Z,{maxHeight:370,searchCurrencyPlaceholder:"Search Currency",noCurrencyFoundText:"No Currency Found",selectedCurrencyClearable:!0,searchClearable:!0,selectedFlagImage:!0,defaultCurrencyKey:"",defaultValue:"",optionFlagImage:!0,inputFormatOptions:{formatter:"browser",showCurrencySymbol:!0,decimalSeparator:"."},valueFormatOptions:{formatter:"browser",showCurrencySymbol:!0,decimalSeparator:"."},attributes:{},classNames:{},assetsURL:""});b(this,Ho,null);b(this,ra,"");b(this,qo,[]);Object.assign(r(this,Z),s),x(this,dn,s.window?s.window:window),x(this,Oi,s.document?s.document:document),typeof e=="string"?x(this,Oe,r(this,Oi).querySelector(e)):x(this,Oe,e),typeof r(this,Z).options=="string"&&(r(this,Z).options=l(this,ud,$g).call(this,r(this,Z).options)),x(this,Bs,r(this,Z).options.filter(i=>!i.hide)),this.fieldKey=r(this,Z).fieldKey,x(this,na,s.assetsURL),this.init()}init(){x(this,zo,l(this,zt,ne).call(this,`.${this.fieldKey}-currency-inner-wrp`)),x(this,bt,l(this,zt,ne).call(this,`.${this.fieldKey}-currency-amount-input`)),x(this,is,l(this,zt,ne).call(this,`.${this.fieldKey}-currency-hidden-input`)),x(this,Ri,l(this,zt,ne).call(this,`.${this.fieldKey}-input-clear-btn`)),x(this,ia,l(this,zt,ne).call(this,`.${this.fieldKey}-selected-currency-img`)),x(this,hd,l(this,zt,ne).call(this,`.${this.fieldKey}-option-search-wrp`)),x(this,ye,l(this,zt,ne).call(this,`.${this.fieldKey}-opt-search-input`)),x(this,ln,l(this,zt,ne).call(this,`.${this.fieldKey}-dpd-wrp`)),x(this,Vo,l(this,zt,ne).call(this,`.${this.fieldKey}-option-wrp`)),x(this,ri,l(this,zt,ne).call(this,`.${this.fieldKey}-search-clear-btn`)),x(this,cn,l(this,zt,ne).call(this,`.${this.fieldKey}-option-list`)),this.setMenu({open:!1}),l(this,Le,Qe).call(this,r(this,Oe),"keydown",e=>{l(this,bd,Bg).call(this,e)}),l(this,Le,Qe).call(this,r(this,ln),"click",e=>{l(this,il,Lu).call(this,e)}),l(this,Le,Qe).call(this,r(this,ln),"keyup",e=>{l(this,il,Lu).call(this,e)}),l(this,Le,Qe).call(this,r(this,bt),"focus",()=>{l(this,pd,Ng).call(this)}),l(this,Le,Qe).call(this,r(this,bt),"blur",()=>{l(this,aa,mc).call(this)}),l(this,Le,Qe).call(this,r(this,bt),"input",e=>{l(this,wd,Ug).call(this,e)}),r(this,Z).selectedCurrencyClearable&&l(this,Le,Qe).call(this,r(this,Ri),"click",e=>{l(this,Id,kg).call(this,e)}),r(this,dn).observeElm(r(this,is),"value",(e,s)=>{l(this,Qo,xu).call(this,e,s)}),r(this,Z).defaultValue&&l(this,Ed,Gg).call(this),!r(this,Z).defaultValue&&r(this,Z).defaultCurrencyKey&&this.setSelectedCurrencyItem(r(this,Z).defaultCurrencyKey),r(this,Z).searchClearable&&(l(this,Ie,ke).call(this,r(this,ye),"padding-right","35px"),l(this,Ie,ke).call(this,r(this,ri),"display","none"),l(this,Le,Qe).call(this,r(this,ri),"click",()=>{this.searchOptions("")})),r(this,ye).value="",l(this,Le,Qe).call(this,r(this,ye),"keyup",e=>{l(this,vd,zg).call(this,e)})}setSelectedCurrencyItem(e){if(x(this,Ci,e),!r(this,Ci)){l(this,el,Ou).call(this);return}const s=l(this,Ko,Ru).call(this);s&&(r(this,Z).selectedFlagImage&&(r(this,ia).src=`${r(this,na)}${s.img}`),this.setMenu({open:!1}),l(this,aa,mc).call(this),r(this,ir)&&(!this.value&&r(this,bt).focus(),x(this,ir,!1)))}searchOptions(e){l(this,Td,Vg).call(this,e);let s=[];e?(s=r(this,Z).options.filter(i=>{const n=e.toLowerCase(),a=(i.lbl||"").toLowerCase(),o=(i.val||"").toLowerCase(),d=(i.i||"").toLowerCase();if(a.includes(n)||o.includes(n)||d.includes(n))return!0}),s.length||(s=[{i:0,lbl:r(this,Z).noCurrencyFoundText}]),x(this,Bs,s),r(this,Z).searchClearable&&l(this,Ie,ke).call(this,r(this,ri),"display","grid")):(x(this,Bs,r(this,Z).options),r(this,Z).searchClearable&&l(this,Ie,ke).call(this,r(this,ri),"display","none")),l(this,sl,yu).call(this)}setMenu({open:e}){l(this,Ie,ke).call(this,r(this,Vo),"max-height",`${e?r(this,Z).maxHeight:0}px`),e?(l(this,xd,Wg).call(this),l(this,ns,Ms).call(this,r(this,Oe),"menu-open"),l(this,Le,Qe).call(this,r(this,Oi),"click",s=>l(this,Zo,vu).call(this,s)),l(this,ft,gt).call(this,r(this,ye),"tabindex",0),l(this,ft,gt).call(this,r(this,ri),"tabindex",0),l(this,ft,gt).call(this,r(this,ln),"aria-expanded",!0),l(this,sl,yu).call(this)):(r(this,Oe).classList.remove("menu-open"),r(this,Oi).removeEventListener("click",l(this,Zo,vu)),setTimeout(()=>{this.searchOptions("")},100),l(this,ft,gt).call(this,r(this,ye),"tabindex",-1),l(this,ft,gt).call(this,r(this,ri),"tabindex",-1),l(this,ft,gt).call(this,r(this,ln),"aria-expanded",!1))}set value(e){r(this,is).value=e||""}get value(){return r(this,is).value}destroy(){r(this,cn).innerHTML="",this.value=r(this,Z).defaultValue,l(this,Sd,Hg).call(this)}reset(){l(this,el,Ou).call(this),this.destroy(),this.init()}}dd=new WeakMap,Oe=new WeakMap,is=new WeakMap,Ri=new WeakMap,ln=new WeakMap,Vo=new WeakMap,ia=new WeakMap,Ci=new WeakMap,hd=new WeakMap,ye=new WeakMap,zo=new WeakMap,bt=new WeakMap,ri=new WeakMap,cn=new WeakMap,Wo=new WeakMap,ir=new WeakMap,Bs=new WeakMap,Oi=new WeakMap,dn=new WeakMap,na=new WeakMap,Z=new WeakMap,Ho=new WeakMap,ra=new WeakMap,qo=new WeakMap,ud=new WeakSet,$g=function(e){const s=e.split("->");let i=r(this,dn);return s.forEach(n=>{i=i[n]}),i},pd=new WeakSet,Ng=function(){l(this,ft,gt).call(this,r(this,bt),"type","number"),r(this,bt).value=r(this,bt).dataset.numValue||""},Yo=new WeakSet,wu=function(e,s=0){const i=Bp(10,s||0);return Math.round(e*i)/i},aa=new WeakSet,mc=function(){l(this,ft,gt).call(this,r(this,bt),"type","text");const e=Number(r(this,bt).dataset.numValue);if(!e||Number.isNaN(e)){r(this,bt).value="",l(this,ft,gt).call(this,r(this,is),"value","");return}const{inputFormatOptions:s,valueFormatOptions:i}=r(this,Z),n=l(this,Xo,Tu).call(this,e,s);r(this,bt).value=n,this.value=l(this,Xo,Tu).call(this,e,i),l(this,la,Ec).call(this,r(this,is),"blur")},Xo=new WeakSet,Tu=function(e,s){const i=l(this,Ko,Ru).call(this),{defaultCurrencyKey:n}=r(this,Z),{formatter:a,roundToClosestInteger:o,showCurrencySymbol:d,currencyPosition:c,symbolPosition:h}=s,u=(i==null?void 0:i.i)||n;if(!u)return e;o&&(e=l(this,Yo,wu).call(this,e));let p="";return a==="browser"?p=l(this,fd,Pg).call(this,e,u,s):a==="custom"||!a?p=l(this,md,Dg).call(this,e,s):a==="none"&&(p=e),h==="left-number"?p=`${(i==null?void 0:i.symbol)||""}${p}`:h==="right-number"&&(p=`${p}${(i==null?void 0:i.symbol)||""}`),d&&(c==="left"?p=`${d?`${u} `:""}${p}`:c==="right"&&(p=`${p}${d?` ${u}`:""}`)),h==="left-currency"?p=`${(i==null?void 0:i.symbol)||""}${p}`:h==="right-currency"&&(p=`${p}${(i==null?void 0:i.symbol)||""}`),p},fd=new WeakSet,Pg=function(e,s,i){const{showCurrencySymbol:n,roundToClosestInteger:a}=i;return new Intl.NumberFormat(navigator.language,{style:"currency",currency:s}).formatToParts(e).map(c=>!n&&c.type==="currency"||a&&(c.type==="decimal"||c.type==="fraction")?"":c.value).join("")},md=new WeakSet,Dg=function(e,s){const{decimalSeparator:i,roundToClosestFractionDigits:n,minimumFractionDigits:a,maximumFractionDigits:o,numberFormat:d}=s,[c]=d.split(i),[h,u=""]=e.toString().split("."),p=l(this,gd,Fg).call(this,h,c);let g=u;const m=g.length;if(m>0){const I=o>0,T=a>0;if(n&&g){let C;I&&m>o?C=o:T&&m<a?C=a:C=m,g=l(this,Yo,wu).call(this,+`0.${g}`,C).toString().replace("0.","")}I&&g&&(g=g.slice(0,o))}g.length<a&&(g=g.padEnd(a,"0"));let E="";return g?E=`${p}${i}${g}`:E=p,E},gd=new WeakSet,Fg=function(e="",s=""){let i="",n=e.length-1;for(let a=s.length-1;a>=0;a--){const o=s[a],d=e[n];if(!d)break;o==="#"?(i=d+i,n--):i=o+i}return n>=0&&(i=e.substring(0,n+1)+i),i},oa=new WeakSet,gc=function(e=""){const{decimalSeparator:s}=r(this,Z).valueFormatOptions,i=new RegExp(`[^0-9${s}]`,"g");return e.replace(i,"")},zt=new WeakSet,ne=function(e){return r(this,Oe).querySelector(e)},Le=new WeakSet,Qe=function(e,s,i){e.addEventListener(s,i),r(this,qo).push({selector:e,eventType:s,cb:i})},Ed=new WeakSet,Gg=function(){r(this,bt).dataset.numValue=l(this,oa,gc).call(this,r(this,Z).defaultValue),l(this,Qo,xu).call(this,"",r(this,Z).defaultValue),r(this,Z).selectedCurrencyClearable&&l(this,Ie,ke).call(this,r(this,Ri),"display","grid")},bd=new WeakSet,Bg=function(e){var a,o;const s=r(this,Oi).activeElement;let i=null;const n=l(this,fn,Or).call(this);if(e.target!==r(this,bt)){if(n){const d=Number(s.dataset.index||-1);if(e.key==="ArrowDown"||!e.shiftKey&&e.key==="Tab"){if(e.preventDefault(),s===r(this,ye))i=l(this,zt,ne).call(this,".option:not(.disabled-opt)");else if(s.classList.contains("option")){const c=l(this,ca,bc).call(this,d,"next"),h=l(this,nr,no).call(this,c);h?i=h:c+1<r(this,Bs).length&&((a=this.virtualOptionList)==null||a.scrollToIndex(c),setTimeout(()=>{const u=l(this,nr,no).call(this,c);u&&u.focus()},50))}}else if(e.key==="ArrowUp"||e.shiftKey&&e.key==="Tab"){if(e.preventDefault(),s===r(this,ye))i=r(this,bt),l(this,fn,Or).call(this)&&this.setMenu({open:!1});else if(s.classList.contains("option")){const c=l(this,ca,bc).call(this,d,"previous"),h=l(this,nr,no).call(this,c);h?i=h:c>0?((o=this.virtualOptionList)==null||o.scrollToIndex(c),setTimeout(()=>{const u=l(this,nr,no).call(this,c);u&&u.focus()},50)):h||(i=r(this,ye))}}else e.key==="Escape"&&this.setMenu({open:!1})}else if(e.key>="a"&&e.key<="z"){clearTimeout(r(this,Ho)),x(this,ra,r(this,ra)+e.key),x(this,Ho,setTimeout(()=>{x(this,ra,"")},300));const d=r(this,Z).options.find(c=>!c.disabled&&c.lbl.toLowerCase().startsWith(r(this,ra)));d&&this.setSelectedCurrencyItem(d.i)}else if(e.key==="ArrowDown"||e.key==="ArrowUp"){e.preventDefault();const d=l(this,Jo,Su).call(this),c=e.key==="ArrowDown"?"next":"previous",h=l(this,ca,bc).call(this,d,c);h>-1&&h<r(this,Z).options.length&&(this.value=r(this,Z).options[h].val)}i&&i.focus()}},la=new WeakSet,Ec=function(e,s){const i=new Event(s);e.dispatchEvent(i)},Id=new WeakSet,kg=function(){r(this,bt).value="",l(this,ft,gt).call(this,r(this,is),"value",""),l(this,ft,gt).call(this,r(this,bt),"data-num-value",""),this.setSelectedCurrencyItem(r(this,Z).defaultCurrencyKey),l(this,la,Ec).call(this,r(this,bt),"input"),this.value="",l(this,la,Ec).call(this,r(this,is),"blur")},nr=new WeakSet,no=function(e){return l(this,zt,ne).call(this,`.${this.fieldKey}-option-list .option[data-index="${e}"]`)},ca=new WeakSet,bc=function(e=-1,s){if(s==="next"){const i=r(this,Z).options.length;for(let n=e+1;n<i;n++)if(!r(this,Z).options[n].disabled)return n}else if(s==="previous"){for(let i=e-1;i>=0;i--)if(!r(this,Z).options[i].disabled)return i}},Zo=new WeakSet,vu=function(e){r(this,Oe).contains(e.target)||this.setMenu({open:!1})},_d=new WeakSet,jg=function(e){var s;return((s=e.match(/[a-zA-Z]+/))==null?void 0:s[0])||""},Qo=new WeakSet,xu=function(e,s){const i=l(this,_d,jg).call(this,s),n=r(this,Z).options.find(a=>a.i===i);if((i&&n||!i&&r(this,Z).defaultCurrencyKey)&&e!==s){this.setSelectedCurrencyItem(i||r(this,Z).defaultCurrencyKey);const{decimalSeparator:a}=r(this,Z).valueFormatOptions,[o,d]=s.split(a),c=l(this,oa,gc).call(this,o),h=l(this,oa,gc).call(this,d),u=h?`${c}.${h}`:c;l(this,ft,gt).call(this,r(this,bt),"data-num-value",u),l(this,aa,mc).call(this)}typeof bit_conditionals!="undefined"&&bit_conditionals({target:r(this,is)})},wd=new WeakSet,Ug=function(e){const s=Number(e.target.value),{minValue:i,maxValue:n}=r(this,Z);if(s<i||s>n)return!1;l(this,ft,gt).call(this,r(this,bt),"data-num-value",s||""),r(this,Z).selectedCurrencyClearable&&(s?l(this,Ie,ke).call(this,r(this,Ri),"display","grid"):l(this,Ie,ke).call(this,r(this,Ri),"display","none"))},Jo=new WeakSet,Su=function(){const e=r(this,Bs).findIndex(s=>s.i===r(this,Ci));return e===-1?0:e},Ko=new WeakSet,Ru=function(){return r(this,Z).options.find(e=>e.i===r(this,Ci))},hn=new WeakSet,Sr=function(e){return r(this,Oi).createElement(e)},ns=new WeakSet,Ms=function(e,s){e.classList.add(s)},da=new WeakSet,Ic=function(e,s){e.textContent=s},ft=new WeakSet,gt=function(e,s,i){var n;(n=e==null?void 0:e.setAttribute)==null||n.call(e,s,i)},un=new WeakSet,Rr=function(e,s){s.trim().split(/\b\s+\b/g).forEach(i=>l(this,ns,Ms).call(this,e,i))},pn=new WeakSet,Cr=function(e,s){const i=s.length;if(i)for(let n=0;n<i;n+=1)l(this,ft,gt).call(this,e,s[n].key,s[n].value)},Ie=new WeakSet,ke=function(e,s,i){e.style.setProperty(s,i,"important")},np=new WeakSet,Zx=function(){const e=l(this,zt,ne).call(this,".option");if(!e)return;const s=r(this,dn).getComputedStyle(e),i=parseFloat(s.marginTop)+parseFloat(s.marginBottom),n=e.offsetHeight+i||0;n!==r(this,Wo)&&(x(this,Wo,n),r(this,cn).innerHTML="",l(this,tl,Cu).call(this))},tl=new WeakSet,Cu=function(){r(this,cn).innerHTML="";const e=r(this,Bs).map((s,i)=>{const n=l(this,hn,Sr).call(this,"li");if(l(this,ft,gt).call(this,n,"data-key",s.i),l(this,ft,gt).call(this,n,"data-index",i),"option"in r(this,Z).attributes){const c=r(this,Z).attributes.option;l(this,pn,Cr).call(this,n,c)}if(!s.i)return l(this,da,Ic).call(this,n,s.lbl),l(this,ns,Ms).call(this,n,"opt-not-found"),n;if(l(this,ns,Ms).call(this,n,"option"),"option"in r(this,Z).classNames){const c=r(this,Z).classNames.option;c&&l(this,un,Rr).call(this,n,c)}const a=l(this,hn,Sr).call(this,"span");if("opt-lbl-wrp"in r(this,Z).attributes){const c=r(this,Z).attributes["opt-lbl-wrp"];l(this,pn,Cr).call(this,a,c)}if(l(this,ns,Ms).call(this,a,"opt-lbl-wrp"),"opt-lbl-wrp"in r(this,Z).classNames){const c=r(this,Z).classNames["opt-lbl-wrp"];c&&l(this,un,Rr).call(this,a,c)}if(r(this,Z).optionFlagImage){const c=l(this,hn,Sr).call(this,"img");if("opt-icn"in r(this,Z).attributes){const h=r(this,Z).attributes["opt-icn"];l(this,pn,Cr).call(this,c,h)}if(l(this,ns,Ms).call(this,c,"opt-icn"),"opt-icn"in r(this,Z).classNames){const h=r(this,Z).classNames["opt-icn"];h&&l(this,un,Rr).call(this,c,h)}c.src=`${r(this,na)}${s.img}`,c.alt=`${s.lbl} flag image`,c.loading="lazy",l(this,ft,gt).call(this,c,"aria-hidden",!0),a.append(c)}const o=l(this,hn,Sr).call(this,"span");if("opt-lbl"in r(this,Z).attributes){const c=r(this,Z).attributes["opt-lbl"];l(this,pn,Cr).call(this,o,c)}if(l(this,ns,Ms).call(this,o,"opt-lbl"),"opt-lbl"in r(this,Z).classNames){const c=r(this,Z).classNames["opt-lbl"];c&&l(this,un,Rr).call(this,o,c)}l(this,da,Ic).call(this,o,s.lbl),a.append(o);const d=l(this,hn,Sr).call(this,"span");if("opt-suffix"in r(this,Z).attributes){const c=r(this,Z).attributes["opt-suffix"];l(this,pn,Cr).call(this,d,c)}if(l(this,ns,Ms).call(this,d,"opt-suffix"),"opt-suffix"in r(this,Z).classNames){const c=r(this,Z).classNames["opt-suffix"];c&&l(this,un,Rr).call(this,d,c)}return l(this,da,Ic).call(this,d,s.i),l(this,ft,gt).call(this,n,"tabindex",l(this,fn,Or).call(this)?"0":"-1"),l(this,ft,gt).call(this,n,"role","option"),l(this,ft,gt).call(this,n,"aria-posinset",i+1),l(this,ft,gt).call(this,n,"aria-setsize",r(this,Bs).length),l(this,Le,Qe).call(this,n,"click",c=>{x(this,ir,!0),this.setSelectedCurrencyItem(c.currentTarget.dataset.key)}),l(this,Le,Qe).call(this,n,"keyup",c=>{c.key==="Enter"&&(x(this,ir,!0),this.setSelectedCurrencyItem(c.currentTarget.dataset.key))}),s.disabled&&l(this,ns,Ms).call(this,n,"disabled-opt"),n.append(a,d),r(this,Ci)===s.i?(l(this,ns,Ms).call(this,n,"selected-opt"),l(this,ft,gt).call(this,n,"aria-selected",!0)):l(this,ft,gt).call(this,n,"aria-selected",!1),n});r(this,cn).append(...e)},el=new WeakSet,Ou=function(){x(this,Ci,r(this,Z).defaultCurrencyKey||""),r(this,Z).selectedFlagImage&&(r(this,ia).src=r(this,dd)),this.setMenu({open:!1}),l(this,ft,gt).call(this,r(this,bt),"data-num-value",""),r(this,Z).selectedCurrencyClearable&&l(this,Ie,ke).call(this,r(this,Ri),"display","none"),l(this,ft,gt).call(this,r(this,is),"value",r(this,Z).defaultValue)},sl=new WeakSet,yu=function(){if(!l(this,fn,Or).call(this))return;l(this,tl,Cu).call(this);const e=l(this,Jo,Su).call(this),s=l(this,zt,ne).call(this,`.option[data-index="${e}"]`);s&&s.scrollIntoView({block:"nearest",inline:"nearest"})},Td=new WeakSet,Vg=function(e){r(this,ye).value=e},vd=new WeakSet,zg=function(e){var s;if(e.key==="Enter"&&r(this,Bs).length){const i=(s=l(this,zt,ne).call(this,".option"))==null?void 0:s.dataset.key;this.setSelectedCurrencyItem(i),this.searchOptions("")}else this.searchOptions(e.target.value)},fn=new WeakSet,Or=function(){return r(this,Oe).classList.contains("menu-open")},xd=new WeakSet,Wg=function(){const e=r(this,zo).getBoundingClientRect(),s=e.top,i=r(this,dn).innerHeight-e.bottom;i<s&&i<r(this,Z).maxHeight?(l(this,Ie,ke).call(this,r(this,Oe),"flex-direction","column-reverse"),l(this,Ie,ke).call(this,r(this,Oe),"bottom","0%")):(l(this,Ie,ke).call(this,r(this,Oe),"flex-direction","column"),l(this,Ie,ke).call(this,r(this,Oe),"bottom","auto"))},il=new WeakSet,Lu=function(e){e.code==="Space"&&(r(this,ye).focus(),this.setMenu({open:!0})),e.type==="click"&&(l(this,fn,Or).call(this)?this.setMenu({open:!1}):(r(this,ye).focus(),this.setMenu({open:!0})))},Sd=new WeakSet,Hg=function(){r(this,qo).forEach(({selector:e,eventType:s,cb:i})=>{e.removeEventListener(s,i)})};const Qx=({fieldKey:t,formID:e,attr:s,onBlurHandler:i,contentID:n,styleClasses:a})=>{const o=j.useRef(null),d=j.useRef(null),h=et(fe)[t],u=et(zl),{selectedFlagImage:p,selectedCurrencyClearable:g,searchClearable:m,optionFlagImage:E,defaultCurrencyKey:I,searchPlaceholder:T,noCurrencyFoundText:C}=h.config;return j.useEffect(()=>{const w=document.getElementById("bit-grid-layout").contentWindow;o!=null&&o.current||(o.current=At(`.${t}-currency-fld-wrp`));const v=d.current,S=o.current;v&&S&&"destroy"in v&&v.destroy();const{options:O,inputFormatOptions:L,valueFormatOptions:P}=h,y={fieldKey:t,inputFormatOptions:L,valueFormatOptions:P,selectedFlagImage:p,selectedCurrencyClearable:g,searchClearable:m,optionFlagImage:E,defaultCurrencyKey:I,searchPlaceholder:T,noCurrencyFoundText:C,options:O,assetsURL:`${u.assetsURL}/../static/currencies/`,document:document.getElementById("bit-grid-layout").contentDocument,window:w,attributes:{option:mt(t,"option"),"opt-lbl-wrp":mt(t,"opt-lbl-wrp"),"opt-icn":mt(t,"opt-icn"),"opt-lbl":mt(t,"opt-lbl"),"opt-suffix":mt(t,"opt-suffix")},classNames:{option:R(t,"option"),"opt-lbl-wrp":R(t,"opt-lbl-wrp"),"opt-icn":R(t,"opt-icn"),"opt-lbl":R(t,"opt-lbl"),"opt-suffix":R(t,"opt-suffix")}};w.bit_virtualized_list||(w.bit_virtualized_list=Rp),w.observeElm||(w.observeElm=Gh),d.current=new Xx(S,y)},[h]),f.jsxs(f.Fragment,{children:[f.jsx(_t,{styleClasses:a}),f.jsx(Zt,{formID:e,fieldKey:t,fieldData:s,children:f.jsx("div",{className:`${t}-currency-fld-container`,children:f.jsxs("div",A(_({"data-dev-currency-fld-wrp":t,className:`${t}-currency-fld-wrp ${R(t,"currency-fld-wrp")} ${h.valid.disabled?"disabled":""} ${h.valid.readonly?"readonly":""}`,ref:o},$(t,"currency-fld-wrp")),{children:[f.jsx("input",_(_({name:t,type:"hidden",className:`${t}-currency-hidden-input`},"disabled"in h.valid&&{disabled:h.valid.disabled}),"readonly"in h.valid&&{readOnly:h.valid.readonly})),f.jsxs("div",{className:`${t}-currency-inner-wrp`,children:[f.jsxs("div",{"data-testid":`${t}-dpd-wrp`,className:`${t}-dpd-wrp`,"data-dev-dpd-wrp":t,role:"combobox","aria-controls":"currency-dropdown","aria-live":"assertive","aria-labelledby":"currency-label-2","aria-expanded":"false",tabIndex:h.valid.disabled?"-1":"0",children:[p&&f.jsx("div",{className:`${t}-selected-currency-wrp`,children:f.jsx("img",_({"data-dev-selected-currency-img":t,alt:"Selected currency image","aria-hidden":"true",className:`${t}-selected-currency-img ${R(t,"selected-currency-img")}`,src:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>"},$(t,"selected-currency-img")))}),f.jsx("div",{className:`${t}-dpd-down-btn`,children:f.jsx("svg",{width:"15",height:"15",role:"img",title:"Downarrow icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:f.jsx("polyline",{points:"6 9 12 15 18 9"})})})]}),f.jsx("input",A(_({"data-dev-currency-amount-input":t,"data-testid":`${t}-crncy-amnt-inp`,"aria-label":"Currency Input",type:"text"},"ph"in s&&{placeholder:s.ph}),{className:`${t}-currency-amount-input`,tabIndex:h.valid.disabled?"-1":"0"})),g&&f.jsx("button",A(_({"data-testid":`${t}-inp-clr-btn`,"data-dev-input-clear-btn":t,type:"button",title:"Clear value",className:`${t}-input-clear-btn ${R(t,"input-clear-btn")}`},$(t,"input-clear-btn")),{children:f.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),f.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}))]}),f.jsx("div",A(_({className:`${t}-option-wrp  ${R(t,"option-wrp")}`,"data-dev-option-wrp":t},$(t,"option-search-wrp")),{children:f.jsxs("div",{className:`${t}-option-inner-wrp`,children:[f.jsxs("div",A(_({"data-dev-option-search-wrp":t,className:`${t}-option-search-wrp ${R(t,"option-search-wrp")}`},$(t,"option-search-wrp")),{children:[f.jsx("input",_({"data-testid":`${t}-opt-srch-inp`,"data-dev-opt-search-input":t,type:"search",className:`${t}-opt-search-input ${R(t,"opt-search-input")}`,placeholder:h.config.searchPlaceholder,autoComplete:"off",tabIndex:"-1"},$(t,"opt-search-input"))),f.jsxs("svg",A(_({className:`${t}-opt-search-icn ${R(t,"opt-search-icn")}`,"data-dev-opt-search-icn":t,"aria-hidden":"true",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},$(t,"opt-search-icn")),{children:[f.jsx("circle",{cx:"11",cy:"11",r:"8"}),f.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})),m&&f.jsx("button",A(_({"data-testid":`${t}-srch-clr-btn`,"data-dev-search-clear-btn":t,type:"button","aria-label":"Clear search",className:`${t}-search-clear-btn ${R(t,"search-clear-btn")}`,tabIndex:"-1"},$(t,"search-clear-btn")),{children:f.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),f.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}))]})),f.jsx("ul",A(_({className:`${t}-option-list ${R(t,"option-list")}`,tabIndex:"-1",role:"listbox","aria-label":"currency list","data-dev-option-list":t},$(t,"option-list")),{children:f.jsxs("li",{className:"option",children:[f.jsx("span",{className:"opt-prefix",children:"Prefix"}),f.jsxs("span",{className:"opt-lbl-wrp",children:[f.jsx("img",{className:"opt-icn",src:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>",alt:"Placeholder"}),f.jsx("span",{className:"opt-lbl",children:"Option"})]}),f.jsx("span",{className:"opt-suffix",children:"Suffix"})]})}))]})}))]}))})})]})};function Jx({attr:t,onBlurHandler:e,resetFieldValue:s,formID:i,fieldKey:n,styleClasses:a}){var p,g;let{checked:o}=t.valid;const d=t.val||(o?t.msg.checked:t.msg.unchecked),[c,h]=j.useState(d);c===t.msg.unchecked?o=!1:c===t.msg.checked&&(o=!0);const u=m=>{if(t.valid.disabled)return;m.target.checked?h(t.msg.checked):h(t.msg.unchecked);const{form:E}=m.target;validateForm({input:{name:t.name,form:E,value:m.target.checked?t.msg.checked:t.msg.unchecked}})};return f.jsxs(f.Fragment,{children:[f.jsx(_t,{styleClasses:a}),f.jsx(Zt,{formID:i,fieldKey:n,fieldData:t,noLabel:!0,children:f.jsxs("div",A(_({"data-dev-cc":n,className:`${n}-cc ${R(n,"cc")}`},$(n,"cc")),{children:[f.jsx("svg",{className:`${n}-cks`,children:f.jsx("symbol",{id:`${n}-ck-svg`,viewBox:"0 0 12 10",children:f.jsx("polyline",{className:`${n}-ck-svgline`,points:"1.5 6 4.5 9 10.5 1"})})}),f.jsxs("div",A(_({"data-dev-cw":n,className:`${n}-cw ${R(n,"cw")}`},$(n,"cw")),{children:[f.jsx("input",A(_(A(_(_(_({"data-testid":n,id:`${n}-decision`,type:"checkbox",className:`${n}-ci`},"req"in t.valid&&{required:t.valid.req}),"disabled"in t.valid&&{disabled:t.valid.disabled}),"readonly"in t.valid&&{readOnly:t.valid.readonly}),{defaultValue:(p=t==null?void 0:t.info)==null?void 0:p.lbl}),"name"in t&&{name:t.name}),{checked:o,value:c,onChange:u})),f.jsxs("label",A(_({"data-dev-cl":n,"data-cl":!0,htmlFor:`${n}-decision`,className:`${n}-cl ${R(n,"cl")}`},$(n,"cl")),{children:[f.jsx("span",A(_({"data-dev-bx":n,"data-bx":!0,className:`${n}-bx ${R(n,"bx")}`},$(n,"bx")),{children:f.jsx("svg",{width:"12",height:"10",viewBox:"0 0 12 10",className:`${n}-svgwrp`,children:f.jsx("use",{"data-ck-icn":!0,href:`#${n}-ck-svg`,className:`${n}-ck-icn`})})})),f.jsx("span",A(_({"data-dev-ct":n,className:`${n}-ct ${R(n,"ct")}`},$(n,"ct")),{children:f.jsx(ls,{html:t.lbl||((g=t==null?void 0:t.info)==null?void 0:g.lbl)})}))]}))]}))]}))})]})}function Kx({fieldKey:t,styleClasses:e,attr:s}){var o,d;const i=et(ja),{styleMode:n}=et(Mn),a=((d=(o=s.valid)==null?void 0:o.hidden)==null?void 0:d.includes(i))||!1;return f.jsxs(f.Fragment,{children:[f.jsx(_t,{styleClasses:e}),f.jsx("div",A(_({"data-dev-fld-wrp":t,className:`${t}-fld-wrp drag ${n?"":"drag"} ${a?"fld-hide":""} ${R(t,"fld-wrp")}`},$(t,"fld-wrp")),{children:f.jsx("div",_({"data-dev-divider":t,className:`${t}-divider ${R(t,"divider")}`},$(t,"divider")))}))]})}var wt,rr,Wt,he,ha,_e,Rd,ue,yi,Is,ai,_s,rs,oi,ks,Kt,li,Tt,Li,ua,q,nl,pa,rl,al,Au,yt,Ut,ol,Mu,we,je,Ai,Bn,Cd,qg,ll,$u,Od,Yg,ar,ro,fa,_c,yd,Xg,Mi,kn,Ld,Zg,ma,wc,mn,yr,cl,Nu,dl,Pu,ci,Ji,ga,Tc,Ad,Qg,ws,Zs,te,ge,It,vt,$i,jn,Ea,vc,hl,Du,js,_i,Ht,re,ul,Fu,pl,Gu,or,ao,Ni,Un,fl,Bu,Md,Jg,$d,Kg,xt,Nt,Us,wi,Ae,Je,Nd,tE,Pd,eE,ba,xc,Dd,sE,ml,ku,gn,Lr,Fd,iE,gl,ju,Gd,nE;class t0{constructor(e,s){b(this,al);b(this,yt);b(this,ol);b(this,we);b(this,Ai);b(this,Cd);b(this,ll);b(this,Od);b(this,ar);b(this,fa);b(this,yd);b(this,Mi);b(this,Ld);b(this,ma);b(this,mn);b(this,cl);b(this,dl);b(this,ci);b(this,ga);b(this,Ad);b(this,ws);b(this,te);b(this,It);b(this,$i);b(this,Ea);b(this,hl);b(this,js);b(this,Ht);b(this,ul);b(this,pl);b(this,or);b(this,Ni);b(this,fl);b(this,Md);b(this,$d);b(this,xt);b(this,Us);b(this,Ae);b(this,Nd);b(this,Pd);b(this,ba);b(this,Dd);b(this,ml);b(this,gn);b(this,Fd);b(this,gl);b(this,Gd);b(this,wt,null);b(this,rr,null);b(this,Wt,null);b(this,he,null);b(this,ha,null);b(this,_e,null);b(this,Rd,null);b(this,ue,null);b(this,yi,null);b(this,Is,null);b(this,ai,null);b(this,_s,!1);b(this,rs,null);b(this,oi,null);b(this,ks,"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>");b(this,Kt,"");b(this,li,[]);b(this,Tt,[]);b(this,Li,null);b(this,ua,{});b(this,q,{separator:",",selectedOptImage:!1,dropdownIcn:"",selectedOptClearable:!0,searchClearable:!0,optionIcon:!0,defaultValue:"",placeholder:"Select an option",searchPlaceholder:"Search option",maxHeight:370,closeOnSelect:!1,showChip:!0,options:[],attributes:{},classNames:{},activeList:0,onChange:()=>{}});b(this,nl,null);b(this,pa,"");b(this,rl,[]);Object.assign(r(this,q),s),x(this,Li,s.document?s.document:document),x(this,ua,s.window?s.window:window),typeof e=="string"?x(this,wt,r(this,Li).querySelector(e)):x(this,wt,e),this.fieldKey=r(this,q).fieldKey,this.init()}init(){x(this,Wt,l(this,yt,Ut).call(this,`.${this.fieldKey}-dpd-hidden-input`)),x(this,he,l(this,yt,Ut).call(this,`.${this.fieldKey}-opt-search-input`)),x(this,ha,l(this,yt,Ut).call(this,`.${this.fieldKey}-option-wrp`)),x(this,_e,l(this,yt,Ut).call(this,`.${this.fieldKey}-dpd-wrp`)),x(this,Rd,l(this,yt,Ut).call(this,`.${this.fieldKey}-selected-opt-wrp`)),x(this,ue,l(this,yt,Ut).call(this,`.${this.fieldKey}-selected-opt-img`)),x(this,yi,l(this,yt,Ut).call(this,`.${this.fieldKey}-selected-opt-lbl`)),x(this,Is,l(this,yt,Ut).call(this,`.${this.fieldKey}-selected-opt-clear-btn`)),x(this,ai,r(this,q).searchClearable?l(this,yt,Ut).call(this,`.${this.fieldKey}-search-clear-btn`):{}),l(this,we,je).call(this,r(this,_e),"click",e=>{l(this,gl,ju).call(this,e)}),l(this,we,je).call(this,r(this,_e),"keyup",e=>{l(this,gl,ju).call(this,e)}),l(this,we,je).call(this,r(this,wt),"keydown",e=>{l(this,yd,Xg).call(this,e)}),l(this,al,Au).call(this),r(this,q).defaultValue&&this.setSelectedOption(r(this,q).defaultValue),r(this,q).defaultValue||l(this,Cd,qg).call(this),r(this,q).selectedOptImage&&(r(this,ue).src=r(this,ks)),r(this,q).searchClearable&&(l(this,Ht,re).call(this,r(this,ai),"display","none"),l(this,we,je).call(this,r(this,ai),"click",()=>{this.searchOptions("")})),r(this,he).placeholder=r(this,q).searchPlaceholder,r(this,he).value="",l(this,we,je).call(this,r(this,he),"keyup",e=>{l(this,Pd,eE).call(this,e)}),x(this,_s,r(this,q).allowCustomOption),r(this,ua).observeElm(r(this,Wt),"value",(e,s)=>{l(this,Od,Yg).call(this,e,s)})}setSelectedOption(e){let s=null,i=e.split(r(this,q).separator);i=i.filter(n=>l(this,mn,yr).call(this,n)),r(this,q).multipleSelect?(i.length===1?s=l(this,mn,yr).call(this,i[0]):i.length>1&&(s={lbl:`${i.length} options selected`}),r(this,q).disableOnMax&&r(this,q).mx&&i.length>=r(this,q).mx?l(this,ga,Tc).call(this,!0):l(this,ga,Tc).call(this,!1)):s=l(this,mn,yr).call(this,e),x(this,Kt,e),r(this,Kt)||l(this,ma,wc).call(this),s&&(this.value=e,r(this,q).selectedOptImage&&(r(this,q).multipleSelect?i.length>1?(r(this,ue).src=r(this,ks),l(this,ci,Ji).call(this,r(this,ue))):i.length===1?(r(this,ue).src=s.icn||r(this,ks),l(this,ci,Ji).call(this,r(this,ue),s.icn)):(r(this,ue).src=r(this,ks),l(this,ci,Ji).call(this,r(this,ue))):(r(this,ue).src=s.icn||r(this,ks),l(this,ci,Ji).call(this,r(this,ue),s.icn))),r(this,q).multipleSelect&&r(this,q).showChip&&l(this,cl,Nu).call(this,i),r(this,q).showChip||l(this,js,_i).call(this,r(this,yi),s.lbl),r(this,q).closeOnSelect&&this.setMenu({open:!1}),l(this,xt,Nt).call(this,r(this,Wt),"value",e),r(this,q).selectedOptClearable&&(l(this,Ht,re).call(this,r(this,Is),"display","grid"),l(this,we,je).call(this,r(this,Is),"click",n=>{l(this,ma,wc).call(this,n)})),r(this,q).onChange&&r(this,q).onChange(e),l(this,ll,$u).call(this,r(this,Wt),"blur"))}searchOptions(e){l(this,Dd,sE).call(this,e);let s=[],i=!1;if(e){const n=r(this,q).options.length,a=[],o=e.toLowerCase();for(let c=0;c<n;c+=1){const h=r(this,q).options[c];if("type"in h)continue;const u=h.lbl.toLowerCase();if(u.includes(o)){if("groupIndex"in h&&!a.includes(h.groupIndex)){const p=h.groupIndex;a.push(p),s.push(r(this,q).options[p])}s.push(h),u===o&&(i=!0)}}const d=r(this,li).length;for(let c=0;c<d;c+=1){const h=r(this,li)[c],u=h.lbl.toLowerCase();u.includes(o)&&(s.push(h),u===o&&(i=!0))}s.length||(s=[{i:"not-found",lbl:"No Option Found"}]),x(this,Tt,r(this,_s)?[r(this,q).options[0]]:[]),r(this,Tt).push(...s),r(this,q).searchClearable&&l(this,Ht,re).call(this,r(this,ai),"display","grid")}else x(this,Tt,r(this,q).options),r(this,q).searchClearable&&l(this,Ht,re).call(this,r(this,ai),"display","none"),r(this,_s)&&(x(this,rs,l(this,yt,Ut).call(this,`${l(this,Mi,kn).call(this)} .create-opt`)),l(this,Ht,re).call(this,r(this,rs),"display","none"),x(this,Tt,r(this,Tt).concat(r(this,li))));if(l(this,Ni,Un).call(this),x(this,rs,l(this,yt,Ut).call(this,`${l(this,Mi,kn).call(this)} .create-opt`)),i&&r(this,_s))l(this,Ht,re).call(this,r(this,rs),"display","none");else if(r(this,_s)&&e.trim()){l(this,Ht,re).call(this,r(this,rs),"display","block");const n=r(this,rs).querySelector(".opt-lbl");n.innerText=`Create: ${e}`,l(this,xt,Nt).call(this,r(this,rs),"data-value",e)}}setMenu({open:e}){l(this,Ht,re).call(this,r(this,ha),"max-height",`${e?r(this,q).maxHeight:0}px`),e?(l(this,Fd,iE).call(this),l(this,It,vt).call(this,r(this,wt),"menu-open"),l(this,we,je).call(this,r(this,Li),"click",s=>l(this,ml,ku).call(this,s)),l(this,te,ge).call(this,r(this,he),0),l(this,te,ge).call(this,r(this,ai),0),r(this,_e).setAttribute("aria-expanded","true"),l(this,xt,Nt).call(this,r(this,oi),"aria-hidden",!1),l(this,xt,Nt).call(this,r(this,he),"aria-hidden",!1),l(this,Ni,Un).call(this)):(l(this,$i,jn).call(this,r(this,wt),"menu-open"),r(this,Li).removeEventListener("click",l(this,ml,ku)),setTimeout(()=>{this.searchOptions("")},100),l(this,te,ge).call(this,r(this,he),-1),l(this,te,ge).call(this,r(this,ai),-1),r(this,_e).setAttribute("aria-expanded","false"),l(this,xt,Nt).call(this,r(this,oi),"aria-hidden",!0),l(this,xt,Nt).call(this,r(this,he),"aria-hidden",!0)),l(this,$d,Kg).call(this)}set activelist(e){const s=l(this,yt,Ut).call(this,`.${this.fieldKey}-option-list[data-list="${e}"]`);if(s){const i=s.getAttribute("data-list-index");r(this,q).activeList=i,this.setSelectedOption(""),l(this,al,Au).call(this)}}set disabled(e){String(e).toLowerCase()==="true"?(r(this,wt).classList.add("disabled"),r(this,Wt).disabled=!0,l(this,te,ge).call(this,r(this,_e),-1),l(this,te,ge).call(this,r(this,Is),-1),l(this,xt,Nt).call(this,r(this,_e),"aria-label","Dropdown disabled"),this.setMenu({open:!1})):String(e).toLowerCase()==="false"&&(l(this,$i,jn).call(this,r(this,wt),"disabled"),r(this,Wt).removeAttribute("disabled"),l(this,te,ge).call(this,r(this,_e),0),l(this,te,ge).call(this,r(this,Is),0),l(this,xt,Nt).call(this,r(this,_e),"aria-label",r(this,q).placeholder))}get disabled(){return r(this,Wt).disabled}set readonly(e){String(e).toLowerCase()==="true"?(l(this,It,vt).call(this,r(this,wt),"disabled"),r(this,Wt).readOnly=!0,l(this,te,ge).call(this,r(this,_e),-1),l(this,te,ge).call(this,r(this,Is),-1),this.setMenu({open:!1})):String(e).toLowerCase()==="false"&&(l(this,$i,jn).call(this,r(this,wt),"disabled"),r(this,Wt).removeAttribute("readonly"),l(this,te,ge).call(this,r(this,_e),0),l(this,te,ge).call(this,r(this,Is),0))}get readonly(){return r(this,Wt).readOnly}set value(e){r(this,Wt).value=e}get value(){return r(this,Wt).value}destroy(){this.value="",l(this,Gd,nE).call(this)}reset(){l(this,ma,wc).call(this),this.destroy(),this.init()}}wt=new WeakMap,rr=new WeakMap,Wt=new WeakMap,he=new WeakMap,ha=new WeakMap,_e=new WeakMap,Rd=new WeakMap,ue=new WeakMap,yi=new WeakMap,Is=new WeakMap,ai=new WeakMap,_s=new WeakMap,rs=new WeakMap,oi=new WeakMap,ks=new WeakMap,Kt=new WeakMap,li=new WeakMap,Tt=new WeakMap,Li=new WeakMap,ua=new WeakMap,q=new WeakMap,nl=new WeakMap,pa=new WeakMap,rl=new WeakMap,al=new WeakSet,Au=function(){const e=l(this,yt,Ut).call(this,`.${this.fieldKey}-option-list[data-list-index="${r(this,q).activeList}"]`);x(this,oi,l(this,yt,Ut).call(this,`.${this.fieldKey}-option-list.active-list`)),r(this,oi).innerHTML=e.innerHTML,l(this,Md,Jg).call(this),r(this,q).options=l(this,Ld,Zg).call(this),x(this,Tt,[...r(this,q).options])},yt=new WeakSet,Ut=function(e,s){return s?s.querySelector(e):r(this,wt).querySelector(e)},ol=new WeakSet,Mu=function(e){return r(this,wt).querySelectorAll(e)},we=new WeakSet,je=function(e,s,i){e==null||e.addEventListener(s,i),r(this,rl).push({selector:e,eventType:s,cb:i})},Ai=new WeakSet,Bn=function(e,s){e.appendChild(s)},Cd=new WeakSet,qg=function(){r(this,Wt).value&&(this.setSelectedOption(r(this,Wt).value),l(this,Ni,Un).call(this))},ll=new WeakSet,$u=function(e,s){const i=new Event(s);e.dispatchEvent(i)},Od=new WeakSet,Yg=function(e,s){e!==s&&this.setSelectedOption(s),typeof bit_conditionals!="undefined"&&bit_conditionals({target:r(this,Wt)})},ar=new WeakSet,ro=function(e=-1,s){if(s==="next"){const i=r(this,Tt).length;for(let n=e+1;n<i;n+=1){const a=r(this,Tt)[n];if(a.type!=="group"&&!a.disabled&&!a.disableOnMax)return n}}else if(s==="previous")for(let i=e-1;i>=0;i-=1){const n=r(this,Tt)[i];if(n.type!=="group"&&!n.disabled&&!n.disableOnMax)return i}},fa=new WeakSet,_c=function(e){return l(this,yt,Ut).call(this,`${l(this,Mi,kn).call(this)} .option[data-index="${e}"]`)},yd=new WeakSet,Xg=function(e){const s=r(this,Li).activeElement;let i=null;if(l(this,gn,Lr).call(this)){const a=Number(s.dataset.index||-1);if(e.key==="ArrowDown"||!e.shiftKey&&e.key==="Tab"){e.preventDefault();let o=0,d=null;s===r(this,he)?(o=l(this,ar,ro).call(this,-1,"next"),r(this,_s)&&o===0&&l(this,Ea,vc).call(this,r(this,rs))!=="block"&&(o=1),d=l(this,fa,_c).call(this,o)):s.classList.contains("option")&&(o=l(this,ar,ro).call(this,a,"next"),d=l(this,fa,_c).call(this,o)),d&&(i=d)}else if(e.key==="ArrowUp"||e.shiftKey&&e.key==="Tab"){if(e.preventDefault(),s===r(this,he))i=r(this,_e),l(this,gn,Lr).call(this)&&this.setMenu({open:!1});else if(s.classList.contains("option")){let o=l(this,ar,ro).call(this,a,"previous");l(this,ba,xc)&&o===0&&l(this,Ea,vc).call(this,r(this,rs))!=="block"&&(o=-1);const d=l(this,fa,_c).call(this,o);d?i=d:d||(i=r(this,he))}}else e.key==="Escape"&&this.setMenu({open:!1})}else if(e.key>="a"&&e.key<="z"){clearTimeout(r(this,nl)),x(this,pa,r(this,pa)+e.key),x(this,nl,setTimeout(()=>{x(this,pa,"")},300));const a=r(this,q).options.find(o=>o.type!=="group"&&!o.disabled&&o.lbl.toLowerCase().startsWith(r(this,pa)));a&&this.setSelectedOption(a.val)}else if(e.key==="ArrowDown"||e.key==="ArrowUp"){if(r(this,q).multipleSelect)return;e.preventDefault();const a=l(this,Ad,Qg).call(this),o=e.key==="ArrowDown"?"next":"previous";let d=l(this,ar,ro).call(this,a,o);r(this,_s)&&d===0&&(d=1),d>-1&&d<r(this,q).options.length&&(this.value=r(this,q).options[d].val)}else if((e.key==="ArrowRight"||e.key==="ArrowLeft")&&s.classList.contains("chip-clear-btn")){let o=null;e.key==="ArrowRight"?o=s.parentElement.nextElementSibling:e.key==="ArrowLeft"&&(o=s.parentElement.previousElementSibling),o&&(i=l(this,yt,Ut).call(this,".chip-clear-btn",o))}i&&i.focus()},Mi=new WeakSet,kn=function(){return`.${this.fieldKey}-option-list.active-list`},Ld=new WeakSet,Zg=function(){const e=Array.from(l(this,ol,Mu).call(this,`${l(this,Mi,kn).call(this)} .option`)),s=a=>{const o={},d=a.querySelector(".opt-lbl"),{value:c}=a.dataset;o.lbl=d.textContent,c?o.val=c:o.val=o.lbl,l(this,hl,Du).call(this,a,"disabled-opt")&&(o.disabled=!0);const h=a.querySelector(".opt-icn");r(this,q).optionIcon&&(h!=null&&h.src)&&(o.icn=h.src);const{attributes:u}=a,p=u.length;o.attributes={};for(let g=0;g<p;g+=1){const m=u[g].nodeName;o.attributes[m]=a.getAttribute(m)}return o},i=[],{length:n}=e;for(let a=0;a<n;a+=1){const o=e[a];let d={},c=null;if(o.classList.contains("opt-group-title")){d=s(o),d.type="group",i.push(d),c=a;for(let h=a+1;h<n;h+=1){const u=e[h];if(u.classList.contains("opt-group-child")){const p=s(u);p.groupIndex=c,a=h,i.push(p)}else{a=h-1;break}}}else d=s(o),i.push(d)}return i},ma=new WeakSet,wc=function(e){e==null||e.stopPropagation(),x(this,Kt,""),r(this,q).selectedOptImage&&(r(this,ue).src=r(this,ks),l(this,ci,Ji).call(this,r(this,ue))),this.value="",r(this,q).multipleSelect&&r(this,q).showChip&&l(this,cl,Nu).call(this,[]),r(this,q).showChip||l(this,js,_i).call(this,r(this,yi),r(this,q).placeholder),r(this,q).selectedOptClearable&&l(this,Ht,re).call(this,r(this,Is),"display","none"),l(this,ga,Tc).call(this),l(this,ll,$u).call(this,r(this,Wt),"blur")},mn=new WeakSet,yr=function(e){return[...r(this,q).options,...r(this,li)].find(s=>s.val===e)},cl=new WeakSet,Nu=function(e){if(l(this,js,_i).call(this,r(this,yi),""),x(this,rr,r(this,wt).parentElement),!e.length){r(this,rr).style.removeProperty("min-height"),r(this,q).selectedOptImage&&l(this,Ht,re).call(this,r(this,ue),"display","block"),l(this,js,_i).call(this,r(this,yi),r(this,q).placeholder);return}r(this,q).selectedOptImage&&l(this,Ht,re).call(this,r(this,ue),"display","none"),e.forEach((s,i)=>{var E,I,T,C,w,v,S,O;const n=l(this,ws,Zs).call(this,"div");l(this,It,vt).call(this,n,"chip-wrp");const a=(E=r(this,q).customClasses)==null?void 0:E["chip-wrp"];a&&l(this,Us,wi).call(this,n,a);const o=(I=r(this,q).customAttributes)==null?void 0:I["chip-wrp"];if(o&&l(this,Ae,Je).call(this,n,o),"chip-wrp"in r(this,q).attributes){const L=r(this,q).attributes["chip-wrp"];l(this,Ae,Je).call(this,n,L)}if(r(this,q).selectedOptImage&&r(this,q).optionIcon){const L=l(this,ws,Zs).call(this,"img");if(l(this,It,vt).call(this,L,"chip-icn"),"chip-icn"in r(this,q).attributes){const V=r(this,q).attributes["chip-icn"];l(this,Ae,Je).call(this,L,V)}const P=l(this,mn,yr).call(this,s);l(this,xt,Nt).call(this,L,"src",P.icn||r(this,ks)),l(this,ci,Ji).call(this,L,P.icn),l(this,xt,Nt).call(this,L,"alt",P.lbl);const y=(T=r(this,q).customClasses)==null?void 0:T["chip-icn"];y&&l(this,Us,wi).call(this,L,y);const D=(C=r(this,q).customAttributes)==null?void 0:C["chip-icn"];D&&l(this,Ae,Je).call(this,L,D),l(this,Ai,Bn).call(this,n,L)}const d=l(this,ws,Zs).call(this,"span");if(l(this,It,vt).call(this,d,"chip-lbl"),"chip-lbl"in r(this,q).attributes){const L=r(this,q).attributes["chip-lbl"];l(this,Ae,Je).call(this,d,L)}const c=(w=r(this,q).customClasses)==null?void 0:w["chip-lbl"];c&&l(this,Us,wi).call(this,d,c);const h=(v=r(this,q).customAttributes)==null?void 0:v["chip-lbl"];h&&l(this,Ae,Je).call(this,d,h);const u=l(this,mn,yr).call(this,s);l(this,js,_i).call(this,d,u?u.lbl:s),l(this,Ai,Bn).call(this,n,d);const p=l(this,ws,Zs).call(this,"button");if(l(this,It,vt).call(this,p,"chip-clear-btn"),"chip-clear-btn"in r(this,q).attributes){const L=r(this,q).attributes["chip-clear-btn"];l(this,Ae,Je).call(this,p,L)}const g=(S=r(this,q).customClasses)==null?void 0:S["chip-clear-btn"];g&&l(this,Us,wi).call(this,p,g);const m=(O=r(this,q).customAttributes)==null?void 0:O["chip-clear-btn"];m&&l(this,Ae,Je).call(this,p,m),p.innerHTML=r(this,Is).innerHTML,l(this,we,je).call(this,p,"click",L=>{l(this,dl,Pu).call(this,L,i)}),l(this,we,je).call(this,p,"keyup",L=>{L.key==="Backspace"&&l(this,dl,Pu).call(this,L,i)}),l(this,Ai,Bn).call(this,n,p),l(this,Ai,Bn).call(this,r(this,yi),n)}),x(this,rr,r(this,wt).parentElement),l(this,Ht,re).call(this,r(this,rr),"min-height",`${r(this,wt).offsetHeight-r(this,ha).offsetHeight}px`)},dl=new WeakSet,Pu=function(e,s){e.stopPropagation();const i=r(this,Kt).split(r(this,q).separator);i.splice(s,1),this.setSelectedOption(i.join(r(this,q).separator)),l(this,Ni,Un).call(this)},ci=new WeakSet,Ji=function(e=null,s=0){s?l(this,$i,jn).call(this,e,"placeholder-img"):l(this,It,vt).call(this,e,"placeholder-img")},ga=new WeakSet,Tc=function(e=!1){if(e){const s=r(this,Kt).split(r(this,q).separator);x(this,Tt,r(this,Tt).map(i=>{const n=i;return!i.disabled&&!s.includes(i.val)?n.disableOnMax=!0:n.disableOnMax=!1,n}))}else x(this,Tt,r(this,Tt).map(s=>{const i=s;return delete i.disableOnMax,i}));l(this,Ni,Un).call(this)},Ad=new WeakSet,Qg=function(){return r(this,Tt).findIndex(e=>e.val===r(this,Kt))},ws=new WeakSet,Zs=function(e){return r(this,Li).createElement(e)},te=new WeakSet,ge=function(e,s){e.tabIndex=s},It=new WeakSet,vt=function(e,s){e.classList.add(s)},$i=new WeakSet,jn=function(e,s){e.classList.remove(s)},Ea=new WeakSet,vc=function(e){return(e==null?void 0:e.style.display)||""},hl=new WeakSet,Du=function(e,s){return e.classList.contains(s)},js=new WeakSet,_i=function(e,s){e.textContent=s},Ht=new WeakSet,re=function(e,s,i){e.style.setProperty(s,i,"important")},ul=new WeakSet,Fu=function(e){return e&&e.split(r(this,q).separator)||[]},pl=new WeakSet,Gu=function(e){return e.join(r(this,q).separator)},or=new WeakSet,ao=function(e){e.stopPropagation();const s=e.currentTarget,i=s.dataset.value;if(r(this,_s)&&s.classList.contains("create-opt")&&l(this,ba,xc).call(this,i),r(this,q).multipleSelect){const n=l(this,ul,Fu).call(this,r(this,Kt));if(n.includes(i)){const o=n.indexOf(i);n.splice(o,1),l(this,$i,jn).call(this,s,"selected-opt")}else n.push(i),l(this,It,vt).call(this,s,"selected-opt");x(this,Kt,l(this,pl,Gu).call(this,n))}else{const n=l(this,yt,Ut).call(this,".selected-opt");n&&l(this,$i,jn).call(this,n,"selected-opt"),l(this,It,vt).call(this,s,"selected-opt"),x(this,Kt,i)}this.setSelectedOption(r(this,Kt)),setTimeout(()=>{l(this,yt,Ut).call(this,`${l(this,Mi,kn).call(this)} .option[data-value="${i}"]`).focus()},0)},Ni=new WeakSet,Un=function(){l(this,Nd,tE).call(this)},fl=new WeakSet,Bu=function(){return l(this,ol,Mu).call(this,`${l(this,Mi,kn).call(this)} .option:not(.opt-group-title):not(.create-opt)`)},Md=new WeakSet,Jg=function(){const e=l(this,fl,Bu).call(this),s=e.length;for(let i=0;i<s;i+=1){const n=e[i];l(this,we,je).call(this,n,"click",a=>{l(this,or,ao).call(this,a)}),l(this,we,je).call(this,n,"keyup",a=>{a.key==="Enter"&&l(this,or,ao).call(this,a)})}},$d=new WeakSet,Kg=function(){const e=l(this,fl,Bu).call(this),s=l(this,gn,Lr).call(this),i=e.length;for(let n=0;n<i;n+=1){const a=e[n];s?l(this,te,ge).call(this,a,0):l(this,te,ge).call(this,a,-1)}},xt=new WeakSet,Nt=function(e,s,i){var n;(n=e==null?void 0:e.setAttribute)==null||n.call(e,s,i)},Us=new WeakSet,wi=function(e,s){s.trim().split(/\b\s+\b/g).forEach(i=>l(this,It,vt).call(this,e,i))},Ae=new WeakSet,Je=function(e,s){const i=s.length;if(i)for(let n=0;n<i;n+=1)l(this,xt,Nt).call(this,e,s[n].key,s[n].value)},Nd=new WeakSet,tE=function(){r(this,oi).innerHTML="";const e=r(this,Kt).split(r(this,q).separator),s=r(this,Tt).length;for(let i=0;i<s;i+=1){const n=r(this,Tt)[i],a=l(this,ws,Zs).call(this,"li");if(n.i==="not-found"){l(this,js,_i).call(this,a,n.lbl),l(this,It,vt).call(this,a,"opt-not-found"),l(this,Ai,Bn).call(this,r(this,oi),a);return}l(this,It,vt).call(this,a,"option");const o=l(this,ws,Zs).call(this,"span");if(l(this,It,vt).call(this,o,"opt-lbl-wrp"),"opt-lbl-wrp"in r(this,q).classNames){const h=r(this,q).classNames["opt-lbl-wrp"];h&&l(this,Us,wi).call(this,o,h)}if("opt-lbl-wrp"in r(this,q).attributes){const h=r(this,q).attributes["opt-lbl-wrp"];l(this,Ae,Je).call(this,o,h)}if(r(this,q).optionIcon){const h=l(this,ws,Zs).call(this,"img");if(l(this,It,vt).call(this,h,"opt-icn"),"opt-icn"in r(this,q).classNames){const u=r(this,q).classNames["opt-icn"];u&&l(this,Us,wi).call(this,h,u)}if("opt-icn"in r(this,q).attributes){const u=r(this,q).attributes["opt-icn"];l(this,Ae,Je).call(this,h,u)}h.src=n.icn||r(this,ks),l(this,ci,Ji).call(this,h,n.icn),h.alt=n.lbl,h.loading="lazy",o.append(h)}const d=l(this,ws,Zs).call(this,"span");if(l(this,It,vt).call(this,d,"opt-lbl"),"opt-lbl"in r(this,q).classNames){const h=r(this,q).classNames["opt-lbl"];h&&l(this,Us,wi).call(this,d,h)}if("opt-lbl"in r(this,q).attributes){const h=r(this,q).attributes["opt-lbl"];l(this,Ae,Je).call(this,d,h)}l(this,js,_i).call(this,d,n.lbl),o.append(d);const c=l(this,ws,Zs).call(this,"span");if(l(this,It,vt).call(this,c,"opt-prefix"),"opt-prefix"in r(this,q).classNames){const h=r(this,q).classNames["opt-prefix"];h&&l(this,Us,wi).call(this,c,h)}if("opt-prefix"in r(this,q).attributes){const h=r(this,q).attributes["opt-prefix"];l(this,Ae,Je).call(this,d,h)}l(this,js,_i).call(this,c,n.code),a.append(o,c),Object.keys(n.attributes).map(h=>{l(this,xt,Nt).call(this,a,h,n.attributes[h])}),e.includes(n.val)?(l(this,It,vt).call(this,a,"selected-opt"),l(this,xt,Nt).call(this,a,"aria-selected",!0)):l(this,xt,Nt).call(this,a,"aria-selected",!1),n.type==="group"?l(this,It,vt).call(this,a,"opt-group-title"):("groupIndex"in n&&l(this,It,vt).call(this,a,"opt-group-child"),l(this,xt,Nt).call(this,a,"data-index",i),l(this,xt,Nt).call(this,a,"data-value",n.val),l(this,xt,Nt).call(this,a,"role","option"),l(this,xt,Nt).call(this,a,"aria-posinset",i+1),l(this,xt,Nt).call(this,a,"aria-setsize",r(this,Tt).length),l(this,te,ge).call(this,a,l(this,gn,Lr).call(this)?"0":"-1"),n.disabled?l(this,It,vt).call(this,a,"disabled-opt"):n.disableOnMax?l(this,It,vt).call(this,a,"disable-on-max"):(l(this,we,je).call(this,a,"click",h=>{l(this,or,ao).call(this,h)}),l(this,we,je).call(this,a,"keyup",h=>{h.key==="Enter"&&l(this,or,ao).call(this,h)}))),l(this,Ai,Bn).call(this,r(this,oi),a)}},Pd=new WeakSet,eE=function(e){var s;if(e.stopPropagation(),e.key==="Enter"&&r(this,Tt).length){const i=(s=r(this,Tt))==null?void 0:s[0].i;if(i&&(this.setSelectedOption(i),this.searchOptions("")),r(this,_s)&&l(this,Ea,vc).call(this,r(this,rs))!=="none"){const{value:n}=e.target;if(l(this,ba,xc).call(this,n),r(this,q).multipleSelect){const a=l(this,ul,Fu).call(this,r(this,Kt));a.push(n),x(this,Kt,l(this,pl,Gu).call(this,a))}else x(this,Kt,n);l(this,Ni,Un).call(this),this.setSelectedOption(r(this,Kt))}}else this.searchOptions(e.target.value)},ba=new WeakSet,xc=function(e){let s=e.trim();if(s.includes&&s){const i=r(this,li).length;for(let n=0;n<i;n+=1)if(r(this,li)[n].lbl.toLowerCase()===s){s="";break}if(s){const n={lbl:s,val:s};n.attributes={},r(this,li).push(n),r(this,Tt).push(n),this.searchOptions("")}}},Dd=new WeakSet,sE=function(e){r(this,he).value=e},ml=new WeakSet,ku=function(e){r(this,wt).contains(e.target)||this.setMenu({open:!1})},gn=new WeakSet,Lr=function(){return l(this,hl,Du).call(this,r(this,wt),"menu-open")},Fd=new WeakSet,iE=function(){const e=r(this,_e).getBoundingClientRect(),s=e.top,i=r(this,ua).innerHeight-e.bottom;i<s&&i<r(this,q).maxHeight?(l(this,Ht,re).call(this,r(this,wt),"flex-direction","column-reverse"),l(this,Ht,re).call(this,r(this,wt),"bottom","0%")):(l(this,Ht,re).call(this,r(this,wt),"flex-direction","column"),l(this,Ht,re).call(this,r(this,wt),"bottom","auto"))},gl=new WeakSet,ju=function(e){e.code==="Space"&&(r(this,he).focus(),this.setMenu({open:!0})),e.type==="click"&&(l(this,gn,Lr).call(this)?this.setMenu({open:!1}):(r(this,he).focus(),this.setMenu({open:!0})))},Gd=new WeakSet,nE=function(){r(this,rl).forEach(({selector:e,eventType:s,cb:i})=>{e.removeEventListener(s,i)})};function e0({fieldKey:t,formID:e,styleClasses:s,attr:i,onBlurHandler:n,resetFieldValue:a,isBuilder:o}){const[d,c]=j.useState(null),h=j.useRef(null),p=et(fe)[t],{optionsList:g,ph:m}=p,{activeList:E,optionIcon:I,allowCustomOption:T}=p.config;j.useEffect(()=>{if(!d)return;const w=h.current;w&&d&&"destroy"in w&&w.destroy();const{selectedOptImage:v,selectedOptClearable:S,searchClearable:O,searchPlaceholder:L,maxHeight:P,multipleSelect:y,showChip:D,selectedOptImgSrc:V,closeOnSelect:k}=p.config,B=document.getElementById("bit-grid-layout").contentWindow,X={fieldKey:t,selectedOptImage:v,selectedOptClearable:S,searchClearable:O,allowCustomOption:T,optionIcon:I,maxHeight:P,multipleSelect:y,showChip:D,placeholder:m,searchPlaceholder:L,selectedOptImgSrc:V,closeOnSelect:k,activeList:E,document:document.getElementById("bit-grid-layout").contentDocument,window:B,attributes:{"opt-lbl-wrp":mt(t,"opt-lbl-wrp"),"opt-icn":mt(t,"opt-icn"),"opt-lbl":mt(t,"opt-lbl"),"opt-prefix":mt(t,"opt-prefix"),"chip-wrp":mt(t,"chip-wrp"),"chip-lbl":mt(t,"chip-lbl"),"chip-icn":mt(t,"chip-icn"),"chip-clear-btn":mt(t,"chip-clear-btn")},classNames:{"opt-lbl-wrp":R(t,"opt-lbl-wrp"),"opt-icn":R(t,"opt-icn"),"opt-lbl":R(t,"opt-lbl"),"opt-prefix":R(t,"opt-prefix")}};B.observeElm||(B.observeElm=Gh),h.current=new t0(d,X)},[p,d]);const C=g.reduce((w,v)=>{const[S,O]=Object.entries(v)[0];return A(_({},w),{[S]:O})},{});return f.jsxs(f.Fragment,{children:[f.jsx(_t,{styleClasses:s}),f.jsx(Zt,{formID:e,fieldKey:t,fieldData:i,children:f.jsx("div",{className:`${t}-dpd-fld-container ${R(t,"dpd-fld-container")}`,children:f.jsxs("div",A(_({"data-dev-dpd-fld-wrp":t,className:`${t}-dpd-fld-wrp ${R(t,"dpd-fld-wrp")} ${p.valid.disabled?"disabled":""} ${p.valid.readonly?"readonly":""}`,ref:c},$(t,"dpd-fld-wrp")),{children:[f.jsx("input",_(_({"data-testid":`${t}-dpd-hdn-inp`,name:t,type:"hidden",className:`${t}-dpd-hidden-input ${R(t,"dpd-hidden-input")}`},"disabled"in p.valid&&{disabled:p.valid.disabled}),"readonly"in p.valid&&{readOnly:p.valid.readonly})),f.jsxs("div",A(_({"data-testid":`${t}-dpd-wrp`,"data-dev-dpd-wrp":t,className:`${t}-dpd-wrp ${R(t,"dpd-wrp")}`,role:"combobox","aria-controls":"","aria-live":"assertive","aria-expanded":"false",tabIndex:"0","aria-label":"Dropdown"},$(t,"dpd-wrp")),{children:[f.jsxs("div",{"data-testid":`${t}-slctd-opt-wrp`,className:`${t}-selected-opt-wrp ${R(t,"selected-opt-wrp")}`,children:[p.config.selectedOptImage&&f.jsx("img",_({"data-testid":`${t}-slctd-opt-img`,"data-dev-selected-opt-img":t,className:`${t}-selected-opt-img placeholder-img ${R(t,"selected-opt-img")}`,"aria-hidden":"true",alt:"selected option icon",src:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>"},$(t,"selected-opt-img"))),f.jsx("span",A(_({"data-testid":`${t}-slctd-opt-lbl`,"aria-label":"Selected Option Label","data-dev-selected-opt-lbl":t,className:`${t}-selected-opt-lbl ${p.config.multipleSelect&&p.config.showChip?"multi-chip":""} ${R(t,"selected-opt-lbl")}`},$(t,"selected-opt-lbl")),{children:m}))]}),f.jsxs("div",{"data-testid":`${t}-dpd-btn-wrp`,className:`${t}-dpd-btn-wrp ${R(t,"dpd-btn-wrp")}`,children:[f.jsx("button",A(_({"data-testid":`${t}-slctd-opt-clr-btn`,type:"button","aria-label":"Clear selected option value","data-dev-selected-opt-clear-btn":t,className:`${t}-selected-opt-clear-btn ${R(t,"selected-opt-clear-btn")}`},$(t,"selected-opt-clear-btn")),{children:f.jsxs("svg",{width:"15",height:"15",role:"img",title:"Cross icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),f.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})),f.jsx("div",{className:`${t}-dpd-down-btn ${R(t,"dpd-down-btn")}`,children:f.jsx("svg",{width:"15",height:"15",viewBox:"0 0 24 24",title:"Down icon",role:"img",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:f.jsx("polyline",{points:"6 9 12 15 18 9"})})})]})]})),f.jsx("div",A(_({className:`${t}-option-wrp ${R(t,"option-wrp")}`,"data-dev-option-wrp":t},$(t,"option-search-wrp")),{children:f.jsxs("div",{className:`${t}-option-inner-wrp ${R(t,"option-inner-wrp")}`,children:[f.jsxs("div",{"data-dev-option-search-wrp":t,className:`${t}-option-search-wrp ${R(t,"option-search-wrp")}`,children:[f.jsx("input",_({"data-testid":`${t}-opt-srch-inp`,type:"search","data-dev-opt-search-input":t,className:`${t}-opt-search-input ${R(t,"opt-search-input")}`,placeholder:"Search Country","aria-label":"Search Options","aria-hidden":"true",tabIndex:"-1"},$(t,"opt-search-input"))),f.jsxs("svg",A(_({"data-dev-opt-search-icn":t,className:`${t}-icn ${t}-opt-search-icn ${R(t,"opt-search-icn")}`,"aria-hidden":"true",width:"18",height:"18",role:"img",title:"Search icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},$(t,"opt-search-icn")),{children:[f.jsx("circle",{cx:"11",cy:"11",r:"8"}),f.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})),f.jsx("button",A(_({"data-testid":`${t}-srch-clr-btn`,type:"button","aria-label":"Clear search","data-dev-search-clear-btn":t,className:`${t}-icn ${t}-search-clear-btn ${R(t,"search-clear-btn")}`,tabIndex:"-1"},$(t,"search-clear-btn")),{children:f.jsxs("svg",{width:"13",height:"13",role:"img",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),f.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}))]}),Object.entries(C).map(([w,v],S)=>f.jsxs("ul",A(_({className:`${t}-option-list ${R(t,"option-list")}`,"aria-hidden":"true","aria-label":"Option List","data-list":w,"data-list-index":S,"data-dev-option-list":t,tabIndex:"-1",role:"listbox"},$(t,"option-list")),{children:[T&&f.jsxs("li",A(_({"data-testid":`${t}-opt-${S}`,"data-dev-option":t,"data-index":S,"data-value":"create-opt",className:"option create-opt",role:"option","aria-selected":"false",tabIndex:"-1"},$(t,"option")),{style:{display:"none"},children:[f.jsx("span",A(_({"data-dev-opt-lbl-wrp":t,className:`opt-lbl-wrp ${R(t,"opt-lbl-wrp")}`},$(t,"opt-lbl-wrp")),{children:f.jsx("span",{"data-dev-opt-lbl":t,className:"opt-lbl",children:"Create: "})})),f.jsx("span",{className:"opt-prefix"})]}),`option-${w}`),f.jsx(rE,{opts:v,fieldKey:t,optionIcon:I})]}),w)),f.jsx("ul",_({className:`${t}-option-list ${R(t,"option-list")} active-list`,"aria-hidden":"true","aria-label":"Option List","data-dev-option-list":t,tabIndex:"-1",role:"listbox"},$(t,"option-list")))]})}))]}))})})]})}var s0=j.memo(e0);const rE=({opts:t,fieldKey:e,optionIcon:s,isGroupChild:i})=>f.jsx(f.Fragment,{children:t.map((n,a)=>n.type==="group"?f.jsxs(j.Fragment,{children:[f.jsx("li",A(_({"data-testid":`${e}-opt-${a}`,"data-index":a,className:`option opt-group-title ${R(e,"opt-group-title")}`},$(e,"opt-group-title")),{children:f.jsx("span",{className:"opt-lbl",children:n.title})}),`option-grp-ttl-${n.title}`),f.jsx(rE,{opts:n.childs,fieldKey:e,optionIcon:s,isGroupChild:!0})]},n.title):f.jsxs("li",A(_({"data-testid":`${e}-opt-${a}`,"data-dev-option":e,"data-index":a,"data-value":n.val||n.lbl,className:`option ${i?`opt-group-child ${R(e,"option-group-child")}`:""}`,role:"option","aria-selected":"false",tabIndex:"-1"},$(e,"option")),{children:[f.jsxs("span",A(_({"data-dev-opt-lbl-wrp":e,className:`opt-lbl-wrp ${R(e,"opt-lbl-wrp")}`},$(e,"opt-lbl-wrp")),{children:[s&&f.jsx("img",{className:`opt-icn ${R(e,"opt-icn")}`,src:(n==null?void 0:n.img)||"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>",alt:"BD",loading:"lazy"}),f.jsx("span",{"data-dev-opt-lbl":e,className:"opt-lbl",children:n.lbl})]})),f.jsx("span",{className:"opt-prefix"})]}),`option-${n.val||n.lbl}}`))});var lr,Bd,El,di,Ia,kd,hi,Pt,ui,He,bl,_a,jd,Ts,St,Me,Vs,En,qt,Ud,aE,Vd,oE,zd,lE,wa,Sc,Ta,Rc,Il,Uu,Wd,cE,Hd,as,$s,qd,dE,_l,Vu,$e,Ke,Yd,hE,cr,oo,ee,Ee,va,Cc,Pi,Vn,pi,Ki,vs,Qs,xs,Js,Xd,uE,Zd,pE,Qd,fE;class i0{constructor(e,s){b(this,Ud);b(this,Vd);b(this,zd);b(this,wa);b(this,Ta);b(this,Il);b(this,Wd);b(this,as);b(this,qd);b(this,_l);b(this,$e);b(this,Yd);b(this,cr);b(this,ee);b(this,va);b(this,Pi);b(this,pi);b(this,vs);b(this,xs);b(this,Xd);b(this,Zd);b(this,Qd);b(this,lr,null);b(this,Bd,null);b(this,El,null);b(this,di,null);b(this,Ia,null);b(this,kd,null);b(this,hi,null);b(this,Pt,null);b(this,ui,null);b(this,He,{});b(this,bl,[]);b(this,_a,null);b(this,jd,{});b(this,Ts,{});b(this,St,{});b(this,Me,"");b(this,Vs,"");b(this,En,[]);b(this,qt,{id:"upload",name:"upload",required:!0,multiple:!1,maxSize:0,sizeUnit:"KB",isItTotalMax:!1,showMaxSize:!0,showSelectStatus:!0,fileSelectStatus:"No Choosen File",allowedFileType:"",showFileList:!0,showFilePreview:!0,showFileSize:!0,accept:".pdf,.exe,.msi",duplicateAllow:!1,capture:"",minFile:0,maxFile:0,onchange:()=>{console.log("Hellow World")},oninput:()=>{}});b(this,Hd,e=>{const s=e.target.getAttribute("data-file-id");l(this,_l,Vu).call(this,`#file-wrp-${s}`),delete r(this,He)[s];const i=Object.keys(r(this,He)).length;i?r(this,di).innerText=`${i} file${i>1?"s":""} selected`:(r(this,di).innerHTML=r(this,qt).fileSelectStatus,l(this,Ta,Rc).call(this)),l(this,Il,Uu).call(this)});Object.assign(r(this,qt),s),x(this,_a,s.document?s.document:document),x(this,jd,s.window?s.window:window),x(this,Ts,s.attributes||{}),x(this,St,s.classNames||{}),typeof e=="string"?x(this,lr,r(this,_a).querySelector(e)):x(this,lr,e),x(this,Me,r(this,qt).fieldKey),this.fieldKey=r(this,Me),x(this,Vs,s.assetsURL||""),this.init()}init(){var d;x(this,Bd,l(this,as,$s).call(this,`.${r(this,Me)}-label`)),x(this,El,l(this,as,$s).call(this,`.${r(this,Me)}-inp-btn`)),x(this,di,l(this,as,$s).call(this,`.${r(this,Me)}-file-select-status`)),x(this,Ia,l(this,as,$s).call(this,`.${r(this,Me)}-file-input-wrpr`)),x(this,kd,l(this,as,$s).call(this,`.${r(this,Me)}-max-size-lbl`)),x(this,hi,l(this,as,$s).call(this,`.${r(this,Me)}-file-upload-input`)),x(this,ui,l(this,as,$s).call(this,`.${r(this,Me)}-file-input-wrpr .err-wrp`));const{multiple:e,allowedFileType:s,accept:i,showSelectStatus:n,fileSelectStatus:a,oldFiles:o}=r(this,qt);r(this,hi).multiple=e,r(this,hi).accept=s?`${s}, ${i}`:i,n?r(this,di).innerHTML=a:(d=r(this,di))==null||d.remove(),x(this,He,{}),l(this,Ta,Rc).call(this),o&&l(this,Ud,aE).call(this,o),l(this,cr,oo).call(this,r(this,hi),"change",c=>l(this,zd,lE).call(this,c)),l(this,cr,oo).call(this,r(this,El),"click",()=>r(this,hi).click())}destroy(){r(this,Pt)&&(r(this,Pt).innerHTML=""),l(this,Qd,fE).call(this)}reset(){this.destroy(),this.init()}}lr=new WeakMap,Bd=new WeakMap,El=new WeakMap,di=new WeakMap,Ia=new WeakMap,kd=new WeakMap,hi=new WeakMap,Pt=new WeakMap,ui=new WeakMap,He=new WeakMap,bl=new WeakMap,_a=new WeakMap,jd=new WeakMap,Ts=new WeakMap,St=new WeakMap,Me=new WeakMap,Vs=new WeakMap,En=new WeakMap,qt=new WeakMap,Ud=new WeakSet,aE=function(e){const s=JSON.parse(e);x(this,En,JSON.parse(e)),r(this,Pt)||l(this,wa,Sc).call(this),s.forEach(n=>{l(this,Vd,oE).call(this,n)});const i=l(this,$e,Ke).call(this,"input");i.type="hidden",i.name=`${r(this,Me)}_old`,i.value=r(this,En).toString(),r(this,Ia).appendChild(i)},Vd=new WeakSet,oE=function(e){const s=l(this,$e,Ke).call(this,"div"),i=e.replace(/( |\.|\(|\))/g,"");if(s.id=`file-wrp-${i}`,l(this,ee,Ee).call(this,s,"file-wrpr"),"file-wrpr"in r(this,St)){const d=r(this,St)["file-wrpr"];d&&l(this,vs,Qs).call(this,s,d)}if("file-wrpr"in r(this,Ts)){const d=r(this,Ts)["file-wrpr"];l(this,xs,Js).call(this,s,d)}const n=l(this,$e,Ke).call(this,"div");l(this,ee,Ee).call(this,n,"file-details");const a=l(this,$e,Ke).call(this,"a");if(l(this,ee,Ee).call(this,a,"file-title"),"file-title"in r(this,St)){const d=r(this,St)["file-title"];d&&l(this,vs,Qs).call(this,a,d)}if("file-title"in r(this,qt).attributes){const d=r(this,qt).attributes["file-title"];l(this,xs,Js).call(this,a,d)}l(this,pi,Ki).call(this,a,"target","_blank"),l(this,pi,Ki).call(this,a,"href",`${r(this,qt).baseDLURL}&fileID=${e}`),l(this,Pi,Vn).call(this,a,e),n.append(a),s.append(n);const o=l(this,$e,Ke).call(this,"button");if(l(this,ee,Ee).call(this,o,"cross-btn"),"cross-btn"in r(this,St)){const d=r(this,St)["cross-btn"];d&&l(this,vs,Qs).call(this,o,d)}if(l(this,pi,Ki).call(this,o,"data-file-id",i),l(this,pi,Ki).call(this,o,"data-file-name",e),l(this,pi,Ki).call(this,o,"type","button"),"cross-btn"in r(this,qt).attributes){const d=r(this,qt).attributes["cross-btn"];l(this,xs,Js).call(this,o,d)}l(this,Pi,Vn).call(this,o,"Ã—"),l(this,cr,oo).call(this,o,"click",d=>l(this,Wd,cE).call(this,d)),s.append(o),r(this,Pt).appendChild(s)},zd=new WeakSet,lE=function(e){const{files:s}=r(this,hi),{sizeUnit:i,allowMaxSize:n,maxSize:a,maxSizeErrMsg:o,isItTotalMax:d,multiple:c,showFileList:h,fileExistMsg:u,showFilePreview:p,showFileSize:g,showSelectStatus:m,fileSelectStatus:E,minFile:I,minFileErrMsg:T,maxFile:C,maxFileErrMsg:w}=r(this,qt),v=l(this,Zd,pE).call(this,i,a);let S=0;const O=[];l(this,va,Cc).call(this,r(this,ui),"active"),d&&Object.values(r(this,He)).forEach(P=>{S+=P.size}),!c&&s.length>0&&(x(this,He,{}),r(this,Pt)&&l(this,Pi,Vn).call(this,r(this,Pt),""));for(let P=0;P<s.length;P+=1){const y=s[P],D=y.name.replace(/( |\.|\(|\))/g,"");if(r(this,He)[D])O.push(u);else if(!n||!a||y.size+S<=v)if(!(C>0)||Object.keys(r(this,He)).length<C){if(r(this,He)[D]=y,h){r(this,Pt)||l(this,wa,Sc).call(this);const V=l(this,$e,Ke).call(this,"div");if(V.id=`file-wrp-${D}`,l(this,ee,Ee).call(this,V,"file-wrpr"),"file-wrpr"in r(this,St)){const N=r(this,St)["file-wrpr"];N&&l(this,vs,Qs).call(this,V,N)}if("file-wrpr"in r(this,Ts)){const N=r(this,Ts)["file-wrpr"];l(this,xs,Js).call(this,V,N)}if(p){const N=l(this,$e,Ke).call(this,"img");if(N.src=l(this,Yd,hE).call(this,y),N.alt="Image Uploaded",l(this,ee,Ee).call(this,N,"file-preview"),"file-preview"in r(this,St)){const W=r(this,St)["file-preview"];W&&l(this,vs,Qs).call(this,N,W)}if("file-preview"in r(this,Ts)){const W=r(this,Ts)["file-preview"];l(this,xs,Js).call(this,N,W)}V.append(N)}const k=l(this,$e,Ke).call(this,"div");l(this,ee,Ee).call(this,k,"file-details");const B=l(this,$e,Ke).call(this,"span");if(l(this,ee,Ee).call(this,B,"file-title"),"file-title"in r(this,St)){const N=r(this,St)["file-title"];N&&l(this,vs,Qs).call(this,B,N)}if("file-title"in r(this,qt).attributes){const N=r(this,qt).attributes["file-title"];l(this,xs,Js).call(this,B,N)}if(l(this,Pi,Vn).call(this,B,y.name),k.append(B),g){const N=l(this,$e,Ke).call(this,"span");if(l(this,ee,Ee).call(this,N,"file-size"),"file-size"in r(this,St)){const W=r(this,St)["file-size"];W&&l(this,vs,Qs).call(this,N,W)}if("file-size"in r(this,qt).attributes){const W=r(this,qt).attributes["file-size"];l(this,xs,Js).call(this,N,W)}l(this,Pi,Vn).call(this,N,l(this,Xd,uE).call(this,y.size)),k.append(N)}V.append(k);const X=l(this,$e,Ke).call(this,"button");if(l(this,ee,Ee).call(this,X,"cross-btn"),"cross-btn"in r(this,St)){const N=r(this,St)["cross-btn"];N&&l(this,vs,Qs).call(this,X,N)}if(l(this,pi,Ki).call(this,X,"data-file-id",D),"cross-btn"in r(this,qt).attributes){const N=r(this,qt).attributes["cross-btn"];l(this,xs,Js).call(this,X,N)}l(this,Pi,Vn).call(this,X,"Ã—"),V.append(X),r(this,Pt).append(V)}d&&(S+=y.size)}else r(this,ui).innerHTML=w,l(this,ee,Ee).call(this,r(this,ui),"active"),setTimeout(()=>{l(this,va,Cc).call(this,r(this,ui),"active")},3e3);else O.push(o)}l(this,qd,dE).call(this,`.${r(this,Me)}-file-input-wrpr .cross-btn`).forEach(P=>{l(this,cr,oo).call(this,P,"click",y=>r(this,Hd).call(this,y))});const L=Object.keys(r(this,He)).length;l(this,Il,Uu).call(this),L&&m?r(this,di).innerText=`${L} file${L>1?"s":""} selected`:m&&(r(this,di).innerHTML=E),I>0&&L<I&&(r(this,ui).innerHTML=T,l(this,ee,Ee).call(this,r(this,ui),"active")),!r(this,Pt)&&O.length>0&&l(this,wa,Sc).call(this),O.map((P,y)=>{r(this,Pt).insertAdjacentHTML("afterbegin",`
      <div id='err-${y}' class="err-wrp">
          ${P}
      </div>`);const D=l(this,as,$s).call(this,`#err-${y}`);l(this,ee,Ee).call(this,D,"active"),setTimeout(()=>{l(this,va,Cc).call(this,D,"active")},3e3),setTimeout(()=>{D==null||D.remove(),Object.keys(r(this,He)).length||l(this,Ta,Rc).call(this)},5e3)})},wa=new WeakSet,Sc=function(){if(x(this,Pt,l(this,$e,Ke).call(this,"div")),l(this,ee,Ee).call(this,r(this,Pt),"files-list"),"files-list"in r(this,St)){const e=r(this,St)["files-list"];e&&l(this,vs,Qs).call(this,r(this,Pt),e)}if("files-list"in r(this,Ts)){const e=r(this,Ts)["files-list"];l(this,xs,Js).call(this,r(this,Pt),e)}r(this,Ia).append(r(this,Pt))},Ta=new WeakSet,Rc=function(){var e;(e=r(this,Pt))==null||e.remove(),x(this,Pt,null)},Il=new WeakSet,Uu=function(){var s;const e=new DataTransfer;(s=Object.values(r(this,He)))==null||s.forEach(i=>{e.items.add(i)}),r(this,hi).files=e.files},Wd=new WeakSet,cE=function(e){const s=e.target.getAttribute("data-file-id"),i=e.target.getAttribute("data-file-name");l(this,_l,Vu).call(this,`#file-wrp-${s}`),x(this,En,r(this,En).filter(n=>n!==i)),l(this,as,$s).call(this,`input[name="${r(this,Me)}_old"]`).value=r(this,En).toString()},Hd=new WeakMap,as=new WeakSet,$s=function(e){return r(this,lr).querySelector(e)},qd=new WeakSet,dE=function(e){return r(this,lr).querySelectorAll(e)},_l=new WeakSet,Vu=function(e){var s;(s=l(this,as,$s).call(this,e))==null||s.remove()},$e=new WeakSet,Ke=function(e){return r(this,_a).createElement(e)},Yd=new WeakSet,hE=function(e){switch(e.name.substring(e.name.lastIndexOf(".")+1)){case"xbm":case"tif":case"pjp":case"pjpeg":case"svgz":case"jpg":case"jpeg":case"ico":case"tiff":case"gif":case"svg":case"bmp":case"png":case"jfif":case"webp":return URL.createObjectURL(e);case"7z":case"arj":case"deb":case"pkg":case"rar":case".rpm":case".gz":case"z":case"zip":return`${r(this,Vs)}/zip-compressed.svg`;case"key":case"odp":case"pps":case"ppt":case"pptx":return`${r(this,Vs)}/presentation.svg`;case"_RF_":case"doc":case"docx":case"odt":case"pdf":case"rtf":case"tex":case"txt":case"wks":case"wps":case"wpd":return`${r(this,Vs)}/document.svg`;case"csv":case"dat":case"db":case"dbf":case"log":case"mdb":case"sav":case"sql":case"tar":case"sqlite":case"xml":return`${r(this,Vs)}/database.svg`;case"opus":case"flac":case"webm":case"weba":case"wav":case"ogg":case"m4a":case"mp3":case"oga":case"mid":case"amr":case"aiff":case"wma":case"au":case"acc":case"wpl":return`${r(this,Vs)}/file-audio.svg`;case"ogm":case"wmv":case"mpg":case"ogv":case"mov":case"asx":case"mpeg":case"mp4":case"m4v":case"avi":case"3gp":case"flv":case"mkv":case"swf":return`${r(this,Vs)}/file-audio.svg`;default:return`${r(this,Vs)}/paperclip.svg`}},cr=new WeakSet,oo=function(e,s,i){e.addEventListener(s,i),r(this,bl).push({element:e,eventType:s,eventAction:i})},ee=new WeakSet,Ee=function(e,s){e.classList.add(s)},va=new WeakSet,Cc=function(e,s){e.classList.remove(s)},Pi=new WeakSet,Vn=function(e,s){e.textContent=s},pi=new WeakSet,Ki=function(e,s,i){var n;(n=e==null?void 0:e.setAttribute)==null||n.call(e,s,i)},vs=new WeakSet,Qs=function(e,s){s.trim().split(/\b\s+\b/g).forEach(i=>l(this,ee,Ee).call(this,e,i))},xs=new WeakSet,Js=function(e,s){const i=s.length;if(i)for(let n=0;n<i;n+=1)l(this,pi,Ki).call(this,e,s[n].key,s[n].value)},Xd=new WeakSet,uE=function(e){if(e<1024)return`${e}Bytes`;if(e>=1024&&e<1048576)return`${(e/1024).toFixed(1)}KB`;if(e>=1048576&&e<1073741824)return`${(e/1048576).toFixed(1)}MB`;if(e>=1073741824)return`${(e/1073741824).toFixed(1)}GB`},Zd=new WeakSet,pE=function(e,s){switch(e){case"Bytes":return s;case"KB":return s*1024;case"MB":return s*1048576;case"GB":return s*1073741824;default:return 0}},Qd=new WeakSet,fE=function(){r(this,bl).forEach(({element:e,eventType:s,eventAction:i})=>{e.removeEventListener(s,i)})};function n0({fieldKey:t,formID:e,styleClasses:s}){const i=j.useRef(null),n=j.useRef(null),o=et(fe)[t],d=et(zl);return j.useEffect(()=>{var X,N,W,F,M,G,U,H,Y,at,ot,lt,Et,Q;i!=null&&i.current||(i.current=At(`.${t}-file-up-wrpr`));const c=n.current,h=i.current;c&&h&&"destroy"in c&&c.destroy();const{multiple:u,allowMaxSize:p,showMaxSize:g,maxSizeLabel:m,maxSize:E,sizeUnit:I,isItTotalMax:T,showSelectStatus:C,fileSelectStatus:w,allowedFileType:v,showFileList:S,fileExistMsg:O,showFilePreview:L,showFileSize:P,duplicateAllow:y,accept:D,minFile:V,maxFile:k}=o.config,B={fieldKey:t,multiple:u,allowMaxSize:p,maxSizeErrMsg:((N=(X=o==null?void 0:o.err)==null?void 0:X.maxSize)==null?void 0:N.msg)||((F=(W=o==null?void 0:o.err)==null?void 0:W.maxSize)==null?void 0:F.dflt),showMaxSize:g,maxSizeLabel:m,maxSize:E,sizeUnit:I,isItTotalMax:T,showSelectStatus:C,fileSelectStatus:w,allowedFileType:v,showFileList:S,fileExistMsg:O,showFilePreview:L,showFileSize:P,duplicateAllow:y,accept:D,minFile:V,minFileErrMsg:((G=(M=o==null?void 0:o.err)==null?void 0:M.minFile)==null?void 0:G.msg)||((H=(U=o==null?void 0:o.err)==null?void 0:U.minFile)==null?void 0:H.dflt),maxFile:k,maxFileErrMsg:((at=(Y=o==null?void 0:o.err)==null?void 0:Y.maxFile)==null?void 0:at.msg)||((lt=(ot=o==null?void 0:o.err)==null?void 0:ot.maxFile)==null?void 0:lt.dflt),assetsURL:`${d.assetsURL}/../static/file-upload/`,document:(Et=document.getElementById("bit-grid-layout"))==null?void 0:Et.contentDocument,window:(Q=document.getElementById("bit-grid-layout"))==null?void 0:Q.contentWindow,attributes:{"files-list":mt(t,"files-list"),"file-wrpr":mt(t,"file-wrpr"),"file-preview":mt(t,"file-preview"),"file-title":mt(t,"file-title"),"file-size":mt(t,"file-size"),"cross-btn":mt(t,"cross-btn")},classNames:{"files-list":R(t,"files-list"),"file-wrpr":R(t,"file-wrpr"),"file-preview":R(t,"file-preview"),"file-title":R(t,"file-title"),"file-size":R(t,"file-size"),"cross-btn":R(t,"cross-btn")}};n.current=new i0(h,B)},[o]),f.jsxs(f.Fragment,{children:[f.jsx(_t,{styleClasses:s}),f.jsx(Zt,{formID:e,fieldKey:t,fieldData:o,children:f.jsx("div",{className:`${t}-file-up-container ${R(t,"file-up-container")}`,children:f.jsx("div",A(_({"data-dev-file-up-wrpr":t,className:`${t}-file-up-wrpr ${o.valid.disabled?"disabled":""} ${o.valid.readonly?"readonly":""} ${R(t,"file-up-wrpr")}`,ref:i},$(t,"file-up-wrpr")),{children:f.jsxs("div",A(_({"data-dev-file-input-wrpr":t,"data-inp-wrp":!0,className:`${t}-file-input-wrpr ${R(t,"file-input-wrpr")}`},$(t,"file-input-wrpr")),{children:[f.jsxs("div",A(_({"data-dev-btn-wrpr":t,className:`${t}-btn-wrpr ${R(t,"btn-wrpr")}`},$(t,"btn-wrpr")),{children:[f.jsxs("button",A(_({"data-testid":`${t}-inp-btn`,"data-dev-inp-btn":t,type:"button",className:`${t}-inp-btn ${R(t,"inp-btn")}`},$(t,"inp-btn")),{children:[o.prefixIcn&&f.jsx("img",_({"data-dev-pre-i":t,className:`${t}-pre-i ${R(t,"pre-i")}`,src:`${o.prefixIcn}`,alt:"Upload icon",srcSet:""},$(t,"pre-i"))),f.jsx("span",A(_({"data-dev-btn-txt":t,className:`${t}-btn-txt ${R(t,"btn-txt")}`},$(t,"btn-txt")),{children:o.btnTxt})),o.suffixIcn&&f.jsx("img",_({"data-dev-suf-i":t,className:`${t}-suf-i ${R(t,"suf-i")}`,src:`${o.suffixIcn}`,alt:"Upload icon",srcSet:""},$(t,"suf-i")))]})),o.config.showSelectStatus&&f.jsx("div",A(_({"data-dev-file-select-status":t,className:`${t}-file-select-status ${R(t,"file-select-status")}`},$(t,"file-select-status")),{children:"No Choosen File"})),o.config.allowMaxSize&&o.config.showMaxSize&&o.config.maxSize!==0&&f.jsx("small",A(_({"data-dev-max-size-lbl":t,className:`${t}-max-size-lbl ${R(t,"max-size-lbl")}`},$(t,"max-size-lbl")),{children:o.config.maxSizeLabel||`(Max ${o.config.maxSize}${o.config.sizeUnit})`})),f.jsx("input",A(_(_(_(_({"data-testid":`${t}-fil-upld-inp`,type:"file",className:`${t}-file-upload-input ${R(t,"file-upload-input")}`,id:t,name:"file-upload"},"req"in o.valid&&{required:o.valid.req}),"disabled"in o.valid&&{disabled:o.valid.disabled}),"readonly"in o.valid&&{readOnly:o.valid.readonly}),$(t,"file-upload-input")),{"aria-disabled":!0,tabIndex:-1}))]})),f.jsx("div",_({className:`err-wrp ${R(t,"err-wrp")}`},$(t,"err-wrp")))]}))}))})})]})}function r0({attr:t}){return f.jsxs("div",{className:"fld-wrp drag","btcd-fld":"text-fld",children:["lbl"in t&&f.jsx("label",{className:"fld-lbl",children:t.lbl}),f.jsx("input",_(_(_(_(_(_(_(_({className:"fld no-drg",type:t.typ},"req"in t.valid&&{required:t.valid.req}),"ph"in t&&{placeholder:t.ph}),"mn"in t&&{min:t.mn}),"mx"in t&&{max:t.mx}),"val"in t&&{defaultValue:t.val}),"val"in t&&"userinput"in t&&t.userinput&&{value:t.val}),"ac"in t&&{autoComplete:t.ac}),"name"in t&&{name:t.name}))]})}function a0({fieldKey:t,attr:e,styleClasses:s}){var a,o;const{styleMode:i}=et(Mn),n=((a=e.valid)==null?void 0:a.hide)||!1;return f.jsxs(f.Fragment,{children:[f.jsx(_t,{styleClasses:s}),f.jsx("div",A(_({"data-dev-fld-wrp":t,className:`${t}-fld-wrp ${i?"":"drag"} ${R(t,"fld-wrp")} ${n?"fld-hide":""}`},$(t,"fld-wrp")),{children:f.jsx(ls,{html:e.content||((o=e==null?void 0:e.info)==null?void 0:o.content)})}))]})}function o0({fieldKey:t,formID:e,styleClasses:s}){const n=et(fe)[t];return f.jsxs(f.Fragment,{children:[f.jsx(_t,{styleClasses:s}),f.jsx(Zt,{formID:e,fieldKey:t,fieldData:n,children:f.jsxs("select",A(_(_(_(_({"data-testid":t,"data-dev-fld":t,id:t,className:`${t}-fld ${R(t,"fld")} no-drg ${n.readonly?"readonly":""}`},"disabled"in n.valid&&{disabled:n.valid.disabled}),"readonly"in n.valid&&{readOnly:n.valid.readonly}),$(t,"fld")),"req"in n.valid&&{required:n.valid.req}),{children:[n.phHide&&f.jsx("option",A(_({"data-dev-slct-optn":t,className:`${t}-slct-optn ${R(t,"slct-optn")}`,value:""},$(t,"slct-optn")),{children:n.ph})),n.opt.map(a=>a.type?f.jsx("optgroup",A(_(_({"data-dev-slct-opt-grp":t,className:`${t}-slct-opt-grp ${R(t,"slct-opt-grp")}`,label:a.title},a.disabled&&{disabled:a.disabled}),_({},$(t,"slct-opt-grp"))),{children:a.childs.map(o=>f.jsx("option",A(_(_({"data-dev-slct-optn":t,className:`${t}-slct-optn ${R(t,"slct-optn")}`,value:o.val,selected:o.check},o.disabled&&{disabled:o.disabled}),_({},$(t,"slct-optn"))),{children:o.lbl}),o.val||o.lbl))}),a.title):f.jsx("option",A(_(_({"data-dev-slct-optn":t,className:`${t}-slct-optn ${R(t,"slct-optn")}`,value:a.val,selected:a.check},a.disabled&&{disabled:a.disabled}),_({},$(t,"slct-optn"))),{children:a.lbl}),a.val||a.lbl))]}))})]})}const ac=(t,e)=>`https://fakeimg.pl/${t}x${e}/?text=${t} x ${e}`;function l0({fieldKey:t,attr:e,styleClasses:s}){var I,T,C,w;const i=j.useRef(),n=j.useRef({extarnalSource:ac(100,40)}),a=et(Ua),o=et(ja),{styleMode:d}=et(Mn),c=Hi(yh),h=((I=e.valid.hidden)==null?void 0:I.includes(o))||!1,u=An(s),p=Hi(fe),{width:g,height:m}=e,E=v=>`fields->${t}->classes->.${t}-fld-wrp->${v}`;return a.fieldKey===t&&(n.current.resize=!0,c(v=>ve(v,S=>{Fr(S,E("max-height"),"")}))),n.current.resize&&!a.fieldKey&&(n.current.resize=!1,c(v=>ve(v,S=>{var O,L,P;Fr(S,E("height"),`${(O=i==null?void 0:i.current)==null?void 0:O.parentElement.clientHeight}px`),Fr(S,E("width"),`${(L=i==null?void 0:i.current)==null?void 0:L.parentElement.clientWidth}px`),Fr(S,E("max-height"),`${(P=i==null?void 0:i.current)==null?void 0:P.parentElement.clientHeight}px`)})),p(v=>ve(v,S=>{var O,L;S[t].height=(O=i==null?void 0:i.current)==null?void 0:O.parentElement.clientHeight,S[t].width=(L=i==null?void 0:i.current)==null?void 0:L.parentElement.clientWidth})),n.current.extarnalSource=ac((T=i==null?void 0:i.current)==null?void 0:T.parentElement.clientWidth,(C=i==null?void 0:i.current)==null?void 0:C.parentElement.clientHeight)),j.useEffect(()=>{var v,S;n.current.extarnalSource=ac((v=i==null?void 0:i.current)==null?void 0:v.parentElement.clientWidth,(S=i==null?void 0:i.current)==null?void 0:S.parentElement.clientHeight),p(O=>ve(O,L=>{var P,y;L[t].height=(P=i==null?void 0:i.current)==null?void 0:P.parentElement.clientHeight,L[t].width=(y=i==null?void 0:i.current)==null?void 0:y.parentElement.clientWidth}))},[]),j.useEffect(()=>{n.current.extarnalSource=ac(g,m)},[g,m]),f.jsxs(f.Fragment,{children:[f.jsx(_t,{styleClasses:u}),f.jsx("div",A(_({"data-dev-fld-wrp":t,ref:i,className:`${t}-fld-wrp ${d?"":"drag"} ${h?"fld-hide":""} ${R(t,"fld-wrp")}`},$(t,"fld-wrp")),{children:f.jsx("img",A(_({"data-dev-img":t,className:`${t}-img ${R(t,"img")}`,src:(e==null?void 0:e.bg_img)||((w=n.current)==null?void 0:w.extarnalSource),alt:e==null?void 0:e.alt},$(t,"img")),{width:e==null?void 0:e.width,height:e==null?void 0:e.height,draggable:!1}))}))]})}var dr,xa,Lt,Di,hr,lo,wl,zu,Ss,Ks,Jd,mE,Kd,gE,th,EE,Tl,Wu,Sa,Oc,eh,bE,sh,IE;class c0{constructor(e,s){b(this,hr);b(this,wl);b(this,Ss);b(this,Jd);b(this,Kd);b(this,th);b(this,Tl);b(this,Sa);b(this,eh);b(this,sh);b(this,dr,"");b(this,xa,"");b(this,Lt,{namespace:"paypal",payType:"payment",currency:"USD",amount:1,shipping:0,tax:0,style:{label:"paypal",color:"gold",shape:"rect",layout:"vertical"}});b(this,Di,null);Object.assign(r(this,Lt),s),typeof e=="string"?x(this,dr,document.querySelector(e)):x(this,dr,e),x(this,xa,`#form-${l(this,Ss,Ks).call(this)}`),this.init()}init(){const{namespace:e}=r(this,Lt),s=window[e],i={style:l(this,sh,IE).call(this)};l(this,wl,zu).call(this)&&(i.fundingSource=s.FUNDING[r(this,Lt).style.payBtn]),l(this,hr,lo).call(this)?i.createSubscription=(n,a)=>l(this,Jd,mE).call(this,n,a):i.createOrder=(n,a)=>l(this,eh,bE).call(this,n,a),i.onClick=(n,a)=>l(this,Kd,gE).call(this,a),i.onApprove=(n,a)=>l(this,th,EE).call(this,n,a),r(this,Lt).onInit&&(i.onInit=r(this,Lt).onInit),s&&s.Buttons(i).render(r(this,dr))}destroy(){r(this,dr).innerHTML=""}reset(){this.destroy(),this.init()}}dr=new WeakMap,xa=new WeakMap,Lt=new WeakMap,Di=new WeakMap,hr=new WeakSet,lo=function(){return r(this,Lt).payType==="subscription"},wl=new WeakSet,zu=function(){return r(this,Lt).style.layout==="standalone"},Ss=new WeakSet,Ks=function(){return r(this,Lt).contentId},Jd=new WeakSet,mE=function(e,s){if(typeof validateForm!="undefined"&&!validateForm({form:l(this,Ss,Ks).call(this)}))throw new Error("form validation is failed!");return s.subscription.create({plan_id:r(this,Lt).planId})},Kd=new WeakSet,gE=function(e){return Yl(this,null,function*(){const s=l(this,Ss,Ks).call(this);try{yield isFormValidatedWithoutError(s)}catch(a){return e.reject()}const i=yield saveFormProgress(s),n=i==null?void 0:i[s];return n!=null&&n.success?(n.entry_id&&x(this,Di,n.entry_id),e.resolve()):e.reject()})},th=new WeakSet,EE=function(e,s){const i=document.getElementById(`${l(this,Ss,Ks).call(this)}`);i.classList.add("pos-rel","form-loading"),(l(this,hr,lo).call(this)?s.subscription.get():s.order.capture()).then(a=>{var h;const o=bf_globals[l(this,Ss,Ks).call(this)],d=document.getElementById(`form-${l(this,Ss,Ks).call(this)}`),c=(h=l(this,Ss,Ks).call(this))==null?void 0:h.split("_")[1];if(typeof d!="undefined"&&d!==null){r(this,Di)&&(o.entryId=r(this,Di));const u=bfSelect(`input[name="${r(this,Lt).fieldKey}"]`,d);u?u.value=a.id:setHiddenFld({name:r(this,Lt).fieldKey,value:a.id,type:"text"},d);let p=bfSelect('button[type="submit"]',d);p||(p=document.createElement("button"),p.setAttribute("type","submit"),p.style.display="none",d.append(p)),p.click();const g={formID:c,transactionID:a.id,payment_name:"paypal",payment_type:l(this,hr,lo).call(this)?"subscription":"order",payment_response:a,entry_id:r(this,Di),fieldKey:r(this,Lt).fieldKey},m=new URL(o==null?void 0:o.ajaxURL);m.searchParams.append("_ajax_nonce",o==null?void 0:o.nonce),m.searchParams.append("action","bitforms_payment_insert"),fetch(m,{method:"POST",body:JSON.stringify(g)}).then(()=>{i.classList.remove("pos-rel","form-loading"),x(this,Di,null)})}})},Tl=new WeakSet,Wu=function(e,s){var i;return(i=document.querySelector(s))==null?void 0:i.querySelector(e)},Sa=new WeakSet,Oc=function(e){if(e){const s=window.bf_globals[l(this,Ss,Ks).call(this)].fields[e].fieldName;let i=l(this,Tl,Wu).call(this,`[name="${s}"]`,r(this,xa));if(i&&i.type==="radio"&&(i=l(this,Tl,Wu).call(this,`[name="${s}"]:checked`,r(this,xa))),i&&i.value)return i.value}return""},eh=new WeakSet,bE=function(e,s){var I;const{currency:i,amount:n,shipping:a,tax:o}=r(this,Lt),d=l(this,Sa,Oc).call(this,r(this,Lt).amountFld)||n,c=l(this,Sa,Oc).call(this,r(this,Lt).shippingVal)||a,h=l(this,Sa,Oc).call(this,r(this,Lt).taxVal)||o,u=Number(d).toFixed(2)*1,p=Number(c).toFixed(2)*1,g=(Number(h)*u/100).toFixed(2)*1,m=(u+p+g).toFixed(2)*1,E=(I=l(this,Ss,Ks).call(this))==null?void 0:I.split("_")[1];return s.order.create({purchase_units:[{description:`form-id:${E};entry-id:${r(this,Di)};field-key:${r(this,Lt).fieldKey}`,amount:{currency_code:i,value:m,breakdown:{item_total:{currency_code:i,value:u},shipping:{currency_code:i,value:p},tax_total:{currency_code:i,value:g}}}}]})},sh=new WeakSet,IE=function(){const{label:e,color:s,shape:i,layout:n,height:a}=r(this,Lt).style,o={label:l(this,hr,lo).call(this)?"subscribe":e,color:s,shape:i};return l(this,wl,zu).call(this)||(o.layout=n),a!==void 0&&(o.height=Number(a)),o};function d0({fieldKey:t,formID:e,attr:s,isBuilder:i,styleClasses:n}){const a=et(op),[o,d]=j.useState(""),h=et(fe)[t],u=j.useRef(null),p=j.useRef(null),[g,m]=j.useState(!1),[E,I]=j.useState(!1),T=(h==null?void 0:h.payType)==="subscription",{locale:C,currency:w,disableFunding:v}=h||{};return j.useEffect(()=>{if(!s.payIntegID){d("");return}const S=a==null?void 0:a.find(O=>O.id&&s.payIntegID&&Number(O.id)===Number(s.payIntegID));if(S){const O=S.clientID;d(O)}},[s.payIntegID]),j.useEffect(()=>{if(!o){lp({fieldKey:t,errorKey:"paypalClientIdMissing",errorMsg:tn("PayPal Client ID is missing"),errorUrl:`field-settings/${t}`});return}I(!0),cp(t,"paypalClientIdMissing");const S={"client-id":o};h!=null&&h.locale&&(S.locale=h.locale),h!=null&&h.disableFunding&&(S["disable-funding"]=h.disableFunding),T&&(S.intent="subscription",S.vault="true"),!T&&(h!=null&&h.currency)&&(S.currency=h.currency);const L={src:`https://www.paypal.com/sdk/js?${new URLSearchParams(S).toString()}`,integrity:"",id:`bf-paypal-script-${t}`,scriptInGrid:!1,attr:{"data-namespace":t},callback:()=>{Rt(t),m(!0),I(!1)}};return Lh(L),()=>{dp("bf-paypal-script")}},[o,C,w,v]),j.useEffect(()=>{if(!g||E)return;u!=null&&u.current||(u.current=At(`#${t}-paypal-wrp`));const S=p.current,O=u.current;if((!o||S&&O&&"destroy"in S)&&(S.destroy(),Rt(t)),!o)return m(!1);const{style:L,currency:P}=h,y={namespace:t,style:L,currency:P,payType:"payment",shipping:0,tax:0,onInit:()=>{Rt(t)}};p.current=new c0(O,y)},[g,E]),f.jsxs(f.Fragment,{children:[f.jsx(_t,{styleClasses:n}),f.jsxs(Zt,{formID:e,fieldData:s,fieldKey:t,noLabel:!0,noErrMsg:!0,isBuilder:i,children:[g&&o&&!E&&f.jsx("div",{className:`${t}-paypal-wrp`,children:f.jsx("div",{ref:u,id:`${t}-paypal-wrp`})}),!E&&(!g||!o)&&f.jsx("p",{children:"Select a config from field settings to render the PayPal."}),E&&f.jsx("p",{children:"Loading PayPal..."})]})]})}var Ra,ih,nh,Ne,Rs,Fi,bn,vl,Ca,Gi,rh,Pe,xl,Dt,fi,In,Sl,zs,Oa,Bi,Rl,J,ya,Cl,La,ki,mi,ah,_E,Yt,ae,De,ts,oh,wE,lh,TE,ch,vE,dh,xE,Aa,yc,hh,SE,ur,co,Ma,Lc,Ol,Hu,uh,RE,ph,CE,yl,qu,ji,zn,Ll,Yu,fh,OE,mh,yE,Al,Xu,gh,pr,ho,Ml,Zu,$l,Qu,_n,Ar,wn,Mr,os,Ns,$a,Ac,Ft,Jt,Tn,$r,vn,Nr,Te,Ue,rp,u0,Nl,Ju,Eh,LE,Pl,Ku,Dl,tp,bh,AE,Ih,ME,xn,Pr,_h,$E,Fl,ep,wh,NE;class h0{constructor(e,s){b(this,ah);b(this,Yt);b(this,De);b(this,oh);b(this,lh);b(this,ch);b(this,dh);b(this,Aa);b(this,hh);b(this,ur);b(this,Ma);b(this,Ol);b(this,uh);b(this,ph);b(this,yl);b(this,ji);b(this,Ll);b(this,fh);b(this,mh);b(this,Al);b(this,pr);b(this,Ml);b(this,$l);b(this,_n);b(this,wn);b(this,os);b(this,$a);b(this,Ft);b(this,Tn);b(this,vn);b(this,Te);b(this,rp);b(this,Nl);b(this,Eh);b(this,Pl);b(this,Dl);b(this,bh);b(this,Ih);b(this,xn);b(this,_h);b(this,Fl);b(this,wh);b(this,Ra,"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>");b(this,ih,"www.cloudflare.com/cdn-cgi/trace");b(this,nh,"api.geonames.org/countryCodeJSON?username=bitcodezoho1");b(this,Ne,null);b(this,Rs,null);b(this,Fi,null);b(this,bn,null);b(this,vl,null);b(this,Ca,null);b(this,Gi,null);b(this,rh,null);b(this,Pe,null);b(this,xl,null);b(this,Dt,null);b(this,fi,null);b(this,In,null);b(this,Sl,30);b(this,zs,[]);b(this,Oa,{});b(this,Bi,!1);b(this,Rl,[]);b(this,J,{maxHeight:370,detectCountryByIp:!1,detectCountryByGeo:!1,optionFlagImage:!0,searchCountryPlaceholder:"Search Country",noCountryFoundText:"No Country Found",searchClearable:!0,defaultCountryKey:"",attributes:{},classNames:{}});b(this,ya,"");b(this,Cl,null);b(this,La,"");b(this,ki,null);b(this,mi,null);b(this,gh,e=>/[0-9]/.test(e));Object.assign(r(this,J),s),x(this,ki,s.document||document),x(this,mi,s.window||window),x(this,ya,s.assetsURL||""),typeof e=="string"?x(this,Ne,r(this,ki).querySelector(e)):x(this,Ne,e),typeof r(this,J).options=="string"&&(r(this,J).options=l(this,ah,_E).call(this,r(this,J).options)),x(this,zs,r(this,J).options.filter(i=>!i.hide)),x(this,Oa,l(this,uh,RE).call(this)),this.fieldKey=r(this,J).fieldKey,this.init()}init(){x(this,xl,l(this,Yt,ae).call(this,`.${this.fieldKey}-phone-inner-wrp`)),x(this,Dt,l(this,Yt,ae).call(this,`.${this.fieldKey}-phone-number-input`)),x(this,Rs,l(this,Yt,ae).call(this,`.${this.fieldKey}-phone-hidden-input`)),x(this,Fi,l(this,Yt,ae).call(this,`.${this.fieldKey}-input-clear-btn`)),x(this,Ca,l(this,Yt,ae).call(this,`.${this.fieldKey}-selected-country-img`)),x(this,rh,l(this,Yt,ae).call(this,`.${this.fieldKey}-option-search-wrp`)),x(this,Pe,l(this,Yt,ae).call(this,`.${this.fieldKey}-opt-search-input`)),x(this,bn,l(this,Yt,ae).call(this,`.${this.fieldKey}-dpd-wrp`)),x(this,vl,l(this,Yt,ae).call(this,`.${this.fieldKey}-option-wrp`)),x(this,fi,l(this,Yt,ae).call(this,`.${this.fieldKey}-search-clear-btn`)),x(this,In,l(this,Yt,ae).call(this,`.${this.fieldKey}-option-list`)),this.setMenu({open:!1}),l(this,De,ts).call(this,r(this,Ne),"keydown",e=>{l(this,dh,xE).call(this,e)}),l(this,De,ts).call(this,r(this,bn),"click",e=>{l(this,Fl,ep).call(this,e)}),l(this,De,ts).call(this,r(this,bn),"keyup",e=>{l(this,Fl,ep).call(this,e)}),l(this,oh,wE).call(this),r(this,J).defaultCountryKey&&this.setSelectedCountryItem(r(this,J).defaultCountryKey),l(this,De,ts).call(this,r(this,Dt),"blur",e=>{l(this,fh,OE).call(this)}),l(this,De,ts).call(this,r(this,Dt),"input",e=>{l(this,mh,yE).call(this,e)}),l(this,De,ts).call(this,r(this,Dt),"focusout",e=>{l(this,Ml,Zu).call(this,e)}),r(this,J).selectedCountryClearable&&l(this,De,ts).call(this,r(this,Fi),"click",e=>{l(this,hh,SE).call(this,e)}),r(this,J).detectCountryByIp&&l(this,lh,TE).call(this),r(this,J).detectCountryByGeo&&l(this,ch,vE).call(this),r(this,J).searchClearable&&(l(this,Te,Ue).call(this,r(this,Pe),"padding-right","35px"),l(this,Te,Ue).call(this,r(this,fi),"display","none"),l(this,De,ts).call(this,r(this,fi),"click",()=>{this.searchOptions("")})),r(this,Pe).value="",l(this,De,ts).call(this,r(this,Pe),"keyup",e=>{l(this,Ih,ME).call(this,e)}),x(this,Ra,r(this,J).placeholderImage?r(this,J).placeholderImage:r(this,Ra)),r(this,mi).observeElm(r(this,Rs),"value",(e,s)=>{l(this,Ll,Yu).call(this,e,s)})}isValidated(){return l(this,Ml,Zu).call(this,{target:r(this,Dt)})}setSelectedCountryItem(e){if(this.value="",x(this,Gi,e),!r(this,Gi)){l(this,Pl,Ku).call(this);return}const s=l(this,_n,Ar).call(this);s&&(r(this,J).selectedFlagImage&&(r(this,Ca).src=`${r(this,ya)}/${s.img}`),l(this,Eh,LE).call(this,s.code),this.setMenu({open:!1}),r(this,Bi)&&r(this,Dt).focus())}searchOptions(e){l(this,bh,AE).call(this,e);let s=[];e?(s=r(this,J).options.filter(i=>{const n=e.toLowerCase(),a=(i.lbl||"").toLowerCase(),o=(i.val||"").toLowerCase(),d=i.code||"";if(a.includes(n)||o.includes(n)||d.includes(n))return!0}),s.length||(s=[{i:0,lbl:r(this,J).noCountryFoundText}]),x(this,zs,s),r(this,J).searchClearable&&l(this,Te,Ue).call(this,r(this,fi),"display","grid")):(x(this,zs,r(this,J).options),r(this,J).searchClearable&&l(this,Te,Ue).call(this,r(this,fi),"display","none")),l(this,Dl,tp).call(this)}setMenu({open:e}){l(this,Te,Ue).call(this,r(this,vl),"max-height",`${e?r(this,J).maxHeight:0}px`),e?(l(this,_h,$E).call(this),l(this,os,Ns).call(this,r(this,Ne),"menu-open"),l(this,De,ts).call(this,r(this,ki),"click",s=>l(this,Ol,Hu).call(this,s)),l(this,Ft,Jt).call(this,r(this,Pe),"tabindex",0),l(this,Ft,Jt).call(this,r(this,fi),"tabindex",0),l(this,Ft,Jt).call(this,r(this,bn),"aria-expanded",!0),l(this,Dl,tp).call(this)):(r(this,Ne).classList.remove("menu-open"),r(this,ki).removeEventListener("click",l(this,Ol,Hu)),setTimeout(()=>{this.searchOptions("")},100),l(this,Ft,Jt).call(this,r(this,Pe),"tabindex",-1),l(this,Ft,Jt).call(this,r(this,fi),"tabindex",-1),l(this,Ft,Jt).call(this,r(this,bn),"aria-expanded",!1))}set value(e){r(this,Rs).value=e||""}get value(){return r(this,Rs).value}destroy(){r(this,In).innerHTML="",this.value="",x(this,Bi,!1),l(this,wh,NE).call(this)}reset(e){l(this,Pl,Ku).call(this),this.destroy(),this.value=e,this.init()}}Ra=new WeakMap,ih=new WeakMap,nh=new WeakMap,Ne=new WeakMap,Rs=new WeakMap,Fi=new WeakMap,bn=new WeakMap,vl=new WeakMap,Ca=new WeakMap,Gi=new WeakMap,rh=new WeakMap,Pe=new WeakMap,xl=new WeakMap,Dt=new WeakMap,fi=new WeakMap,In=new WeakMap,Sl=new WeakMap,zs=new WeakMap,Oa=new WeakMap,Bi=new WeakMap,Rl=new WeakMap,J=new WeakMap,ya=new WeakMap,Cl=new WeakMap,La=new WeakMap,ki=new WeakMap,mi=new WeakMap,ah=new WeakSet,_E=function(e){const s=e.split("->");let i=r(this,mi);return s.forEach(n=>{i=i[n]}),i},Yt=new WeakSet,ae=function(e){return r(this,Ne).querySelector(e)},De=new WeakSet,ts=function(e,s,i){e.addEventListener(s,i),r(this,Rl).push({selector:e,eventType:s,cb:i})},oh=new WeakSet,wE=function(){r(this,Rs).value&&(l(this,Ll,Yu).call(this,"",r(this,Rs).value),r(this,J).selectedCountryClearable&&l(this,Te,Ue).call(this,r(this,Fi),"display","grid"))},lh=new WeakSet,TE=function(){const{protocol:e}=r(this,mi).location;fetch(`${e}//${r(this,ih)}`).then(s=>s.text()).then(s=>{const i=s.trim().split(`
`).reduce((n,a)=>(a=a.split("="),n[a[0]]=a[1],n),{});this.setSelectedCountryItem(i.loc)})},ch=new WeakSet,vE=function(){navigator.geolocation.getCurrentPosition(e=>{const{latitude:s,longitude:i}=e.coords,{protocol:n}=r(this,mi).location;fetch(`${n}//${r(this,nh)}&lat=${s}&lng=${i}`).then(a=>a.json()).then(a=>{this.setSelectedCountryItem(a.countryCode)})})},dh=new WeakSet,xE=function(e){var a,o;const s=r(this,ki).activeElement;let i=null;const n=l(this,xn,Pr).call(this);if(e.target!==r(this,Dt)){if(n){const d=Number(s.dataset.index||-1);if(e.key==="ArrowDown"||!e.shiftKey&&e.key==="Tab"){if(e.preventDefault(),s===r(this,Pe))i=l(this,Yt,ae).call(this,".option:not(.disabled-opt)");else if(s.classList.contains("option")){const c=l(this,Ma,Lc).call(this,d,"next"),h=l(this,ur,co).call(this,c);h?i=h:c+1<r(this,zs).length&&((a=this.virtualOptionList)==null||a.scrollToIndex(c),setTimeout(()=>{const u=l(this,ur,co).call(this,c);u&&u.focus()},50))}}else if(e.key==="ArrowUp"||e.shiftKey&&e.key==="Tab"){if(e.preventDefault(),s===r(this,Pe))i=r(this,Dt),l(this,xn,Pr).call(this)&&this.setMenu({open:!1});else if(s.classList.contains("option")){const c=l(this,Ma,Lc).call(this,d,"previous"),h=l(this,ur,co).call(this,c);h?i=h:c>0?((o=this.virtualOptionList)==null||o.scrollToIndex(c),setTimeout(()=>{const u=l(this,ur,co).call(this,c);u&&u.focus()},50)):h||(i=r(this,Pe))}}else e.key==="Escape"&&this.setMenu({open:!1})}else if(e.key>="a"&&e.key<="z"){clearTimeout(r(this,Cl)),x(this,La,r(this,La)+e.key),x(this,Cl,setTimeout(()=>{x(this,La,"")},300));const d=r(this,J).options.find(c=>!c.disabled&&c.lbl.toLowerCase().startsWith(r(this,La)));d&&this.setSelectedCountryItem(d.i)}else if(e.key==="ArrowDown"||e.key==="ArrowUp"){e.preventDefault();const d=l(this,$l,Qu).call(this),c=e.key==="ArrowDown"?"next":"previous",h=l(this,Ma,Lc).call(this,d,c);h>-1&&h<r(this,J).options.length&&(this.value=r(this,J).options[h].val)}i&&i.focus()}},Aa=new WeakSet,yc=function(e,s){const i=new Event(s);e.dispatchEvent(i)},hh=new WeakSet,SE=function(){r(this,Dt).value="",this.setSelectedCountryItem(""),l(this,Aa,yc).call(this,r(this,Dt),"input"),l(this,Aa,yc).call(this,r(this,Rs),"blur")},ur=new WeakSet,co=function(e){return l(this,Yt,ae).call(this,`.${this.fieldKey}-option-list .option[data-index="${e}"]`)},Ma=new WeakSet,Lc=function(e=-1,s){if(s==="next"){const i=r(this,J).options.length;for(let n=e+1;n<i;n+=1)if(!r(this,J).options[n].disabled)return n}else if(s==="previous"){for(let i=e-1;i>=0;i-=1)if(!r(this,J).options[i].disabled)return i}},Ol=new WeakSet,Hu=function(e){r(this,Ne).contains(e.target)||this.setMenu({open:!1})},uh=new WeakSet,RE=function(){return r(this,J).options.reduce((e,s)=>{if(!e[s.code]){let{code:i}=s;i[0]==="+"&&(i=i.substring(1)),!(i in e)&&s.ptrn&&(e[i]=s.i)}return e},{})},ph=new WeakSet,CE=function(e){let s=e;s[0]==="+"&&(s=s.substring(1,4));let i="";for(let n=3;n>0;n-=1)if(i=s.substring(0,n),i in r(this,Oa))return i;return""},yl=new WeakSet,qu=function(e){var n;let s=l(this,ph,CE).call(this,e);s&&s[0]!=="+"&&(s=`+${s}`);let i=((n=l(this,_n,Ar).call(this))==null?void 0:n.code)||"";return i&&i[0]!=="+"&&(i=`+${i}`),s!==i?(this.setSelectedCountryItem(r(this,Oa)[s.substring(1)]),s):i},ji=new WeakSet,zn=function(e){return e.replace(/[^+0-9]/g,"")},Ll=new WeakSet,Yu=function(e,s){l(this,yl,qu).call(this,s)&&e!==s&&l(this,Al,Xu).call(this,l(this,ji,zn).call(this,s)),typeof bit_conditionals!="undefined"&&bit_conditionals({target:r(this,Rs)})},fh=new WeakSet,OE=function(){this.value.length>3&&(r(this,Dt).value=this.value),l(this,Aa,yc).call(this,r(this,Rs),"blur")},mh=new WeakSet,yE=function(e){const{value:s}=e.target;s&&r(this,J).selectedCountryClearable?l(this,Te,Ue).call(this,r(this,Fi),"display","grid"):r(this,J).selectedCountryClearable&&l(this,Te,Ue).call(this,r(this,Fi),"display","none"),l(this,Al,Xu).call(this,s)},Al=new WeakSet,Xu=function(e){const s=l(this,_n,Ar).call(this);let i="";if(r(this,Bi)?i=s.code:i=l(this,yl,qu).call(this,e),i&&s){let n=s.frmt;const a=r(this,J).valueFormat||"";n||(n=r(this,J).inputFormat||"");const o=l(this,pr,ho).call(this,i,e,n);if(a){const d=l(this,ji,zn).call(this,e),c=l(this,pr,ho).call(this,i,d,a);this.value=c}else this.value=e;r(this,Dt).value=o}},gh=new WeakMap,pr=new WeakSet,ho=function(e,s,i=""){let n="",a=0;const o=s[0]==="+"?s.substring(1):s;for(let d=0;d<i.length&&!(a>=o.length);d+=1){const c=i[d];if(c==="c"){const h=e[0]==="+"?e.substring(1):e;n+=h,a+=h.length}else if(c==="#"){if(!r(this,gh).call(this,o[a]))break;n+=o[a],a+=1}else o[a]===c?(n+=c,a+=1):n+=c}return a<o.length&&(n+=o.substring(a)),n},Ml=new WeakSet,Zu=function(e){const s=l(this,ji,zn).call(this,e.target.value),i=l(this,_n,Ar).call(this);if(i){const n=s.substring(i.code.length);if(i.ptrn&&n){const a=i.ptrn.replace(/\$_bf_\$/g,"\\");return new RegExp(`^(${a})$`).test(n)?"":"invalid"}return n?"":"required"}return"required"},$l=new WeakSet,Qu=function(){const e=r(this,zs).findIndex(s=>s.i===r(this,Gi));return e===-1?0:e},_n=new WeakSet,Ar=function(){return r(this,J).options.find(e=>e.i===r(this,Gi))},wn=new WeakSet,Mr=function(e){return r(this,ki).createElement(e)},os=new WeakSet,Ns=function(e,s){e.classList.add(s)},$a=new WeakSet,Ac=function(e,s){e.textContent=s},Ft=new WeakSet,Jt=function(e,s,i){var n;(n=e==null?void 0:e.setAttribute)==null||n.call(e,s,i)},Tn=new WeakSet,$r=function(e,s){s.trim().split(/\b\s+\b/g).forEach(i=>l(this,os,Ns).call(this,e,i))},vn=new WeakSet,Nr=function(e,s){const i=s.length;if(i)for(let n=0;n<i;n+=1)l(this,Ft,Jt).call(this,e,s[n].key,s[n].value)},Te=new WeakSet,Ue=function(e,s,i){e.style.setProperty(s,i,"important")},rp=new WeakSet,u0=function(){const e=l(this,Yt,ae).call(this,".option");if(!e)return;const s=r(this,mi).getComputedStyle(e),i=parseFloat(s.marginTop)+parseFloat(s.marginBottom),n=e.offsetHeight+i||0;n!==r(this,Sl)&&(x(this,Sl,n),r(this,In).innerHTML="",l(this,Nl,Ju).call(this))},Nl=new WeakSet,Ju=function(){r(this,In).innerHTML="";const e=r(this,zs).map((s,i)=>{const n=l(this,wn,Mr).call(this,"li");if(l(this,Ft,Jt).call(this,n,"data-key",s.i),l(this,Ft,Jt).call(this,n,"data-index",i),"option"in r(this,J).attributes){const c=r(this,J).attributes.option;l(this,vn,Nr).call(this,n,c)}if(!s.i)return l(this,$a,Ac).call(this,n,s.lbl),l(this,os,Ns).call(this,n,"opt-not-found"),n;if(l(this,os,Ns).call(this,n,"option"),"option"in r(this,J).classNames){const c=r(this,J).classNames.option;c&&l(this,Tn,$r).call(this,n,c)}const a=l(this,wn,Mr).call(this,"span");if(l(this,os,Ns).call(this,a,"opt-lbl-wrp"),"opt-lbl-wrp"in r(this,J).classNames){const c=r(this,J).classNames["opt-lbl-wrp"];c&&l(this,Tn,$r).call(this,a,c)}if("opt-lbl-wrp"in r(this,J).attributes){const c=r(this,J).attributes["opt-lbl-wrp"];l(this,vn,Nr).call(this,a,c)}if(r(this,J).optionFlagImage){const c=l(this,wn,Mr).call(this,"img");if(l(this,os,Ns).call(this,c,"opt-icn"),"opt-icn"in r(this,J).classNames){const h=r(this,J).classNames["opt-icn"];h&&l(this,Tn,$r).call(this,c,h)}if("opt-icn"in r(this,J).attributes){const h=r(this,J).attributes["opt-icn"];l(this,vn,Nr).call(this,c,h)}c.src=`${r(this,ya)}/${s.img}`,c.alt=`${s.lbl} flag image`,c.loading="lazy",l(this,Ft,Jt).call(this,c,"aria-hidden",!0),a.append(c)}const o=l(this,wn,Mr).call(this,"span");if(l(this,os,Ns).call(this,o,"opt-lbl"),"opt-lbl"in r(this,J).classNames){const c=r(this,J).classNames["opt-lbl"];c&&l(this,Tn,$r).call(this,o,c)}if("opt-lbl"in r(this,J).attributes){const c=r(this,J).attributes["opt-lbl"];l(this,vn,Nr).call(this,o,c)}l(this,$a,Ac).call(this,o,s.lbl),a.append(o);const d=l(this,wn,Mr).call(this,"span");if(l(this,os,Ns).call(this,d,"opt-suffix"),"opt-suffix"in r(this,J).classNames){const c=r(this,J).classNames["opt-suffix"];c&&l(this,Tn,$r).call(this,d,c)}if(l(this,$a,Ac).call(this,d,s.code),l(this,Ft,Jt).call(this,d,"data-dev-opt-suffix",this.fieldKey),"opt-suffix"in r(this,J).attributes){const c=r(this,J).attributes["opt-suffix"];l(this,vn,Nr).call(this,d,c)}return l(this,Ft,Jt).call(this,n,"tabindex",l(this,xn,Pr).call(this)?"0":"-1"),l(this,Ft,Jt).call(this,n,"role","option"),l(this,Ft,Jt).call(this,n,"aria-posinset",i+1),l(this,Ft,Jt).call(this,n,"aria-setsize",r(this,zs).length),l(this,De,ts).call(this,n,"click",c=>{x(this,Bi,!0),this.setSelectedCountryItem(c.currentTarget.dataset.key)}),l(this,De,ts).call(this,n,"keyup",c=>{c.key==="Enter"&&(x(this,Bi,!0),this.setSelectedCountryItem(c.currentTarget.dataset.key))}),s.disabled&&l(this,os,Ns).call(this,n,"disabled-opt"),n.append(a,d),r(this,Gi)===s.i?(l(this,os,Ns).call(this,n,"selected-opt"),l(this,Ft,Jt).call(this,n,"aria-selected",!0)):l(this,Ft,Jt).call(this,n,"aria-selected",!1),n});r(this,In).append(...e)},Eh=new WeakSet,LE=function(e){const s=l(this,ji,zn).call(this,r(this,Dt).value);if(s){let i=l(this,_n,Ar).call(this).frmt;i||(i=r(this,J).inputFormat||"");const n=l(this,ji,zn).call(this,s);r(this,Dt).value=l(this,pr,ho).call(this,e,n,i)}else r(this,Dt).value=e;if(!s)this.value=e;else{const i=r(this,J).valueFormat||"",n=l(this,ji,zn).call(this,r(this,Dt).value);this.value=i?l(this,pr,ho).call(this,e,n,i):r(this,Dt).value}},Pl=new WeakSet,Ku=function(){x(this,Gi,""),r(this,J).selectedFlagImage&&(r(this,Ca).src=r(this,Ra)),x(this,Bi,!1),this.setMenu({open:!1}),this.value="",r(this,J).selectedCountryClearable&&l(this,Te,Ue).call(this,r(this,Fi),"display","none")},Dl=new WeakSet,tp=function(){if(!l(this,xn,Pr).call(this))return;l(this,Nl,Ju).call(this);const e=l(this,$l,Qu).call(this),s=l(this,Yt,ae).call(this,`.option[data-index="${e}"]`);s&&s.scrollIntoView({block:"nearest",inline:"nearest"})},bh=new WeakSet,AE=function(e){r(this,Pe).value=e},Ih=new WeakSet,ME=function(e){var s;if(e.key==="Enter"&&r(this,zs).length){const i=(s=l(this,Yt,ae).call(this,".option"))==null?void 0:s.dataset.key;this.setSelectedCountryItem(i),this.searchOptions("")}else this.searchOptions(e.target.value)},xn=new WeakSet,Pr=function(){return r(this,Ne).classList.contains("menu-open")},_h=new WeakSet,$E=function(){const e=r(this,xl).getBoundingClientRect(),s=e.top,i=r(this,mi).innerHeight-e.bottom;i<s&&i<r(this,J).maxHeight?(l(this,Te,Ue).call(this,r(this,Ne),"flex-direction","column-reverse"),l(this,Te,Ue).call(this,r(this,Ne),"bottom","0%")):(l(this,Te,Ue).call(this,r(this,Ne),"flex-direction","column"),l(this,Te,Ue).call(this,r(this,Ne),"bottom","auto"))},Fl=new WeakSet,ep=function(e){e.code==="Space"&&(r(this,Pe).focus(),this.setMenu({open:!0})),e.type==="click"&&(l(this,xn,Pr).call(this)?this.setMenu({open:!1}):(r(this,Pe).focus(),this.setMenu({open:!0})))},wh=new WeakSet,NE=function(){r(this,Rl).forEach(({selector:e,eventType:s,cb:i})=>{e.removeEventListener(s,i)})};function p0({fieldKey:t,formID:e,attr:s,styleClasses:i}){const n=j.useRef(null),a=j.useRef(null),d=et(fe)[t],c=et(zl),{selectedFlagImage:h,selectedCountryClearable:u,searchClearable:p,optionFlagImage:g,detectCountryByIp:m,detectCountryByGeo:E,defaultCountryKey:I,searchPlaceholder:T,noCountryFoundText:C,inputFormat:w,valueFormat:v}=d.config;return j.useEffect(()=>{n!=null&&n.current||(n.current=At(`.${t}-phone-fld-wrp`));const S=a.current,O=n.current;S&&O&&"destroy"in S&&S.destroy();const L=document.getElementById("bit-grid-layout").contentWindow;L.bit_virtualized_list||(L.bit_virtualized_list=Rp),L.observeElm||(L.observeElm=Gh);const{placeholderImage:P,options:y}=d,D={fieldKey:t,selectedFlagImage:h,selectedCountryClearable:u,searchClearable:p,optionFlagImage:g,detectCountryByIp:m,detectCountryByGeo:E,defaultCountryKey:I,searchPlaceholder:T,noCountryFoundText:C,placeholderImage:P,options:y,inputFormat:w,valueFormat:v,assetsURL:`${c.assetsURL}/../static/countries/`,document:document.getElementById("bit-grid-layout").contentDocument,window:L,attributes:{option:mt(t,"option"),"opt-lbl-wrp":mt(t,"opt-lbl-wrp"),"opt-icn":mt(t,"opt-icn"),"opt-lbl":mt(t,"opt-lbl"),"opt-a":mt(t,"opt-prefix")},classNames:{option:R(t,"option"),"opt-lbl-wrp":R(t,"opt-lbl-wrp"),"opt-icn":R(t,"opt-icn"),"opt-lbl":R(t,"opt-lbl"),"opt-prefix":R(t,"opt-prefix")}};a.current=new h0(O,D)},[d]),f.jsxs(f.Fragment,{children:[f.jsx(_t,{styleClasses:i}),f.jsx(Zt,{formID:e,fieldKey:t,fieldData:s,children:f.jsx("div",{className:`${t}-phone-fld-container`,children:f.jsxs("div",A(_({"data-dev-phone-fld-wrp":t,className:`${t}-phone-fld-wrp ${R(t,"phone-fld-wrp")} ${d.valid.disabled?"disabled":""} ${d.valid.readonly?"readonly":""}`,ref:n},$(t,"phone-fld-wrp")),{children:[f.jsx("input",_(_({name:t,type:"hidden",className:`${t}-phone-hidden-input`},"disabled"in d.valid&&{disabled:d.valid.disabled}),"readonly"in d.valid&&{readOnly:d.valid.readonly})),f.jsxs("div",{className:`${t}-phone-inner-wrp`,children:[f.jsxs("div",{"data-testid":`${t}-dpd-wrp`,className:`${t}-dpd-wrp`,"data-dev-dpd-wrp":t,role:"combobox","aria-live":"assertive","aria-labelledby":"country-label-2","aria-expanded":"false",tabIndex:d.valid.disabled?"-1":"0",children:[h&&f.jsx("div",{className:`${t}-selected-country-wrp`,children:f.jsx("img",_({"data-dev-selected-phone-img":t,alt:"Selected Country image","aria-hidden":"true",className:`${t}-selected-country-img ${R(t,"selected-phone-img")}`,src:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>"},$(t,"selected-phone-img")))}),f.jsx("div",{className:`${t}-dpd-down-btn`,children:f.jsx("svg",{width:"15",height:"15",role:"img",title:"Downarrow icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:f.jsx("polyline",{points:"6 9 12 15 18 9"})})})]}),f.jsx("input",A(_({"data-testid":`${t}-phone-nmbr-inp`,"data-dev-phone-number-input":t,"aria-label":"Phone Number"},"ph"in s&&{placeholder:s.ph}),{type:"tel",className:`${t}-phone-number-input`,autoComplete:"tel",tabIndex:d.valid.disabled?"-1":"0"})),u&&f.jsx("button",A(_({"data-testid":`${t}-inp-clr-btn`,"data-dev-input-clear-btn":t,type:"button",title:"Clear value",className:`${t}-input-clear-btn ${R(t,"input-clear-btn")}`},$(t,"input-clear-btn")),{children:f.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),f.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}))]}),f.jsx("div",A(_({className:`${t}-option-wrp ${R(t,"option-wrp")}`,"data-dev-option-wrp":t},$(t,"option-search-wrp")),{children:f.jsxs("div",{className:`${t}-option-inner-wrp`,children:[f.jsxs("div",A(_({"data-dev-option-search-wrp":t,className:`${t}-option-search-wrp ${R(t,"option-search-wrp")}`},$(t,"option-search-wrp")),{children:[f.jsx("input",{"data-testid":`${t}-opt-srch-inp`,"data-dev-opt-search-input":t,"aria-label":"Search for countries",type:"search",className:`${t}-opt-search-input`,placeholder:T,autoComplete:"off",tabIndex:"-1"}),f.jsxs("svg",A(_({className:`${t}-icn ${t}-opt-search-icn ${R(t,"opt-search-icn")}`,"data-dev-opt-search-icn":t,"aria-hidden":"true",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},$(t,"opt-search-icn")),{children:[f.jsx("circle",{cx:"11",cy:"11",r:"8"}),f.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})),p&&f.jsx("button",A(_({"data-testid":`${t}-srch-clr-btn`,type:"button","aria-label":"Clear search",className:`${t}-icn ${t}-search-clear-btn ${R(t,"search-clear-btn")}`,"data-dev-search-clear-btn":t,tabIndex:"-1"},$(t,"search-clear-btn")),{children:f.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),f.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}))]})),f.jsx("ul",A(_({className:`${t}-option-list ${R(t,"option-list")}`,tabIndex:"-1",role:"listbox","aria-label":"country list","data-dev-option-list":t},$(t,"option-list")),{children:f.jsxs("li",{className:"option",children:[f.jsx("span",{className:"opt-prefix",children:"Prefix"}),f.jsxs("span",{className:"opt-lbl-wrp",children:[f.jsx("img",{className:"opt-icn",src:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>",alt:"Placeholder"}),f.jsx("span",{className:"opt-lbl",children:"Option"})]}),f.jsx("span",{className:"opt-suffix",children:"Suffix"})]})}))]})}))]}))})})]})}let Ti,uo;function Cp({form:t,input:e}){var o,d;if(t?Ti=t:(o=e==null?void 0:e.form)!=null&&o.id&&([,Ti]=e.form.id.split("form-")),typeof window[Ti]=="undefined")return!1;let s={};if(uo=window[Ti].fields,t)s=f0();else if(e){if(!window[Ti].validateFocusLost)return!0;const c=PE(e.name);s={[c]:e.value},uo={[c]:uo[c]}}let i=!0;const n=Object.entries(uo);let{length:a}=n;for(;a--;){const[c,h]=n[a],u=h.typ,p=typeof s[c]=="string"?s[c].trim():s[c],g=document.querySelector(`#form-${Ti} .${c}`);if(window.getComputedStyle(g).display==="none"){oc("",c);continue}let m="";if(!p){u==="check"&&(m=DE(p,h)),m=E0(h),oc(m,c,h),m&&(i=!1);continue}if(u==="number"?m=b0(p,h):u==="email"?m=I0(p,h):u==="url"?m=_0(p,h):u==="decision-box"?m=w0(p,h):u==="check"||u==="select"?m=x0(p,h):u==="file-up"&&(m=T0(p,h)),(d=h==null?void 0:h.valid)!=null&&d.regexr&&(m=v0(p,h),m)){oc(m,c,h),i=!1;continue}oc(m,c,h),m&&(i=!1)}return i}const PE=t=>t.slice(-2)==="[]"?t.slice(0,t.length-2):t,f0=()=>{const t=new FormData(document.getElementById(`form-${Ti}`)),e={};return Array.from(t.entries()).forEach(([i,n])=>{const a=PE(i);a in uo&&(e[a]?(Array.isArray(e[a])||(e[a]=[e[a]]),e[a].push(n)):e[a]=n)}),e},oc=(t,e,s)=>{var n,a;const i=document.querySelector(`#form-${Ti} #${e}-error`);i&&"err"in(s||{})&&(t&&((a=(n=s==null?void 0:s.err)==null?void 0:n[t])!=null&&a.show)?(i.innerHTML=s.err[t].custom?s.err[t].msg:s.err[t].dflt,i.parentElement.style.marginTop="5px",i.parentElement.style.height=`${i.offsetHeight}px`,m0(e)):(i.parentElement.style.marginTop=0,i.parentElement.style.height=0))},m0=t=>{const e=document.querySelector(`#form-${Ti} .btcd-fld-itm.${t}`),s=document.body.getBoundingClientRect(),n=e.getBoundingClientRect().top-s.top;g0(e)||window.scroll({top:n,behavior:"smooth"})},g0=t=>{const e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)},E0=t=>{var e;return(e=t==null?void 0:t.valid)!=null&&e.req?"required":""},Op=t=>(t||"").split("$_bf_$").join("\\"),b0=(t,e)=>e.mn&&Number(t)<Number(e.mn)?"mn":e.mx&&Number(t)>Number(e.mx)?"mx":"",I0=(t,e)=>e.err.invalid.show?new RegExp(Op(e.pattern)).test(t)?"":"invalid":"",_0=(t,e)=>e.err.invalid.show?new RegExp(Op(e.attr.pattern)).test(t)?"":"invalid":"",w0=(t,e)=>e.valid.req&&t!==e.msg.checked?"req":"",DE=(t,e)=>{var s;return(s=e==null?void 0:e.opt)!=null&&s.find(i=>i.req&&!(t||[]).includes(i.lbl))?"req":""},T0=(t,e)=>e.valid.req&&!Array.isArray(t)&&!t.name?"req":"",v0=(t,e)=>new RegExp(Op(e.valid.regexr),e.valid.flags||"").test(t)?"":"regexr",x0=(t,e)=>{const s=Array.isArray(t)?t:(t||"").split(","),i=Number(e.mn)||0,n=Number(e.mx)||e.opt.length;return s.length<i?"mn":s.length>n?"mx":e.typ==="check"?DE(t,e):""};function S0({attr:t,onBlurHandler:e,resetFieldValue:s,formID:i,fieldKey:n,styleClasses:a}){const[o,d]=j.useState(t.val||""),c=j.useRef([]),[h,u]=j.useState("");c.current=t.opt.map((E,I)=>{var T;return(T=c.current[I])!=null?T:j.createRef()});const p=E=>{t.valid.disabled||(d(E.target.value),e&&e(E),Rt(n))},g=E=>{const{name:I,form:T}=E.target;Cp({input:{name:I,form:T,value:o}})},m=E=>{d(E.target.value),u(E.target.value)};return f.jsxs(f.Fragment,{children:[f.jsx(_t,{styleClasses:a}),f.jsx(Zt,{formID:i,fieldKey:n,fieldData:t,children:f.jsxs("div",A(_({"data-testid":`${n}-cc`,"data-dev-cc":n,className:`${n}-cc ${R(n,"cc")}`},$(n,"cc")),{children:[t.opt.map((E,I)=>f.jsxs("div",A(_({"data-testid":`${n}-cw`,"data-dev-cw":n,className:`${n}-cw ${R(n,"cw")}`},$(n,"cw")),{children:[f.jsx("input",_(A(_(_(_(_({"data-testid":`${n}-ci`,id:`${n}-chk-${I}`,type:"radio",className:`${n}-ci ${R(n,"ci")}`,ref:c.current[I],name:n,value:E.val||E.lbl},E.check&&{checked:!0}),(t.valid.disabled||E.disabled)&&{disabled:!0}),t.valid.req&&{required:!0}),"name"in t&&{name:t.name}),{checked:o===(E.val||E.lbl)||!o&&E.check,onChange:p,onBlur:g}),$(n,"ci"))),f.jsxs("label",A(_({"data-testid":`${n}-cl`,"data-dev-cl":n,"data-cl":!0,htmlFor:`${n}-chk-${I}`,className:`${n}-cl ${R(n,"cl")}`},$(n,"cl")),{children:[f.jsx("span",A(_({"data-testid":`${n}-bx`,"data-dev-bx":n,"data-bx":!0,className:`${n}-bx ${R(n,"bx")}`},$(n,"bx")),{children:f.jsx("svg",{width:"12",height:"10",viewBox:"0 0 12 10",className:`${n}-svgwrp ${R(n,"svgwrp")}`,children:f.jsx("use",{"data-ck-icn":!0,href:`#${n}-ck-svg`,className:`${n}-ck-icn ${R(n,"ck-icn")}`})})})),f.jsx("span",A(_({"data-testid":`${n}-ct`,"data-dev-ct":n,className:`${n}-ct ${R(n,"ct")}`},$(n,"ct")),{children:f.jsx(ls,{html:E.lbl})}))]}))]}),`opr-${I+22}`)),t.addOtherOpt&&f.jsxs("div",A(_({"data-testid":`${n}-cw`,"data-dev-cw":n,className:`${n}-cw ${R(n,"cw")}`},$(n,"cw")),{children:[f.jsx("input",_(A(_(_({"data-testid":`${n}-ci`,"data-oopt":n,id:`${n}-chk-${t.opt.length}`,type:"radio",className:`${n}-ci ${R(n,"ci")}`,ref:c.current[t.opt.length],name:n,value:h},t.valid.req&&{required:!0}),"name"in t&&{name:t.name}),{disabled:t.valid.disabled,onChange:p,onBlur:g}),$(n,"ci"))),f.jsxs("label",A(_({"data-testid":`${n}-cl`,"data-dev-cl":n,"data-cl":!0,htmlFor:`${n}-chk-${t.opt.length}`,className:`${n}-cl ${R(n,"cl")}`},$(n,"cl")),{children:[f.jsx("span",A(_({"data-testid":`${n}-bx`,"data-dev-bx":n,"data-bx":!0,className:`${n}-bx  ${R(n,"bx")}`},$(n,"bx")),{children:f.jsx("svg",{width:"12",height:"10",viewBox:"0 0 12 10",className:`${n}-svgwrp ${R(n,"svgwrp")}`,children:f.jsx("use",{"data-ck-icn":!0,href:`#${n}-ck-svg`,className:`${n}-ck-icn ${R(n,"ck-icn")}`})})})),f.jsx("span",A(_({"data-testid":`${n}-ct`,"data-dev-ct":n,className:`${n}-ct ${R(n,"ct")}`},$(n,"ct")),{children:"Other.."}))]})),f.jsx("div",{"data-oinp-wrp":!0,className:`${n}-other-inp-wrp`,children:f.jsx("input",A(_(_(_({"data-testid":`${n}-other-inp`,"data-dev-other-inp":n,type:"text",className:`${n}-other-inp ${R(n,"other-inp")}`},t.valid.otherOptReq&&{required:!0}),"otherInpPh"in t&&{placeholder:t.otherInpPh}),!("otherInpPh"in t)&&{placeholder:"Other..."}),{value:h,onChange:m}))})]}),`opt-${t.opt.length+24}`)]}))})]})}var Na,Pa,qe,Sn,Da,Gl,fr,po,Th,FE,vh,GE,mr,fo,xh,Bl,sp,Ui,Wn;class R0{constructor(e,s){b(this,fr);b(this,Th);b(this,vh);b(this,mr);b(this,Bl);b(this,Ui);b(this,Na,null);b(this,Pa,"");b(this,qe,{clientId:"",options:{currency:"INR",amount:1,amountType:"fixed",theme:{},modal:{},prefill:{},notes:{}}});b(this,Sn,null);b(this,Da,null);b(this,Gl,null);b(this,xh,e=>{var a;const s=document.getElementById(`${l(this,Ui,Wn).call(this)}`);s.classList.add("pos-rel","form-loading");const i=document.getElementById(`form-${l(this,Ui,Wn).call(this)}`),n=(a=l(this,Ui,Wn).call(this))==null?void 0:a.split("_")[1];if(typeof i!="undefined"&&i!==null){const o=bf_globals[l(this,Ui,Wn).call(this)];r(this,Sn)&&(o.entryId=r(this,Sn));const d=bfSelect(`input[name="${r(this,qe).fieldKey}"]`,i);d?d.value=e.razorpay_payment_id:setHiddenFld({name:r(this,qe).fieldKey,value:e.razorpay_payment_id,type:"text"},i);let c=bfSelect('button[type="submit"]',i);c||(c=document.createElement("button"),c.setAttribute("type","submit"),c.style.display="none",i.append(c)),c.click();const h={formID:n,fieldKey:r(this,qe).fieldKey,transactionID:e.razorpay_payment_id,payment_type:r(this,qe).payType==="subscription"?"subscription":"order",entry_id:r(this,Sn)},u=new URL(o==null?void 0:o.ajaxURL);u.searchParams.append("_ajax_nonce",o==null?void 0:o.nonce),u.searchParams.append("action","bitforms_save_razorpay_details"),fetch(u,{method:"POST",body:JSON.stringify(h)}).then(()=>{s.classList.remove("pos-rel","form-loading"),x(this,Sn,null)})}});Object.assign(r(this,qe),s),x(this,Da,s.document||document),x(this,Gl,s.window||window),x(this,Pa,`#form-${l(this,Ui,Wn).call(this)}`),typeof e=="string"?x(this,Na,r(this,Da).querySelector(e)):x(this,Na,e),this.init()}init(){l(this,Th,FE).call(this,l(this,fr,po).call(this,`.${r(this,qe).fieldKey}-razorpay-btn`),"click",()=>{l(this,Bl,sp).call(this)})}destroy(){l(this,vh,GE).call(this,l(this,fr,po).call(this,`.${r(this,qe).fieldKey}-razorpay-btn`),"click",()=>{l(this,Bl,sp).call(this)})}reset(){this.destroy(),this.init()}}Na=new WeakMap,Pa=new WeakMap,qe=new WeakMap,Sn=new WeakMap,Da=new WeakMap,Gl=new WeakMap,fr=new WeakSet,po=function(e,s){return s?r(this,Da).querySelector(s).querySelector(e):r(this,Na).querySelector(e)},Th=new WeakSet,FE=function(e,s,i){e.addEventListener(s,i)},vh=new WeakSet,GE=function(e,s,i){e.removeEventListener(s,i)},mr=new WeakSet,fo=function(e){if(e){const s=window.bf_globals[l(this,Ui,Wn).call(this)].fields[e].fieldName;let i=l(this,fr,po).call(this,`[name="${s}"]`,r(this,Pa));if(i&&i.type==="radio"&&(i=l(this,fr,po).call(this,`[name="${s}"]:checked`,r(this,Pa))),i&&i.value)return i.value}return""},xh=new WeakMap,Bl=new WeakSet,sp=function(){return Yl(this,null,function*(){const{currency:e,amount:s,amountType:i,amountFld:n,name:a,description:o,theme:d,prefill:c,modal:h,notes:u}=r(this,qe).options,{confirm_close:p}=h,{contentId:g}=r(this,qe),m=Number(i==="dynamic"?l(this,mr,fo).call(this,n):s)*100,E={key:r(this,qe).clientId,currency:e,amount:m,name:a,description:o,theme:d,prefill:{name:l(this,mr,fo).call(this,c.prefillNameFld),email:l(this,mr,fo).call(this,c.prefillEmailFld),contact:l(this,mr,fo).call(this,c.prefillContactFld)},notes:u,modal:{backdropclose:!1,escape:!1,confirm_close:p},handler:w=>Yl(this,null,function*(){return r(this,xh).call(this,w)})};try{yield isFormValidatedWithoutError(g)}catch(w){return!1}const I=yield saveFormProgress(g),T=I==null?void 0:I[g];if(!(T!=null&&T.success))return;T.entry_id&&x(this,Sn,T.entry_id),new(r(this,Gl)).Razorpay(E).open()})},Ui=new WeakSet,Wn=function(){return r(this,qe).contentId};function C0({fieldKey:t,formID:e,attr:s,isBuilder:i,styleClasses:n}){const a=et(op),d=et(fe)[t],[c,h]=j.useState(""),u=j.useRef(null),p=j.useRef(null),[g,m]=j.useState(!1);return j.useEffect(()=>{if(!c){lp({fieldKey:t,errorKey:"razorpayClientIdMissing",errorMsg:tn("Razorpay Client ID is missing"),errorUrl:`field-settings/${t}`});return}if(cp(t,"razorpayClientIdMissing"),g)return;const I={src:"https://checkout.razorpay.com/v1/checkout.js",integrity:"",id:`bf-razorpay-script-${t}`,scriptInGrid:!1,callback:()=>{m(!0)}};Lh(I)},[c]),j.useEffect(()=>{if(!s.payIntegID){h("");return}const E=a==null?void 0:a.find(T=>T.id&&s.payIntegID&&Number(T.id)===Number(s.payIntegID));if(!E)return;const I=E.apiKey;h(I)},[s.payIntegID]),j.useEffect(()=>{if(!g)return;u!=null&&u.current||(u.current=At(`${t}-razorpay-wrp`));const E=u.current,I=p.current;if((!c||I&&E&&"destroy"in I)&&(I.destroy(),Rt(t)),!c)return;const T={clientId:c,fieldKey:t,options:d.options,onPaymentSuccess:C=>{console.log("success")},onPaymentFailed:()=>{console.log("failed")}};p.current=new R0(E,T)},[g,d]),f.jsxs(f.Fragment,{children:[f.jsx(_t,{styleClasses:n}),f.jsxs(Zt,{formID:e,fieldData:s,fieldKey:t,noLabel:!0,noErrMsg:!0,isBuilder:i,children:[g&&c&&f.jsx("div",{className:"bf-form",children:f.jsx("div",{ref:u,className:`${t}-razorpay-wrp`,children:f.jsxs("button",A(_({type:"button","data-dev-razorpay-btn":t,className:`${t}-razorpay-btn ${R(t,"razorpay-btn")}`},$(t,"razorpay-btn")),{children:[f.jsxs("svg",{width:"18",height:"20",viewBox:"0 0 18 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{d:"M7.077 6.476l-.988 3.569 5.65-3.589-3.695 13.54 3.752.004 5.457-20L7.077 6.476z",fill:"#fff"}),f.jsx("path",{d:"M1.455 14.308L0 20h7.202L10.149 8.42l-8.694 5.887z",fill:"#fff"})]}),f.jsxs("div",A(_({"data-dev-razorpay-btn-text":t,className:`${t}-razorpay-btn-text ${R(t,"razorpay-btn-text")}`},$(t,"razorpay-btn-text")),{children:[f.jsx("span",A(_({"data-dev-razorpay-btn-title":t,className:`${t}-razorpay-btn-title ${R(t,"razorpay-btn-title")}`},$(t,"razorpay-btn-title")),{children:d.btnTxt})),d.subTitl&&f.jsx("span",A(_({"data-dev-razorpay-btn-sub-title":t,className:`${t}-razorpay-btn-sub-title ${R(t,"razorpay-btn-sub-title")}`},$(t,"razorpay-btn-sub-title")),{children:"Secured by Razorpay"}))]}))]}))})}),(!g||!c)&&f.jsx("p",{children:"Select a config from field settings to render the Razorpay."})]})]})}function O0({fieldKey:t,formId:e,styleClasses:s}){var E;const i=j.useRef(null),n=j.useRef(null),o=et(fe)[t],d=et(ja),{styleMode:c}=et(Mn),h=((E=o.hidden)==null?void 0:E.includes(d))||!1,u=j.useRef(null),p=et(qE),{siteKey:g=""}=p||{};j.useEffect(()=>{window.renderGrecaptcha=m;const T={src:"https://www.google.com/recaptcha/api.js?onload=renderGrecaptcha&render=explicit",integrity:"",id:"bf-recaptcha-script",async:!0,defer:!0};return Lh(T),()=>{clearInterval(n.current),dp(T.id)}},[]);function m(){let I=At(`.${t}-recaptcha`);u.current!==null&&(I==null||I.remove(),window.grecaptcha.reset(u.current),I=document.createElement("div"),I.classList.add(`${t}-recaptcha`),i.current.appendChild(I)),u.current=window.grecaptcha.render(I,{sitekey:g,theme:o.config.theme,size:o.config.size}),Rt(t),n.current&&clearInterval(n.current),n.current=setInterval(()=>{window.grecaptcha.reset(u.current)},3e4)}return j.useEffect(()=>{window.grecaptcha&&m()},[o]),f.jsxs(f.Fragment,{children:[f.jsx(_t,{styleClasses:s}),f.jsx("div",{"data-dev-fld-wrp":t,className:`${t}-recaptcha-container ${t}-fld-wrp ${c?"":"drag"} ${h?"fld-hide":""}`,children:f.jsx("div",{className:`${t}-recaptcha-wrp`,ref:i,children:f.jsx("div",{className:`${t}-recaptcha`})})})]})}function y0({fieldKey:t,attr:e,styleClasses:s,formID:i}){var bi,Nn,Pn;const{formType:n}=ap(),a=An(s),[o,d]=Wi(Wf),[c,h]=j.useState(An(o[t])),[u,p]=Wi(Hf),[g,m]=Wi(qf),E=Hi(Yf),I=et(fe),{styleMode:T}=et(Mn),[C,w]=Wi(Ua),v=j.useRef(null),{ref:S,isComponentVisible:O,setIsComponentVisible:L}=et(Xf),P=et(ja),y=et(hp),D=Hi(am),V=et(Zf),{recalculateNestedField:k}=y,{fieldKey:B,parentFieldKey:X,counter:N}=k,W=Qf(),F=Jf(),{btnPosition:M}=e;j.useEffect(()=>{if(N>0&&t===X){const tt=Kf(c,B);h(tt),j.startTransition(()=>{d(rt=>ve(rt,Qt=>{Qt[t]=tt})),Rt(t)})}},[N,X,B]);const G=tt=>{tt.findIndex(rt=>rt.i==="shadow_block")<0&&(h(rt=>A(_({},rt),{[P]:tt})),j.startTransition(()=>{d(rt=>ve(rt,Qt=>{Qt[t]&&(Qt[t][P]=tt)}))}))},U=(tt,rt)=>{const Qt=Mc(V.fieldData,"repeater");if(!Qt)return;const{newLayouts:jt}=lm(c,Qt,V.fieldSize,rt);h(jt),j.startTransition(()=>{d(Se=>ve(Se,As=>{As[t]=jt})),D(!0),Rt(t)})},H=At(`.${t}-rpt-wrp`),Y=H&&lc(H),at=Y?Y.width-(Y.paddingLeft+Y.paddingRight+Y.borderLeft+Y.borderRight):0,ot=At(`.${t}-pair-btn-wrp`),lt=ot&&lc(ot),Et=lt&&["row","row-reverse"].includes(M)?lt.width:0,Q=At(`.${t}-rpt-grid-wrp`),st=Q&&lc(Q),ct=at-Et-(st?st.paddingLeft+st.paddingRight+st.borderLeft+st.borderRight:0),pt=()=>{p({}),L(!1)},ht=()=>{W(F.pathname.replace(/style\/.+|style/g,"fs"),{replace:!0}),pt()},Ys=tt=>{W(`/form/builder/${n}/${i}/field-theme-customize/quick-tweaks/${tt}`,{replace:!0}),pt()},$n=(tt,rt)=>{tt.preventDefault(),tt.stopPropagation(),me(tt,rt)},K=(tt,rt)=>{tt.stopPropagation(),m(rt),Io(u)||p({}),nt(),!T&&W(`/form/builder/${n}/${i}/field-settings/${rt}`)},nt=()=>{Io(C)||(v.current!==null&&clearTimeout(v.current),v.current=setTimeout(()=>{w({}),v.current=null},700))},me=(tt,rt)=>{var Mp;const{button:Qt}=tt;let jt,Se,As,Dn;const Fn=S.current.getBoundingClientRect().top+window.scrollY,Xi=S.current.getBoundingClientRect().left+window.scrollX,qa=At("#layout-wrapper"),Ya=Number(qa.style.width.match(/\d+/gi)),Lp=Number(qa.style.height.match(/\d+/gi)),Ap=170,Hl=200;if(Qt===0){const $p=(Mp=At(`[data-key="${rt}"]`))==null?void 0:Mp.querySelector(".blk-wrp-down-btn"),Bh=30,Np=$p.getBoundingClientRect().top+Bh,Pp=$p.getBoundingClientRect().left;if(jt=Pp-Xi+5,Se=Np-Fn+2,As=jt+Ap>Ya,Dn=Se+Hl>Lp,As&&(jt=Pp+Bh-Xi-148),Dn&&(Se=Np-Fn-(Hl+Bh+7)),g!==rt&&(jt+=3),O&&u.fldKey===rt&&u.x===jt&&u.y===Se){pt();return}}else Qt===2&&(jt=tt.clientX-Xi+5,Se=tt.clientY-Fn,As=jt+Ap>Ya,Dn=Se+Hl>Lp,As&&(jt=tt.clientX-Xi-150),Dn&&(Se=tt.clientY-Fn-Hl));m(rt),p({fldKey:rt,x:jt,y:Se}),L(!0)},kt=tt=>{if(!em){E(_({show:!0},sm.fieldClone));return}const rt=I[tt];if(!Mc(rt))return;const{newLayouts:Qt}=cm(tt,c);h(Qt),j.startTransition(()=>{d(jt=>ve(jt,Se=>{Se[t]=Qt})),Rt(t)})},xe=tt=>{const rt=dm(tt,c);h(rt),j.startTransition(()=>{d(Qt=>ve(Qt,jt=>{jt[t]=rt})),Rt(t)}),W(`/form/builder/${n}/${i}/fields-list`,{replace:!0})};return f.jsxs(f.Fragment,{children:[f.jsx(_t,{styleClasses:a}),f.jsx(Zt,{formID:i,fieldKey:t,fieldData:e,noErrMsg:!0,children:f.jsx("div",A(_({"data-testid":`${t}-inp-fld-wrp`,"data-dev-inp-fld-wrp":t,className:`${t}-inp-fld-wrp ${R(t,"inp-fld-wrp")}`},$(t,"inp-fld-wrp")),{children:f.jsxs("div",A(_({"data-testid":`${t}-rpt-fld-wrp`,"data-dev-rpt-fld-wrp":t,className:`${t}-rpt-fld-wrp ${R(t,"rpt-fld-wrp")}`},$(t,"rpt-fld-wrp")),{children:[f.jsxs("div",A(_({"data-testid":`${t}-rpt-wrp`,"data-dev-rpt-wrp":t,className:`${t}-rpt-wrp ${R(t,"rpt-wrp")}`},$(t,"rpt-wrp")),{children:[f.jsx("div",A(_({"data-testid":`${t}-rpt-grid-wrp`,"data-dev-rpt-grid-wrp":t,className:`${t}-rpt-grid-wrp ${R(t,"rpt-grid-wrp")}`},$(t,"rpt-grid-wrp")),{children:f.jsxs("div",{style:{width:ct,display:"inline-block"},id:`${t}-layout-wrapper`,onDragOver:tt=>tt.preventDefault(),onDragEnter:tt=>tt.preventDefault(),onMouseMove:()=>j.startTransition(()=>{D(!1)}),onMouseLeave:()=>j.startTransition(()=>{D(!0)}),children:[T?f.jsx("div",{className:"_frm-g",children:(Nn=c[P])==null?void 0:Nn.map(tt=>f.jsx("div",{"data-key":tt.i,className:tt.i,onClick:rt=>K(rt,tt.i),onKeyDown:rt=>K(rt,tt.i),role:"button",tabIndex:0,onContextMenu:rt=>$n(rt,tt.i),children:f.jsx(j.Suspense,{fallback:f.jsx(Nc,{layout:tt}),children:f.jsx(zc,{layoutItem:tt,removeLayoutItem:xe,cloneLayoutItem:kt,fields:I,formID:i,navigateToFieldSettings:ht,navigateToStyle:Ys,handleContextMenu:$n,resizingFld:C})})},tt.i))}):f.jsx(om,{width:ct,measureBeforeMount:!0,compactType:"vertical",useCSSTransforms:!0,isDroppable:V!==null&&P==="lg",className:"layout",style:{minHeight:V?tm()+40:null},onDrop:U,resizeHandles:["e"],droppingItem:V==null?void 0:V.fieldSize,onLayoutChange:G,cols:60,rowHeight:1,margin:[0,0],draggableCancel:".no-drg",draggableHandle:".drag",layout:c[P]||[],onDragStart:$c,onDragStop:()=>{j.startTransition(()=>{D(!0),Rt(t),nt()})},onResizeStart:$c,onResize:Xh,onResizeStop:()=>{nt(),Rt(t)},children:(bi=c[P])==null?void 0:bi.map(tt=>f.jsx("div",{"data-key":tt.i,className:`blk ${tt.i===g&&"itm-focus"}`,onClick:rt=>K(rt,tt.i),onKeyDown:rt=>K(rt,tt.i),role:"button",tabIndex:0,onContextMenu:rt=>$n(rt,tt.i),children:f.jsx(j.Suspense,{fallback:f.jsx(Nc,{layout:tt}),children:f.jsx(zc,{layoutItem:tt,removeLayoutItem:xe,cloneLayoutItem:kt,fields:I,formID:i,navigateToFieldSettings:ht,navigateToStyle:Ys,handleContextMenu:$n,resizingFld:C})})},tt.i))}),!((Pn=c[P])!=null&&Pn.length)&&!V&&f.jsx("div",{className:"empty-layout",children:f.jsx("div",{className:"empty-layout-msg",children:f.jsx("div",{className:"empty-layout-msg-txt",children:f.jsx("span",{children:"Drag and drop fields here"})})})})]})})),f.jsxs("div",A(_({"data-testid":`${t}-pair-btn-wrp`,"data-dev-pair-btn-wrp":t,className:`${t}-pair-btn-wrp ${R(t,"pair-btn-wrp")}`},$(t,"pair-btn-wrp")),{children:[e.addBtn.show&&f.jsxs("button",A(_({"data-testid":t,"data-dev-rpt-add-btn":t,className:`${t}-rpt-add-btn ${R(t,"rpt-add-btn")}`},$(t,"rpt-add-btn")),{type:"button",children:[e.addBtnPreIcn&&f.jsx("img",_({"data-testid":`${t}-rpt-add-btn-pre-i`,"data-dev-rpt-add-btn-pre-i":t,className:`${t}-rpt-add-btn-pre-i ${R(t,"rpt-add-btn-pre-i")}`,src:`${e.addBtnPreIcn}`,alt:""},$(t,"rpt-add-btn-pre-i"))),f.jsx(ls,{html:e.addBtn.txt||""}),e.addBtnSufIcn&&f.jsx("img",_({"data-testid":`${t}-rpt-add-btn-suf-i`,"data-dev-rpt-add-btn-suf-i":t,className:`${t}-rpt-add-btn-suf-i ${R(t,"rpt-add-btn-suf-i")}`,src:e.addBtnSufIcn,alt:""},$(t,"rpt-add-btn-suf-i")))]})),f.jsxs("button",A(_({"data-testid":t,"data-dev-rpt-rmv-btn":t,className:`${t}-rpt-rmv-btn ${R(t,"rpt-rmv-btn")}`},$(t,"rpt-rmv-btn")),{type:"button",children:[e.removeBtnPreIcn&&f.jsx("img",_({"data-testid":`${t}-rpt-rmv-btn-pre-i`,"data-dev-rpt-rmv-btn-pre-i":t,className:`${t}-rpt-rmv-btn-pre-i ${R(t,"rpt-rmv-btn-pre-i")}`,src:`${e.removeBtnPreIcn}`,alt:""},$(t,"rpt-rmv-btn-pre-i"))),f.jsx(ls,{html:e.removeBtn.txt||""}),e.removeBtnSufIcn&&f.jsx("img",_({"data-testid":`${t}-rpt-rmv-btn-suf-i`,"data-dev-rpt-rmv-btn-suf-i":t,className:`${t}-rpt-rmv-btn-suf-i ${R(t,"rpt-rmv-btn-suf-i")}`,src:e.removeBtnSufIcn,alt:""},$(t,"rpt-btn-btn-suf-i")))]}))]}))]})),e.addToEndBtn.show&&f.jsx("div",A(_({"data-testid":`${t}-add-to-end-btn-wrp`,"data-dev-add-to-end-btn-wrp":t,className:`${t}-add-to-end-btn-wrp ${R(t,"add-to-end-btn-wrp")}`},$(t,"add-to-end-btn-wrp")),{children:f.jsxs("button",A(_({"data-testid":t,"data-dev-add-to-end-btn":t,className:`${t}-add-to-end-btn ${R(t,"add-to-end-btn")}`},$(t,"add-to-end-btn")),{type:"button",children:[e.addToEndBtnPreIcn&&f.jsx("img",_({"data-testid":`${t}-add-to-end-btn-pre-i`,"data-dev-add-to-end-btn-pre-i":t,className:`${t}-add-to-end-btn-pre-i ${R(t,"add-to-end-btn-pre-i")}`,src:e.addToEndBtnPreIcn,alt:""},$(t,"add-to-end-btn-pre-i"))),f.jsx(ls,{html:e.addToEndBtn.txt||""}),e.addToEndBtnSufIcn&&f.jsx("img",_({"data-testid":`${t}-add-to-end-btn-suf-i`,"data-dev-add-to-end-btn-suf-i":t,className:`${t}-add-to-end-btn-suf-i ${R(t,"add-to-end-btn-suf-i")}`,src:e.addToEndBtnSufIcn,alt:""},$(t,"add-to-end-btn-suf-i")))]}))}))]}))}))})]})}var L0=j.memo(y0);function A0({fieldKey:t,attr:e,styleClasses:s,formID:i}){var Ys,$n;const{formType:n}=ap(),a=An(s),[o,d]=Wi(Wf),[c,h]=j.useState(An(o[t])),[u,p]=Wi(Hf),[g,m]=Wi(qf),E=Hi(Yf),I=et(fe),{styleMode:T}=et(Mn),[C,w]=Wi(Ua),v=j.useRef(null),{ref:S,isComponentVisible:O,setIsComponentVisible:L}=et(Xf),P=et(ja),y=et(hp),D=Hi(am),V=et(Zf),{recalculateNestedField:k}=y,{fieldKey:B,parentFieldKey:X,counter:N}=k,W=Qf(),F=Jf();j.useEffect(()=>{if(N>0&&t===X){const K=Kf(c,B);h(K),j.startTransition(()=>{d(nt=>ve(nt,me=>{me[t]=K})),Rt(t)})}},[N,X,B]);const M=K=>{K.findIndex(nt=>nt.i==="shadow_block")<0&&(h(nt=>A(_({},nt),{[P]:K})),j.startTransition(()=>{d(nt=>ve(nt,me=>{me[t][P]=K}))}))},G=(K,nt)=>{const me=Mc(V.fieldData,"section");if(!me)return;const{newLayouts:kt}=lm(c,me,V.fieldSize,nt);h(kt),j.startTransition(()=>{D(!0),d(xe=>ve(xe,bi=>{bi[t]=kt})),Rt(t)})},U=At(`.${t}-inp-fld-wrp`),H=U&&lc(U),Y=H?H.width-(H.paddingLeft+H.paddingRight+H.borderLeft+H.borderRight):0,at=()=>{p({}),L(!1)},ot=()=>{W(F.pathname.replace(/style\/.+|style/g,"fs"),{replace:!0}),at()},lt=K=>{W(`/form/builder/${n}/${i}/field-theme-customize/quick-tweaks/${K}`,{replace:!0}),at()},Et=(K,nt)=>{K.preventDefault(),K.stopPropagation(),ct(K,nt)},Q=(K,nt)=>{K.stopPropagation(),m(nt),Io(u)||p({}),st(),!T&&W(`/form/builder/${n}/${i}/field-settings/${nt}`)},st=()=>{Io(C)||(v.current!==null&&clearTimeout(v.current),v.current=setTimeout(()=>{w({}),v.current=null},700))},ct=(K,nt)=>{var Dn;const{button:me}=K;let kt,xe,bi,Nn;const Pn=S.current.getBoundingClientRect().top+window.scrollY,tt=S.current.getBoundingClientRect().left+window.scrollX,rt=At("#layout-wrapper"),Qt=Number(rt.style.width.match(/\d+/gi)),jt=Number(rt.style.height.match(/\d+/gi)),Se=170,As=200;if(me===0){const Fn=(Dn=At(`[data-key="${nt}"]`))==null?void 0:Dn.querySelector(".blk-wrp-down-btn"),Xi=30,qa=Fn.getBoundingClientRect().top+Xi,Ya=Fn.getBoundingClientRect().left;if(kt=Ya-tt+5,xe=qa-Pn+2,bi=kt+Se>Qt,Nn=xe+As>jt,bi&&(kt=Ya+Xi-tt-148),Nn&&(xe=qa-Pn-(As+Xi+7)),g!==nt&&(kt+=3),O&&u.fldKey===nt&&u.x===kt&&u.y===xe){at();return}}else me===2&&(kt=K.clientX-tt+5,xe=K.clientY-Pn,bi=kt+Se>Qt,Nn=xe+As>jt,bi&&(kt=K.clientX-tt-150),Nn&&(xe=K.clientY-Pn-As));m(nt),p({fldKey:nt,x:kt,y:xe}),L(!0)},pt=K=>{if(!em){E(_({show:!0},sm.fieldClone));return}const nt=I[K];if(!Mc(nt))return;const{newLayouts:me}=cm(K,c);h(me),j.startTransition(()=>{d(kt=>ve(kt,xe=>{xe[t]=me})),Rt(t)})},ht=K=>{const nt=dm(K,c);h(nt),j.startTransition(()=>{d(me=>ve(me,kt=>{kt[t]=nt})),Rt()}),W(`/form/builder/${n}/${i}/fields-list`,{replace:!0})};return f.jsxs(f.Fragment,{children:[f.jsx(_t,{styleClasses:a}),f.jsx(Zt,{formID:i,fieldKey:t,fieldData:e,noErrMsg:!0,children:f.jsx("div",A(_({"data-testid":`${t}-inp-fld-wrp`,"data-dev-inp-fld-wrp":t,className:`${t}-inp-fld-wrp ${R(t,"inp-fld-wrp")}`},$(t,"inp-fld-wrp")),{children:f.jsxs("div",{style:{width:Y,display:"inline-block"},id:`${t}-layout-wrapper`,onDragOver:K=>K.preventDefault(),onDragEnter:K=>K.preventDefault(),onMouseMove:()=>j.startTransition(()=>{D(!1)}),onMouseLeave:()=>j.startTransition(()=>{D(!0)}),children:[T?f.jsx("div",{className:"_frm-g",children:c[P].map(K=>f.jsx("div",{"data-key":K.i,className:K.i,onClick:nt=>Q(nt,K.i),onKeyDown:nt=>Q(nt,K.i),role:"button",tabIndex:0,onContextMenu:nt=>Et(nt,K.i),children:f.jsx(j.Suspense,{fallback:f.jsx(Nc,{layout:K}),children:f.jsx(zc,{layoutItem:K,removeLayoutItem:ht,cloneLayoutItem:pt,navigateToFieldSettings:ot,navigateToStyle:lt,handleContextMenu:Et})})},K.i))}):f.jsx(om,{width:Y,measureBeforeMount:!0,compactType:"vertical",useCSSTransforms:!0,isDroppable:V!==null&&P==="lg",className:"layout",style:{minHeight:V?tm()+40:null},onDrop:G,resizeHandles:["e"],droppingItem:V==null?void 0:V.fieldSize,onLayoutChange:M,cols:60,rowHeight:1,margin:[0,0],draggableCancel:".no-drg",draggableHandle:".drag",layout:c[P],onDragStart:$c,onDrag:Xh,onDragStop:()=>{j.startTransition(()=>{D(!0),Rt(t),st()})},onResizeStart:$c,onResize:Xh,onResizeStop:()=>{st(),Rt(t)},children:(Ys=c[P])==null?void 0:Ys.map(K=>f.jsx("div",{"data-key":K.i,className:`blk ${K.i===g&&"itm-focus"}`,onClick:nt=>Q(nt,K.i),onKeyDown:nt=>Q(nt,K.i),role:"button",tabIndex:0,onContextMenu:nt=>Et(nt,K.i),children:f.jsx(j.Suspense,{fallback:f.jsx(Nc,{layout:K}),children:f.jsx(zc,{layoutItem:K,removeLayoutItem:ht,cloneLayoutItem:pt,navigateToFieldSettings:ot,navigateToStyle:lt,handleContextMenu:Et})})},K.i))}),!(($n=c[P])!=null&&$n.length)&&!V&&f.jsx("div",{className:"empty-layout",children:f.jsx("div",{className:"empty-layout-msg",children:f.jsx("div",{className:"empty-layout-msg-txt",children:f.jsx("span",{children:"Drag and drop fields here"})})})})]})}))})]})}var M0=j.memo(A0);function $0({fieldKey:t,formID:e,attr:s,isBuilder:i,styleClasses:n}){const a=et(op),[o,d]=j.useState(""),h=et(fe)[t],u=j.useRef(null),p=j.useRef(null),[g,m]=j.useState(!1),[E,I]=j.useState(!1);h==null||h.payType;const{locale:T,currency:C}=h||{};return j.useEffect(()=>{if(!s.payIntegID){d("");return}const w=a==null?void 0:a.find(v=>v.id&&s.payIntegID&&Number(v.id)===Number(s.payIntegID));if(w){const v=w.publishableKey;console.log("key",v),d(v)}},[s.payIntegID]),j.useEffect(()=>{if(!o){lp({fieldKey:t,errorKey:"publishableKeyMissing",errorMsg:tn("Stripe publishable key is missing"),errorUrl:`field-settings/${t}`});return}I(!0),cp(t,"publishableKeyMissing");const v={src:"https://js.stripe.com/v3/",integrity:"",id:`bf-stripe-script-${t}`,scriptInGrid:!1,callback:()=>{Rt(t),m(!0),I(!1)}};return Lh(v),()=>{dp(`bf-stripe-script-${t}`)}},[o,T,C]),j.useEffect(()=>{if(!g||E)return;u!=null&&u.current||(u.current=At(`#${t}-stripe-wrp`));const w=p.current,v=u.current;if((!o||w&&v&&"destroy"in w)&&(w.destroy(),Rt(t)),!o)return m(!1);_({},h.config.options),_({},h.config.layout)},[g,E]),f.jsxs(f.Fragment,{children:[f.jsx(_t,{styleClasses:n}),f.jsxs(Zt,{formID:e,fieldData:s,fieldKey:t,noLabel:!0,noErrMsg:!0,isBuilder:i,children:[g&&o&&!E&&f.jsxs("div",{className:`${t}-stripe-wrp`,children:[f.jsxs("button",{"data-dev-stripe-btn":t,type:"button",className:`${t}-stripe-btn`,children:[f.jsx("svg",{"data-dev-stripe-icn":t,xmlns:"http://www.w3.org/2000/svg",className:`${t}-stripe-icn`,viewBox:"0 0 24 24",children:f.jsxs("g",{fill:"none",fillRule:"evenodd",children:[f.jsx("path",{d:"M24 0v24H0V0h24ZM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035c-.01-.004-.019-.001-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427c-.002-.01-.009-.017-.017-.018Zm.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093c.012.004.023 0 .029-.008l.004-.014l-.034-.614c-.003-.012-.01-.02-.02-.022Zm-.715.002a.023.023 0 0 0-.027.006l-.006.014l-.034.614c0 .012.007.02.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01l-.184-.092Z"}),f.jsx("path",{fill:"currentColor",d:"M6.936 3.715C8.326 2.567 10.24 2 12.404 2c1.746 0 3.49.275 5.259.981a1 1 0 0 1 .629.929v3.64c0 1.244-1.286 1.916-2.291 1.5c-1.198-.494-2.532-.759-3.597-.759c-.217 0-.386.016-.512.04c-.05.01-.089.02-.12.03c.089.072.25.17.528.29c.309.134.68.263 1.129.416l.061.02c.42.144.892.305 1.367.495c.99.396 2.094.954 2.95 1.882c.885.957 1.445 2.241 1.45 3.954v.003c0 2.065-.835 3.755-2.305 4.904C15.511 21.454 13.542 22 11.34 22a14.62 14.62 0 0 1-5.777-1.21a1 1 0 0 1-.604-.918V16.18c0-1.241 1.297-1.937 2.322-1.47c1.39.636 2.901 1.038 4.059 1.038c.497 0 .761-.073.87-.134a.255.255 0 0 0 .017-.01a.352.352 0 0 0 .005-.062v-.005a.34.34 0 0 0-.04-.05c-.084-.086-.25-.205-.56-.353a13.21 13.21 0 0 0-1.112-.444a146.78 146.78 0 0 0-.22-.08c-.373-.135-.782-.283-1.189-.448c-.973-.395-2.066-.935-2.916-1.81c-.882-.908-1.453-2.127-1.453-3.753c0-2.026.782-3.717 2.194-4.883ZM8.21 5.257c-.918.758-1.467 1.866-1.467 3.34c0 1.104.366 1.824.888 2.361c.555.571 1.334.985 2.233 1.349c.369.15.736.283 1.107.417l.234.085c.437.16.888.329 1.288.519c.713.34 1.74.97 1.74 2.213c0 .375-.083.744-.277 1.077a2.015 2.015 0 0 1-.766.74c-.561.314-1.243.39-1.85.39c-1.373 0-2.957-.408-4.38-.998v2.447c1.503.562 3.001.803 4.38.803c1.898 0 3.388-.473 4.381-1.249c.964-.754 1.537-1.852 1.538-3.327c-.005-1.234-.39-2.03-.92-2.602c-.556-.603-1.334-1.026-2.223-1.382c-.426-.17-.855-.316-1.285-.463l-.047-.017a17.654 17.654 0 0 1-1.278-.473c-.387-.168-.809-.387-1.142-.703c-.362-.344-.634-.819-.634-1.424c0-.72.328-1.323.936-1.683c.52-.308 1.157-.385 1.739-.385c1.203 0 2.597.259 3.888.728V4.608C15.002 4.177 13.717 4 12.404 4c-1.836 0-3.255.481-4.195 1.257Z"})]})}),h.txt]}),f.jsx("button",{type:"button","data-dev-stripe-pay-btn":t,className:"stripe-pay-btn",children:h.config.payBtnTxt})]}),!E&&(!g||!o)&&f.jsx("p",{children:"Select a config from field settings to render the Stripe."}),E&&f.jsx("p",{children:"Loading Stripe..."})]})]})}function N0({attr:t,buttonDisabled:e,handleReset:s,formID:i,fieldKey:n}){return f.jsx("div",A(_({className:`fld-wrp fld-wrp-${i} ${R(n,"fld-wrp")}`,"btcd-fld":"submit"},$(n,"fld-wrp")),{children:f.jsxs("div",A(_({className:`btcd-frm-sub ${t.align==="center"&&"j-c-c"} ${t.align==="right"&&"j-c-e"} ${R(n,"btcd-frm-sub")}`},$(n,"btcd-frm-sub")),{children:[f.jsxs("button",A(_({className:`btcd-sub-btn btcd-sub ${t.btnSiz==="md"&&"btcd-btn-md"} ${t.fulW&&"ful-w"} ${R(n,"btcd-sub-btn")}`,disabled:e,type:"submit"},$(n,"btcd-sub-btn")),{children:[t.subBtnTxt,e&&f.jsx(YE,{clr:"currentColor",size:12,style:{display:"inline-block",marginLeft:5}})]})),"rstBtnTxt"in t&&f.jsx("button",A(_(_({className:`btcd-sub-btn btcd-rst ${t.btnSiz==="md"&&"btcd-btn-md"} ${t.fulW&&"ful-w"} ${R(n,"btcd-rst")}`,type:"button"},s&&{onClick:s}),$(n,"btcd-rst")),{children:t.rstBtnTxt}))]}))}))}function P0({fieldKey:t,attr:e,onBlurHandler:s,resetFieldValue:i,formID:n,styleClasses:a}){const[o,d]=j.useState(e.val),c=et(Ua),h=j.useRef(null),u=j.useRef({resize:!1}),p=Hi(yh);if(c.fieldKey===t){u.current.resize=!0;const E=At(`[data-key="${t}"]`),I=im(E);if(c.wrpHeight>=c.fldHeight){const T=`${c.fldHeight+(I-c.wrpHeight)}px`;h.current.style.height=T}}if(u.current.resize&&!c.fieldKey){u.current.resize=!1;const E=I=>`fields->${t}->classes->.${t}-fld->${I}`;p(I=>ve(I,T=>{Fr(T,E("height"),h.current.style.height)}))}j.useEffect(()=>{e.val!==void 0&&!e.userinput?d(e.val):!e.val&&!e.userinput?d(e.defaultValue||""):e.conditional&&d(e.val)},[e.val,e.defaultValue,e.userinput,e.conditional]),j.useEffect(()=>{i&&d("")},[i]),j.useEffect(()=>{if(e.hasWorkflow&&e.val===o&&s&&!e.userinput){const{current:E}=h;s(E)}},[o]);const g=E=>{d(E.target.value)};j.useEffect(()=>{const E=nm(`#${t}`);E&&rm(E,"value",(I,T)=>d(T))},[]);const m=E=>{Cp({input:E.target})};return f.jsxs(f.Fragment,{children:[f.jsx(_t,{styleClasses:a}),f.jsx(Zt,{formID:n,fieldKey:t,fieldData:e,children:f.jsxs("div",A(_({"data-testid":`${t}-inp-fld-wrp`,className:`${t}-inp-fld-wrp ${R(t,"inp-fld-wrp")}`},$(t,"inp-fld-wrp")),{children:[f.jsx("textarea",A(_(_(_(_(_(_(_(_(A(_({"data-testid":t,"data-dev-fld":t,id:t,className:`${t}-fld ${R(t,"fld")}`},$(t,"fld")),{ref:h}),"disabled"in e&&{disabled:e.disabled}),"readonly"in e&&{readOnly:e.readonly}),"ph"in e&&{placeholder:e.ph}),"ac"in e&&{autoComplete:e.ac}),"req"in e.valid&&{required:e.valid.req}),"disabled"in e.valid&&{readOnly:e.valid.disabled}),"name"in e&&{name:e.name}),s&&{onInput:s}),{onBlur:m,value:o,onChange:g})),e.prefixIcn&&f.jsx("img",_({"data-dev-pre-i":t,className:`${t}-pre-i ${R(t,"pre-i")}`,height:"90%",src:e.prefixIcn,alt:""},$(t,"pre-i"))),e.suffixIcn&&f.jsx("img",_({"data-dev-suf-i":t,className:`${t}-suf-i ${R(t,"suf-i")}`,height:"90%",src:e.suffixIcn,alt:""},$(t,"suf-i")))]}))})]})}function D0({fieldKey:t,attr:e,onBlurHandler:s,resetFieldValue:i,formID:n,styleClasses:a}){var g;const o=e.typ==="url"?"text":e.typ,d=j.useRef(null),[c,h]=j.useState(e.val!==void 0?e.val:"");j.useEffect(()=>{e.val!==void 0&&!e.userinput?h(e.val):!e.val&&!e.userinput?h(e.defaultValue||""):e.conditional&&h(e.val)},[e.val,e.defaultValue,e.userinput,e.conditional]),j.useEffect(()=>{i&&h("")},[i]),j.useEffect(()=>{if(e.hasWorkflow&&e.val===c&&s&&!e.userinput){const{current:m}=d;s(m)}},[c]);const u=m=>{const E=e.typ==="email"?m.target.value.toLowerCase():m.target.value;h(E)};j.useEffect(()=>{const m=nm(`#${t}`);m&&rm(m,"value",(E,I)=>h(e.typ==="email"?I.toLowerCase():I))},[]);const p=m=>Cp({input:m.target});return f.jsxs(f.Fragment,{children:[f.jsx(_t,{styleClasses:a}),f.jsxs(Zt,{formID:n,fieldKey:t,fieldData:e,children:[f.jsxs("div",A(_({"data-testid":`${t}-inp-fld-wrp`,className:`${t}-inp-fld-wrp ${R(t,"inp-fld-wrp")}`},$(t,"inp-fld-wrp")),{children:[f.jsx("input",_(A(_(_(_(_(_(_(_(_(_(_({"data-testid":t,"data-dev-fld":t,id:t,list:`${t}-datalist`,ref:d,className:`${t}-fld no-drg ${R(t,"fld")}`,type:o},"req"in e.valid&&{required:e.valid.req}),"disabled"in e.valid&&{disabled:e.valid.disabled}),"readonly"in e.valid&&{readOnly:e.valid.readonly}),"ph"in e&&{placeholder:e.ph}),"mn"in e&&{min:e.mn}),"mx"in e&&{max:e.mx}),"ac"in e&&{autoComplete:e.ac}),"name"in e&&{name:e.name}),"inputMode"in e&&{inputMode:e.inputMode}),s&&{onInput:s}),{onBlur:p,value:c,onChange:u}),$(t,"fld"))),e.prefixIcn&&f.jsx("img",_({"data-testid":`${t}-pre-i`,"data-dev-pre-i":t,className:`${t}-pre-i ${R(t,"pre-i")}`,height:"90%",src:e.prefixIcn,alt:""},$(t,"pre-i"))),e.suffixIcn&&f.jsx("img",_({"data-testid":`${t}-suf-i`,"data-dev-suf-i":t,className:`${t}-suf-i ${R(t,"suf-i")}`,height:"90%",src:e.suffixIcn,alt:""},$(t,"suf-i")))]})),((g=e.suggestions)==null?void 0:g.length)&&f.jsx("datalist",{id:`${t}-datalist`,children:e.suggestions.map(m=>f.jsx("option",{value:m.val||m.lbl,children:m.lbl},m.val||m.lbl))})]})]})}var F0=j.memo(D0);function G0({fieldKey:t,attr:e,styleClasses:s}){var v;const{logo:i,title:n,subtitle:a,titleHide:o,subtitleHide:d,titleTag:c,subTitleTag:h}=e,u=et(ja),{styleMode:p}=et(Mn),g=((v=e.valid.hidden)==null?void 0:v.includes(u))||!1,m=(S,O,L,P,y)=>f.jsx(ls,{html:`<${S} data-dev-${L}=${t} className="${t}-${L} ${R(t,L)}">
  ${P}${O}${y}
</${S}>`}),E=S=>{const O=e.customAttributes[S];if(O==="")return;let L="";if(O){const P=O.length;let y=0;for(;y<P;)O[y].key&&O[y].value&&(L+=`${O[y].key}=${O[y].value} `),y+=1}return L},I=e.titlePreIcn?`<img data-dev-title-pre-i="${t}" ${E("title-pre-i")} classname="${t}-title-pre-i ${R(t,"title-pre-i")}"  src="${e.titlePreIcn}" alt="Title Leading Icon" />`:"",T=e.titleSufIcn?`<img data-dev-title-suf-i="${t}" ${E("title-suf-i")} classname="${t}-title-suf-i ${R(t,"title-suf-i")}" src="${e.titleSufIcn}" alt="Title Trailing Icon" />`:"",C=e.subTitlPreIcn?`<img data-dev-sub-titl-pre-i="${t}" ${E("sub-titl-pre-i")} classname="${t}-sub-titl-pre-i ${R(t,"sub-titl-pre-i")}" src="${e.subTitlPreIcn}" alt="Subtitle Leading Icon" />`:"",w=e.subTitlSufIcn?`<img data-dev-sub-titl-suf-i="${t}" ${E("sub-titl-suf-i")} classname="${t}-sub-titl-suf-i ${R(t,"sub-titl-suf-i")}" src="${e.subTitlSufIcn}" alt="Subtitle Trailing Icon" />`:"";return f.jsxs(f.Fragment,{children:[f.jsx(_t,{styleClasses:s}),f.jsxs("div",A(_({"data-dev-fld-wrp":t},$(t,"fld-wrp")),{className:`${t}-fld-wrp ${p?"":"drag"} ${g?"fld-hide":""} ${R(t,"fld-wrp")}`,children:[i&&f.jsx("img",_({"data-dev-logo":t,className:`${t}-logo ${R(t,"logo")}`,src:i,alt:"img"},$(t,"logo"))),f.jsxs("div",A(_({"data-dev-titl-wrp":t,className:`${t}-titl-wrp ${R(t,"titl-wrp")}`},$(t,"titl-wrp")),{children:[!o&&m(c,n,"title",I,T),!d&&m(h,a,"sub-titl",C,w)]}))]}))]})}/*!
* Signature Pad v4.1.5 | https://github.com/szimek/signature_pad
* (c) 2023 Szymon Nowak | Released under the MIT license
*/class Uc{constructor(e,s,i,n){if(isNaN(e)||isNaN(s))throw new Error(`Point is invalid: (${e}, ${s})`);this.x=+e,this.y=+s,this.pressure=i||0,this.time=n||Date.now()}distanceTo(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}equals(e){return this.x===e.x&&this.y===e.y&&this.pressure===e.pressure&&this.time===e.time}velocityFrom(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):0}}class yp{constructor(e,s,i,n,a,o){this.startPoint=e,this.control2=s,this.control1=i,this.endPoint=n,this.startWidth=a,this.endWidth=o}static fromPoints(e,s){const i=this.calculateControlPoints(e[0],e[1],e[2]).c2,n=this.calculateControlPoints(e[1],e[2],e[3]).c1;return new yp(e[1],i,n,e[2],s.start,s.end)}static calculateControlPoints(e,s,i){const n=e.x-s.x,a=e.y-s.y,o=s.x-i.x,d=s.y-i.y,c={x:(e.x+s.x)/2,y:(e.y+s.y)/2},h={x:(s.x+i.x)/2,y:(s.y+i.y)/2},u=Math.sqrt(n*n+a*a),p=Math.sqrt(o*o+d*d),g=c.x-h.x,m=c.y-h.y,E=p/(u+p),I={x:h.x+g*E,y:h.y+m*E},T=s.x-I.x,C=s.y-I.y;return{c1:new Uc(c.x+T,c.y+C),c2:new Uc(h.x+T,h.y+C)}}length(){let s=0,i,n;for(let a=0;a<=10;a+=1){const o=a/10,d=this.point(o,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),c=this.point(o,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(a>0){const h=d-i,u=c-n;s+=Math.sqrt(h*h+u*u)}i=d,n=c}return s}point(e,s,i,n,a){return s*(1-e)*(1-e)*(1-e)+3*i*(1-e)*(1-e)*e+3*n*(1-e)*e*e+a*e*e*e}}class B0{constructor(){try{this._et=new EventTarget}catch(e){this._et=document}}addEventListener(e,s,i){this._et.addEventListener(e,s,i)}dispatchEvent(e){return this._et.dispatchEvent(e)}removeEventListener(e,s,i){this._et.removeEventListener(e,s,i)}}function k0(t,e=250){let s=0,i=null,n,a,o;const d=()=>{s=Date.now(),i=null,n=t.apply(a,o),i||(a=null,o=[])};return function(...h){const u=Date.now(),p=e-(u-s);return a=this,o=h,p<=0||p>e?(i&&(clearTimeout(i),i=null),s=u,n=t.apply(a,o),i||(a=null,o=[])):i||(i=window.setTimeout(d,p)),n}}class Vc extends B0{constructor(e,s={}){super(),this.canvas=e,this._drawningStroke=!1,this._isEmpty=!0,this._lastPoints=[],this._data=[],this._lastVelocity=0,this._lastWidth=0,this._handleMouseDown=i=>{i.buttons===1&&(this._drawningStroke=!0,this._strokeBegin(i))},this._handleMouseMove=i=>{this._drawningStroke&&this._strokeMoveUpdate(i)},this._handleMouseUp=i=>{i.buttons===1&&this._drawningStroke&&(this._drawningStroke=!1,this._strokeEnd(i))},this._handleTouchStart=i=>{if(i.cancelable&&i.preventDefault(),i.targetTouches.length===1){const n=i.changedTouches[0];this._strokeBegin(n)}},this._handleTouchMove=i=>{i.cancelable&&i.preventDefault();const n=i.targetTouches[0];this._strokeMoveUpdate(n)},this._handleTouchEnd=i=>{if(i.target===this.canvas){i.cancelable&&i.preventDefault();const a=i.changedTouches[0];this._strokeEnd(a)}},this._handlePointerStart=i=>{this._drawningStroke=!0,i.preventDefault(),this._strokeBegin(i)},this._handlePointerMove=i=>{this._drawningStroke&&(i.preventDefault(),this._strokeMoveUpdate(i))},this._handlePointerEnd=i=>{this._drawningStroke&&(i.preventDefault(),this._drawningStroke=!1,this._strokeEnd(i))},this.velocityFilterWeight=s.velocityFilterWeight||.7,this.minWidth=s.minWidth||.5,this.maxWidth=s.maxWidth||2.5,this.throttle="throttle"in s?s.throttle:16,this.minDistance="minDistance"in s?s.minDistance:5,this.dotSize=s.dotSize||0,this.penColor=s.penColor||"black",this.backgroundColor=s.backgroundColor||"rgba(0,0,0,0)",this._strokeMoveUpdate=this.throttle?k0(Vc.prototype._strokeUpdate,this.throttle):Vc.prototype._strokeUpdate,this._ctx=e.getContext("2d"),this.clear(),this.on()}clear(){const{_ctx:e,canvas:s}=this;e.fillStyle=this.backgroundColor,e.clearRect(0,0,s.width,s.height),e.fillRect(0,0,s.width,s.height),this._data=[],this._reset(this._getPointGroupOptions()),this._isEmpty=!0}fromDataURL(e,s={}){return new Promise((i,n)=>{const a=new Image,o=s.ratio||window.devicePixelRatio||1,d=s.width||this.canvas.width/o,c=s.height||this.canvas.height/o,h=s.xOffset||0,u=s.yOffset||0;this._reset(this._getPointGroupOptions()),a.onload=()=>{this._ctx.drawImage(a,h,u,d,c),i()},a.onerror=p=>{n(p)},a.crossOrigin="anonymous",a.src=e,this._isEmpty=!1})}toDataURL(e="image/png",s){switch(e){case"image/svg+xml":return typeof s!="object"&&(s=void 0),`data:image/svg+xml;base64,${btoa(this.toSVG(s))}`;default:return typeof s!="number"&&(s=void 0),this.canvas.toDataURL(e,s)}}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",this.canvas.style.userSelect="none";const e=/Macintosh/.test(navigator.userAgent)&&"ontouchstart"in document;window.PointerEvent&&!e?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.style.userSelect="auto",this.canvas.removeEventListener("pointerdown",this._handlePointerStart),this.canvas.removeEventListener("pointermove",this._handlePointerMove),this.canvas.ownerDocument.removeEventListener("pointerup",this._handlePointerEnd),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("mousemove",this._handleMouseMove),this.canvas.ownerDocument.removeEventListener("mouseup",this._handleMouseUp),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this.canvas.removeEventListener("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(e,{clear:s=!0}={}){s&&this.clear(),this._fromData(e,this._drawCurve.bind(this),this._drawDot.bind(this)),this._data=this._data.concat(e)}toData(){return this._data}_getPointGroupOptions(e){return{penColor:e&&"penColor"in e?e.penColor:this.penColor,dotSize:e&&"dotSize"in e?e.dotSize:this.dotSize,minWidth:e&&"minWidth"in e?e.minWidth:this.minWidth,maxWidth:e&&"maxWidth"in e?e.maxWidth:this.maxWidth,velocityFilterWeight:e&&"velocityFilterWeight"in e?e.velocityFilterWeight:this.velocityFilterWeight}}_strokeBegin(e){this.dispatchEvent(new CustomEvent("beginStroke",{detail:e}));const s=this._getPointGroupOptions(),i=Object.assign(Object.assign({},s),{points:[]});this._data.push(i),this._reset(s),this._strokeUpdate(e)}_strokeUpdate(e){if(this._data.length===0){this._strokeBegin(e);return}this.dispatchEvent(new CustomEvent("beforeUpdateStroke",{detail:e}));const s=e.clientX,i=e.clientY,n=e.pressure!==void 0?e.pressure:e.force!==void 0?e.force:0,a=this._createPoint(s,i,n),o=this._data[this._data.length-1],d=o.points,c=d.length>0&&d[d.length-1],h=c?a.distanceTo(c)<=this.minDistance:!1,u=this._getPointGroupOptions(o);if(!c||!(c&&h)){const p=this._addPoint(a,u);c?p&&this._drawCurve(p,u):this._drawDot(a,u),d.push({time:a.time,x:a.x,y:a.y,pressure:a.pressure})}this.dispatchEvent(new CustomEvent("afterUpdateStroke",{detail:e}))}_strokeEnd(e){this._strokeUpdate(e),this.dispatchEvent(new CustomEvent("endStroke",{detail:e}))}_handlePointerEvents(){this._drawningStroke=!1,this.canvas.addEventListener("pointerdown",this._handlePointerStart),this.canvas.addEventListener("pointermove",this._handlePointerMove),this.canvas.ownerDocument.addEventListener("pointerup",this._handlePointerEnd)}_handleMouseEvents(){this._drawningStroke=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown),this.canvas.addEventListener("mousemove",this._handleMouseMove),this.canvas.ownerDocument.addEventListener("mouseup",this._handleMouseUp)}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart),this.canvas.addEventListener("touchmove",this._handleTouchMove),this.canvas.addEventListener("touchend",this._handleTouchEnd)}_reset(e){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(e.minWidth+e.maxWidth)/2,this._ctx.fillStyle=e.penColor}_createPoint(e,s,i){const n=this.canvas.getBoundingClientRect();return new Uc(e-n.left,s-n.top,i,new Date().getTime())}_addPoint(e,s){const{_lastPoints:i}=this;if(i.push(e),i.length>2){i.length===3&&i.unshift(i[0]);const n=this._calculateCurveWidths(i[1],i[2],s),a=yp.fromPoints(i,n);return i.shift(),a}return null}_calculateCurveWidths(e,s,i){const n=i.velocityFilterWeight*s.velocityFrom(e)+(1-i.velocityFilterWeight)*this._lastVelocity,a=this._strokeWidth(n,i),o={end:a,start:this._lastWidth};return this._lastVelocity=n,this._lastWidth=a,o}_strokeWidth(e,s){return Math.max(s.maxWidth/(e+1),s.minWidth)}_drawCurveSegment(e,s,i){const n=this._ctx;n.moveTo(e,s),n.arc(e,s,i,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve(e,s){const i=this._ctx,n=e.endWidth-e.startWidth,a=Math.ceil(e.length())*2;i.beginPath(),i.fillStyle=s.penColor;for(let o=0;o<a;o+=1){const d=o/a,c=d*d,h=c*d,u=1-d,p=u*u,g=p*u;let m=g*e.startPoint.x;m+=3*p*d*e.control1.x,m+=3*u*c*e.control2.x,m+=h*e.endPoint.x;let E=g*e.startPoint.y;E+=3*p*d*e.control1.y,E+=3*u*c*e.control2.y,E+=h*e.endPoint.y;const I=Math.min(e.startWidth+h*n,s.maxWidth);this._drawCurveSegment(m,E,I)}i.closePath(),i.fill()}_drawDot(e,s){const i=this._ctx,n=s.dotSize>0?s.dotSize:(s.minWidth+s.maxWidth)/2;i.beginPath(),this._drawCurveSegment(e.x,e.y,n),i.closePath(),i.fillStyle=s.penColor,i.fill()}_fromData(e,s,i){for(const n of e){const{points:a}=n,o=this._getPointGroupOptions(n);if(a.length>1)for(let d=0;d<a.length;d+=1){const c=a[d],h=new Uc(c.x,c.y,c.pressure,c.time);d===0&&this._reset(o);const u=this._addPoint(h,o);u&&s(u,o)}else this._reset(o),i(a[0],o)}}toSVG({includeBackgroundColor:e=!1}={}){const s=this._data,i=Math.max(window.devicePixelRatio||1,1),n=0,a=0,o=this.canvas.width/i,d=this.canvas.height/i,c=document.createElementNS("http://www.w3.org/2000/svg","svg");if(c.setAttribute("xmlns","http://www.w3.org/2000/svg"),c.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),c.setAttribute("viewBox",`${n} ${a} ${o} ${d}`),c.setAttribute("width",o.toString()),c.setAttribute("height",d.toString()),e&&this.backgroundColor){const h=document.createElement("rect");h.setAttribute("width","100%"),h.setAttribute("height","100%"),h.setAttribute("fill",this.backgroundColor),c.appendChild(h)}return this._fromData(s,(h,{penColor:u})=>{const p=document.createElement("path");if(!isNaN(h.control1.x)&&!isNaN(h.control1.y)&&!isNaN(h.control2.x)&&!isNaN(h.control2.y)){const g=`M ${h.startPoint.x.toFixed(3)},${h.startPoint.y.toFixed(3)} C ${h.control1.x.toFixed(3)},${h.control1.y.toFixed(3)} ${h.control2.x.toFixed(3)},${h.control2.y.toFixed(3)} ${h.endPoint.x.toFixed(3)},${h.endPoint.y.toFixed(3)}`;p.setAttribute("d",g),p.setAttribute("stroke-width",(h.endWidth*2.25).toFixed(3)),p.setAttribute("stroke",u),p.setAttribute("fill","none"),p.setAttribute("stroke-linecap","round"),c.appendChild(p)}},(h,{penColor:u,dotSize:p,minWidth:g,maxWidth:m})=>{const E=document.createElement("circle"),I=p>0?p:(g+m)/2;E.setAttribute("r",I.toString()),E.setAttribute("cx",h.x.toString()),E.setAttribute("cy",h.y.toString()),E.setAttribute("fill",u),c.appendChild(E)}),c.outerHTML}}var Cs,kl,Vi,Os,ys,Fe,Fa,jl,Ga,zi,Rn,Sh,Ul,Vl,Cn,On,Dr,Rh,BE,Ch,kE,Oh,jE,se,be;class j0{constructor(e,s){b(this,On);b(this,Rh);b(this,Ch);b(this,Oh);b(this,se);b(this,Cs,null);b(this,kl,null);b(this,Vi,null);b(this,Os,null);b(this,ys,null);b(this,Fe,null);b(this,Fa,null);b(this,jl,{});b(this,Ga,null);b(this,zi,null);b(this,Rn,null);b(this,Sh,null);b(this,Ul,null);b(this,Vl,null);b(this,Cn,[]);x(this,Ga,s.document||document),typeof e=="string"?x(this,Fa,r(this,Ga).querySelector(e)):x(this,Fa,e),x(this,jl,{maxWidth:s.maxWidth||2.5,penColor:s.penColor||"rgb(0, 0, 0)",backgroundColor:s.backgroundColor||"rgb(255, 255, 255)"}),x(this,zi,s.fieldKey),x(this,kl,s.imgTyp||"image/png"),x(this,Vl,(s==null?void 0:s.isBuilder)||!1),x(this,Sh,s==null?void 0:s.contentId),x(this,Ul,s==null?void 0:s.assetsURL),this.init()}init(){x(this,Cs,l(this,On,Dr).call(this,`.${r(this,zi)}-signature-pad`)),x(this,Vi,l(this,On,Dr).call(this,`.${r(this,zi)}-clr-btn`)),x(this,Os,l(this,On,Dr).call(this,`.${r(this,zi)}-undo-btn`)),x(this,ys,l(this,On,Dr).call(this,`.${r(this,zi)}-redo-btn`)),x(this,Rn,l(this,On,Dr).call(this,`.${r(this,zi)}-signature-fld`)),r(this,Cs).style.cursor=`url(${r(this,Ul)}pen.ico), crosshair`,x(this,Fe,new Vc(r(this,Cs),r(this,jl))),window.onresize=this.resizeCanvas,this.resizeCanvas(),l(this,Rh,BE).call(this),l(this,Ch,kE).call(this),l(this,Oh,jE).call(this),l(this,se,be).call(this,r(this,Os)),l(this,se,be).call(this,r(this,ys)),l(this,se,be).call(this,r(this,Vi)),r(this,Fe).addEventListener("endStroke",()=>{x(this,Cn,[]),this.putSignature(),l(this,se,be).call(this,r(this,Vi),!1),l(this,se,be).call(this,r(this,Os),!1),l(this,se,be).call(this,r(this,ys))})}resizeCanvas(){const e=Math.max(window.devicePixelRatio||1,1);r(this,Cs).width=r(this,Cs).offsetWidth*e,r(this,Cs).height=r(this,Cs).offsetHeight*e,r(this,Cs).getContext("2d").scale(e,e),r(this,Fe).fromData(r(this,Fe).toData())}putSignature(){if(r(this,Vl)||r(this,Fe).isEmpty())return;const e=r(this,Fe).toDataURL(r(this,kl));r(this,Rn).value=e}destroy(){x(this,Ga,null),x(this,Cs,null)}reset(){r(this,Fe).clear(),r(this,Rn).value=""}}Cs=new WeakMap,kl=new WeakMap,Vi=new WeakMap,Os=new WeakMap,ys=new WeakMap,Fe=new WeakMap,Fa=new WeakMap,jl=new WeakMap,Ga=new WeakMap,zi=new WeakMap,Rn=new WeakMap,Sh=new WeakMap,Ul=new WeakMap,Vl=new WeakMap,Cn=new WeakMap,On=new WeakSet,Dr=function(e,s=null){return(s||r(this,Fa)).querySelector(e)},Rh=new WeakSet,BE=function(){r(this,Vi)&&r(this,Vi).addEventListener("click",()=>{r(this,Fe).clear(),r(this,Rn).value="",l(this,se,be).call(this,r(this,Os)),l(this,se,be).call(this,r(this,ys)),l(this,se,be).call(this,r(this,Vi))})},Ch=new WeakSet,kE=function(){r(this,Os)&&r(this,Os).addEventListener("click",()=>{const e=r(this,Fe).toData();if(e.length){const s=e.pop();r(this,Cn).push(s),r(this,Fe).fromData(e),this.putSignature(),e.length===0&&(r(this,Rn).value=""),l(this,se,be).call(this,r(this,ys),!1),e.length||l(this,se,be).call(this,r(this,Os))}else l(this,se,be).call(this,r(this,Os))})},Oh=new WeakSet,jE=function(){r(this,ys)&&r(this,ys).addEventListener("click",()=>{const e=r(this,Fe).toData();r(this,Cn).length?(e.push(r(this,Cn).pop()),r(this,Fe).fromData(e),this.putSignature(),l(this,se,be).call(this,r(this,Os),!1),r(this,Cn).length||l(this,se,be).call(this,r(this,ys))):l(this,se,be).call(this,r(this,ys))})},se=new WeakSet,be=function(e,s=!0){e&&(s?e.setAttribute("disabled","disabled"):e.removeAttribute("disabled"))};function U0({fieldKey:t,attr:e,formID:s,styleClasses:i}){const n=j.useRef(null),a=j.useRef(null),o=et(zl),d=et(Ua),c=j.useRef({resize:!1}),h=Hi(yh),u=j.useRef(null),p=j.useRef(0),m=et(fe)[t];if(d.fieldKey===t){c.current.resize=!0;const E=At(`[data-key="${t}"]`),I=im(E);if(d.wrpHeight>=d.fldHeight){const T=`${d.fldHeight+(I-d.wrpHeight)}px`;a.current.style.height=T}}if(c.current.resize&&!d.fieldKey){c.current.resize=!1;const E=I=>`fields->${t}->classes->.${t}-fld->${I}`;h(I=>ve(I,T=>{Fr(T,E("height"),a.current.style.height),p.current+=1}))}return j.useEffect(()=>{var S;a.current||(u.current=At(`.${t}-inp-fld-wrp`));const E=n.current,I=u.current;E&&I&&"destroy"in E&&E.destroy();const{maxWidth:T,penColor:C,backgroundColor:w}=m.config,v={maxWidth:T,penColor:C,backgroundColor:w,document:(S=document.getElementById("bit-grid-layout"))==null?void 0:S.contentDocument,fieldKey:t,assetsURL:`${o.assetsURL}/../static/signature/`,isBuilder:!0};n.current=new j0(I,v)},[m,p.current]),f.jsxs(f.Fragment,{children:[f.jsx(_t,{styleClasses:i}),f.jsx(Zt,{formID:s,fieldKey:t,fieldData:e,children:f.jsxs("div",A(_({"data-testid":`${t}-inp-fld-wrp`,"data-dev-inp-fld-wrp":t,className:`${t}-inp-fld-wrp ${R(t,"inp-fld-wrp")}`},$(t,"inp-fld-wrp")),{ref:u,children:[f.jsx("canvas",A(_({ref:a,className:`${t}-signature-pad ${R(t,"signature")}`,id:"canvas"},$(t,"signature-pad")),{"data-testid":`${t}-signature-pad`,"data-dev-fld":t})),f.jsxs("div",{className:`${t}-ctrl`,children:[!(m!=null&&m.clrBtnHide)&&f.jsxs("button",{id:"clear",className:`${t}-clr-btn`,type:"button","data-testid":`${t}-clr-btn`,"data-dev-clr-btn":t,children:[m.clrPreIcn&&f.jsx("img",_({"data-testid":`${t}-clr-btn-pre-i`,"data-dev-clr-btn-pre-i":t,className:`${t}-clr-btn-pre-i ${R(t,"clr-btn-pre-i")}`,src:m.clrPreIcn,alt:""},$(t,"clr-btn-pre-i"))),m.clrBtn,m.clrSufIcn&&f.jsx("img",_({"data-testid":`${t}-clr-btn-suf-i`,"data-dev-clr-btn-suf-i":t,className:`${t}-clr-btn-suf-i ${R(t,"clr-btn-suf-i")}`,src:m.clrSufIcn,alt:""},$(t,"clr-btn-suf-i")))]}),!(m!=null&&m.undoBtnHide)&&f.jsxs("button",{id:"undo",className:`${t}-undo-btn`,type:"button","data-testid":`${t}-undo-btn`,"data-dev-undo-btn":t,children:[(m==null?void 0:m.undoPreIcn)&&f.jsx("img",_({"data-testid":`${t}-undo-btn-pre-i`,"data-dev-undo-btn-pre-i":t,className:`${t}-undo-btn-pre-i ${R(t,"undo-btn-pre-i")}`,src:m.undoPreIcn,alt:""},$(t,"undo-btn-pre-i"))),m.undoBtn,(m==null?void 0:m.undoSufIcn)&&f.jsx("img",_({"data-testid":`${t}-undo-btn-suf-i`,"data-dev-btn-suf-i":t,className:`${t}-undo-btn-suf-i ${R(t,"undo-btn-suf-i")}`,src:m.undoSufIcn,alt:""},$(t,"undo-btn-suf-i")))]}),!(m!=null&&m.redoBtnHide)&&f.jsxs("button",{id:"redo",className:`${t}-redo-btn`,type:"button","data-testid":`${t}-redo-btn`,"data-dev-redo-btn":t,children:[(m==null?void 0:m.redoPreIcn)&&f.jsx("img",_({"data-testid":`${t}-redo-btn-pre-i`,"data-dev-redo-btn-pre-i":t,className:`${t}-redo-btn-pre-i ${R(t,"redo-btn-pre-i")}`,src:m.redoPreIcn,alt:""},$(t,"redo-btn-pre-i"))),m.redoBtn,(m==null?void 0:m.redoSufIcn)&&f.jsx("img",_({"data-testid":`${t}-redo-btn-suf-i`,"data-dev-btn-suf-i":t,className:`${t}-redo-btn-suf-i ${R(t,"redo-btn-suf-i")}`,src:m.redoSufIcn,alt:""},$(t,"redo-btn-suf-i")))]})]})]}))})]})}function V0({atts:t,fieldKey:e,formID:s,onBlurHandler:i,resetFieldValue:n,handleReset:a,fieldData:o,buttonDisabled:d,contentID:c,isBuilder:h,entryID:u,handleFormValidationErrorMessages:p}){var m,E,I,T,C,w,v,S,O,L,P,y,D,V,k,B,X,N,W,F,M,G,U,H,Y,at;const g=et(yh);if(!(Io(g)||!(t!=null&&t.typ))){switch(t==null?void 0:t.typ){case"text":case"number":case"password":case"username":case"email":case"url":case"date":case"datetime-local":case"time":case"month":case"week":case"color":return f.jsx(F0,{fieldKey:e,styleClasses:(m=g.fields[e])==null?void 0:m.classes,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"textarea":return f.jsx(P0,{fieldKey:e,styleClasses:(E=g.fields[e])==null?void 0:E.classes,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"check":return f.jsx(xx,{fieldKey:e,styleClasses:(I=g.fields[e])==null?void 0:I.classes,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"radio":return f.jsx(S0,{fieldKey:e,styleClasses:(T=g.fields[e])==null?void 0:T.classes,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"html-select":return f.jsx(o0,{fieldKey:e,styleClasses:(C=g.fields[e])==null?void 0:C.classes,isBuilder:h,formID:s,attr:t});case"select":return f.jsx(s0,{fieldKey:e,styleClasses:(w=g.fields[e])==null?void 0:w.classes,isBuilder:h,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"file-up":return f.jsx(n0,{fieldKey:e,styleClasses:(v=g.fields[e])==null?void 0:v.classes,formID:s,attr:t,entryID:u,resetFieldValue:n});case"advanced-file-up":return f.jsx(Tx,{fieldKey:e,styleClasses:(S=g.fields[e])==null?void 0:S.classes,formID:s,attr:t,entryID:u,resetFieldValue:n});case"submit":return f.jsx(N0,{fieldKey:e,styleClasses:(O=g.fields[e])==null?void 0:O.classes,formID:s,attr:t,buttonDisabled:d,handleReset:a});case"hidden":return f.jsx(r0,{fieldKey:e,styleClasses:(L=g.fields[e])==null?void 0:L.classes,formID:s,attr:t});case"recaptcha":return f.jsx(O0,{fieldKey:e,styleClasses:(P=g.fields[e])==null?void 0:P.classes,formID:s,attr:t});case"decision-box":return f.jsx(Jx,{fieldKey:e,styleClasses:(y=g.fields[e])==null?void 0:y.classes,formID:s,attr:t,fieldData:o,onBlurHandler:i,resetFieldValue:n});case"html":return f.jsx(a0,{fieldKey:e,styleClasses:(D=g.fields[e])==null?void 0:D.classes,formID:s,attr:t,fieldData:o,resetFieldValue:n});case"button":return f.jsx(vx,{fieldKey:e,styleClasses:(V=g.fields[e])==null?void 0:V.classes,formID:s,attr:t,fieldData:o,buttonDisabled:d,handleReset:a});case"paypal":return f.jsx(d0,{isBuilder:h,styleClasses:(k=g.fields[e])==null?void 0:k.classes,fieldKey:e,formID:s,attr:t,contentID:c,fieldData:o,resetFieldValue:n,handleFormValidationErrorMessages:p});case"stripe":return f.jsx($0,{isBuilder:h,styleClasses:(B=g.fields[e])==null?void 0:B.classes,fieldKey:e,formID:s,attr:t,contentID:c,fieldData:o,resetFieldValue:n,handleFormValidationErrorMessages:p});case"razorpay":return f.jsx(C0,{fieldKey:e,styleClasses:(X=g.fields[e])==null?void 0:X.classes,contentID:c,formID:s,attr:t,buttonDisabled:d,resetFieldValue:n,handleFormValidationErrorMessages:p});case"title":return f.jsx(G0,{fieldKey:e,styleClasses:(N=g.fields[e])==null?void 0:N.classes,formID:s,attr:t});case"image":return f.jsx(l0,{fieldKey:e,styleClasses:(W=g.fields[e])==null?void 0:W.classes,formID:s,attr:t});case"divider":return f.jsx(Kx,{fieldKey:e,styleClasses:(F=g.fields[e])==null?void 0:F.classes,formID:s,attr:t});case"currency":return f.jsx(Qx,{fieldKey:e,styleClasses:(M=g.fields[e])==null?void 0:M.classes,formID:s,attr:t,contentID:c});case"country":return f.jsx(Yx,{fieldKey:e,styleClasses:(G=g.fields[e])==null?void 0:G.classes,formID:s,attr:t,contentID:c});case"phone-number":return f.jsx(p0,{fieldKey:e,styleClasses:(U=g.fields[e])==null?void 0:U.classes,formID:s,attr:t,contentID:c});case"section":return f.jsx(M0,{fieldKey:e,styleClasses:(H=g.fields[e])==null?void 0:H.classes,formID:s,attr:t});case"repeater":return f.jsx(L0,{fieldKey:e,styleClasses:(Y=g.fields[e])==null?void 0:Y.classes,formID:s,attr:t});case"signature":return f.jsx(U0,{fieldKey:e,styleClasses:(at=g.fields[e])==null?void 0:at.classes,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"blank":return f.jsx("div",{className:"blnk-blk drag"})}return f.jsx("div",{children:"Loading..."})}}var z0=j.memo(V0);function zc({layoutItem:t,removeLayoutItem:e,cloneLayoutItem:s,navigateToFieldSettings:i,navigateToStyle:n,handleContextMenu:a}){const o=et(fe),d=et(QE),c=et(Ua),h=p=>{p.stopPropagation(),n(t.i)},u=Hi(hp);return j.useEffect(()=>{u(p=>A(_({},p),{reCalculateFieldHeights:p.reCalculateFieldHeights+1}))},[]),f.jsxs(f.Fragment,{children:[c.fieldKey===t.i&&f.jsx("span",{className:"resize-txt",children:`w: ${c.w||t.w}, x: ${c.x||t.x}`}),f.jsxs("div",{className:"blk-icn-wrp pos-abs flx",children:[f.jsx("button",{type:"button",className:"drag g-c us-n blk-wrp-btn",style:{cursor:"move"},title:tn("Move"),"data-testid":`${t.i}-move-btn`,children:f.jsx(eb,{size:"15",stroke:"3"})}),f.jsx("button",{type:"button",className:"g-c drag curp us-n no-drg blk-wrp-btn",title:tn("Style"),onClick:h,"data-testid":`${t.i}-style-btn`,children:f.jsx(JE,{stroke:2.3,height:"15",width:"13"})}),f.jsx("button",{type:"button",className:"g-c drag curp us-n no-drg blk-wrp-btn",title:tn("Settings"),onClick:i,"data-testid":`${t.i}-settings-btn`,children:f.jsx(XE,{size:"18",stroke:2})}),f.jsx("button",{type:"button",className:"g-c drag curp us-n no-drg blk-wrp-btn",title:tn("Clone"),onClick:()=>s(t.i),"data-testid":`${t.i}-copy-btn`,children:f.jsx(ZE,{size:"17",stroke:2})}),f.jsx(tb,{className:"g-c drag us-n no-drg blk-wrp-btn",removeLayoutItem:e,fieldId:t.i}),f.jsx("button",{"data-close":!0,type:"button",className:"g-c us-n no-drg blk-wrp-btn blk-wrp-down-btn",draggable:"false",style:{cursor:"pointer"},title:tn("More Options"),onClick:p=>a(p,t.i),"data-testid":`${t.i}-more-options`,children:f.jsx(KE,{size:"21",stroke:2.2})})]}),f.jsx(W0,{fields:o,layoutItem:t,formID:d})]})}const W0=({layoutItem:t,formID:e,fields:s})=>{const i=An(s[t.i]);return f.jsx(z0,{formID:e,atts:i,fieldKey:t.i})};export{zc as default};
