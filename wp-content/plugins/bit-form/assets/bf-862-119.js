var de=Object.defineProperty,me=Object.defineProperties;var oe=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var ue=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable;var ee=(n,s,i)=>s in n?de(n,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[s]=i,q=(n,s)=>{for(var i in s||(s={}))ue.call(s,i)&&ee(n,i,s[i]);if(D)for(var i of D(s))he.call(s,i)&&ee(n,i,s[i]);return n},L=(n,s)=>me(n,oe(s));import{l as F,j as e,_ as u,r as M,P as B,aa as U,cO as S,E as K,w as xe,h as pe,S as Q,T as H,o as je,I as z,u as se,a as ge,k as ve,n as fe,b as ae,L as be,c as Ne,d as _e,bM as we,aG as ke}from"./main-398.js";import{E as te,f as le,R as ye,a as Fe}from"./bf-285-172.js";import{u as J}from"./bf-418-67.js";import{C as W}from"./bf-288-71.js";import{C as O}from"./bf-235-102.js";import{M as re}from"./bf-305-112.js";/* empty css          */import"./bf-887-104.js";import"./bf-404-116.js";import"./bf-491-73.js";const ie=(n,s,i,t,l,r)=>{r(m=>F(m,d=>{d[n][s][t][i.target.name]=i.target.value}))};function X({i:n,type:s,formFields:i,field:t,dataConf:l,setDataConf:r,customFields:m}){const d={login:{propName:"login_map",fldName:"loginField"},reset:{propName:"reset_map",fldName:"resetField"},forgot:{propName:"forgot_map",fldName:"forgotField"}},{propName:j,fldName:p}=d[s],k=!!m.find(c=>c.key===t[p]&&c.required),f=(c,b)=>{const g=q({},l);g[s][j][b].customValue=c.target.value,r(g)};return e.jsx("div",{className:"flx mt-2 mr-1",children:e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp w-5 mr-2",name:"formField",value:t.formField||"",onChange:c=>ie(s,j,c,n,l,r),children:[e.jsx("option",{value:"",children:u("Select Field")}),i.map(c=>c.type!=="file-up33"&&e.jsx("option",{value:c.key,children:c.name},`ff-zhcrm-${c.key}`)),e.jsx("option",{value:"custom",children:u("Custom...")})]}),t.formField==="custom"&&e.jsx(re,{onChange:c=>f(c,n),label:u("Custom Value"),className:"mr-2",type:"text",value:t.customValue,placeholder:u("Custom Value")}),e.jsxs("select",{className:"btcd-paper-inp w-5",name:p,value:t[p]||"",onChange:c=>ie(s,j,c,n,l,r),disabled:k,children:[e.jsx("option",{value:"",children:u("Select Field")}),m==null?void 0:m.map(c=>e.jsx("option",{value:c.key,children:`${c.name}`},`${c.key}-1`))]})]})})}function Se({fields:n,dataConf:s,setDataConf:i,pages:t,type:l,status:r}){var c,b,g,o,a;const[m,d]=M.useState(!1),j=B(U),p=[{key:"login",name:"Username or Email Address",required:!0}];M.useEffect(()=>{const x=F(s,h=>{var _,y,$;($=(y=(_=h[l])==null?void 0:_.forgot_map)==null?void 0:y[0])!=null&&$.forgotField||(h[l].forgot_map=p.filter(A=>A.required).map(A=>({formField:"",forgotField:A.key,required:A.required})))});i(x)},[]);const k=x=>{i(h=>F(h,_=>{const{name:y,value:$}=x.target;_[l][y]=$})),j(h=>L(q({},h),{unsaved:!0}))},f=x=>{i(h=>F(h,_=>{_[l].redirect_url=x.target.value})),j(h=>L(q({},h),{unsaved:!0}))};return e.jsxs("div",{style:{width:800,opacity:r===0&&.6,pointerEvents:r===0&&"none"},children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("div",{className:"mt-3 mb-1",children:e.jsx("b",{children:"Forget Password Fields Mapping"})}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:S("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:S("Forgot Password Fields")})})]})]})}),(b=(c=s[l])==null?void 0:c.forgot_map)==null?void 0:b.map((x,h)=>e.jsx(X,{i:h,type:"forgot",field:x,formFields:n,dataConf:s,setDataConf:i,customFields:p},`analytics-m-${h+9}`)),e.jsx("br",{}),e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("div",{className:"w-5 ",children:[e.jsxs("div",{className:"f-m fw-500",children:[S("Redirect Page:"),e.jsx(O,{width:250,icnSize:17,className:"ml-1 mt-4 p-0",children:e.jsxs("div",{className:"txt-body",children:["This redirect page will be redirected to the reset form when the email is verified.",e.jsx("br",{})]})})]}),e.jsxs("select",{className:"btcd-paper-inp mt-1",value:(g=s[l])==null?void 0:g.redirect_url,onChange:x=>f(x),children:[e.jsx("option",{value:"",children:S("Custom Link")}),t&&t.map((x,h)=>e.jsx("option",{value:x.url,children:x.title},`r-url-${h+22}`))]})]}),e.jsxs("div",{className:"w-5 ml-2 mt-5 fw-500",children:[e.jsxs("div",{className:"f-m",children:["Link"," ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{onChange:k,name:"redirect_url",className:"btcd-paper-inp mt-1",type:"text",value:(o=s[l])==null?void 0:o.redirect_url})]})]}),e.jsx("br",{}),e.jsxs("div",{className:"flx w-5  mt-4",children:[e.jsx("span",{role:"button",tabIndex:"-1",className:"cp",onClick:()=>d(!0),onKeyDown:()=>d(!0),children:e.jsx(K,{size:21})}),e.jsx("div",{className:"f-m ml-1",children:S("Password reset email template")})]}),e.jsx(te,{dataConf:s,setDataConf:i,type:l,showMdl:m,setshowMdl:d,tamplate:le,title:"Password reset email template"}),e.jsx("br",{}),e.jsxs("div",{className:"w-5",children:[e.jsx("div",{className:"f-m fw-500",children:S("Success Message:")}),e.jsx("input",{className:"btcd-paper-inp mt-1",onChange:x=>k(x),name:"succ_msg",value:(a=s[l])==null?void 0:a.succ_msg,type:"text",placeholder:S("Success Message")})]})]})}function Me({fields:n,dataConf:s,setDataConf:i,pages:t,type:l,status:r}){var k,f,c,b,g;const m=B(U),d=[{key:"user_login",name:"User Name or Email",required:!0},{key:"password",name:"Password",required:!0},{key:"remember",name:"Remember Me",required:!0}],j=o=>{i(a=>F(a,x=>{const{name:h,value:_}=o.target;x[l][h]=_})),m(a=>L(q({},a),{unsaved:!0}))},p=o=>{i(a=>F(a,x=>{x[l].redirect_url=o.target.value})),m(a=>L(q({},a),{unsaved:!0}))};return M.useEffect(()=>{const o=F(s,a=>{var x,h,_;(_=(h=(x=a[l])==null?void 0:x.login_map)==null?void 0:h[0])!=null&&_.loginField||(a[l].login_map=d.filter(y=>y.required).map(y=>({formField:"",loginField:y.key,required:y.required})))});i(o)},[]),e.jsxs("div",{style:{width:800,opacity:r===0&&.6,pointerEvents:r===0&&"none"},children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("div",{className:"mt-3 mb-1",children:e.jsx("b",{children:"Login Fields Mapping"})}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:S("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:S("Login Fields")})})]})]})}),(f=(k=s[l])==null?void 0:k.login_map)==null?void 0:f.map((o,a)=>e.jsx(X,{i:a,type:"login",field:o,formFields:n,dataConf:s,setDataConf:i,customFields:d},`analytics-m-${a+9}`)),e.jsx("br",{}),e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("div",{className:"w-5 ",children:[e.jsx("div",{className:"f-m",children:S("Redirect Page:")}),e.jsxs("select",{className:"btcd-paper-inp mt-1",value:(c=s[l])==null?void 0:c.redirect_url,onChange:p,children:[e.jsx("option",{value:"",children:S("Custom Link")}),t&&t.map((o,a)=>e.jsx("option",{value:o.url,children:o.title},`r-url-${a+22}`))]})]}),e.jsxs("div",{className:"w-5 ml-2",children:[e.jsx("div",{className:"f-m fw-500",children:"Link:"}),e.jsx("input",{onChange:j,name:"redirect_url",className:"btcd-paper-inp mt-1",type:"text",value:(b=s[l])==null?void 0:b.redirect_url})]})]}),e.jsx("br",{}),e.jsx("div",{className:"f-m",children:"Login Success Message "}),e.jsx("input",{onChange:j,name:"succ_msg",className:"btcd-paper-inp mt-1 w-5",type:"text",value:(g=s[l])==null?void 0:g.succ_msg})]})}const ne=[{key:"user_email",name:"Email",required:!0},{key:"user_login",name:"Username"},{key:"nickname",name:"Nickname"},{key:"display_name",name:"Display Name"},{key:"first_name",name:"First Name"},{key:"last_name",name:"Last Name"},{key:"user_pass",name:"Password"},{key:"user_url",name:"Website"},{key:"description",name:"Biographical Info"}],Z=(n,s,i,t,l)=>{l(r=>F(r,m=>{m[n][s].splice(i,0,{})}))},Pe=(n,s,i,t,l)=>{l(r=>F(r,m=>{m[n][s].length>1&&m[n][s].splice(i,1)}))},G=(n,s,i,t,l,r,m,d)=>{const j=q({},l),p=m==null?void 0:m.find(k=>k.key===i.target.value);if(j[n][s][t].userField==="user_email"&&(p==null?void 0:p.typ)!=="email"){d({show:!0,msg:"should be selected email field.."});return}r(k=>F(k,f=>{f[n][s][t][i.target.name]=i.target.value}))},C=(n,s,i)=>!((n[s]?n[s].filter(l=>!l.formField&&l[i]&&l.required):[]).length>0);function ce({i:n,type:s,formFields:i,field:t,userConf:l,setUserConf:r,customFields:m,setSnackbar:d,fieldType:j,authType:p}){const k=B(U),f={user:{propName:"user_map",fldName:"userField"},meta:{propName:"meta_map",fldName:"metaField"}},{propName:c,fldName:b}=f[s],g=(a,x)=>{const h=pe(l);h[p][c][x].customValue=a.target.value,r(h),k(_=>L(q({},_),{unsaved:!0}))},o=!!m.find(a=>a.key===t[b]&&a.required);return e.jsxs("div",{className:"flx mt-2 mr-1",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:t.formField||"",onChange:a=>G(p,c,a,n,l,r,i,d),children:[e.jsx("option",{value:"",children:u("Select Field")}),j==="file"?i.map(a=>a.type==="file-up"&&e.jsx("option",{value:a.key,children:a.name},`ff-zhcrm-${a.key}`)):i==null?void 0:i.map(a=>a.type!=="file-up"&&e.jsx("option",{value:a.key,children:a.name},`ff-zhcrm-${a.key}`)),j!=="file"&&e.jsx("option",{value:"custom",children:u("Custom...")})]}),t.formField==="custom"&&e.jsx(re,{onChange:a=>g(a,n),label:u("Custom Value"),className:"mr-2",type:"text",value:t.customValue,placeholder:u("Custom Value")}),s!=="meta"?e.jsxs("select",{className:"btcd-paper-inp",name:b,value:t[b]||"",onChange:a=>G(p,c,a,n,l,r,i,d),disabled:o,children:[e.jsx("option",{children:u("Select Field")}),m==null?void 0:m.map(a=>e.jsx("option",{value:a.key,children:`${a.name}`},`${a.key}-1`))]}):e.jsx("input",{className:"btcd-paper-inp",name:b,value:t[b]||"",onChange:a=>G(p,c,a,n,l,r,i,d),type:"text"})]}),!o&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>Z(p,c,n,l,r),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>Pe(p,c,n,l,r),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx(xe,{})})]})]})}function qe({formFields:n,userConf:s,setUserConf:i,pages:t,roles:l,type:r}){var a,x,h,_,y,$,A,w,R,E,I,P;const[m,d]=M.useState({show:!1}),[j,p]=M.useState(!1),[k,f]=M.useState(!1),c=B(U),b=v=>{i(N=>F(N,V=>{const{name:T,value:Y}=v.target;V[r][T]=Y})),c(N=>L(q({},N),{unsaved:!0}))},g=v=>{i(N=>F(N,V=>{const{name:T,checked:Y}=v.target;Y?V[r][T]=!0:delete V[r][T]})),c(N=>L(q({},N),{unsaved:!0}))},o=v=>{i(N=>F(N,V=>{const{value:T}=v.target;V[r].redirect_url=T})),c(N=>L(q({},N),{unsaved:!0}))};return e.jsxs(e.Fragment,{children:[e.jsx(Q,{snack:m,setSnackbar:d}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("div",{className:"mt-3 mb-1",children:e.jsx("b",{children:u("Field Mappping")})}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:u("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:u("User Fields")})})]})]}),(x=(a=s[r])==null?void 0:a.user_map)==null?void 0:x.map((v,N)=>e.jsx(ce,{i:N,type:"user",field:v,formFields:n,userConf:s,setUserConf:i,customFields:ne,setSnackbar:d,fieldType:"all",authType:"register"},`analytics-m-${N+9}`)),e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>{var v,N;return Z(r,"user_map",(N=(v=s[r])==null?void 0:v.user_map)==null?void 0:N.length,s,i)},className:"icn-btn sh-sm",type:"button",children:"+"})})]}),e.jsxs("div",{className:"flx",children:[e.jsxs("div",{className:"w-5 mt-5 flx",children:[e.jsx(H,{name:"user_notify",onChange:g,title:u("User Email Notification"),checked:!!((h=s[r])!=null&&h.user_notify),value:!1}),e.jsx(O,{width:250,icnSize:17,className:"ml-1",children:e.jsxs("div",{className:"txt-body",children:["When this option is enabled, a welcome email will be sent from WordPress after registration.",e.jsx("br",{})]})})]}),e.jsxs("div",{className:"w-5 mt-5 flx",children:[e.jsx(H,{name:"admin_notify",onChange:g,title:u("Admin Email Notification"),checked:!!((_=s[r])!=null&&_.admin_notify),value:!1}),e.jsx(O,{width:250,icnSize:17,className:"ml-1",children:e.jsxs("div",{className:"txt-body",children:["If this option is enabled, e-mail will be sent from WordPress to admin.",e.jsx("br",{})]})})]})]}),e.jsx("br",{}),e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("div",{className:"w-5 ",children:[e.jsx("div",{className:"f-m",children:u("Redirect Page:")}),e.jsxs("select",{className:"btcd-paper-inp mt-1",value:(y=s[r])==null?void 0:y.redirect_url,onChange:o,children:[e.jsx("option",{value:"",children:u("Custom Link")}),t&&t.map((v,N)=>e.jsx("option",{value:v.url,children:v.title},`r-url-${N+22}`))]})]}),e.jsxs("div",{className:"w-5 ml-2",children:[e.jsx("div",{className:"f-m fw-500",children:"Link"}),e.jsx("input",{onChange:b,name:"redirect_url",className:"btcd-paper-inp mt-1",type:"text",value:($=s[r])==null?void 0:$.redirect_url})]})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("div",{className:"w-5 ",children:[e.jsx("div",{className:"f-m fw-500",children:u("WP User Role")}),e.jsxs("select",{name:"user_role",onChange:b,value:(A=s[r])==null?void 0:A.user_role,className:"btcd-paper-inp mt-1",children:[e.jsx("option",{disabled:!0,selected:!0,children:"Select User Role"}),l.map((v,N)=>e.jsx("option",{value:v==null?void 0:v.key,children:v==null?void 0:v.name},`acf-${N*2}`))]})]}),e.jsxs("div",{className:"w-5 ml-2",children:[e.jsx("div",{className:"f-m fw-500",children:u("Success Messages")}),e.jsx("input",{className:"btcd-paper-inp mt-1",onChange:v=>b(v),name:"succ_msg",value:(w=s[r])==null?void 0:w.succ_msg,type:"text",placeholder:u("Success Message")})]})]}),e.jsx("br",{}),e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("div",{className:"w-5",children:[e.jsx("div",{className:"f-m fw-500",children:u("User Approval  Method:")}),e.jsxs("select",{className:"btcd-paper-inp mt-1",name:"activation",value:(R=s[r])==null?void 0:R.activation,onChange:b,children:[e.jsx("option",{disabled:!0,selected:!0,value:"",children:u("select approval method")}),e.jsx("option",{value:"auto_approve",children:"Auto Approve"}),e.jsx("option",{value:"admin_review",children:"Require Admin Review"}),e.jsx("option",{value:"email_verify",children:"Require Email Activation"})]})]}),((E=s[r])==null?void 0:E.activation)==="auto_approve"&&e.jsxs("div",{className:"w-5 ml-2 flx",children:[e.jsx(H,{name:"auto_login",onChange:g,title:u("Auto Login After Registration"),checked:!!((I=s[r])!=null&&I.auto_login),value:!1}),e.jsx(O,{width:250,icnSize:17,className:"ml-1",children:e.jsxs("div",{className:"txt-body",children:["if checked Auto Login, the user login automatically after registration.",e.jsx("br",{})]})})]}),e.jsx(te,{dataConf:s,setDataConf:i,type:r,showMdl:j,setshowMdl:p,title:"Customize  Activation Email template"})]}),((P=s[r])==null?void 0:P.activation)==="email_verify"&&e.jsxs("div",{className:"flx  integ-fld-wrp",children:[e.jsx("div",{className:"w-5 mt-4",children:e.jsxs("button",{type:"button",className:"btn",onClick:()=>p(!0),children:[e.jsx(K,{size:18})," ",u("Customize Email template")]})}),e.jsxs("div",{className:"ml-2 mt-4",children:[e.jsxs("button",{type:"button",className:"btn",onClick:()=>f(!0),children:[e.jsx(K,{size:18})," ",u("Edit verification messages")]}),e.jsx(ye,{dataConf:s,setDataConf:i,showMdl:k,setCustomRedirectMdl:f,pages:t,type:r,title:"Edit verification messages"})]})]})]})]})}function Re({formFields:n,userConf:s,setUserConf:i,type:t}){var m,d;const[l,r]=M.useState([]);return e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("div",{className:"mt-3 mb-1",children:e.jsx("b",{children:u("User Meta Field Mappping")})}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:u("Meta Value")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:u("Meta Key")})})]})]}),(d=(m=s[t])==null?void 0:m.meta_map)==null?void 0:d.map((j,p)=>e.jsx(ce,{i:p,type:"meta",field:j,formFields:n,userConf:s,setUserConf:i,customFields:l,fieldType:"meta",authType:"register"},`analytics-m-${p+9}`)),e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>{var j;return Z(t,"meta_map",(j=s==null?void 0:s.meta_map)==null?void 0:j.length,s,i)},className:"icn-btn sh-sm",type:"button",children:"+"})})]})}function Ee({formFields:n,dataConf:s,setDataConf:i,pages:t,type:l,status:r}){const{formID:m}=je(),[d,j]=M.useState({show:!1}),[p,k]=M.useState([]);return J("bitforms_get_wp_roles",{},{fetchCondition:z,onSuccess:f=>k(Object.values(f))}),M.useEffect(()=>{const f=F(s,c=>{var b,g,o;(o=(g=(b=c[l])==null?void 0:b.user_map)==null?void 0:g[0])!=null&&o.userField||(c[l].user_map=ne.filter(a=>a.required).map(a=>({formField:"",userField:a.key,required:a.required})))});i(f)},[]),e.jsxs("div",{style:{width:900,opacity:r===0&&.6,pointerEvents:r===0&&"none"},children:[e.jsx(Q,{snack:d,setSnackbar:j}),e.jsx("div",{children:e.jsx(qe,{formFields:n,formID:m,userConf:s,setUserConf:i,pages:t,roles:p,type:l})}),e.jsxs("div",{children:[e.jsx(Re,{formFields:n,formID:m,userConf:s,setUserConf:i,type:l}),e.jsx("br",{})]}),e.jsxs("p",{className:"p-1 f-m",children:[e.jsx("strong",{children:"Note"})," ",": If the Username and Password fields are blank then the user will take the value of the email field as the field and the password will be auto-generated."]})]})}function Le({fields:n,dataConf:s,setDataConf:i,type:t,pages:l,status:r}){var k,f,c,b,g;const m=B(U),d=[{key:"new_password",name:"New Password",required:!0},{key:"conf_password",name:"Confirm Password",required:!0}],j=o=>{i(a=>F(a,x=>{const{name:h,value:_}=o.target;x[t][h]=_})),m(a=>L(q({},a),{unsaved:!0}))};M.useEffect(()=>{i(o=>F(o,a=>{var x,h,_;(_=(h=(x=a[t])==null?void 0:x.reset_map)==null?void 0:h[0])!=null&&_.resetField||(a[t].reset_map=d.filter(y=>y.required).map(y=>({formField:"",resetField:y.key,required:y.required})))}))},[]);const p=o=>{i(a=>F(a,x=>{x[t].redirect_url=o.target.value})),m(a=>L(q({},a),{unsaved:!0}))};return e.jsxs("div",{style:{width:800,opacity:r===0&&.6,pointerEvents:r===0&&"none"},children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("div",{className:"mt-3 mb-1",children:e.jsx("b",{children:"Login Fields Mapping"})}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:S("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:S("Reset Password Fields")})})]})]})}),(f=(k=s[t])==null?void 0:k.reset_map)==null?void 0:f.map((o,a)=>e.jsx(X,{i:a,type:"reset",field:o,formFields:n,dataConf:s,setDataConf:i,customFields:d},`analytics-m-${a+9}`)),e.jsx("br",{}),e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("div",{className:"w-5 ",children:[e.jsx("div",{className:"f-m fw-500",children:S("Redirect Page:")}),e.jsxs("select",{className:"btcd-paper-inp mt-1",value:(c=s[t])==null?void 0:c.redirect_url,onChange:o=>p(o),children:[e.jsx("option",{value:"",children:S("Custom Link")}),l&&l.map((o,a)=>e.jsx("option",{value:o.url,children:o.title},`r-url-${a+22}`))]})]}),e.jsxs("div",{className:"w-5 ml-2",children:[e.jsx("div",{className:"f-m fw-500",children:"Link:"}),e.jsx("input",{onChange:j,name:"redirect_url",className:"btcd-paper-inp mt-1",type:"text",value:(b=s[t])==null?void 0:b.redirect_url})]})]}),e.jsx("br",{}),e.jsx("div",{className:"flx integ-fld-wrp",children:e.jsxs("div",{className:"w-5",children:[e.jsx("div",{className:"f-m fw-500",children:S("Success Message:")}),e.jsx("input",{className:"btcd-paper-inp mt-1",onChange:o=>j(o),name:"succ_msg",value:(g=s[t])==null?void 0:g.succ_msg,type:"text",placeholder:S("Success Message")})]})}),e.jsx("br",{})]})}function Ye(){const[n,s]=M.useState(!1),i=se(we),[t,l]=M.useState("register"),r=se(ke),{css:m}=ge(),[d,j]=M.useState({register:{user_map:[{}],succ_msg:"Registration successfully done.",meta_map:[{}],sub:"Activate Your Account",body:Fe,acti_succ_msg:"Your account has been activated successfully.&nbsp;You can now login.",already_activated_msg:"Your account is already activated!",invalid_key_msg:"Sorry! Your URL Is Invalid!!"},login:{login_map:[{}],succ_msg:"You have been successfully logged in."},forgot:{forgot_map:[{}],succ_msg:"We have e-mailed your password reset link!",sub:"Email Subject",body:le},reset:{reset_map:[{}],succ_msg:"Your password has been reset!."}}),[p,k]=M.useState([]),[f,c]=M.useState(0),[b,g]=M.useState({show:!1}),o=B(U),{isLoading:a,mutate:x}=J("bitforms_get_auth_set",{formID:r},{fetchCondition:z,onSuccess:w=>{var R,E;j(I=>F(I,P=>{var v,N;P[(v=w[0])==null?void 0:v.integration_name]=JSON.parse((N=w[0])==null?void 0:N.integration_details)})),l((R=w[0])==null?void 0:R.integration_name),c(Number((E=w[0])==null?void 0:E.status))}});J("bitforms_get_all_wp_pages",{},{fetchCondition:z,onSuccess:w=>k(w)});const h=w=>{if(!z)return;const{name:R,value:E}=w.target;l(E);const I=q({},d);I[R]=E,j(I),o(P=>L(q({},P),{unsaved:!0}))},_=w=>{z&&(w.target.checked?c(1):c(0))},y=()=>{var R,E;let w=!0;return t==="register"&&!C(d[t],"user_map","userField")&&(g({show:!0,msg:"Please mapped required fields."}),w=!1),t==="register"&&!((R=d[t])!=null&&R.user_role)&&(g({show:!0,msg:"User Role field is required."}),w=!1),t==="forgot"&&!C(d[t],"forgot_map","forgotField")&&(g({show:!0,msg:"Please mapped required fields."}),w=!1),t==="forgot"&&!((E=d[t])!=null&&E.redirect_url)&&(g({show:!0,msg:"redirect page link is required."}),w=!1),t==="reset"&&!C(d[t],"reset_map","resetField")&&(g({show:!0,msg:"Please mapped required fields."}),w=!1),t==="login"&&!C(d[t],"login_map","loginField")&&(g({show:!0,msg:"Please mapped required fields."}),w=!1),w},$=w=>{if(w.preventDefault(),!z)return;s(!0);const R=F(d,P=>{Object.keys(P).forEach(v=>t!==v&&delete P[v]),P.formId=r,P.type=t,P.status=f});if(!y()){s(!1);return}const I=Ne(R,"bitforms_save_auth_settings").then(P=>{P!==void 0&&P.success&&(x(R),s(!1))});_e.promise(I,{success:u("Saved successfully."),loading:u("Saving..."),error:u("Something went wrong, Try again.")})},A=()=>{switch(t){case"login":return e.jsx(Me,{fields:i,dataConf:d,setDataConf:j,pages:p,type:t,status:f});case"forgot":return e.jsx(Se,{fields:i,dataConf:d,setDataConf:j,pages:p,type:t,status:f});case"reset":return e.jsx(Le,{fields:i,dataConf:d,setDataConf:j,pages:p,type:t,status:f});case"register":return e.jsx(Ee,{formFields:i,dataConf:d,setDataConf:j,pages:p,type:t,status:f})}};return e.jsxs("div",{className:"pos-rel",children:[e.jsx(Q,{snack:b,setSnackbar:g}),e.jsx("h2",{className:"",children:u("WP Authentication")}),!z&&e.jsx("div",{className:"pro-blur flx",style:{height:"111%",left:-53,width:"104%"},children:e.jsxs("div",{className:"pro",children:[u("Available On"),e.jsx("a",{href:"https://www.bitapps.pro/bit-form",target:"_blank",rel:"noreferrer",children:e.jsx("span",{className:"txt-pro",children:u("Premium")})})]})}),a?e.jsx(ve,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:70,transform:"scale(0.7)"}}):e.jsxs("div",{children:[e.jsx("div",{className:"mt-2",children:e.jsxs("label",{htmlFor:"status",children:[e.jsx("b",{children:u("")}),e.jsx(W,{radio:!0,name:"type",onChange:h,checked:t==="register",title:e.jsx("small",{className:"txt-dp",children:e.jsx("b",{children:"Registration"})}),value:"register"}),e.jsx(W,{radio:!0,name:"type",onChange:h,checked:t==="login",title:e.jsx("small",{className:"txt-dp",children:e.jsx("b",{children:"Log In"})}),value:"login"}),e.jsx(W,{radio:!0,name:"type",onChange:h,checked:t==="forgot",title:e.jsx("small",{className:"txt-dp",children:e.jsx("b",{children:"Forgot Password"})}),value:"forgot"}),e.jsx(W,{radio:!0,name:"type",onChange:h,checked:t==="reset",title:e.jsx("small",{className:"txt-dp",children:e.jsx("b",{children:"Reset Password"})}),value:"reset"})]})}),e.jsxs("div",{className:"mt-2 ml-1 flx",children:[e.jsx("label",{htmlFor:"status",children:e.jsx("b",{children:u("Enable")})}),e.jsx(fe,{action:_,checked:f===1,className:"ml-4 flx"})]}),A(),e.jsxs("button",{type:"button",id:"secondary-update-btn",onClick:$,className:m(ae.btn,ae.blueGrd,{px:20}),disabled:n,children:[u("Save "),n&&e.jsx(be,{size:20,clr:"#fff",className:"ml-2"})]}),e.jsx("div",{children:t!=="register"&&e.jsxs("p",{className:"p-1 f-m",children:[e.jsx("strong",{children:"Note : "})," ","When the login, forgot password or reset password any of these feature enabled in the form, the entries will not be saved in the WP database."]})})]})]})}export{Ye as default};
