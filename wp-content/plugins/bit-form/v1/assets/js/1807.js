"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[1807],{53132:(e,t,i)=>{i.d(t,{Mm:()=>r,WK:()=>s,P_:()=>o,FP:()=>c,T5:()=>m,wX:()=>u,mG:()=>f});var a=i(665),n=i(73305),l=i(77111),r=function(e,t,i,n,l,r,s){var o=[].concat(e);if(s)o[r]=(0,a.Z)({},e[r],n),o.push({editItegration:!0}),t([].concat(o)),l.push(i);else{var d=[].concat(o);d.push(n),d.push({newItegration:!0}),t(d),l.push(i)}},s=function(e){var t={},i=window.location.href.replace(window.opener.location.href+"/redirect","").split("&");i&&i.forEach((function(e){var i=e.split("=");i[1]&&(t[i[0]]=i[1])})),localStorage.setItem("__bitforms_"+e,JSON.stringify(t)),window.close()},o=function(e,t,i,l,r,s,o,c,m){if(l.dataCenter&&l.clientId&&l.clientSecret){c(!0);var u="https://accounts.zoho."+l.dataCenter+"/oauth/v2/auth?scope="+i+"&response_type=code&client_id="+l.clientId+"&prompt=Consent&access_type=offline&state="+encodeURIComponent(window.location.href)+"/redirect&redirect_uri="+encodeURIComponent(bits.zohoRedirectURL),f=window.open(u,e,"width=400,height=609,toolbar=off"),p=setInterval((function(){if(f.closed){clearInterval(p);var i={},s=!1,u=localStorage.getItem("__bitforms_"+e);if(u&&(s=!0,i=JSON.parse(u),localStorage.removeItem("__bitforms_"+e)),i.code&&!i.error&&i&&s){var _=(0,a.Z)({},l);_.accountServer=i["accounts-server"],d(t,i,_,r,o,c,m)}else{var h=i.error?"Cause: "+i.error:"";m({show:!0,msg:(0,n.__)("Authorization failed","bitform")+" "+h+". "+(0,n.__)("please try again","bitform")}),c(!1)}}}),500)}else s({dataCenter:l.dataCenter?"":(0,n.__)("Data center cann't be empty","bitform"),clientId:l.clientId?"":(0,n.__)("Client ID cann't be empty","bitform"),clientSecret:l.clientSecret?"":(0,n.__)("Secret key cann't be empty","bitform")})},d=function(e,t,i,r,s,o,d){var c=(0,a.Z)({},t);c.dataCenter=i.dataCenter,c.clientId=i.clientId,c.clientSecret=i.clientSecret,c.redirectURI=bits.zohoRedirectURL,(0,l.Z)(c,"bitforms_"+e+"_generate_token").then((function(e){return e})).then((function(e){if(e&&e.success){var t=(0,a.Z)({},i);t.tokenDetails=e.data,r(t),s(!0),d({show:!0,msg:(0,n.__)("Authorized Successfully","bitform")})}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?d({show:!0,msg:""+(0,n.__)("Authorization failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,n.__)("please try again","bitform")}):d({show:!0,msg:(0,n.__)("Authorization failed. please try again","bitform")});o(!1)}))},c=function(e,t,i,n,l){var r=(0,a.Z)({},t);l?n?r.relatedlists[l-1].upload_field_map.splice(e,0,{}):r.relatedlists[l-1].field_map.splice(e,0,{}):n?r.upload_field_map.splice(e,0,{}):r.field_map.splice(e,0,{}),i((0,a.Z)({},r))},m=function(e,t,i,n,l){var r=(0,a.Z)({},t);l?n?r.relatedlists[l-1].upload_field_map.length>1&&r.relatedlists[l-1].upload_field_map.splice(e,1):r.relatedlists[l-1].field_map.length>1&&r.relatedlists[l-1].field_map.splice(e,1):n?r.upload_field_map.length>1&&r.upload_field_map.splice(e,1):r.field_map.length>1&&r.field_map.splice(e,1),i((0,a.Z)({},r))},u=function(e,t,i,n,l,r){var s=(0,a.Z)({},i);r?l?s.relatedlists[r-1].upload_field_map[t][e.target.name]=e.target.value:s.relatedlists[r-1].field_map[t][e.target.name]=e.target.value:l?s.upload_field_map[t][e.target.name]=e.target.value:s.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(r?s.relatedlists[r-1].field_map[t].customValue="":s.field_map[t].customValue=""),n((0,a.Z)({},s))},f=function(e,t,i,n,l){var r=(0,a.Z)({},i);l?r.relatedlists[l-1].field_map[t].customValue=e.target.value:r.field_map[t].customValue=e.target.value,n((0,a.Z)({},r))}},8940:(e,t,i)=>{i.d(t,{Z:()=>l});var a=i(73305),n=i(4637);function l(e){var t=e.step,i=e.saveConfig,l=e.edit,r=e.disabled;return l?(0,n.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,n.jsx)("button",{onClick:i,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:r,children:(0,a.__)("Update","bitform")})}):(0,n.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,n.jsx)("h2",{className:"ml-3",children:(0,a.__)("Successfully Integrated","bitform")}),(0,n.jsxs)("button",{onClick:i,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,a.__)("Finish & Save ","bitform")," ✔"]})]})}},22829:(e,t,i)=>{i.d(t,{Rx:()=>s,YG:()=>o,gn:()=>d,Pd:()=>c,P_:()=>m});var a=i(665),n=i(17607),l=i(73305),r=i(77111),s=function(e,t,i,n,l,r,s,o){var d=(0,a.Z)({},t),c=e.target.name;""!==e.target.value?d[c]=e.target.value:delete d[c],i((0,a.Z)({},d))},o=function(e,t,i,s){i(!0);var o={username:e.username,password:e.password},d=(0,r.Z)(o,"bitforms_rapidmail_get_all_recipients").then((function(n){if(n&&n.success){var l=(0,a.Z)({},e);return l.default||(l.default={}),n.data.recipientlists&&(l.default.recipientlists=n.data.recipientlists),t((0,a.Z)({},l)),i(!1),"Recipientlist refreshed successfully"}return i(!1),"Recipientlist refresh failed. please try again"}));n.ZP.promise(d,{success:function(e){return e},error:(0,l.__)("Error Occurred","bitform"),loading:(0,l.__)("Loading Recipientslist...")})},d=function(e){var t=null==e?void 0:e.recipientsFields.filter((function(e){return!0===e.required}));return t.length>0?t.map((function(e){return{formField:"",rapidmailFormField:e.key}})):[{formField:"",rapidmailFormField:""}]},c=function(e){return!((null!=e&&e.field_map?e.field_map.filter((function(e){return!e.formField||!e.rapidmailFormField||"custom"===!e.formField&&!e.customValue})):[]).length>0)},m=function(e,t,i,n,s,o){if(e.username&&e.password){i({}),s(!0);var d={username:e.username,password:e.password};(0,r.Z)(d,"bitforms_rapidmail_authorization").then((function(e){return e})).then((function(i){if(i&&i.success){var r=(0,a.Z)({},e);r.tokenDetails=i.data,t(r),n(!0),o({show:!0,msg:(0,l.__)("Authorized Successfully","bitform")})}else i&&i.data&&i.data.data||!i.success&&"string"===typeof i.data?o({show:!0,msg:""+(0,l.__)("Authorization failed Cause:","bitform")+(i.data.data||i.data)+". "+(0,l.__)("please try again","bitform")}):o({show:!0,msg:(0,l.__)("Authorization failed. please try again","bitform")});s(!1)}))}else i({username:e.username?"":(0,l.__)("Username can't be empty","bitform"),password:e.password?"":(0,l.__)("Password can't be empty","bitform")})}},78131:(e,t,i)=>{i.d(t,{Z:()=>g});i(59496);var a=i(73305),n=i(665),l=function(e,t,i){var a=(0,n.Z)({},t);a.field_map.splice(e,0,{}),i((0,n.Z)({},a))},r=function(e,t,i){var a=(0,n.Z)({},t);a.field_map.length>1&&a.field_map.splice(e,1),i((0,n.Z)({},a))},s=function(e,t,i,a){var l=(0,n.Z)({},i);l.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(l.field_map[t].customValue=""),a((0,n.Z)({},l))},o=function(e,t,i,a){var l=(0,n.Z)({},i);l.field_map[t].customValue=e.target.value,a((0,n.Z)({},l))},d=i(2598),c=i(4637);function m(e){var t,i=e.rapidmailConf,l=e.setRapidmailConf;e.formFields;return(0,c.jsx)("div",{className:"pos-rel d-flx w-8",children:(0,c.jsx)(d.Z,{checked:(null==(t=i.actions)?void 0:t.send_activationmail)||!1,onChange:function(e){return function(e,t){var a=(0,n.Z)({},i);"send_activationmail"===t&&(e.target.checked?a.actions.send_activationmail=!0:delete a.actions.send_activationmail),l((0,n.Z)({},a))}(e,"send_activationmail")},className:"wdt-200 mt-4 mr-2",value:"send_activationmail",title:(0,a.__)("Send Activation Email","bitform"),subTitle:(0,a.__)("Add Send Activation Email","bitform")})})}var u=i(22829),f=i(44084),p=i(37029),_=i(2699),h=i(84448),b=i(94557);function v(e){var t,i=e.i,d=e.formFields,m=e.field,v=e.rapidmailConf,g=e.setRapidmailConf;if(1===(null==v||null==(t=v.field_map)?void 0:t.length)&&""===m.rapidmailFormField){var x=(0,n.Z)({},v),j=(0,u.gn)(x);x.field_map=j,g(x)}var C=(null==v?void 0:v.recipientsFields.filter((function(e){return!0===e.required})))||[],F=(null==v?void 0:v.recipientsFields.filter((function(e){return!1===e.required})))||[],w=(0,f.sJ)(h.hi).isPro;return(0,c.jsxs)("div",{className:"flx mt-2 mr-1",children:[(0,c.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,c.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:m.formField||"",onChange:function(e){return s(e,i,v,g)},children:[(0,c.jsx)("option",{value:"",children:(0,a.__)("Select Field","bitform")}),(0,c.jsx)("optgroup",{label:"Form Fields",children:null==d?void 0:d.map((function(e){return(0,c.jsx)("option",{value:e.key,children:e.name},"ff-rm-"+e.key)}))}),(0,c.jsx)("option",{value:"custom",children:(0,a.__)("Custom...","bitform")}),(0,c.jsx)("optgroup",{label:"General Smart Codes "+(w?"":"(PRO)"),children:w&&(null==_.C?void 0:_.C.map((function(e){return(0,c.jsx)("option",{value:e.name,children:e.label},"ff-rm-"+e.name)})))})]}),"custom"===m.formField&&(0,c.jsx)(p.Z,{onChange:function(e){return o(e,i,v,g)},label:(0,a.__)("Custom Value","bitform"),className:"mr-2",type:"text",value:m.customValue,placeholder:(0,a.__)("Custom Value","bitform")}),(0,c.jsxs)("select",{className:"btcd-paper-inp",disabled:i<C.length,name:"rapidmailFormField",value:i<C?C[i].label||"":m.rapidmailFormField||"",onChange:function(e){return s(e,i,v,g)},children:[(0,c.jsx)("option",{value:"",children:(0,a.__)("Select Field","bitform")}),i<C.length?(0,c.jsx)("option",{value:C[i].key,children:C[i].label},C[i].key):F.map((function(e){var t=e.key,i=e.label;return(0,c.jsx)("option",{value:t,children:i},t)}))]})]}),i>=C.length&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{onClick:function(){return l(i,v,g)},className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),(0,c.jsx)("button",{onClick:function(){return r(i,v,g)},className:"icn-btn sh-sm",type:"button","aria-label":"btn",children:(0,c.jsx)(b.Z,{})})]})]})}function g(e){var t,i=e.formFields,n=e.handleInput,r=e.rapidmailConf,s=e.setRapidmailConf,o=e.isLoading,d=e.setIsLoading,f=e.setSnackbar;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("br",{}),(0,c.jsx)("b",{className:"wdt-200 d-in-b",children:(0,a.__)("Recipient:","bitform")}),(0,c.jsxs)("select",{onChange:n,name:"recipient_id",value:null==r?void 0:r.recipient_id,className:"btcd-paper-inp w-5",children:[(0,c.jsx)("option",{value:"",children:(0,a.__)("Select Recipients","bitform")}),(null==r||null==(t=r.default)?void 0:t.recipientlists)&&r.default.recipientlists.map((function(e){var t=e.id,i=e.name;return(0,c.jsx)("option",{value:t,children:i},t)}))]}),(0,c.jsx)("button",{onClick:function(){return(0,u.YG)(r,s,d,f)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,a.__)("Fetch All Recipients","bitform")+"'"},type:"button",disabled:o,children:"↻"}),(0,c.jsx)("br",{}),(0,c.jsx)("div",{className:"mt-5",children:(0,c.jsx)("b",{className:"wdt-100",children:(0,a.__)("Field Map","bitform")})}),(0,c.jsx)("div",{className:"btcd-hr mt-1"}),(0,c.jsxs)("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[(0,c.jsx)("div",{className:"txt-dp",children:(0,c.jsx)("b",{children:(0,a.__)("Form Fields","bitform")})}),(0,c.jsx)("div",{className:"txt-dp",children:(0,c.jsx)("b",{children:(0,a.__)("Rapidmail Fields","bitform")})})]}),(null==r?void 0:r.recipient_id)&&(null==r?void 0:r.field_map.map((function(e,t){return(0,c.jsx)(v,{i:t,field:e,rapidmailConf:r,formFields:i,setRapidmailConf:s,setSnackbar:f},"rp-m-"+(t+9))}))),(0,c.jsx)("div",{className:"txt-center mt-2",style:{marginRight:85},children:(0,c.jsx)("button",{onClick:function(){return l(r.field_map.length,r,s,!1)},className:"icn-btn sh-sm",type:"button",children:"+"})}),(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),(null==r?void 0:r.recipient_id)&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"mt-4",children:(0,c.jsx)("b",{className:"wdt-100",children:(0,a.__)("Actions","bitform")})}),(0,c.jsx)("div",{className:"btcd-hr mt-1"}),(0,c.jsx)(m,{rapidmailConf:r,setRapidmailConf:s,formFields:i})]})]})}}}]);