"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[8323],{99687:(e,t,l)=>{l.d(t,{Jd:()=>d,Pd:()=>o,Rx:()=>r,gn:()=>c});var a=l(51163),i=l(65752),n=l(51108),s=l(55873),r=function(e,t,l,i){var n=(0,a.Z)({},t),s=e.target.name;""!==e.target.value?n[s]=e.target.value:delete n[s],l((0,a.Z)({},n))},o=function(e){return!((null!=e&&e.field_map?e.field_map.filter((function(e){return!e.formField||!e.elasticEmailField||"custom"===!e.formField&&!e.customValue})):[]).length>0)},c=function(e){var t=null==e?void 0:e.elasticEmailFields.filter((function(e){return!0===e.required}));return t.length>0?t.map((function(e){return{formField:"",elasticEmailField:e.key}})):[{formField:"",elasticEmailField:""}]},d=function(e,t,l){l(!0);var r={apiKey:e.api_key},o=(0,s.Z)(r,"bitforms_get_all_lists").then((function(i){if(i&&i.success){var n=(0,a.Z)({},e);return n.default||(n.default={}),i.data.lists&&(n.default.lists=i.data.lists),t((0,a.Z)({},n)),l(!1),"List refreshed successfully"}return l(!1),"List refresh failed. please try again"}));i.ZP.promise(o,{success:function(e){return e},error:(0,n.__)("Error Occurred","bitform"),loading:(0,n.__)("Loading Lists...")})}},98568:(e,t,l)=>{l.d(t,{Z:()=>j});var a=l(51163),i=l(59496),n=l(83428),s=l(51108),r=l(99687),o=function(e,t,l){var i=(0,a.Z)({},t);i.field_map.splice(e,0,{}),l((0,a.Z)({},i))},c=function(e,t,l){var i=(0,a.Z)({},t);i.field_map.length>1&&i.field_map.splice(e,1),l((0,a.Z)({},i))},d=function(e,t,l,i){var n=(0,a.Z)({},l);n.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(n.field_map[t].customValue=""),i((0,a.Z)({},n))},u=function(e,t,l,i){var n=(0,a.Z)({},l);n.field_map[t].customValue=e.target.value,i((0,a.Z)({},n))},m=l(48291),f=l(67587),p=l(43502),b=l(90794),_=l(4637);function h(e){var t,l=e.i,i=e.formFields,n=e.field,h=e.elasticEmailConf,v=e.setElasticEmailConf;if(1===(null==h||null==(t=h.field_map)?void 0:t.length)&&""===n.elasticEmailField){var g=(0,a.Z)({},h),x=(0,r.gn)(g);g.field_map=x,v(g)}var j=(null==h?void 0:h.elasticEmailFields.filter((function(e){return!0===e.required})))||[],C=(null==h?void 0:h.elasticEmailFields.filter((function(e){return!1===e.required})))||[],N=(0,m.sJ)(b.hi).isPro;return(0,_.jsx)("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:(0,_.jsxs)("div",{className:"pos-rel flx",children:[(0,_.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,_.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:n.formField||"",onChange:function(e){return d(e,l,h,v)},children:[(0,_.jsx)("option",{value:"",children:(0,s.__)("Select Field","bitform")}),(0,_.jsx)("optgroup",{label:"Form Fields",children:null==i?void 0:i.map((function(e){return(0,_.jsx)("option",{value:e.key,children:e.name},"ff-rm-"+e.key)}))}),(0,_.jsx)("option",{value:"custom",children:(0,s.__)("Custom...","bitform")}),(0,_.jsx)("optgroup",{label:"General Smart Codes "+(N?"":"(PRO)"),children:N&&(null==p.C?void 0:p.C.map((function(e){return(0,_.jsx)("option",{value:e.name,children:e.label},"ff-rm-"+e.name)})))})]}),"custom"===n.formField&&(0,_.jsx)(f.Z,{onChange:function(e){return u(e,l,h,v)},label:(0,s.__)("Custom Value","bitform"),className:"mr-2",type:"text",value:n.customValue,placeholder:(0,s.__)("Custom Value","bitform")}),(0,_.jsxs)("select",{className:"btcd-paper-inp",disabled:l<j.length,name:"elasticEmailField",value:l<j.length?j[l].label||"":n.elasticEmailField||"",onChange:function(e){return d(e,l,h,v)},children:[(0,_.jsx)("option",{value:"",children:(0,s.__)("Select Field","bitform")}),l<j.length?(0,_.jsx)("option",{value:j[l].key,children:j[l].label},j[l].key):C.map((function(e){var t=e.key,l=e.label;return(0,_.jsx)("option",{value:t,children:l},t)}))]})]}),l>=j.length&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("button",{onClick:function(){return o(l,h,v)},className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),(0,_.jsx)("button",{onClick:function(){return c(l,h,v)},className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:(0,_.jsx)("span",{className:"btcd-icn icn-trash-2"})})]})]})})}var v=l(46377),g=l(24386);function x(e){var t,l=e.elasticEmailConf,r=e.setElasticEmailConf,o=(e.formFields,(0,i.useState)({show:!1,action:function(){}})),c=o[0],d=o[1],u=(0,i.useState)(!1),m=u[0],f=(u[1],function(){d({show:!1})}),p=[{value:"Transactional",label:"Transactional"},{value:"Engaged",label:"Engaged"},{value:"Active",label:"Active"},{value:"Bounced",label:"Bounced"},{value:"Unsubscribed",label:"Unsubscribed"},{value:"Abuse",label:"Abuse"},{value:"Inactive",label:"Inactive"},{value:"Stale",label:"Stale"},{value:"NotConfirmed",label:"NotConfirmed"}];return(0,_.jsxs)("div",{className:"pos-rel d-flx w-8",children:[(0,_.jsx)(g.Z,{checked:(null==l||null==(t=l.actions)?void 0:t.status)||!1,onChange:function(e){return function(e,t){var i,n=(0,a.Z)({},l);"status"===t&&(e.target.checked?(n.actions[t]=!0,d({show:t})):(null==(i=n.actions)||delete i[t],null==n||delete n[t])),r((0,a.Z)({},n))}(e,"status")},className:"wdt-200 mt-4 mr-2",value:"status",title:(0,s.__)("Status","bitform"),subTitle:(0,s.__)("Add Status to contact","bitform")}),(0,_.jsxs)(v.Z,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:(0,s.__)("Ok","bitform"),show:"status"===c.show,close:f,action:f,title:(0,s.__)("Status","bitform"),children:[(0,_.jsx)("div",{className:"btcd-hr mt-2 mb-2"}),m?(0,_.jsx)(Loader,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):(0,_.jsx)("div",{className:"flx flx-between mt-2",children:(0,_.jsx)(n.Z,{className:"msl-wrp-options",defaultValue:null==l?void 0:l.status,options:null==p?void 0:p.map((function(e){return{label:e.label,value:e.value.toString()}})),onChange:function(e){return function(e,t){var i=(0,a.Z)({},l);i[t]=e,r((0,a.Z)({},i))}(e,"status")},customValue:!0,singleSelect:!0})})]})]})}function j(e){var t,l=e.formFields,i=(e.handleInput,e.elasticEmailConf),c=e.setElasticEmailConf,d=e.isLoading,u=e.setIsLoading,m=e.setSnackbar;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("br",{}),(0,_.jsxs)("div",{className:"flx",children:[(0,_.jsx)("b",{className:"wdt-200 d-in-b",children:(0,s.__)("Lists:","bitform")}),(0,_.jsx)(n.Z,{defaultValue:i.list_id,className:"btcd-paper-drpdwn w-5",options:(null==i||null==(t=i.default)?void 0:t.lists)&&i.default.lists.map((function(e){return{label:e.listName,value:e.listName.toString()}})),onChange:function(e){return function(e){var t=(0,a.Z)({},i);t.list_id=e?e.split(","):[],c((0,a.Z)({},t))}(e)}}),(0,_.jsx)("button",{onClick:function(){return(0,r.Jd)(i,c,u)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,s.__)("Fetch All Recipients","bitform")+"'"},type:"button",disabled:d,children:"↻"})]}),(0,_.jsx)("br",{}),(0,_.jsx)("div",{className:"mt-5",children:(0,_.jsx)("b",{className:"wdt-100",children:(0,s.__)("Field Map","bitform")})}),(0,_.jsx)("div",{className:"btcd-hr mt-1"}),(0,_.jsxs)("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[(0,_.jsx)("div",{className:"txt-dp",children:(0,_.jsx)("b",{children:(0,s.__)("Form Fields","bitform")})}),(0,_.jsx)("div",{className:"txt-dp",children:(0,_.jsx)("b",{children:(0,s.__)("Elastic Email Fields","bitform")})})]}),i.list_id&&(null==i?void 0:i.field_map.map((function(e,t){return(0,_.jsx)(h,{i:t,field:e,elasticEmailConf:i,formFields:l,setElasticEmailConf:c,setSnackbar:m},"rp-m-"+(t+9))}))),(0,_.jsx)("div",{className:"txt-center mt-2",style:{marginRight:85},children:(0,_.jsx)("button",{onClick:function(){return o(i.field_map.length,i,c,!1)},className:"icn-btn sh-sm",type:"button",children:"+"})}),(0,_.jsx)("br",{}),(0,_.jsx)("br",{}),(null==i?void 0:i.list_id)&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{className:"mt-4",children:(0,_.jsx)("b",{className:"wdt-100",children:(0,s.__)("Actions","bitform")})}),(0,_.jsx)("div",{className:"btcd-hr mt-1"}),(0,_.jsx)(x,{elasticEmailConf:i,setElasticEmailConf:c,formFields:l})]})]})}},66801:(e,t,l)=>{l.d(t,{FP:()=>d,Mm:()=>s,P_:()=>o,T5:()=>u,WK:()=>r,mG:()=>f,wX:()=>m});var a=l(51163),i=l(51108),n=l(55873),s=function(e,t,l,i,n,s,r){var o=[].concat(e);if(r)o[s]=(0,a.Z)({},e[s],i),o.push({editItegration:!0}),t([].concat(o)),n.push(l);else{var c=[].concat(o);c.push(i),c.push({newItegration:!0}),t(c),n.push(l)}},r=function(e){var t={},l=window.location.href.replace(window.opener.location.href+"/redirect","").split("&");l&&l.forEach((function(e){var l=e.split("=");l[1]&&(t[l[0]]=l[1])})),localStorage.setItem("__bitforms_"+e,JSON.stringify(t)),window.close()},o=function(e,t,l,n,s,r,o,d,u){if(n.dataCenter&&n.clientId&&n.clientSecret){d(!0);var m="https://accounts.zoho."+n.dataCenter+"/oauth/v2/auth?scope="+l+"&response_type=code&client_id="+n.clientId+"&prompt=Consent&access_type=offline&state="+encodeURIComponent(window.location.href)+"/redirect&redirect_uri="+encodeURIComponent(bits.zohoRedirectURL),f=window.open(m,e,"width=400,height=609,toolbar=off"),p=setInterval((function(){if(f.closed){clearInterval(p);var l={},r=!1,m=localStorage.getItem("__bitforms_"+e);if(m&&(r=!0,l=JSON.parse(m),localStorage.removeItem("__bitforms_"+e)),l.code&&!l.error&&l&&r){var b=(0,a.Z)({},n);b.accountServer=l["accounts-server"],c(t,l,b,s,o,d,u)}else{var _=l.error?"Cause: "+l.error:"";u({show:!0,msg:(0,i.__)("Authorization failed","bitform")+" "+_+". "+(0,i.__)("please try again","bitform")}),d(!1)}}}),500)}else r({dataCenter:n.dataCenter?"":(0,i.__)("Data center cann't be empty","bitform"),clientId:n.clientId?"":(0,i.__)("Client ID cann't be empty","bitform"),clientSecret:n.clientSecret?"":(0,i.__)("Secret key cann't be empty","bitform")})},c=function(e,t,l,s,r,o,c){var d=(0,a.Z)({},t);d.dataCenter=l.dataCenter,d.clientId=l.clientId,d.clientSecret=l.clientSecret,d.redirectURI=bits.zohoRedirectURL,(0,n.Z)(d,"bitforms_"+e+"_generate_token").then((function(e){return e})).then((function(e){if(e&&e.success){var t=(0,a.Z)({},l);t.tokenDetails=e.data,s(t),r(!0),c({show:!0,msg:(0,i.__)("Authorized Successfully","bitform")})}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?c({show:!0,msg:""+(0,i.__)("Authorization failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,i.__)("please try again","bitform")}):c({show:!0,msg:(0,i.__)("Authorization failed. please try again","bitform")});o(!1)}))},d=function(e,t,l,i,n){var s=(0,a.Z)({},t);n?i?s.relatedlists[n-1].upload_field_map.splice(e,0,{}):s.relatedlists[n-1].field_map.splice(e,0,{}):i?s.upload_field_map.splice(e,0,{}):s.field_map.splice(e,0,{}),l((0,a.Z)({},s))},u=function(e,t,l,i,n){var s=(0,a.Z)({},t);n?i?s.relatedlists[n-1].upload_field_map.length>1&&s.relatedlists[n-1].upload_field_map.splice(e,1):s.relatedlists[n-1].field_map.length>1&&s.relatedlists[n-1].field_map.splice(e,1):i?s.upload_field_map.length>1&&s.upload_field_map.splice(e,1):s.field_map.length>1&&s.field_map.splice(e,1),l((0,a.Z)({},s))},m=function(e,t,l,i,n,s){var r=(0,a.Z)({},l);s?n?r.relatedlists[s-1].upload_field_map[t][e.target.name]=e.target.value:r.relatedlists[s-1].field_map[t][e.target.name]=e.target.value:n?r.upload_field_map[t][e.target.name]=e.target.value:r.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(s?r.relatedlists[s-1].field_map[t].customValue="":r.field_map[t].customValue=""),i((0,a.Z)({},r))},f=function(e,t,l,i,n){var s=(0,a.Z)({},l);n?s.relatedlists[n-1].field_map[t].customValue=e.target.value:s.field_map[t].customValue=e.target.value,i((0,a.Z)({},s))}},82183:(e,t,l)=>{l.d(t,{Z:()=>n});var a=l(51108),i=l(4637);function n(e){var t=e.step,l=e.saveConfig,n=e.edit,s=e.disabled;return n?(0,i.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,i.jsx)("button",{onClick:l,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:s,children:(0,a.__)("Update","bitform")})}):(0,i.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,i.jsx)("h2",{className:"ml-3",children:(0,a.__)("Successfully Integrated","bitform")}),(0,i.jsxs)("button",{onClick:l,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,a.__)("Finish & Save ","bitform")," ✔"]})]})}}}]);