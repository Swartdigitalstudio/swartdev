"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[2605],{10683:(e,t,l)=>{l.d(t,{GF:()=>o,GX:()=>d,P_:()=>c,Pd:()=>u,Rx:()=>r});var a=l(60795),i=l(94965),n=l(97719),s=(l(12767),l(88226)),r=function(e,t,l,i,n,s){var r,o,c=(0,a.Z)({},t),u=e.target.name;if(""!==e.target.value?c[u]=e.target.value:delete c[u],c[e.target.name]=e.target.value,"listId"===e.target.name)c.field_map=[{formField:"",acumbamailFormField:"email"}],!c.listId||null!=(r=c.default)&&null!=(o=r.allFields)&&o[c.listId]||d(s,c,l,i,n);l((0,a.Z)({},c))},d=function(e,t,l,r,d){var o=t.listId;if(o){r(!0);var c={auth_token:t.auth_token,list_id:o};(0,n.Z)(c,"bitforms_acumbamail_refresh_fields").then((function(e){if(e&&e.success){var n,d,c=(0,a.Z)({},t);if(e.data)return null!=(n=c.default)&&n.allFields||(c.default.allFields={}),null!=(d=c.default.allFields)&&d[o]||(c.default.allFields[o]={}),c.default.allFields[o].fields=e.data,c.default.allFields[o].required=["email"],l((0,a.Z)({},c)),r(!1),void i.ZP.success((0,s.__)("All list field fetched successfully","bitform"));r(!1),i.ZP.error((0,s.__)("Failed to fetch list fields","bitform"))}})).catch((function(){return r(!1)}))}},o=function(e,t,l,r){l(!0);var d={auth_token:e.auth_token};(0,n.Z)(d,"bitforms_acumbamail_fetch_all_list").then((function(n){if(n&&n.success){var r=(0,a.Z)({},e);return r.default||(r.default={}),n.data&&(r.default.allLists=n.data),t((0,a.Z)({},r)),l(!1),void i.ZP.success((0,s.__)("Lists fetched successfully","bitform"))}l(!1),i.ZP.error((0,s.__)("Lists fetch failed. please try again","bitform"))})).catch((function(){return l(!1)}))},c=function(e,t,l,r,d,o){if(e.auth_token){l({}),d(!0);var c={auth_token:e.auth_token};(0,n.Z)(c,"bitforms_acumbamail_authorization_and_fetch_subscriber_list").then((function(l){if(l&&l.success){var n=(0,a.Z)({},e);return t(n),r(!0),d(!1),void i.ZP.success((0,s.__)("Authorized successfully","bitform"))}d(!1),i.ZP.error((0,s.__)("Authorized failed","bitform"))}))}else l({auth_token:e.auth_token?"":(0,s.__)("Api Key can't be empty","bitform")})},u=function(e){return!((null!=e&&e.field_map?e.field_map.filter((function(t){var l,a,i;return!t.formField&&t.acumbamailFormField&&-1!==(null==e||null==(l=e.default)||null==(a=l.allFields)||null==(i=a[e.listId])?void 0:i.required.indexOf(t.acumbamailFormField))})):[]).length>0)}},34002:(e,t,l)=>{l.d(t,{Z:()=>_});var a=l(88226),i=l(16740),n=l(22788),s=l(10683),r=l(48291),d=l(28566),o=l(52052),c=l(30400),u=l(22139),m=l(36752),f=l(4637);function p(e){var t,l,i,n,s,p,_,h,b,v,g=e.i,x=e.formFields,j=e.field,F=e.acumbamailConf,Z=e.setAcumbamailConf,y=(0,r.sJ)(d.hi).isPro,C=null==(t=F.default.allFields[F.listId])||null==(l=t.required)?void 0:l.includes(j.acumbamailFormField),I=(null==(i=F.default.allFields)||null==(n=i[F.listId])?void 0:n.fields)&&(Object.entries(null==(s=F.default.allFields)||null==(p=s[F.listId])?void 0:p.fields).filter((function(e){return!0===e[1].required}))||[]),w=(null==(_=F.default.allFields)||null==(h=_[F.listId])?void 0:h.fields)&&(Object.entries(null==(b=F.default.allFields)||null==(v=b[F.listId])?void 0:v.fields).filter((function(e){return!1===e[1].required}))||[]);return(0,f.jsxs)("div",{className:"flx mt-2 mr-1",children:[(0,f.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,f.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:j.formField||"",onChange:function(e){return(0,m.wX)(e,g,F,Z)},children:[(0,f.jsx)("option",{value:"",children:(0,a.__)("Select Field","bitform")}),(0,f.jsx)("optgroup",{label:"Form Fields",children:x.map((function(e){return"file-up"!==e.type&&(0,f.jsx)("option",{value:e.key,children:e.name},"ff-zhcrm-"+e.key)}))}),(0,f.jsx)("option",{value:"custom",children:(0,a.__)("Custom...","bitform")}),(0,f.jsx)("optgroup",{label:"General Smart Codes "+(y?"":"(PRO)"),children:y&&(null==c.C?void 0:c.C.map((function(e){return(0,f.jsx)("option",{value:e.name,children:e.label},"ff-rm-"+e.name)})))})]}),"custom"===j.formField&&(0,f.jsx)(u.Z,{onChange:function(e){return(0,m.mG)(e,g,F,Z)},label:(0,a.__)("Custom Value","bitform"),className:"mr-2",type:"text",value:j.customValue,placeholder:(0,a.__)("Custom Value","bitform")}),(0,f.jsxs)("select",{className:"btcd-paper-inp",name:"acumbamailFormField",disabled:g<1,value:j.acumbamailFormField||"",onChange:function(e){return(0,m.wX)(e,g,F,Z)},children:[(0,f.jsx)("option",{value:"",children:(0,a.__)("Select Field","bitform")}),C&&I&&I.map((function(e,t){return(0,f.jsx)("option",{value:e[0],children:e[0]},"mchimp-"+2*t)})),!C&&w&&w.map((function(e,t){return(0,f.jsx)("option",{value:e[0],children:e[0]},"mchimp-"+2*t)}))]})]}),!C&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("button",{onClick:function(){return(0,m.FP)(g,F,Z)},className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),(0,f.jsx)("button",{onClick:function(){return(0,m.T5)(g,F,Z)},className:"icn-btn sh-sm",type:"button","aria-label":"btn",children:(0,f.jsx)(o.Z,{})})]})]})}function _(e){var t,l,r=e.formFields,d=e.handleInput,o=e.acumbamailConf,c=e.setAcumbamailConf,u=e.isLoading,m=e.setIsLoading,_=e.setSnackbar;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("br",{}),(0,f.jsx)("b",{className:"wdt-200 d-in-b",children:(0,a.__)("Actions:","bitform")}),(0,f.jsxs)("select",{onChange:d,name:"mainAction",value:o.mainAction,className:"btcd-paper-inp w-5",children:[(0,f.jsx)("option",{value:"",children:(0,a.__)("Select Actions","bitform")}),o.allActions&&o.allActions.map((function(e){var t=e.key,l=e.label;return(0,f.jsx)("option",{value:t,children:l},t)}))]}),(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),(0,f.jsx)("b",{className:"wdt-200 d-in-b",children:(0,a.__)("All List:","bitform")}),(0,f.jsxs)("select",{onChange:d,name:"listId",value:o.listId,className:"btcd-paper-inp w-5",children:[(0,f.jsx)("option",{value:"",children:(0,a.__)("Select List","bitform")}),(null==o||null==(t=o.default)?void 0:t.allLists)&&Object.entries(o.default.allLists).map((function(e){return(0,f.jsx)("option",{value:e[0],children:e[1].name},e[0])}))]}),(0,f.jsx)("button",{onClick:function(){return(0,s.GF)(o,c,m,_)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,a.__)("Fetch Subscriber List","bitform")+"'"},type:"button",disabled:u,children:"↻"}),(0,f.jsx)("br",{}),u&&(0,f.jsx)(i.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),(0,f.jsxs)("div",{className:"mt-5",children:[(0,f.jsx)("b",{className:"wdt-100",children:(0,a.__)("Field Map","bitform")}),(0,f.jsx)("button",{onClick:function(){return(0,s.GX)(null,o,c,m,_)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,a.__)("Refresh Acumbamail Fields","bitform")+"'"},type:"button",disabled:u,children:"↻"})]}),(0,f.jsx)("div",{className:"btcd-hr mt-1"}),(0,f.jsxs)("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[(0,f.jsx)("div",{className:"txt-dp",children:(0,f.jsx)("b",{children:(0,a.__)("Form Fields","bitform")})}),(0,f.jsx)("div",{className:"txt-dp",children:(0,f.jsx)("b",{children:(0,a.__)("Acumbamail Fields","bitform")})})]}),(null==(l=o.default)?void 0:l.allFields)&&(0,f.jsxs)(f.Fragment,{children:[o.field_map.map((function(e,t){return(0,f.jsx)(p,{i:t,field:e,acumbamailConf:o,formFields:r,setAcumbamailConf:c},"acumba-m-"+(t+9))})),(0,f.jsx)("div",{className:"txt-center  mt-2",style:{marginRight:85},children:(0,f.jsx)("button",{onClick:function(){return(0,n.FP)(o.field_map.length,o,c)},className:"icn-btn sh-sm",type:"button",children:"+"})}),(0,f.jsx)("br",{}),(0,f.jsx)("br",{})]}),(0,f.jsx)("br",{})]})}},22788:(e,t,l)=>{l.d(t,{FP:()=>c,Mm:()=>s,P_:()=>d,T5:()=>u,WK:()=>r,mG:()=>f,wX:()=>m});var a=l(60795),i=l(88226),n=l(97719),s=function(e,t,l,i,n,s,r){var d=[].concat(e);if(r)d[s]=(0,a.Z)({},e[s],i),d.push({editItegration:!0}),t([].concat(d)),n.push(l);else{var o=[].concat(d);o.push(i),o.push({newItegration:!0}),t(o),n.push(l)}},r=function(e){var t={},l=window.location.href.replace(window.opener.location.href+"/redirect","").split("&");l&&l.forEach((function(e){var l=e.split("=");l[1]&&(t[l[0]]=l[1])})),localStorage.setItem("__bitforms_"+e,JSON.stringify(t)),window.close()},d=function(e,t,l,n,s,r,d,c,u){if(n.dataCenter&&n.clientId&&n.clientSecret){c(!0);var m="https://accounts.zoho."+n.dataCenter+"/oauth/v2/auth?scope="+l+"&response_type=code&client_id="+n.clientId+"&prompt=Consent&access_type=offline&state="+encodeURIComponent(window.location.href)+"/redirect&redirect_uri="+encodeURIComponent(bits.zohoRedirectURL),f=window.open(m,e,"width=400,height=609,toolbar=off"),p=setInterval((function(){if(f.closed){clearInterval(p);var l={},r=!1,m=localStorage.getItem("__bitforms_"+e);if(m&&(r=!0,l=JSON.parse(m),localStorage.removeItem("__bitforms_"+e)),l.code&&!l.error&&l&&r){var _=(0,a.Z)({},n);_.accountServer=l["accounts-server"],o(t,l,_,s,d,c,u)}else{var h=l.error?"Cause: "+l.error:"";u({show:!0,msg:(0,i.__)("Authorization failed","bitform")+" "+h+". "+(0,i.__)("please try again","bitform")}),c(!1)}}}),500)}else r({dataCenter:n.dataCenter?"":(0,i.__)("Data center cann't be empty","bitform"),clientId:n.clientId?"":(0,i.__)("Client ID cann't be empty","bitform"),clientSecret:n.clientSecret?"":(0,i.__)("Secret key cann't be empty","bitform")})},o=function(e,t,l,s,r,d,o){var c=(0,a.Z)({},t);c.dataCenter=l.dataCenter,c.clientId=l.clientId,c.clientSecret=l.clientSecret,c.redirectURI=bits.zohoRedirectURL,(0,n.Z)(c,"bitforms_"+e+"_generate_token").then((function(e){return e})).then((function(e){if(e&&e.success){var t=(0,a.Z)({},l);t.tokenDetails=e.data,s(t),r(!0),o({show:!0,msg:(0,i.__)("Authorized Successfully","bitform")})}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?o({show:!0,msg:""+(0,i.__)("Authorization failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,i.__)("please try again","bitform")}):o({show:!0,msg:(0,i.__)("Authorization failed. please try again","bitform")});d(!1)}))},c=function(e,t,l,i,n){var s=(0,a.Z)({},t);n?i?s.relatedlists[n-1].upload_field_map.splice(e,0,{}):s.relatedlists[n-1].field_map.splice(e,0,{}):i?s.upload_field_map.splice(e,0,{}):s.field_map.splice(e,0,{}),l((0,a.Z)({},s))},u=function(e,t,l,i,n){var s=(0,a.Z)({},t);n?i?s.relatedlists[n-1].upload_field_map.length>1&&s.relatedlists[n-1].upload_field_map.splice(e,1):s.relatedlists[n-1].field_map.length>1&&s.relatedlists[n-1].field_map.splice(e,1):i?s.upload_field_map.length>1&&s.upload_field_map.splice(e,1):s.field_map.length>1&&s.field_map.splice(e,1),l((0,a.Z)({},s))},m=function(e,t,l,i,n,s){var r=(0,a.Z)({},l);s?n?r.relatedlists[s-1].upload_field_map[t][e.target.name]=e.target.value:r.relatedlists[s-1].field_map[t][e.target.name]=e.target.value:n?r.upload_field_map[t][e.target.name]=e.target.value:r.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(s?r.relatedlists[s-1].field_map[t].customValue="":r.field_map[t].customValue=""),i((0,a.Z)({},r))},f=function(e,t,l,i,n){var s=(0,a.Z)({},l);n?s.relatedlists[n-1].field_map[t].customValue=e.target.value:s.field_map[t].customValue=e.target.value,i((0,a.Z)({},s))}},52904:(e,t,l)=>{l.d(t,{Z:()=>n});var a=l(88226),i=l(4637);function n(e){var t=e.step,l=e.saveConfig,n=e.edit,s=e.disabled;return n?(0,i.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,i.jsx)("button",{onClick:l,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:s,children:(0,a.__)("Update","bitform")})}):(0,i.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,i.jsx)("h2",{className:"ml-3",children:(0,a.__)("Successfully Integrated","bitform")}),(0,i.jsxs)("button",{onClick:l,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,a.__)("Finish & Save ","bitform")," ✔"]})]})}},36752:(e,t,l)=>{l.d(t,{D2:()=>o,FP:()=>n,LX:()=>c,Mm:()=>i,T5:()=>s,Ye:()=>u,mG:()=>d,wX:()=>r});var a=l(60795),i=function(e,t,l,i,n,s,r){var d=[].concat(e);if(r)d[s]=(0,a.Z)({},e[s],i),d.push({editItegration:!0}),t([].concat(d)),n.push(l);else{var o=[].concat(d);o.push(i),o.push({newItegration:!0}),t(o),n.push(l)}},n=function(e,t,l,i,n){var s=(0,a.Z)({},t);n?i?s.relatedlists[n-1].upload_field_map.splice(e,0,{}):s.relatedlists[n-1].field_map.splice(e,0,{}):i?s.upload_field_map.splice(e,0,{}):s.field_map.splice(e,0,{}),l((0,a.Z)({},s))},s=function(e,t,l,i,n){var s=(0,a.Z)({},t);n?i?s.relatedlists[n-1].upload_field_map.length>1&&s.relatedlists[n-1].upload_field_map.splice(e,1):s.relatedlists[n-1].field_map.length>1&&s.relatedlists[n-1].field_map.splice(e,1):i?s.upload_field_map.length>1&&s.upload_field_map.splice(e,1):s.field_map.length>1&&s.field_map.splice(e,1),l((0,a.Z)({},s))},r=function(e,t,l,i,n,s){var r=(0,a.Z)({},l);s?n?r.relatedlists[s-1].upload_field_map[t][e.target.name]=e.target.value:r.relatedlists[s-1].field_map[t][e.target.name]=e.target.value:n?r.upload_field_map[t][e.target.name]=e.target.value:r.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(s?r.relatedlists[s-1].field_map[t].customValue="":r.field_map[t].customValue=""),i((0,a.Z)({},r))},d=function(e,t,l,i,n){var s=(0,a.Z)({},l);n?s.relatedlists[n-1].field_map[t].customValue=e.target.value:s.field_map[t].customValue=e.target.value,i((0,a.Z)({},s))},o=function(e,t,l,i,n,s){var r=(0,a.Z)({},l);r.address_field[t][e.target.name]=e.target.value,i((0,a.Z)({},r))},c=function(e,t,l){var i=(0,a.Z)({},t);i.address_field||(i.address_field=[]),i.address_field.push({}),l((0,a.Z)({},i))},u=function(e,t,l){var i=(0,a.Z)({},t);i.address_field&&i.address_field.length>1&&i.address_field.splice(e,1),l((0,a.Z)({},i))}}}]);