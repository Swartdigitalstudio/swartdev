"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[6234],{9418:(e,t,i)=>{i.d(t,{Pd:()=>o,Rx:()=>r,Ys:()=>d,gn:()=>c});var a=i(60795),l=i(94965),n=i(88226),s=i(97719),r=function(e,t,i,l){var n=(0,a.Z)({},t);n.name=e.target.value,i((0,a.Z)({},n))},o=function(e){return!((null!=e&&e.field_map?e.field_map.filter((function(e){return!e.formField||!e.getgistFormField||"custom"===!e.formField&&!e.customValue})):[]).length>0)},d=function(e,t,i){i(!0);var r={apiKey:e.api_key},o=(0,s.Z)(r,"bitforms_getgist_tags").then((function(l){if(l&&l.success){var n=(0,a.Z)({},e);return n.default||(n.default={}),n.default.tags=l.data,t((0,a.Z)({},n)),i(!1),"Tags refreshed successfully"}return i(!1),"Tags refresh failed. Please, try again"}));l.ZP.promise(o,{success:function(e){return e},error:(0,n.__)("Error Occurred","bitform"),loading:(0,n.__)("Loading Tags...")})},c=function(e){var t=null==e?void 0:e.gistFields.filter((function(e){return!0===e.required}));return t.length>0?t.map((function(e){return{formField:"",getgistFormField:e.key}})):[{formField:"",getgistFormField:""}]}},15087:(e,t,i)=>{i.d(t,{Z:()=>x});var a=i(60795),l=i(88226),n=i(22788),s=i(59496),r=i(83428),o=i(16740),d=i(4913),c=i(6518),u=(i(93417),i(9418)),m=i(4637);function f(e){var t,i,n,f=e.getgistConf,p=e.setGetgistConf,g=(e.formFields,(0,s.useState)(!1)),_=g[0],h=g[1],b=(0,s.useState)({show:!1,action:function(){}}),v=b[0],x=b[1],j=(0,s.useState)({show:!1}),y=(j[0],j[1],function(){x({show:!1})});return(0,m.jsxs)("div",{className:"pos-rel d-flx w-8",children:[(0,m.jsx)(c.Z,{checked:(null==f||null==(t=f.actions)?void 0:t.tags)||!1,onChange:function(e){return function(e,t){var i=(0,a.Z)({},f);e.target.checked?("tags"===t&&(0,u.Ys)(f,p,h),i.actions[t]=!0,x({show:t})):(x({show:!1}),delete i.actions[t]),p((0,a.Z)({},i))}(e,"tags")},className:"wdt-200 mt-4 mr-2",value:"tags",title:(0,l.__)("Tags","bitform"),subTitle:(0,l.__)("Add tags to contact","bitform")}),(0,m.jsxs)(d.Z,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:(0,l.__)("Ok","bitform"),show:"tags"===v.show,close:y,action:y,title:(0,l.__)("Tags","bitform"),children:[(0,m.jsx)("div",{className:"btcd-hr mt-2 mb-2"}),_?(0,m.jsx)(o.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):(0,m.jsxs)("div",{className:"flx flx-between mt-2",children:[(0,m.jsx)(r.Z,{className:"msl-wrp-options",defaultValue:null==f?void 0:f.tags,options:null==(i=f.default)||null==(n=i.tags)?void 0:n.map((function(e){return{label:e.tagName,value:e.tagName.toString()}})),onChange:function(e){return function(e,t){var i=(0,a.Z)({},f);i[t]=e,p((0,a.Z)({},i))}(e,"tags")}}),(0,m.jsx)("button",{onClick:function(){return(0,u.Ys)(f,p,h)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":(0,l.__)("Refresh Tags","bitform")+"'"},type:"button",disabled:_,children:"↻"})]})]})]})}var p=i(48291),g=i(28566),_=i(52052),h=i(30400),b=i(22139);function v(e){var t,i,n=e.i,s=e.formFields,r=e.field,o=e.getgistConf,d=e.setGetgistConf,c=(0,p.sJ)(g.hi).isPro;if(1===(null==o||null==(t=o.field_map)?void 0:t.length)&&""===(null==r?void 0:r.getgistFormField)){var f=(0,a.Z)({},o),v=(0,u.gn)(f);f.field_map=v,d(f)}var x=function(e,t){var i=(0,a.Z)({},o);i.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(i.field_map[t].customValue=""),d(i)},j=(null==o?void 0:o.gistFields.filter((function(e){return!0===e.required})))||[],y=(null==o?void 0:o.gistFields.filter((function(e){return!1===e.required})))||[];return(0,m.jsxs)("div",{className:"flx mt-2 mr-1",children:[(0,m.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,m.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:r.formField||"",onChange:function(e){return x(e,n)},children:[(0,m.jsx)("option",{value:"",children:(0,l.__)("Select Field","bitform")}),(0,m.jsx)("optgroup",{label:"Form Fields",children:s.map((function(e){return"file"!==e.type&&(0,m.jsx)("option",{value:e.key,children:e.name},"ff-getgist-"+e.key)}))}),(0,m.jsx)("option",{value:"custom",children:(0,l.__)("Custom...","bitform")}),(0,m.jsx)("optgroup",{label:"General Smart Codes "+(c?"":"(PRO)"),children:c&&(null==h.C?void 0:h.C.map((function(e){return(0,m.jsx)("option",{value:e.name,children:e.label},"ff-rm-"+e.name)})))})]}),"custom"===r.formField&&(0,m.jsx)(b.Z,{onChange:function(e){return function(e,t){var i=(0,a.Z)({},o);i.field_map[t].customValue=e.target.value,d(i)}(e,n)},label:(0,l.__)("Custom Value","bitform"),className:"mr-2",type:"text",value:r.customValue,placeholder:(0,l.__)("Custom Value","bitform")}),(0,m.jsxs)("select",{className:"btcd-paper-inp",disabled:n<j.length,name:"getgistFormField",value:n<j.length?(null==(i=j[n])?void 0:i.key)||"":r.getgistFormField||"",onChange:function(e){return x(e,n)},children:[(0,m.jsx)("option",{value:"",children:(0,l.__)("Select Field","bitform")}),n<j.length?(0,m.jsx)("option",{value:j[n].key,children:j[n].label},j[n].key):y.map((function(e){var t=e.key,i=e.label;return(0,m.jsx)("option",{value:t,children:i},t)}))]})]}),n>=(null==j?void 0:j.length)&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("button",{onClick:function(){return function(e){var t=(0,a.Z)({},o);t.field_map.splice(e,0,{}),d(t)}(n)},className:"icn-btn sh-sm ml-2",type:"button",children:"+"}),(0,m.jsx)("button",{onClick:function(){return function(e){var t=(0,a.Z)({},o);t.field_map.length>1&&t.field_map.splice(e,1),d(t)}(n)},className:"icn-btn sh-sm ml-2",type:"button","aria-label":"btn",children:(0,m.jsx)(_.Z,{})})]})]})}function x(e){var t=e.formFields,i=e.getgistConf,s=e.setGetgistConf;e.isLoading,e.setIsLoading,e.error,e.setError;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("br",{}),(0,m.jsx)("b",{className:"wdt-200 d-in-b",children:(0,l.__)("User Type:","bitform")}),(0,m.jsxs)("select",{onChange:function(e){var t=e.target,l=t.name,n=t.value,r=(0,a.Z)({},i);r[l]=n,"User"===n?("User"===n&&(r.userId=Math.floor(4294967296*(1+Math.random())).toString(16).substring(1)),r.field_map=[{formField:"",getgistFormField:"email"}]):(null!=r&&r.userId&&delete r.userId,r.field_map=[{formField:"",getgistFormField:"email"}]),s((0,a.Z)({},r))},name:"user_type",value:null==i?void 0:i.user_type,className:"btcd-paper-inp w-5",children:[(0,m.jsx)("option",{value:"",children:(0,l.__)("Select User Type","bitform")}),[{key:"User",label:"User"},{key:"Lead",label:"Lead"}].map((function(e){var t=e.key,i=e.label;return(0,m.jsx)("option",{value:t,children:i},t)}))]}),(0,m.jsx)("div",{className:"mt-4",children:(0,m.jsx)("b",{className:"wdt-100",children:(0,l.__)("Map Fields","bitform")})}),(0,m.jsx)("div",{className:"btcd-hr mt-1"}),(0,m.jsxs)("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[(0,m.jsx)("div",{className:"txt-dp",children:(0,m.jsx)("b",{children:(0,l.__)("Form Fields","bitform")})}),(0,m.jsx)("div",{className:"txt-dp",children:(0,m.jsx)("b",{children:(0,l.__)("Gist Fields","bitform")})})]}),null==i?void 0:i.field_map.map((function(e,a){return(0,m.jsx)(v,{i:a,field:e,getgistConf:i,formFields:t,setGetgistConf:s},"getgist-m-"+(a+9))})),(0,m.jsx)("div",{className:"txt-center mt-2",style:{marginRight:85},children:(0,m.jsx)("button",{onClick:function(){return(0,n.FP)(i.field_map.length,i,s)},className:"icn-btn sh-sm",type:"button",children:"+"})}),(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),(null==i?void 0:i.user_type)&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"mt-4",children:(0,m.jsx)("b",{className:"wdt-100",children:(0,l.__)("Actions","bitform")})}),(0,m.jsx)("div",{className:"btcd-hr mt-1"}),(0,m.jsx)(f,{getgistConf:i,setGetgistConf:s,formFields:t})]})]})}},22788:(e,t,i)=>{i.d(t,{FP:()=>c,Mm:()=>s,P_:()=>o,T5:()=>u,WK:()=>r,mG:()=>f,wX:()=>m});var a=i(60795),l=i(88226),n=i(97719),s=function(e,t,i,l,n,s,r){var o=[].concat(e);if(r)o[s]=(0,a.Z)({},e[s],l),o.push({editItegration:!0}),t([].concat(o)),n.push(i);else{var d=[].concat(o);d.push(l),d.push({newItegration:!0}),t(d),n.push(i)}},r=function(e){var t={},i=window.location.href.replace(window.opener.location.href+"/redirect","").split("&");i&&i.forEach((function(e){var i=e.split("=");i[1]&&(t[i[0]]=i[1])})),localStorage.setItem("__bitforms_"+e,JSON.stringify(t)),window.close()},o=function(e,t,i,n,s,r,o,c,u){if(n.dataCenter&&n.clientId&&n.clientSecret){c(!0);var m="https://accounts.zoho."+n.dataCenter+"/oauth/v2/auth?scope="+i+"&response_type=code&client_id="+n.clientId+"&prompt=Consent&access_type=offline&state="+encodeURIComponent(window.location.href)+"/redirect&redirect_uri="+encodeURIComponent(bits.zohoRedirectURL),f=window.open(m,e,"width=400,height=609,toolbar=off"),p=setInterval((function(){if(f.closed){clearInterval(p);var i={},r=!1,m=localStorage.getItem("__bitforms_"+e);if(m&&(r=!0,i=JSON.parse(m),localStorage.removeItem("__bitforms_"+e)),i.code&&!i.error&&i&&r){var g=(0,a.Z)({},n);g.accountServer=i["accounts-server"],d(t,i,g,s,o,c,u)}else{var _=i.error?"Cause: "+i.error:"";u({show:!0,msg:(0,l.__)("Authorization failed","bitform")+" "+_+". "+(0,l.__)("please try again","bitform")}),c(!1)}}}),500)}else r({dataCenter:n.dataCenter?"":(0,l.__)("Data center cann't be empty","bitform"),clientId:n.clientId?"":(0,l.__)("Client ID cann't be empty","bitform"),clientSecret:n.clientSecret?"":(0,l.__)("Secret key cann't be empty","bitform")})},d=function(e,t,i,s,r,o,d){var c=(0,a.Z)({},t);c.dataCenter=i.dataCenter,c.clientId=i.clientId,c.clientSecret=i.clientSecret,c.redirectURI=bits.zohoRedirectURL,(0,n.Z)(c,"bitforms_"+e+"_generate_token").then((function(e){return e})).then((function(e){if(e&&e.success){var t=(0,a.Z)({},i);t.tokenDetails=e.data,s(t),r(!0),d({show:!0,msg:(0,l.__)("Authorized Successfully","bitform")})}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?d({show:!0,msg:""+(0,l.__)("Authorization failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,l.__)("please try again","bitform")}):d({show:!0,msg:(0,l.__)("Authorization failed. please try again","bitform")});o(!1)}))},c=function(e,t,i,l,n){var s=(0,a.Z)({},t);n?l?s.relatedlists[n-1].upload_field_map.splice(e,0,{}):s.relatedlists[n-1].field_map.splice(e,0,{}):l?s.upload_field_map.splice(e,0,{}):s.field_map.splice(e,0,{}),i((0,a.Z)({},s))},u=function(e,t,i,l,n){var s=(0,a.Z)({},t);n?l?s.relatedlists[n-1].upload_field_map.length>1&&s.relatedlists[n-1].upload_field_map.splice(e,1):s.relatedlists[n-1].field_map.length>1&&s.relatedlists[n-1].field_map.splice(e,1):l?s.upload_field_map.length>1&&s.upload_field_map.splice(e,1):s.field_map.length>1&&s.field_map.splice(e,1),i((0,a.Z)({},s))},m=function(e,t,i,l,n,s){var r=(0,a.Z)({},i);s?n?r.relatedlists[s-1].upload_field_map[t][e.target.name]=e.target.value:r.relatedlists[s-1].field_map[t][e.target.name]=e.target.value:n?r.upload_field_map[t][e.target.name]=e.target.value:r.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(s?r.relatedlists[s-1].field_map[t].customValue="":r.field_map[t].customValue=""),l((0,a.Z)({},r))},f=function(e,t,i,l,n){var s=(0,a.Z)({},i);n?s.relatedlists[n-1].field_map[t].customValue=e.target.value:s.field_map[t].customValue=e.target.value,l((0,a.Z)({},s))}},52904:(e,t,i)=>{i.d(t,{Z:()=>n});var a=i(88226),l=i(4637);function n(e){var t=e.step,i=e.saveConfig,n=e.edit,s=e.disabled;return n?(0,l.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,l.jsx)("button",{onClick:i,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:s,children:(0,a.__)("Update","bitform")})}):(0,l.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,l.jsx)("h2",{className:"ml-3",children:(0,a.__)("Successfully Integrated","bitform")}),(0,l.jsxs)("button",{onClick:i,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,a.__)("Finish & Save ","bitform")," ✔"]})]})}}}]);