"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[9191],{69369:(e,t,i)=>{i.d(t,{FP:()=>c,Mm:()=>s,P_:()=>o,T5:()=>f,WK:()=>r,mG:()=>u,wX:()=>m});var a=i(72564),l=i(57852),n=i(2850),s=function(e,t,i,l,n,s,r){var o=[].concat(e);if(r)o[s]=(0,a.Z)({},e[s],l),o.push({editItegration:!0}),t([].concat(o)),n.push(i);else{var d=[].concat(o);d.push(l),d.push({newItegration:!0}),t(d),n.push(i)}},r=function(e){var t={},i=window.location.href.replace(window.opener.location.href+"/redirect","").split("&");i&&i.forEach((function(e){var i=e.split("=");i[1]&&(t[i[0]]=i[1])})),localStorage.setItem("__bitforms_"+e,JSON.stringify(t)),window.close()},o=function(e,t,i,n,s,r,o,c,f){if(n.dataCenter&&n.clientId&&n.clientSecret){c(!0);var m="https://accounts.zoho."+n.dataCenter+"/oauth/v2/auth?scope="+i+"&response_type=code&client_id="+n.clientId+"&prompt=Consent&access_type=offline&state="+encodeURIComponent(window.location.href)+"/redirect&redirect_uri="+encodeURIComponent(bits.zohoRedirectURL),u=window.open(m,e,"width=400,height=609,toolbar=off"),p=setInterval((function(){if(u.closed){clearInterval(p);var i={},r=!1,m=localStorage.getItem("__bitforms_"+e);if(m&&(r=!0,i=JSON.parse(m),localStorage.removeItem("__bitforms_"+e)),i.code&&!i.error&&i&&r){var h=(0,a.Z)({},n);h.accountServer=i["accounts-server"],d(t,i,h,s,o,c,f)}else{var _=i.error?"Cause: "+i.error:"";f({show:!0,msg:(0,l.__)("Authorization failed","bitform")+" "+_+". "+(0,l.__)("please try again","bitform")}),c(!1)}}}),500)}else r({dataCenter:n.dataCenter?"":(0,l.__)("Data center cann't be empty","bitform"),clientId:n.clientId?"":(0,l.__)("Client ID cann't be empty","bitform"),clientSecret:n.clientSecret?"":(0,l.__)("Secret key cann't be empty","bitform")})},d=function(e,t,i,s,r,o,d){var c=(0,a.Z)({},t);c.dataCenter=i.dataCenter,c.clientId=i.clientId,c.clientSecret=i.clientSecret,c.redirectURI=bits.zohoRedirectURL,(0,n.Z)(c,"bitforms_"+e+"_generate_token").then((function(e){return e})).then((function(e){if(e&&e.success){var t=(0,a.Z)({},i);t.tokenDetails=e.data,s(t),r(!0),d({show:!0,msg:(0,l.__)("Authorized Successfully","bitform")})}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?d({show:!0,msg:""+(0,l.__)("Authorization failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,l.__)("please try again","bitform")}):d({show:!0,msg:(0,l.__)("Authorization failed. please try again","bitform")});o(!1)}))},c=function(e,t,i,l,n){var s=(0,a.Z)({},t);n?l?s.relatedlists[n-1].upload_field_map.splice(e,0,{}):s.relatedlists[n-1].field_map.splice(e,0,{}):l?s.upload_field_map.splice(e,0,{}):s.field_map.splice(e,0,{}),i((0,a.Z)({},s))},f=function(e,t,i,l,n){var s=(0,a.Z)({},t);n?l?s.relatedlists[n-1].upload_field_map.length>1&&s.relatedlists[n-1].upload_field_map.splice(e,1):s.relatedlists[n-1].field_map.length>1&&s.relatedlists[n-1].field_map.splice(e,1):l?s.upload_field_map.length>1&&s.upload_field_map.splice(e,1):s.field_map.length>1&&s.field_map.splice(e,1),i((0,a.Z)({},s))},m=function(e,t,i,l,n,s){var r=(0,a.Z)({},i);s?n?r.relatedlists[s-1].upload_field_map[t][e.target.name]=e.target.value:r.relatedlists[s-1].field_map[t][e.target.name]=e.target.value:n?r.upload_field_map[t][e.target.name]=e.target.value:r.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(s?r.relatedlists[s-1].field_map[t].customValue="":r.field_map[t].customValue=""),l((0,a.Z)({},r))},u=function(e,t,i,l,n){var s=(0,a.Z)({},i);n?s.relatedlists[n-1].field_map[t].customValue=e.target.value:s.field_map[t].customValue=e.target.value,l((0,a.Z)({},s))}},82780:(e,t,i)=>{i.d(t,{Z:()=>n});var a=i(57852),l=i(4637);function n(e){var t=e.step,i=e.saveConfig,n=e.edit,s=e.disabled;return n?(0,l.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,l.jsx)("button",{onClick:i,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:s,children:(0,a.__)("Update","bitform")})}):(0,l.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,l.jsx)("h2",{className:"ml-3",children:(0,a.__)("Successfully Integrated","bitform")}),(0,l.jsxs)("button",{onClick:i,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,a.__)("Finish & Save ","bitform")," ✔"]})]})}},56186:(e,t,i)=>{i.d(t,{Pd:()=>c,Pg:()=>d,Rx:()=>s,aS:()=>o});var a=i(72564),l=i(57852),n=i(2850),s=function(e,t,i,l,n,s,o,d,c){var f=(0,a.Z)({},i);if(o){var m=(0,a.Z)({},d);m[e.target.name]="",c((0,a.Z)({},m))}if(f[e.target.name]=e.target.value,"list"===e.target.name)f=r(f,t,l,n,s);l((0,a.Z)({},f))},r=function(e,t,i,l,n){var s,r,o=(0,a.Z)({},e);return o.field_map=[{formField:"",zohoFormField:"Contact Email"}],null!=o&&null!=(s=o.default)&&null!=(r=s.fields)&&r[o.list]||d(t,o,i,l,n),o},o=function(e,t,i,s,r){s(!0);var o={formID:e,id:t.id,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,n.Z)(o,"bitforms_zmarketingHub_refresh_lists").then((function(e){if(e&&e.success){var n=(0,a.Z)({},t);e.data.lists&&(n.default=(0,a.Z)({},n.default,{lists:e.data.lists})),e.data.tokenDetails&&(n.tokenDetails=e.data.tokenDetails),r({show:!0,msg:(0,l.__)("Lists refreshed","bitform")}),i((0,a.Z)({},n))}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?r({show:!0,msg:""+(0,l.__)("Lists refresh failed Cause:")+(e.data.data||e.data)+". "+(0,l.__)("please try again","bitform")}):r({show:!0,msg:(0,l.__)("Lists refresh failed. please try again","bitform")});s(!1)})).catch((function(){return s(!1)}))},d=function(e,t,i,s,r){var o=t.list;if(o){s(!0);var d={formID:e,list:o,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,n.Z)(d,"bitforms_zmarketingHub_refresh_contact_fields").then((function(e){if(e&&e.success){var n=(0,a.Z)({},t);e.data.fields?(n.default.fields||(n.default.fields={}),n.default.fields[o]=e.data,r({show:!0,msg:(0,l.__)("Contact Fields refreshed","bitform")})):r({show:!0,msg:(0,l.__)("Zoho didn't provide fields names for this list","bitform")}),e.data.tokenDetails&&(n.tokenDetails=e.data.tokenDetails),i((0,a.Z)({},n))}else r({show:!0,msg:(0,l.__)("Contact Fields refresh failed. please try again","bitform")});s(!1)})).catch((function(){return s(!1)}))}},c=function(e){return!((null!=e&&e.field_map?e.field_map.filter((function(t){var i,a,l;return!t.formField&&t.zohoFormField&&-1!==(null==e||null==(i=e.default)||null==(a=i.fields)||null==(l=a[e.list])?void 0:l.required.indexOf(t.zohoFormField))})):[]).length>0)}},43562:(e,t,i)=>{i.d(t,{Z:()=>p});var a=i(57852),l=i(55668),n=i(69369),s=i(56186),r=i(48291),o=i(8022),d=i(27461),c=i(34172),f=i(73111),m=i(4637);function u(e){var t,i,l,s,u=e.i,p=e.formFields,h=e.field,_=e.marketingHubConf,b=e.setMarketingHubConf,g=""===h.zohoFormField||-1===(null==(t=_.default.fields[_.list].required)?void 0:t.indexOf(h.zohoFormField)),v=(0,r.sJ)(o.hi).isPro;return(0,m.jsxs)("div",{className:"flx mt-2 mr-1",children:[(0,m.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,m.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:h.formField||"",onChange:function(e){return(0,n.wX)(e,u,_,b)},children:[(0,m.jsx)("option",{value:"",children:(0,a.__)("Select Field","bitform")}),(0,m.jsx)("optgroup",{label:"Form Fields",children:p.map((function(e){return"file-up"!==e.type&&(0,m.jsx)("option",{value:e.key,children:e.name},"ff-zhcrm-"+e.key)}))}),(0,m.jsx)("option",{value:"custom",children:(0,a.__)("Custom...","bitform")}),(0,m.jsx)("optgroup",{label:"General Smart Codes "+(v?"":"(PRO)"),children:v&&(null==c.C?void 0:c.C.map((function(e){return(0,m.jsx)("option",{value:e.name,children:e.label},"ff-rm-"+e.name)})))})]}),"custom"===h.formField&&(0,m.jsx)(f.Z,{onChange:function(e){return(0,n.mG)(e,u,_,b)},label:(0,a.__)("Custom Value","bitform"),className:"mr-2",type:"text",value:h.customValue,placeholder:(0,a.__)("Custom Value","bitform")}),(0,m.jsxs)("select",{className:"btcd-paper-inp",name:"zohoFormField",value:h.zohoFormField||"",disabled:!g,onChange:function(e){return(0,n.wX)(e,u,_,b)},children:[(0,m.jsx)("option",{value:"",children:(0,a.__)("Select Field","bitform")}),g?(null==_||null==(i=_.default)||null==(l=i.fields)||null==(s=l[_.list])?void 0:s.fields)&&_.default.fields[_.list].fields.map((function(e){return"Contact Email"!==e&&(0,m.jsx)("option",{value:e,children:e},e+"-1")})):(0,m.jsx)("option",{value:"Contact Email",children:(0,a.__)("Contact Email","bitform")},"contact_email")]})]}),(0,m.jsx)("button",{onClick:function(){return(0,n.FP)(u,_,b)},className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),g&&(0,m.jsx)("button",{onClick:function(){return(0,n.T5)(u,_,b)},className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:(0,m.jsx)(d.Z,{})})]})}function p(e){var t,i,r,o=e.formID,d=e.formFields,c=e.handleInput,f=e.marketingHubConf,p=e.setMarketingHubConf,h=e.isLoading,_=e.setisLoading,b=e.setSnackbar;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("br",{}),(0,m.jsx)("b",{className:"wdt-100 d-in-b",children:(0,a.__)("List:","bitform")}),(0,m.jsxs)("select",{onChange:function(e){return c(e)},name:"list",value:f.list,className:"btcd-paper-inp w-7",children:[(0,m.jsx)("option",{value:"",children:(0,a.__)("Select List","bitform")}),(null==f||null==(t=f.default)?void 0:t.lists)&&Object.values(f.default.lists).map((function(e){return(0,m.jsx)("option",{value:e.listkey,children:e.listname},e.listkey)}))]}),(0,m.jsx)("button",{onClick:function(){return(0,s.aS)(o,f,p,_,b)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,a.__)("Refresh MarketingHub Lists","bitform")+"'"},type:"button",disabled:h,children:"↻"}),(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),h&&(0,m.jsx)(l.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),f.list&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"mt-4",children:[(0,m.jsx)("b",{className:"wdt-100",children:(0,a.__)("Map Fields","bitform")}),(0,m.jsx)("button",{onClick:function(){return(0,s.Pg)(o,f,p,_,b)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,a.__)("Refresh MarketingHub Contact Fields","bitform")+"'"},type:"button",disabled:h,children:"↻"})]}),(0,m.jsx)("div",{className:"btcd-hr mt-1"}),(null==(i=f.default)||null==(r=i.fields)?void 0:r[f.list])&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"flx flx-around mt-2 mb-1",children:[(0,m.jsx)("div",{className:"txt-dp",children:(0,m.jsx)("b",{children:(0,a.__)("Form Fields","bitform")})}),(0,m.jsx)("div",{className:"txt-dp",children:(0,m.jsx)("b",{children:(0,a.__)("Zoho Fields","bitform")})})]}),f.field_map.map((function(e,t){return(0,m.jsx)(u,{i:t,field:e,marketingHubConf:f,formFields:d,setMarketingHubConf:p},"marketingHub-m-"+(t+9))})),(0,m.jsx)("div",{className:"txt-center  mt-2",style:{marginRight:85},children:(0,m.jsx)("button",{onClick:function(){return(0,n.FP)(f.field_map.length,f,p)},className:"icn-btn sh-sm",type:"button",children:"+"})})]})]})]})}}}]);