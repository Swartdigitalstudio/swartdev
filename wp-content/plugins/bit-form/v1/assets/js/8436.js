"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[8436],{8940:(e,i,t)=>{t.d(i,{Z:()=>s});var n=t(73305),a=t(4637);function s(e){var i=e.step,t=e.saveConfig,s=e.edit,l=e.disabled;return s?(0,a.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,a.jsx)("button",{onClick:t,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:l,children:(0,n.__)("Update","bitform")})}):(0,a.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===i&&"90%",height:3===i&&"100%"},children:[(0,a.jsx)("h2",{className:"ml-3",children:(0,n.__)("Successfully Integrated","bitform")}),(0,a.jsxs)("button",{onClick:t,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,n.__)("Finish & Save ","bitform")," ✔"]})]})}},68436:(e,i,t)=>{t.r(i),t.d(i,{default:()=>f});var n=t(665),a=t(59496),s=t(87230),l=t(73305),r=t(65194),d=t(53132),o=t(8940),c=t(22829),m=t(78131),u=t(4637);const f=function(e){var i=e.formFields,t=e.setIntegration,f=e.integrations,p=e.allIntegURL,b=(0,s.k6)(),h=(0,s.UO)(),_=h.id,v=h.formID,x=(0,a.useState)((0,n.Z)({},f[_])),g=x[0],j=x[1],F=(0,a.useState)(!1),C=F[0],N=F[1],y=(0,a.useState)({show:!1}),Z=y[0],w=y[1];return(0,u.jsxs)("div",{style:{width:900},children:[(0,u.jsx)(r.Z,{snack:Z,setSnackbar:w}),(0,u.jsxs)("div",{className:"flx mt-3",children:[(0,u.jsx)("b",{className:"wdt-200 d-in-b",children:(0,l.__)("Integration Name:","bit-integrations")}),(0,u.jsx)("input",{className:"btcd-paper-inp w-5",onChange:function(e){return(0,c.Rx)(e,g,j)},name:"name",value:g.name,type:"text",placeholder:(0,l.__)("Integration Name...","bit-integrations")})]}),(0,u.jsx)("br",{}),(0,u.jsx)(m.Z,{formID:v,formFields:i,handleInput:function(e){return(0,c.Rx)(e,g,j,N,w)},rapidmailConf:g,setRapidmailConf:j,isLoading:C,setIsLoading:N,setSnackbar:w}),(0,u.jsx)(o.Z,{edit:!0,saveConfig:function(){(0,c.Pd)(g)?(0,d.Mm)(f,t,p,g,b,_,1):w({show:!0,msg:(0,l.__)("Please map mandatory fields","bit-integrations")})},disabled:g.field_map.length<1}),(0,u.jsx)("br",{})]})}},22829:(e,i,t)=>{t.d(i,{Rx:()=>r,YG:()=>d,gn:()=>o,Pd:()=>c,P_:()=>m});var n=t(665),a=t(17607),s=t(73305),l=t(77111),r=function(e,i,t,a,s,l,r,d){var o=(0,n.Z)({},i),c=e.target.name;""!==e.target.value?o[c]=e.target.value:delete o[c],t((0,n.Z)({},o))},d=function(e,i,t,r){t(!0);var d={username:e.username,password:e.password},o=(0,l.Z)(d,"bitforms_rapidmail_get_all_recipients").then((function(a){if(a&&a.success){var s=(0,n.Z)({},e);return s.default||(s.default={}),a.data.recipientlists&&(s.default.recipientlists=a.data.recipientlists),i((0,n.Z)({},s)),t(!1),"Recipientlist refreshed successfully"}return t(!1),"Recipientlist refresh failed. please try again"}));a.ZP.promise(o,{success:function(e){return e},error:(0,s.__)("Error Occurred","bitform"),loading:(0,s.__)("Loading Recipientslist...")})},o=function(e){var i=null==e?void 0:e.recipientsFields.filter((function(e){return!0===e.required}));return i.length>0?i.map((function(e){return{formField:"",rapidmailFormField:e.key}})):[{formField:"",rapidmailFormField:""}]},c=function(e){return!((null!=e&&e.field_map?e.field_map.filter((function(e){return!e.formField||!e.rapidmailFormField||"custom"===!e.formField&&!e.customValue})):[]).length>0)},m=function(e,i,t,a,r,d){if(e.username&&e.password){t({}),r(!0);var o={username:e.username,password:e.password};(0,l.Z)(o,"bitforms_rapidmail_authorization").then((function(e){return e})).then((function(t){if(t&&t.success){var l=(0,n.Z)({},e);l.tokenDetails=t.data,i(l),a(!0),d({show:!0,msg:(0,s.__)("Authorized Successfully","bitform")})}else t&&t.data&&t.data.data||!t.success&&"string"===typeof t.data?d({show:!0,msg:""+(0,s.__)("Authorization failed Cause:","bitform")+(t.data.data||t.data)+". "+(0,s.__)("please try again","bitform")}):d({show:!0,msg:(0,s.__)("Authorization failed. please try again","bitform")});r(!1)}))}else t({username:e.username?"":(0,s.__)("Username can't be empty","bitform"),password:e.password?"":(0,s.__)("Password can't be empty","bitform")})}},78131:(e,i,t)=>{t.d(i,{Z:()=>x});t(59496);var n=t(73305),a=t(665),s=function(e,i,t){var n=(0,a.Z)({},i);n.field_map.splice(e,0,{}),t((0,a.Z)({},n))},l=function(e,i,t){var n=(0,a.Z)({},i);n.field_map.length>1&&n.field_map.splice(e,1),t((0,a.Z)({},n))},r=function(e,i,t,n){var s=(0,a.Z)({},t);s.field_map[i][e.target.name]=e.target.value,"custom"===e.target.value&&(s.field_map[i].customValue=""),n((0,a.Z)({},s))},d=function(e,i,t,n){var s=(0,a.Z)({},t);s.field_map[i].customValue=e.target.value,n((0,a.Z)({},s))},o=t(2598),c=t(4637);function m(e){var i,t=e.rapidmailConf,s=e.setRapidmailConf;e.formFields;return(0,c.jsx)("div",{className:"pos-rel d-flx w-8",children:(0,c.jsx)(o.Z,{checked:(null==(i=t.actions)?void 0:i.send_activationmail)||!1,onChange:function(e){return function(e,i){var n=(0,a.Z)({},t);"send_activationmail"===i&&(e.target.checked?n.actions.send_activationmail=!0:delete n.actions.send_activationmail),s((0,a.Z)({},n))}(e,"send_activationmail")},className:"wdt-200 mt-4 mr-2",value:"send_activationmail",title:(0,n.__)("Send Activation Email","bitform"),subTitle:(0,n.__)("Add Send Activation Email","bitform")})})}var u=t(22829),f=t(44084),p=t(37029),b=t(2699),h=t(84448),_=t(94557);function v(e){var i,t=e.i,o=e.formFields,m=e.field,v=e.rapidmailConf,x=e.setRapidmailConf;if(1===(null==v||null==(i=v.field_map)?void 0:i.length)&&""===m.rapidmailFormField){var g=(0,a.Z)({},v),j=(0,u.gn)(g);g.field_map=j,x(g)}var F=(null==v?void 0:v.recipientsFields.filter((function(e){return!0===e.required})))||[],C=(null==v?void 0:v.recipientsFields.filter((function(e){return!1===e.required})))||[],N=(0,f.sJ)(h.hi).isPro;return(0,c.jsxs)("div",{className:"flx mt-2 mr-1",children:[(0,c.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,c.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:m.formField||"",onChange:function(e){return r(e,t,v,x)},children:[(0,c.jsx)("option",{value:"",children:(0,n.__)("Select Field","bitform")}),(0,c.jsx)("optgroup",{label:"Form Fields",children:null==o?void 0:o.map((function(e){return(0,c.jsx)("option",{value:e.key,children:e.name},"ff-rm-"+e.key)}))}),(0,c.jsx)("option",{value:"custom",children:(0,n.__)("Custom...","bitform")}),(0,c.jsx)("optgroup",{label:"General Smart Codes "+(N?"":"(PRO)"),children:N&&(null==b.C?void 0:b.C.map((function(e){return(0,c.jsx)("option",{value:e.name,children:e.label},"ff-rm-"+e.name)})))})]}),"custom"===m.formField&&(0,c.jsx)(p.Z,{onChange:function(e){return d(e,t,v,x)},label:(0,n.__)("Custom Value","bitform"),className:"mr-2",type:"text",value:m.customValue,placeholder:(0,n.__)("Custom Value","bitform")}),(0,c.jsxs)("select",{className:"btcd-paper-inp",disabled:t<F.length,name:"rapidmailFormField",value:t<F?F[t].label||"":m.rapidmailFormField||"",onChange:function(e){return r(e,t,v,x)},children:[(0,c.jsx)("option",{value:"",children:(0,n.__)("Select Field","bitform")}),t<F.length?(0,c.jsx)("option",{value:F[t].key,children:F[t].label},F[t].key):C.map((function(e){var i=e.key,t=e.label;return(0,c.jsx)("option",{value:i,children:t},i)}))]})]}),t>=F.length&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{onClick:function(){return s(t,v,x)},className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),(0,c.jsx)("button",{onClick:function(){return l(t,v,x)},className:"icn-btn sh-sm",type:"button","aria-label":"btn",children:(0,c.jsx)(_.Z,{})})]})]})}function x(e){var i,t=e.formFields,a=e.handleInput,l=e.rapidmailConf,r=e.setRapidmailConf,d=e.isLoading,o=e.setIsLoading,f=e.setSnackbar;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("br",{}),(0,c.jsx)("b",{className:"wdt-200 d-in-b",children:(0,n.__)("Recipient:","bitform")}),(0,c.jsxs)("select",{onChange:a,name:"recipient_id",value:null==l?void 0:l.recipient_id,className:"btcd-paper-inp w-5",children:[(0,c.jsx)("option",{value:"",children:(0,n.__)("Select Recipients","bitform")}),(null==l||null==(i=l.default)?void 0:i.recipientlists)&&l.default.recipientlists.map((function(e){var i=e.id,t=e.name;return(0,c.jsx)("option",{value:i,children:t},i)}))]}),(0,c.jsx)("button",{onClick:function(){return(0,u.YG)(l,r,o,f)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,n.__)("Fetch All Recipients","bitform")+"'"},type:"button",disabled:d,children:"↻"}),(0,c.jsx)("br",{}),(0,c.jsx)("div",{className:"mt-5",children:(0,c.jsx)("b",{className:"wdt-100",children:(0,n.__)("Field Map","bitform")})}),(0,c.jsx)("div",{className:"btcd-hr mt-1"}),(0,c.jsxs)("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[(0,c.jsx)("div",{className:"txt-dp",children:(0,c.jsx)("b",{children:(0,n.__)("Form Fields","bitform")})}),(0,c.jsx)("div",{className:"txt-dp",children:(0,c.jsx)("b",{children:(0,n.__)("Rapidmail Fields","bitform")})})]}),(null==l?void 0:l.recipient_id)&&(null==l?void 0:l.field_map.map((function(e,i){return(0,c.jsx)(v,{i,field:e,rapidmailConf:l,formFields:t,setRapidmailConf:r,setSnackbar:f},"rp-m-"+(i+9))}))),(0,c.jsx)("div",{className:"txt-center mt-2",style:{marginRight:85},children:(0,c.jsx)("button",{onClick:function(){return s(l.field_map.length,l,r,!1)},className:"icn-btn sh-sm",type:"button",children:"+"})}),(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),(null==l?void 0:l.recipient_id)&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"mt-4",children:(0,c.jsx)("b",{className:"wdt-100",children:(0,n.__)("Actions","bitform")})}),(0,c.jsx)("div",{className:"btcd-hr mt-1"}),(0,c.jsx)(m,{rapidmailConf:l,setRapidmailConf:r,formFields:t})]})]})}}}]);