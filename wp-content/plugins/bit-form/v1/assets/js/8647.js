"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[8647],{8940:(e,a,t)=>{t.d(a,{Z:()=>l});var s=t(73305),n=t(4637);function l(e){var a=e.step,t=e.saveConfig,l=e.edit,i=e.disabled;return l?(0,n.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,n.jsx)("button",{onClick:t,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:i,children:(0,s.__)("Update","bitform")})}):(0,n.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===a&&"90%",height:3===a&&"100%"},children:[(0,n.jsx)("h2",{className:"ml-3",children:(0,s.__)("Successfully Integrated","bitform")}),(0,n.jsxs)("button",{onClick:t,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,s.__)("Finish & Save ","bitform")," ✔"]})]})}},88327:(e,a,t)=>{t.d(a,{Rx:()=>i,GQ:()=>c,Tf:()=>u,j0:()=>m});var s=t(665),n=t(73305),l=t(77111),i=(t(33591),function(e,a,t,n,l,i){var c=(0,s.Z)({},a),d=e.target,u=d.name,m=d.value;switch(c[u]=m,u){case"workspace":c=r(c,n,t,l,i);break;case"table":c=o(c,n,t,l,i)}t((0,s.Z)({},c))}),r=function(e,a,t,n,l){var i,r,o,c,f=(0,s.Z)({},e);if(f.table="",f.field_map=[{formField:"",zohoFormField:""}],null!=f&&null!=(i=f.default)&&null!=(r=i.tables)&&r[e.workspace]){if(1===Object.keys(null==f||null==(o=f.default)||null==(c=o.tables)?void 0:c[e.workspace]).length){var h,p,b,_,x;f.table=null==f||null==(h=f.default)||null==(p=h.tables)?void 0:p[e.workspace][0].viewName,null!=f&&null!=(b=f.default)&&null!=(_=b.tables)&&null!=(x=_.headers)&&x[f.table]||m(a,f,t,n,l)}}else u(a,f,t,n,l);return e.default.users||d(a,e,t,n,l),f},o=function(e,a,t,n,l){var i,r,o,c=(0,s.Z)({},e);return c.field_map=[{formField:"",zohoFormField:""}],null!=c&&null!=(i=c.default)&&null!=(r=i.tables)&&null!=(o=r.headers)&&o[e.table]||m(a,c,t,n,l),c},c=function(e,a,t,i,r){i(!0);var o={formID:e,id:a.id,dataCenter:a.dataCenter,clientId:a.clientId,clientSecret:a.clientSecret,tokenDetails:a.tokenDetails,ownerEmail:a.ownerEmail};(0,l.Z)(o,"bitforms_zanalytics_refresh_workspaces").then((function(e){if(e&&e.success){var l=(0,s.Z)({},a);l.default||(l.default={}),e.data.workspaces&&(l.default.workspaces=e.data.workspaces),e.data.tokenDetails&&(l.tokenDetails=e.data.tokenDetails),r({show:!0,msg:(0,n.__)("Workspaces refreshed","bitform")}),t((0,s.Z)({},l))}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?r({show:!0,msg:""+(0,n.__)("Workspaces refresh failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,n.__)("please try again","bitform")}):r({show:!0,msg:(0,n.__)("Workspaces refresh failed. please try again","bitform")});i(!1)})).catch((function(){return i(!1)}))},d=function(e,a,t,i,r){i(!0);var o={formID:e,id:a.id,dataCenter:a.dataCenter,clientId:a.clientId,clientSecret:a.clientSecret,tokenDetails:a.tokenDetails,ownerEmail:a.ownerEmail};(0,l.Z)(o,"bitforms_zanalytics_refresh_users").then((function(e){if(e&&e.success){var l=(0,s.Z)({},a);l.default||(l.default={}),e.data.users&&(l.default.users=e.data.users),e.data.tokenDetails&&(l.tokenDetails=e.data.tokenDetails),r({show:!0,msg:(0,n.__)("Users refreshed","bitform")}),t((0,s.Z)({},l))}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?r({show:!0,msg:""+(0,n.__)("Users refresh failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,n.__)("please try again","bitform")}):r({show:!0,msg:(0,n.__)("Users refresh failed. please try again","bitform")});i(!1)})).catch((function(){return i(!1)}))},u=function(e,a,t,i,r){var o=a.workspace;if(o){i(!0);var c={formID:e,workspace:o,dataCenter:a.dataCenter,clientId:a.clientId,clientSecret:a.clientSecret,tokenDetails:a.tokenDetails,ownerEmail:a.ownerEmail};(0,l.Z)(c,"bitforms_zanalytics_refresh_tables").then((function(e){if(e&&e.success){var l=(0,s.Z)({},a);e.data.tables&&(l.default.tables||(l.default.tables={}),l.default.tables[o]=e.data.tables),e.data.tokenDetails&&(l.tokenDetails=e.data.tokenDetails),r({show:!0,msg:(0,n.__)("Tables refreshed","bitform")}),t((0,s.Z)({},l))}else r({show:!0,msg:(0,n.__)("Tables refresh failed. please try again","bitform")});i(!1)})).catch((function(){return i(!1)}))}},m=function(e,a,t,i,r){var o=a.workspace,c=a.table;if(c){i(!0);var d={formID:e,workspace:o,table:c,dataCenter:a.dataCenter,clientId:a.clientId,clientSecret:a.clientSecret,tokenDetails:a.tokenDetails,ownerEmail:a.ownerEmail};(0,l.Z)(d,"bitforms_zanalytics_refresh_table_headers").then((function(e){if(e&&e.success){var l=(0,s.Z)({},a);e.data.table_headers?(l.default.tables.headers||(l.default.tables.headers={}),l.default.tables.headers[c]=e.data.table_headers,r({show:!0,msg:(0,n.__)("Table Headers refreshed","bitform")})):r({show:!0,msg:(0,n.__)("Zoho didn't provide column names for this table","bitform")}),e.data.tokenDetails&&(l.tokenDetails=e.data.tokenDetails),t((0,s.Z)({},l))}else r({show:!0,msg:(0,n.__)("Table Headers refresh failed. please try again","bitform")});i(!1)})).catch((function(){return i(!1)}))}}},29214:(e,a,t)=>{t.d(a,{Z:()=>y});var s=t(73305),n=t(67860),l=t(665),i=t(59496),r=t(19753),o=t(44246),c=t(2598),d=t(12859),u=t(31702),m=t(4637);function f(e){var a,t,n,f,h,p,b,_,x,v=e.analyticsConf,j=e.setAnalyticsConf,w=e.formFields,y=(0,i.useState)(!1),N=y[0],k=y[1],g=(0,i.useState)({show:!1}),Z=g[0],C=g[1],D={read:[{apiName:"ZOHO_READ",displayLabel:"Read Access"},{apiName:"ZOHO_EXPORT",displayLabel:"Export Data"}],write:[{apiName:"ZOHO_ADDROW",displayLabel:"Add Row"},{apiName:"ZOHO_UPDATEROW",displayLabel:"Modify Row"},{apiName:"ZOHO_DELETEROW",displayLabel:"Delete Row"},{apiName:"ZOHO_DELETEALLROWS",displayLabel:"Delete All"}],import:[{apiName:"ZOHO_IMPORT_APPEND",displayLabel:"Only Append Rows"},{apiName:"ZOHO_IMPORT_ADDORUPDATE",displayLabel:"Add or Update Rows"},{apiName:"ZOHO_IMPORT_DELETEALLADD",displayLabel:"Delete All Rows and Add New Rows"}],share:[{apiName:"ZOHO_SHARE",displayLabel:"Share View / Child Reports"}]},O=function(e,a){var t=(0,l.Z)({},v);"criteria"===a&&(t.actions.update.criteria=e),"insert"===a&&(t.actions.update.insert=e),j((0,l.Z)({},t))},E=function(e,a,t){var s,n=(0,l.Z)({},v);if(null!=(s=n.actions)&&s.share||(n.actions.share={}),n.actions.share.permissions||(n.actions.share.permissions={read:["ZOHO_READ"]}),"parent"===e){n.actions.share.permissions[a]||(n.actions.share.permissions[a]=[]);var i=D[a].map((function(e){return e.apiName}));i.every((function(e){return n.actions.share.permissions[a].includes(e)}))?"read"===a?n.actions.share.permissions.read=["ZOHO_READ"]:delete n.actions.share.permissions[a]:n.actions.share.permissions[a]=i}else if("value"===e){n.actions.share.permissions[t]||(n.actions.share.permissions[t]=[]);var r=n.actions.share.permissions[t].indexOf(a);-1!==r?(n.actions.share.permissions[t].splice(r,1),n.actions.share.permissions[t].length||delete n.actions.share.permissions[t]):n.actions.share.permissions[t].push(a)}else n.actions.share[e]=a;j((0,l.Z)({},n))};return(0,i.useEffect)((function(){var e,a;if(!N&&(null==(e=v.actions)||null==(a=e.update)||!a.criteria)){var t=(0,l.Z)({},v);delete t.actions.update,j((0,l.Z)({},t))}}),[N]),(0,m.jsxs)("div",{className:"pos-rel",children:[(0,m.jsxs)("div",{className:"d-flx flx-wrp",children:[(0,m.jsx)(u.Z,{action:function(){var e;if(null==(e=v.actions)||!e.update){var a=(0,l.Z)({},v);a.actions.update={insert:!0,criteria:""},j((0,l.Z)({},a))}k(!0)},children:(0,m.jsx)(c.Z,{onChange:function(e){return function(e,a){var t,s=(0,l.Z)({},v);"update"===a&&(!e.target.checked||null!=s&&null!=(t=s.actions)&&t.update?delete s.actions.update:(s.actions.update={insert:!0,criteria:""},k(!0))),j((0,l.Z)({},s))}(e,"update")},checked:"update"in(null==v?void 0:v.actions),className:"wdt-200 mt-4 mr-2",value:"Upsert_Record",title:(0,s.__)("Update Row","bitofrm"),subTitle:(0,s.__)("Control how the row gets updated.","bitform")})}),(0,m.jsx)(c.Z,{checked:(null==v||null==(a=v.actions)||null==(t=a.share)?void 0:t.email)||!1,onChange:function(){return C({show:"share"})},className:"wdt-200 mt-4 mr-2",value:"user_share",title:(0,s.__)("Share Table","bitofrm"),subTitle:(0,s.__)("Share Table with users pushed to Zoho Analytics.","bitform")})]}),(0,m.jsx)(d.Z,{md:!0,show:N,setModal:k,title:(0,s.__)("Update Row","bitform"),children:(0,m.jsx)("div",{className:"o-a",children:(null==v||null==(n=v.actions)?void 0:n.update)&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("small",{children:(0,s.__)("Enter the criteria to update rows. Please use the below format.","bitform")}),(0,m.jsx)("br",{}),(0,m.jsxs)("div",{className:"mt-4",children:[(0,m.jsxs)("small",{children:[(0,s.__)("Example","bitform"),": ",'("Table Name"."Department" = \'Finance\' and "Table Name"."Salary" < 9000 or "Table Name"."Country" = \'USA\')']}),(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),(0,m.jsx)("small",{children:(0,s.__)("Here Department, Salary and Country are Zoho Analytics table column name","bitform")}),(0,m.jsx)("span",{className:"icn-btn ml-2 tooltip",style:{"--tooltip-txt":"'"+(0,s.__)("Supported Arithmetic Operators: ( +, -, *, / ) and Supported Relational Operators: ( =, !=, <, >, <=, >=, LIKE, NOT LIKE, IN, NOT IN, BETWEEN )","bitform")+"'","--tt-wrap":"wrap","--tt-width":"225px",fontSize:15},children:(0,m.jsx)("span",{className:"btcd-icn icn-information-outline"})}),(0,m.jsx)("textarea",{name:"",rows:"5",className:"btcd-paper-inp mt-1",onChange:function(e){return O(e.target.value,"criteria")},value:null==(f=v.actions)||null==(h=f.update)?void 0:h.criteria})]}),(0,m.jsx)("div",{className:"font-w-m mt-3",children:(0,s.__)("Update Preferance","bitform")}),(0,m.jsx)("small",{children:"insert new row if the above criteria doesn't met?"}),(0,m.jsxs)("div",{children:[(0,m.jsx)(o.Z,{onChange:function(){return O(!0,"insert")},radio:!0,checked:null==(p=v.actions.update)?void 0:p.insert,name:"up-row",title:(0,s.__)("Yes","bitform")}),(0,m.jsx)(o.Z,{onChange:function(){return O(!1,"insert")},radio:!0,checked:!(null!=(b=v.actions.update)&&b.insert),name:"up-row",title:(0,s.__)("No","bitform")})]})]})})}),(0,m.jsx)(d.Z,{md:!0,show:"share"===Z.show,setModal:function(){return C({show:!1})},title:(0,s.__)("Share Settings","bitform"),children:(0,m.jsxs)("div",{className:"o-a",style:{height:"95%"},children:[(0,m.jsx)("div",{className:"mt-2 mb-1",children:(0,s.__)("Enter Email Addresses","bitform")}),(0,m.jsx)(r.Z,{className:"btcd-paper-drpdwn w-9 mr-2",placeholder:"Input Email Address(s)",defaultValue:null==v||null==(_=v.actions)||null==(x=_.share)?void 0:x.email,onChange:function(e){return E("email",e)},options:function(){var e,a=[{title:"Zoho Analytics Users",type:"group",childs:[]},{title:"Form Fields",type:"group",childs:[]}];return(null==v||null==(e=v.default)?void 0:e.users.length)>0&&(a[0].childs=v.default.users.map((function(e){return{label:e,value:e}}))),a[1].childs=w.map((function(e){return{label:e.name,value:"${"+e.key+"}"}})),a}(),customValue:!0}),(0,m.jsx)("small",{children:(0,s.__)("you can select analytics users or select form fields value or even can input custom email address as well","bitform")}),(0,m.jsx)("div",{className:"btcd-hr mt-2"}),(0,m.jsx)("div",{className:"mt-2 mb-1 font-w-m",children:(0,s.__)("Permissions Settings","bitform")}),(0,m.jsx)("div",{className:"btcd-hr mt-2"}),Object.keys(D).map((function(e){return(0,m.jsxs)("div",{children:[(0,m.jsx)(o.Z,{className:"font-w-m btcd-ttc",onChange:function(){return E("parent",e)},title:e+" Options",checked:D[e].map((function(e){return e.apiName})).every((function(a){var t,s,n,l;return null==v||null==(t=v.actions)||null==(s=t.share)||null==(n=s.permissions)||null==(l=n[e])?void 0:l.includes(a)}))}),(0,m.jsx)("div",{className:"flx",children:D[e].map((function(a){var t,s,n,l;return(0,m.jsx)(o.Z,{className:"scl-7",value:"true",title:(0,m.jsx)("span",{children:a.displayLabel}),sqr:!0,checked:(null==(t=v.actions)||null==(s=t.share)||null==(n=s.permissions)||null==(l=n[e])?void 0:l.indexOf(a.apiName))>=0,onChange:function(){return E("value",a.apiName,e)},disabled:"ZOHO_READ"===a.apiName||!1},a.apiName)}))}),(0,m.jsx)("div",{className:"btcd-hr mt-2"})]},e)}))]})})]})}var h=t(88327),p=t(44084),b=t(84448),_=t(94557),x=t(2699),v=t(37029),j=function(e,a,t){var s=(0,l.Z)({},a);s.field_map.splice(e,0,{}),t(s)};function w(e){var a=e.i,t=e.formFields,n=e.field,i=e.analyticsConf,r=e.setAnalyticsConf,o=(0,p.sJ)(b.hi).isPro,c=function(e,a){var t=(0,l.Z)({},i);t.field_map[a][e.target.name]=e.target.value,"custom"===e.target.value&&(t.field_map[a].customValue=""),r(t)};return(0,m.jsxs)("div",{className:"flx flx-around mt-2 mr-1",children:[(0,m.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,m.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:n.formField||"",onChange:function(e){return c(e,a)},children:[(0,m.jsx)("option",{value:"",children:(0,s.__)("Select Field","bitform")}),(0,m.jsx)("optgroup",{label:"Form Fields",children:t.map((function(e){return"file-up"!==e.type&&(0,m.jsx)("option",{value:e.key,children:e.name},"ff-zhcrm-"+e.key)}))}),(0,m.jsx)("option",{value:"custom",children:(0,s.__)("Custom...","bitform")}),(0,m.jsx)("optgroup",{label:"General Smart Codes "+(o?"":"(PRO)"),children:o&&(null==x.C?void 0:x.C.map((function(e){return(0,m.jsx)("option",{value:e.name,children:e.label},"ff-rm-"+e.name)})))})]}),"custom"===n.formField&&(0,m.jsx)(v.Z,{onChange:function(e){return function(e,a){var t=(0,l.Z)({},i);t.field_map[a].customValue=e.target.value,r(t)}(e,a)},label:(0,s.__)("Custom Value","bitform"),className:"mr-2",type:"text",value:n.customValue,placeholder:(0,s.__)("Custom Value","bitform")}),(0,m.jsxs)("select",{className:"btcd-paper-inp",name:"zohoFormField",value:n.zohoFormField||"",onChange:function(e){return c(e,a)},children:[(0,m.jsx)("option",{value:"",children:(0,s.__)("Select Field","bitform")}),Object.values(i.default.tables.headers[i.table]).map((function(e){return(0,m.jsx)("option",{value:e,children:e},e+"-1")}))]})]}),(0,m.jsx)("button",{onClick:function(){return j(a,i,r)},className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),(0,m.jsx)("button",{onClick:function(){return function(e){var a=(0,l.Z)({},i);a.field_map.length>1&&a.field_map.splice(e,1),r(a)}(a)},className:"icn-btn sh-sm ml-2",type:"button","aria-label":"btn",children:(0,m.jsx)(_.Z,{})})]})}function y(e){var a,t,l,i,r,o,c=e.formID,d=e.formFields,u=e.handleInput,p=e.analyticsConf,b=e.setAnalyticsConf,_=e.isLoading,x=e.setisLoading,v=e.setSnackbar;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("br",{}),(0,m.jsx)("b",{className:"wdt-100 d-in-b",children:(0,s.__)("Workspace:","bitform")}),(0,m.jsxs)("select",{onChange:u,name:"workspace",value:p.workspace,className:"btcd-paper-inp w-7",children:[(0,m.jsx)("option",{value:"",children:(0,s.__)("Select Workspace","bitform")}),(null==p||null==(a=p.default)?void 0:a.workspaces)&&p.default.workspaces.map((function(e){return(0,m.jsx)("option",{value:e,children:e},e)}))]}),(0,m.jsx)("button",{onClick:function(){return(0,h.GQ)(c,p,b,x,v)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,s.__)("Refresh Analytics Workspaces","bitform")+"'"},type:"button",disabled:_,children:"↻"}),(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),(0,m.jsx)("b",{className:"wdt-100 d-in-b",children:(0,s.__)("Table:","bitform")}),(0,m.jsxs)("select",{onChange:u,name:"table",value:p.table,className:"btcd-paper-inp w-7",children:[(0,m.jsx)("option",{value:"",children:(0,s.__)("Select Table","bitform")}),(null==p||null==(t=p.default)||null==(l=t.tables)?void 0:l[p.workspace])&&p.default.tables[p.workspace].map((function(e){return(0,m.jsx)("option",{value:e,children:e},e)}))]}),(0,m.jsx)("button",{onClick:function(){return(0,h.Tf)(c,p,b,x,v)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh Analytics Tables"'},type:"button",disabled:_,children:"↻"}),(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),(0,m.jsx)("small",{style:{color:"red",marginLeft:105},children:(0,s.__)("** Zoho Analytics doesn't support data INSERT / UPDATE in other integration table","bitform")}),_&&(0,m.jsx)(n.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),(null==(i=p.default)||null==(r=i.tables)||null==(o=r.headers)?void 0:o[p.table])&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"mt-4",children:[(0,m.jsx)("b",{className:"wdt-100",children:(0,s.__)("Map Fields","bitform")}),(0,m.jsx)("button",{onClick:function(){return(0,h.j0)(c,p,b,x,v)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,s.__)("Refresh Analytics Table Headers","bitform")+"'"},type:"button",disabled:_,children:"↻"})]}),(0,m.jsx)("div",{className:"btcd-hr mt-1"}),(0,m.jsxs)("div",{className:"flx flx-around mt-2 mb-1",children:[(0,m.jsx)("div",{className:"txt-dp",children:(0,m.jsx)("b",{children:(0,s.__)("Form Fields","bitform")})}),(0,m.jsx)("div",{className:"txt-dp",children:(0,m.jsx)("b",{children:(0,s.__)("Zoho Fields","bitform")})})]}),p.field_map.map((function(e,a){return(0,m.jsx)(w,{i:a,field:e,analyticsConf:p,formFields:d,setAnalyticsConf:b},"analytics-m-"+(a+9))})),(0,m.jsx)("div",{className:"txt-center  mt-2",style:{marginRight:85},children:(0,m.jsx)("button",{onClick:function(){return j(p.field_map.length,p,b)},className:"icn-btn sh-sm",type:"button",children:"+"})}),(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),(0,m.jsx)("div",{className:"mt-4",children:(0,m.jsx)("b",{className:"wdt-100",children:(0,s.__)("Actions","bitform")})}),(0,m.jsx)("div",{className:"btcd-hr mt-1"}),(0,m.jsx)(f,{analyticsConf:p,setAnalyticsConf:b,formFields:d})]})]})}},44246:(e,a,t)=>{t.d(a,{Z:()=>n});var s=t(4637);const n=function(e){var a=e.className,t=e.disabled,n=e.checked,l=e.onChange,i=e.radio,r=e.name,o=e.title,c=e.value,d=e.sqr;return(0,s.jsxs)("label",{className:"btcd-ck-wrp "+a,children:[o,(0,s.jsx)("input",{type:i?"radio":"checkbox",checked:n,onChange:l,name:r,value:c,disabled:t}),(0,s.jsx)("span",{className:"btcd-mrk "+(!d&&"br-50")+" "+(i?"rdo":"ck")})]})}},31702:(e,a,t)=>{t.d(a,{Z:()=>l});var s=t(61473),n=t(4637);function l(e){var a=e.action,t=e.children;return(0,n.jsxs)("div",{className:"action-btn-wrapper",children:[(0,n.jsx)("div",{className:"action-btn",tabIndex:"0",role:"button",onClick:a,onKeyPress:a,children:(0,n.jsx)(s.Z,{})}),t]})}}}]);