"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[8652],{8940:(e,t,l)=>{l.d(t,{Z:()=>i});var n=l(73305),s=l(4637);function i(e){var t=e.step,l=e.saveConfig,i=e.edit,a=e.disabled;return i?(0,s.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,s.jsx)("button",{onClick:l,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:a,children:(0,n.__)("Update","bitform")})}):(0,s.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,s.jsx)("h2",{className:"ml-3",children:(0,n.__)("Successfully Integrated","bitform")}),(0,s.jsxs)("button",{onClick:l,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,n.__)("Finish & Save ","bitform")," ✔"]})]})}},1544:(e,t,l)=>{l.d(t,{Rx:()=>a,aS:()=>r,e1:()=>d,Pl:()=>u,Pd:()=>o});var n=l(665),s=l(73305),i=l(77111),a=function(e,t,l){var s=(0,n.Z)({},t);s.name=e.target.value,l((0,n.Z)({},s))},r=function(e,t,l,a){l(!0);var r={api_key:e.api_key};(0,i.Z)(r,"bitforms_sblue_refresh_lists").then((function(i){if(i&&i.success){var r=(0,n.Z)({},e);r.default||(r.default={}),i.data.sblueList&&(r.default.sblueList=i.data.sblueList),a({show:!0,msg:(0,s.__)("List refreshed","bitform")}),t((0,n.Z)({},r))}else i&&i.data&&i.data.data||!i.success&&"string"===typeof i.data?a({show:!0,msg:(0,s.g)((0,s.__)("List refresh failed Cause: %s. please try again","bitform"),i.data.data||i.data)}):a({show:!0,msg:(0,s.__)("List failed. please try again","bitform")});l(!1)})).catch((function(){return l(!1)}))},d=function(e,t,l){var a={api_key:e.api_key};(0,i.Z)(a,"bitforms_sblue_refresh_template").then((function(i){if(i&&i.success){var a=(0,n.Z)({},e);a.default||(a.default={}),i.data.sblueTemplates&&(a.default.sblueTemplates=i.data.sblueTemplates),l({show:!0,msg:(0,s.__)("Templates refreshed","bitform")}),t((0,n.Z)({},a))}else i&&i.data&&i.data.data||!i.success&&"string"===typeof i.data?l({show:!0,msg:(0,s.g)((0,s.__)("Templates refresh failed Cause: %s. please try again","bitform"),i.data.data||i.data)}):l({show:!0,msg:(0,s.__)("Templates failed. please try again","bitform")})}))},u=function(e,t,l,a){var r={api_key:e.api_key};(0,i.Z)(r,"bitforms_sblue_headers").then((function(i){if(i&&i.success){var r=(0,n.Z)({},e);if(i.data.sendinBlueField){r.default.fields=i.data.sendinBlueField;var d=r.default.fields;r.field_map=Object.values(d).filter((function(e){return e.required})).map((function(e){return{formField:"",sendinBlueField:e.fieldId,required:!0}})),a({show:!0,msg:(0,s.__)("SendinBlue fields refreshed","bitform")})}else a({show:!0,msg:(0,s.__)("No SendinBlue fields found. Try changing the header row number or try again","bitform")});t((0,n.Z)({},r))}else a({show:!0,msg:(0,s.__)("SendinBlue fields refresh failed. please try again","bitform")});l(!1)})).catch((function(){return l(!1)}))},o=function(e){var t,l=null!=e&&e.field_map?e.field_map.filter((function(e){return!e.formField&&e.sendinBlueField&&e.required})):[];return(!e.lists||void 0!==(null==(t=e.lists)?void 0:t.length))&&!(l.length>0)}},66392:(e,t,l)=>{l.d(t,{Z:()=>_});var n=l(665),s=l(19753),i=l(73305),a=l(67860),r=l(53132),d=l(2598),u=l(1544),o=l(4637);function c(e){var t,l=e.sendinBlueConf,s=e.setSendinBlueConf,a=(e.setisLoading,e.setSnackbar);return(0,o.jsx)("div",{className:"pos-rel d-flx w-8",children:(0,o.jsx)(d.Z,{checked:(null==(t=l.actions)?void 0:t.update)||!1,onChange:function(e){return function(e,t){var i=(0,n.Z)({},l);"update"===t&&(e.target.checked?i.actions.update=!0:delete i.actions.update),"double_optin"===t&&(e.target.checked?(i.actions.double_optin=!0,i.templateId="",i.redirectionUrl="",(0,u.e1)(i,s,a)):(delete i.actions.double_optin,delete i.templateId,delete i.redirectionUrl)),s((0,n.Z)({},i))}(e,"update")},className:"wdt-200 mt-4 mr-2",value:"user_share",title:(0,i.__)("Update SendinBlue","bitform"),subTitle:(0,i.__)("Update Responses with SendinBlue existing email?","bitform")})})}var m=l(44084),f=l(84448),b=l(94557),p=l(2699),h=l(37029);function x(e){var t,l,s,a=e.i,r=e.formFields,d=e.field,u=e.sendinBlueConf,c=e.setSendinBlueConf,x=d.required,_=(null==u||null==(t=u.default)?void 0:t.fields)&&Object.values(null==u||null==(l=u.default)?void 0:l.fields).filter((function(e){return!e.required})),v=(0,m.sJ)(f.hi).isPro,j=function(e,t){var l=(0,n.Z)({},u);l.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(l.field_map[t].customValue=""),c(l)};return(0,o.jsxs)("div",{className:x?"mt-2 mr-1 flx w-9":"flx flx-around mt-2 mr-1",children:[(0,o.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:d.formField||"",onChange:function(e){return j(e,a)},children:[(0,o.jsx)("option",{value:"",children:(0,i.__)("Select Field","bitform")}),(0,o.jsx)("optgroup",{label:"Form Fields",children:r.map((function(e){return"file-up"!==e.type&&(0,o.jsx)("option",{value:e.key,children:e.name},"ff-zhcrm-"+e.key)}))}),(0,o.jsx)("option",{value:"custom",children:(0,i.__)("Custom...","bitform")}),(0,o.jsx)("optgroup",{label:"General Smart Codes "+(v?"":"(PRO)"),children:v&&(null==p.C?void 0:p.C.map((function(e){return(0,o.jsx)("option",{value:e.name,children:e.label},"ff-rm-"+e.name)})))})]}),"custom"===d.formField&&(0,o.jsx)(h.Z,{onChange:function(e){return function(e,t){var l=(0,n.Z)({},u);l.field_map[t].customValue=e.target.value,c(l)}(e,a)},label:(0,i.__)("Custom Value","bitform"),className:"mr-2",type:"text",value:d.customValue,placeholder:(0,i.__)("Custom Value","bitform")}),(0,o.jsxs)("select",{className:"btcd-paper-inp",name:"sendinBlueField",value:d.sendinBlueField,onChange:function(e){return j(e,a)},disabled:x,children:[(0,o.jsx)("option",{value:"",children:(0,i.__)("Select Field","bitform")}),x?(null==u||null==(s=u.default)?void 0:s.fields)&&Object.values(u.default.fields).map((function(e){return(0,o.jsx)("option",{value:e.fieldId,children:e.fieldName},e.fieldId+"-1")})):_&&_.map((function(e){return(0,o.jsx)("option",{value:e.fieldId,children:e.fieldName},e.fieldId+"-1")}))]}),!x&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:function(){return function(e){var t=(0,n.Z)({},u);t.field_map.splice(e,0,{}),c(t)}(a)},className:"icn-btn sh-sm ml-2",type:"button",children:"+"}),(0,o.jsx)("button",{onClick:function(){return function(e){var t=(0,n.Z)({},u);t.field_map.length>1&&t.field_map.splice(e,1),c(t)}(a)},className:"icn-btn sh-sm ml-2",type:"button","aria-label":"btn",children:(0,o.jsx)(b.Z,{})})]})]})}function _(e){e.formID;var t,l,d,m=e.formFields,f=e.sendinBlueConf,b=e.setSendinBlueConf,p=e.isLoading,h=e.setisLoading,_=e.setSnackbar,v=e.error,j=e.setError,g=function(e){var t=(0,n.Z)({},f),l=(0,n.Z)({},v);l[e.target.name]="",t[e.target.name]=e.target.value,j(l),b((0,n.Z)({},t))};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("br",{}),(0,o.jsxs)("div",{className:"flx",children:[(0,o.jsx)("b",{className:"wdt-200 d-in-b",children:(0,i.__)("List: ","bitform")}),(0,o.jsx)(s.Z,{defaultValue:null==f?void 0:f.lists,className:"btcd-paper-drpdwn w-6",options:function(){var e;return null!=f&&null!=(e=f.default)&&e.sblueList?Object.values(f.default.sblueList).map((function(e){return{label:e.name,value:String(e.id)}})):[]}(),onChange:function(e){return function(e){var t=(0,n.Z)({},f);e?(t.lists=e?e.split(","):[],!t.default.fields&&(0,u.Pl)(t,b,h,_)):delete t.lists,b((0,n.Z)({},t))}(e)}}),(0,o.jsx)("button",{onClick:function(){return(0,u.aS)(f,b,h,_)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,i.__)("Refresh SendinBlue Lists","bitform")+"'"},type:"button",disabled:p,children:"↻"})]}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),p&&(0,o.jsx)(a.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),0!==(null==f||null==(t=f.lists)?void 0:t.length)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"mt-4",children:(0,o.jsx)("b",{className:"wdt-100",children:(0,i.__)("Map Fields","bitform")})}),(0,o.jsx)("div",{className:"btcd-hr mt-1"}),(0,o.jsxs)("div",{className:"flx flx-around mt-2 mb-1",children:[(0,o.jsx)("div",{className:"txt-dp",children:(0,o.jsx)("b",{children:(0,i.__)("Form Fields","bitform")})}),(0,o.jsx)("div",{className:"txt-dp",children:(0,o.jsx)("b",{children:(0,i.__)("SendinBlue Fields","bitform")})})]}),f.field_map.map((function(e,t){return(0,o.jsx)(x,{i:t,field:e,sendinBlueConf:f,formFields:m,setSendinBlueConf:b},"sendinblue-m-"+(t+9))})),(0,o.jsx)("div",{className:"txt-center  mt-2",style:{marginRight:85},children:(0,o.jsx)("button",{onClick:function(){return(0,r.FP)(f.field_map.length,f,b)},className:"icn-btn sh-sm",type:"button",children:"+"})}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),(null==(l=f.actions)?void 0:l.double_optin)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flx",children:[(0,o.jsx)("b",{className:"wdt-150 d-in-b",children:(0,i.__)("Template: ","bitform")}),(0,o.jsxs)("div",{className:"w-5",children:[(0,o.jsxs)("select",{onChange:g,name:"templateId",value:null==f?void 0:f.templateId,className:"btcd-paper-inp",children:[(0,o.jsx)("option",{value:"",children:(0,i.__)("Select Template","bitform")}),(null==f||null==(d=f.default)?void 0:d.sblueTemplates)&&Object.values(f.default.sblueTemplates).map((function(e){return(0,o.jsx)("option",{value:e.id||f.templateId,children:e.name},"sendinblue-"+(e.id+2))}))]}),(0,o.jsx)("div",{style:{color:"red",fontSize:"15px",marginTop:"3px"},children:v.templateId})]}),(0,o.jsx)("button",{onClick:function(){return(0,u.e1)(f,b,_)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,i.__)("Refresh SendinBlue Templates","bitform")+"'"},type:"button",disabled:p,children:"↻"})]}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),(0,o.jsxs)("div",{className:"flx",children:[(0,o.jsx)("b",{className:"wdt-150 d-in-b",children:(0,i.__)("RedirectionUrl:","bitform")}),(0,o.jsxs)("div",{className:"w-5",children:[(0,o.jsx)("input",{type:"url",className:"btcd-paper-inp",placeholder:"Redirection URL",onChange:g,value:(null==f?void 0:f.redirectionUrl)||"",name:"redirectionUrl"}),(0,o.jsx)("div",{style:{color:"red",fontSize:"15px",marginTop:"3px"},children:v.redirectionUrl})]})]}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{})]}),(0,o.jsx)("div",{className:"mt-4",children:(0,o.jsx)("b",{className:"wdt-100",children:(0,i.__)("Actions","bitform")})}),(0,o.jsx)("div",{className:"btcd-hr mt-1"}),(0,o.jsx)(c,{sendinBlueConf:f,setSendinBlueConf:b,setisLoading:h,setSnackbar:_})]})]})}}}]);