"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[1741],{66801:(e,t,a)=>{a.d(t,{FP:()=>d,Mm:()=>s,P_:()=>o,T5:()=>m,WK:()=>r,mG:()=>u,wX:()=>p});var n=a(51163),i=a(51108),l=a(55873),s=function(e,t,a,i,l,s,r){var o=[].concat(e);if(r)o[s]=(0,n.Z)({},e[s],i),o.push({editItegration:!0}),t([].concat(o)),l.push(a);else{var c=[].concat(o);c.push(i),c.push({newItegration:!0}),t(c),l.push(a)}},r=function(e){var t={},a=window.location.href.replace(window.opener.location.href+"/redirect","").split("&");a&&a.forEach((function(e){var a=e.split("=");a[1]&&(t[a[0]]=a[1])})),localStorage.setItem("__bitforms_"+e,JSON.stringify(t)),window.close()},o=function(e,t,a,l,s,r,o,d,m){if(l.dataCenter&&l.clientId&&l.clientSecret){d(!0);var p="https://accounts.zoho."+l.dataCenter+"/oauth/v2/auth?scope="+a+"&response_type=code&client_id="+l.clientId+"&prompt=Consent&access_type=offline&state="+encodeURIComponent(window.location.href)+"/redirect&redirect_uri="+encodeURIComponent(bits.zohoRedirectURL),u=window.open(p,e,"width=400,height=609,toolbar=off"),f=setInterval((function(){if(u.closed){clearInterval(f);var a={},r=!1,p=localStorage.getItem("__bitforms_"+e);if(p&&(r=!0,a=JSON.parse(p),localStorage.removeItem("__bitforms_"+e)),a.code&&!a.error&&a&&r){var _=(0,n.Z)({},l);_.accountServer=a["accounts-server"],c(t,a,_,s,o,d,m)}else{var h=a.error?"Cause: "+a.error:"";m({show:!0,msg:(0,i.__)("Authorization failed","bitform")+" "+h+". "+(0,i.__)("please try again","bitform")}),d(!1)}}}),500)}else r({dataCenter:l.dataCenter?"":(0,i.__)("Data center cann't be empty","bitform"),clientId:l.clientId?"":(0,i.__)("Client ID cann't be empty","bitform"),clientSecret:l.clientSecret?"":(0,i.__)("Secret key cann't be empty","bitform")})},c=function(e,t,a,s,r,o,c){var d=(0,n.Z)({},t);d.dataCenter=a.dataCenter,d.clientId=a.clientId,d.clientSecret=a.clientSecret,d.redirectURI=bits.zohoRedirectURL,(0,l.Z)(d,"bitforms_"+e+"_generate_token").then((function(e){return e})).then((function(e){if(e&&e.success){var t=(0,n.Z)({},a);t.tokenDetails=e.data,s(t),r(!0),c({show:!0,msg:(0,i.__)("Authorized Successfully","bitform")})}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?c({show:!0,msg:""+(0,i.__)("Authorization failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,i.__)("please try again","bitform")}):c({show:!0,msg:(0,i.__)("Authorization failed. please try again","bitform")});o(!1)}))},d=function(e,t,a,i,l){var s=(0,n.Z)({},t);l?i?s.relatedlists[l-1].upload_field_map.splice(e,0,{}):s.relatedlists[l-1].field_map.splice(e,0,{}):i?s.upload_field_map.splice(e,0,{}):s.field_map.splice(e,0,{}),a((0,n.Z)({},s))},m=function(e,t,a,i,l){var s=(0,n.Z)({},t);l?i?s.relatedlists[l-1].upload_field_map.length>1&&s.relatedlists[l-1].upload_field_map.splice(e,1):s.relatedlists[l-1].field_map.length>1&&s.relatedlists[l-1].field_map.splice(e,1):i?s.upload_field_map.length>1&&s.upload_field_map.splice(e,1):s.field_map.length>1&&s.field_map.splice(e,1),a((0,n.Z)({},s))},p=function(e,t,a,i,l,s){var r=(0,n.Z)({},a);s?l?r.relatedlists[s-1].upload_field_map[t][e.target.name]=e.target.value:r.relatedlists[s-1].field_map[t][e.target.name]=e.target.value:l?r.upload_field_map[t][e.target.name]=e.target.value:r.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(s?r.relatedlists[s-1].field_map[t].customValue="":r.field_map[t].customValue=""),i((0,n.Z)({},r))},u=function(e,t,a,i,l){var s=(0,n.Z)({},a);l?s.relatedlists[l-1].field_map[t].customValue=e.target.value:s.field_map[t].customValue=e.target.value,i((0,n.Z)({},s))}},82183:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(51108),i=a(4637);function l(e){var t=e.step,a=e.saveConfig,l=e.edit,s=e.disabled;return l?(0,i.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,i.jsx)("button",{onClick:a,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:s,children:(0,n.__)("Update","bitform")})}):(0,i.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,i.jsx)("h2",{className:"ml-3",children:(0,n.__)("Successfully Integrated","bitform")}),(0,i.jsxs)("button",{onClick:a,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,n.__)("Finish & Save ","bitform")," ✔"]})]})}},61741:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var n=a(51163),i=a(59496),l=a(83442),s=a(51108),r=a(75995),o=a(66801),c=a(82183),d=a(52174),m=a(13308),p=a(4637);const u=function(e){var t=e.formFields,a=e.setIntegration,u=e.integrations,f=e.allIntegURL,_=(0,l.k6)(),h=(0,l.UO)(),v=h.id,b=h.formID,g=(0,i.useState)(!1),x=g[0],j=g[1],w=(0,i.useState)((0,n.Z)({},u[v])),y=w[0],N=w[1],C=(0,i.useState)({show:!1}),I=C[0],S=C[1],Z=(0,i.useState)({show:!1}),k=Z[0],D=Z[1];return(0,p.jsxs)("div",{style:{width:900},children:[(0,p.jsx)(r.Z,{snack:I,setSnackbar:S}),(0,p.jsxs)("div",{className:"flx mt-3",children:[(0,p.jsx)("b",{className:"wdt-100 d-in-b",children:(0,s.__)("Integration Name:","bitform")}),(0,p.jsx)("input",{className:"btcd-paper-inp w-7",onChange:function(e){return(0,d.Rx)(e,y,N)},name:"name",value:y.name,type:"text",placeholder:(0,s.__)("Integration Name...","bitform")})]}),(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),(0,p.jsx)(m.Z,{formID:b,formFields:t,signConf:y,setSignConf:N,isLoading:x,setisLoading:j,setSnackbar:S}),(0,p.jsx)(c.Z,{edit:!0,saveConfig:function(){var e,t;null!=(e=y.actions)&&e.update&&""===(null==(t=y.actions)?void 0:t.update.criteria)&&"criteria"!==k.show?D({show:"criteria"}):(0,o.Mm)(u,a,f,y,_,v,1)},disabled:""===y.template}),(0,p.jsx)("br",{})]})}},52174:(e,t,a)=>{a.d(t,{Rx:()=>s,V9:()=>c,WK:()=>d,Zo:()=>o});var n=a(51163),i=a(51108),l=a(55873),s=function(e,t,a,i,l,s,o,c,d){var m=(0,n.Z)({},t);if(o){var p=(0,n.Z)({},c);p[e.target.name]="",d((0,n.Z)({},p))}if(m[e.target.name]=e.target.value,"template"===e.target.name)m=r(m,i,a,l,s);a((0,n.Z)({},m))},r=function(e,t,a,i,l){var s,r,o=(0,n.Z)({},e);return o.table="",o.field_map=[{formField:"",zohoFormField:""}],delete o.templateActions,null!=o&&null!=(s=o.default)&&null!=(r=s.templateDetails)&&r[e.template]||c(t,o,a,i,l),o},o=function(e,t,a,s,r){s(!0);var o={formID:e,id:t.id,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,l.Z)(o,"bitforms_zsign_refresh_templates").then((function(e){if(e&&e.success){var l=(0,n.Z)({},t);l.default||(l.default={}),e.data.templates&&(l.default.templates=e.data.templates),e.data.tokenDetails&&(l.tokenDetails=e.data.tokenDetails),r({show:!0,msg:(0,i.__)("Templates refreshed","bitform")}),a((0,n.Z)({},l))}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?r({show:!0,msg:(0,i.g)((0,i.__)("Templates refresh failed Cause: %s. please try again","bitform"),e.data.data||e.data)}):r({show:!0,msg:(0,i.__)("Templates refresh failed. please try again","bitform")});s(!1)})).catch((function(){return s(!1)}))},c=function(e,t,a,s,r){var o=t.template;s(!0);var c={formID:e,id:t.id,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails,template:o};(0,l.Z)(c,"bitforms_zsign_refresh_template_details").then((function(e){if(e&&e.success){var l=(0,n.Z)({},t);l.default||(l.default={}),l.default.templateDetails||(l.default.templateDetails={}),e.data.templateDetails&&(l.default.templateDetails[o]=e.data.templateDetails),e.data.tokenDetails&&(l.tokenDetails=e.data.tokenDetails),r({show:!0,msg:(0,i.__)("Template Details refreshed","bitform")}),a((0,n.Z)({},l))}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?r({show:!0,msg:(0,i.g)((0,i.__)("Template Details refresh failed Cause: %s. please try again","bitform"),e.data.data||e.data)}):r({show:!0,msg:(0,i.__)("Template Details refresh failed. please try again","bitform")});s(!1)})).catch((function(){return s(!1)}))},d=function(e){var t={},a=window.location.href.replace(window.opener.location.href+"/redirect","").split("&");a&&a.forEach((function(e){var a=e.split("=");a[1]&&(t[a[0]]=a[1])})),localStorage.setItem("__bitforms_"+e,JSON.stringify(t)),window.close()}},13308:(e,t,a)=>{a.d(t,{Z:()=>h});var n=a(18846),i=a(59496),l=a(83428),s=(a(45486),a(48291)),r=a(90794),o=a(69351),c=a(32198),d=a(51108),m=a(99996),p=a(46377),u=a(65362),f=a(52174),_=a(4637);function h(e){var t,a,h,v,b,g,x,j,w,y,N=e.formID,C=e.formFields,I=e.signConf,S=e.setSignConf,Z=e.isLoading,k=e.setisLoading,D=e.setSnackbar,R=(0,s.sJ)(r.uJ),O=(0,i.useState)({show:!1}),P=O[0],V=O[1];!I.template||null==I||null==(t=I.default)||null==(a=t.templateDetails)||!a[null==I?void 0:I.template]||null!=I&&I.templateActions&&I.templateActions.length===(null==I||null==(h=I.default)||null==(v=h.templateDetails)||null==(b=v[null==I?void 0:I.template])||null==(g=b.actions)?void 0:g.length)||(I.templateActions=I.default.templateDetails[I.template].actions.map((function(e){return{action_id:e.action_id,action_type:e.action_type,language:e.language,private_notes:e.private_notes,recipient_countrycode:e.recipient_countrycode,recipient_email:e.recipient_email,recipient_name:e.recipient_name,recipient_phonenumber:e.recipient_phonenumber,in_person_name:e.in_person_name||"",in_person_email:e.in_person_email||"",role:e.role,verify_recipient:e.verify_recipient,verification_type:e.verification_type||""}})),I.notes=I.default.templateDetails[I.template].notes||"");var z=function(e,t,a){S((function(n){var i=(0,c.p$)(n);return"notes"===e?i.notes=a:i.templateActions[e][t]=a,i}))},A=function(){V({show:!1})};return(0,_.jsxs)(_.Fragment,{children:[Z&&(0,_.jsx)(m.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),(0,_.jsxs)("div",{className:"flx",children:[(0,_.jsx)("b",{className:"wdt-100",children:(0,d.__)("Templates:","bitform")}),(0,_.jsxs)("select",{className:"btcd-paper-inp w-4",onChange:function(e){return(0,f.Rx)(e,I,S,N,k,D)},name:"template",value:I.template,children:[(0,_.jsx)("option",{value:"",children:(0,d.__)("Select Template","bitform")}),(null==I||null==(x=I.default)?void 0:x.templates)&&Object.values(I.default.templates).map((function(e){return(0,_.jsx)("option",{value:e.templateId,children:e.templateName},e.templateId)}))]}),(0,_.jsx)("button",{onClick:function(){return(0,f.Zo)(N,I,S,k,D)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,d.__)("Refresh Sign Templates","bitform")+"'"},type:"button",disabled:Z,children:"↻"})]}),(0,_.jsx)("br",{}),(0,_.jsx)("br",{}),(0,_.jsx)("b",{className:"wdt-100",children:(0,d.__)("Recipients:","bitform")}),(0,_.jsx)("button",{onClick:function(){return(0,f.V9)(N,I,S,k,D)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,d.__)("Refresh Template Details","bitform")+"'"},type:"button",disabled:Z,children:"↻"}),null==I||null==(j=I.templateActions)?void 0:j.map((function(e,t){return(0,_.jsxs)("div",{children:[(0,_.jsxs)("div",{className:"flx mt-2",children:[(0,_.jsx)("input",{type:"text",value:t+1,readOnly:!0,className:"btcd-paper-inp mr-1",style:{width:40}}),(0,_.jsx)("input",{className:"btcd-paper-inp w-3",type:"text",value:e.role,readOnly:!0})]}),"INPERSONSIGN"===e.action_type&&(0,_.jsxs)("div",{className:"flx mt-2",style:{marginLeft:45},children:[(0,_.jsx)("input",{type:"text",value:"Signer",readOnly:!0,className:"btcd-paper-inp mr-1 mt-4 w-1"}),(0,_.jsxs)("div",{className:"mr-2 w-4",children:[(0,_.jsx)("div",{className:"mb-1",children:(0,d.__)("In Person Email (Optional)","bitform")}),(0,_.jsx)(l.Z,{className:"msl-wrp-options btcd-paper-drpdwn w-10",defaultValue:e.in_person_email,options:C.map((function(e){return{label:e.name,value:"${"+e.key+"}"}})),onChange:function(e){return z(t,"in_person_email",e)},placeholder:(0,d.__)("In Person Email","bitform"),singleSelect:!0,customValue:!0})]}),(0,_.jsxs)("div",{className:"mr-2 w-4",children:[(0,_.jsx)("div",{className:"mb-1",children:(0,d.__)("In Person Name","bitform")}),(0,_.jsx)(l.Z,{className:"msl-wrp-options btcd-paper-drpdwn w-10",defaultValue:e.in_person_name,options:C.map((function(e){return{label:e.name,value:"${"+e.key+"}"}})),onChange:function(e){return z(t,"in_person_name",e)},placeholder:(0,d.__)("In Person Name","bitform"),singleSelect:!0,customValue:!0})]})]}),(0,_.jsxs)("div",{className:"flx mt-2",style:{marginLeft:45},children:["INPERSONSIGN"===e.action_type&&(0,_.jsx)("input",{type:"text",value:"Host",readOnly:!0,className:"btcd-paper-inp mr-1 mt-4 w-1"}),(0,_.jsxs)("div",{className:"mr-2 w-3",children:[(0,_.jsx)("div",{className:"mb-1",children:(0,d.__)("Recipient Email","bitform")}),(0,_.jsx)(l.Z,{className:"msl-wrp-options btcd-paper-drpdwn w-10",defaultValue:e.recipient_email,options:C.map((function(e){return{label:e.name,value:"${"+e.key+"}"}})),onChange:function(e){return z(t,"recipient_email",e)},placeholder:(0,d.__)("Recipient Email","bitform"),singleSelect:!0,customValue:!0})]}),(0,_.jsxs)("div",{className:"mr-2 w-3",children:[(0,_.jsx)("div",{className:"mb-1",children:(0,d.__)("Recipient Name","bitform")}),(0,_.jsx)(l.Z,{className:"msl-wrp-options btcd-paper-drpdwn w-10",defaultValue:e.recipient_name,options:C.map((function(e){return{label:e.name,value:"${"+e.key+"}"}})),onChange:function(e){return z(t,"recipient_name",e)},placeholder:(0,d.__)("Recipient Email","bitform"),singleSelect:!0,customValue:!0})]}),(0,_.jsxs)("div",{className:"mr-2 w-1",children:[(0,_.jsx)("div",{className:"mb-1",children:(0,d.__)("Language","bitform")}),(0,_.jsxs)("select",{onChange:function(e){return z(t,"language",e.target.value)},className:"btcd-paper-inp",value:e.language,children:[(0,_.jsx)("option",{value:"en",children:"English"}),(0,_.jsx)("option",{value:"fr",children:"French"}),(0,_.jsx)("option",{value:"de",children:"German"}),(0,_.jsx)("option",{value:"it",children:"Italian"}),(0,_.jsx)("option",{value:"ja",children:"Japanese"}),(0,_.jsx)("option",{value:"pl",children:"Polish"}),(0,_.jsx)("option",{value:"pt",children:"Portuguese"}),(0,_.jsx)("option",{value:"ru",children:"Russian"}),(0,_.jsx)("option",{value:"es",children:"Spanish"}),(0,_.jsx)("option",{value:"sv",children:"Swedish"})]})]}),(0,_.jsxs)("div",{className:"mr-1 w-2",children:[(0,_.jsx)("div",{className:"mb-1",children:(0,d.__)("Role","bitform")}),(0,_.jsx)("input",{type:"text",value:e.action_type,readOnly:!0,className:"btcd-paper-inp"})]}),(0,_.jsx)("button",{onClick:function(){V({show:"private_notes",indx:t})},className:"icn-btn mr-1 mt-3 tooltip",style:{"--tooltip-txt":"'"+(0,d.__)("Private Note","bitform")+"'"},"aria-label":"Private Message",type:"button",children:(0,_.jsx)(o.Z,{size:"21"})})]})]},e.role)})),(0,_.jsxs)("div",{className:"mt-5",children:[(0,_.jsx)("b",{className:"wdt-100",children:(0,d.__)("Leave a Note:","bitform")}),(0,_.jsx)(u.Z,{id:"body-content",formFields:R,value:I.notes,onChangeHandler:function(e){S((function(t){return(0,n.ZP)(t,(function(t){t.notes=e}))}))}})]}),(0,_.jsxs)(p.Z,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:"Ok",show:"private_notes"===P.show,close:A,action:A,title:(0,d.__)("Private Note","bitform"),children:[(0,_.jsx)("div",{className:"btcd-hr mt-2 mb-2"}),(0,_.jsxs)("select",{className:"btcd-paper-inp w-5",onChange:function(e){return t=e.target.value,void S((function(e){var a=(0,c.p$)(e);return a.templateActions[P.indx].private_notes+=t,a}));var t},children:[(0,_.jsx)("option",{value:"",children:(0,d.__)("Field","bitform")}),C.map((function(e){return"file-up"!==e.type&&(0,_.jsx)("option",{value:"${"+e.key+"}",children:e.name},"ff-zhcrm-"+e.key)}))]}),(0,_.jsx)("textarea",{rows:"5",className:"btcd-paper-inp mt-2",onChange:function(e){return z(P.indx,"private_notes",e.target.value)},value:null==(w=I.templateActions)||null==(y=w[P.indx])?void 0:y.private_notes})]})]})}}}]);