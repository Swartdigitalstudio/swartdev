"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[7917],{77917:(e,t,l)=>{l.r(t),l.d(t,{default:()=>f});var a=l(665),i=l(59496),s=l(87230),n=(l(44084),l(73305)),r=l(65194),c=l(53132),o=l(8940),d=l(35669),u=l(74937),m=l(4637);const f=function(e){var t=e.formFields,l=e.setIntegration,f=e.integrations,b=e.allIntegURL,h=(0,s.k6)(),v=(0,s.UO)(),p=v.id,x=v.formID,_=(0,i.useState)((0,a.Z)({},f[p])),g=_[0],j=_[1],N=(0,i.useState)(!1),C=N[0],F=N[1],E=(0,i.useState)({show:!1}),Z=E[0],y=E[1];return(0,m.jsxs)("div",{style:{width:900},children:[(0,m.jsx)(r.Z,{snack:Z,setSnackbar:y}),(0,m.jsxs)("div",{className:"flx mt-3",children:[(0,m.jsx)("b",{className:"wdt-200 d-in-b",children:(0,n.__)("Integration Name:","bitform")}),(0,m.jsx)("input",{className:"btcd-paper-inp w-5",onChange:function(e){return(0,d.Rx)(e,g,j)},name:"name",value:g.name,type:"text",placeholder:(0,n.__)("Integration Name...","bitform")})]}),(0,m.jsx)("br",{}),(0,m.jsx)(u.Z,{formID:x,formFields:t,handleInput:function(e){return(0,d.Rx)(e,g,j,F,y)},elasticEmailConf:g,setElasticEmailConf:j,isLoading:C,setIsLoading:F,setSnackbar:y}),(0,m.jsx)(o.Z,{edit:!0,saveConfig:function(){(0,d.Pd)(g)?(0,c.Mm)(f,l,b,g,h,p,1):y({show:!0,msg:(0,n.__)("Please map mandatory fields","bitform")})},disabled:g.field_map.length<1}),(0,m.jsx)("br",{})]})}},35669:(e,t,l)=>{l.d(t,{Rx:()=>r,Pd:()=>c,gn:()=>o,Jd:()=>d});var a=l(665),i=l(17607),s=l(73305),n=l(77111),r=function(e,t,l,i){var s=(0,a.Z)({},t),n=e.target.name;""!==e.target.value?s[n]=e.target.value:delete s[n],l((0,a.Z)({},s))},c=function(e){return!((null!=e&&e.field_map?e.field_map.filter((function(e){return!e.formField||!e.elasticEmailField||"custom"===!e.formField&&!e.customValue})):[]).length>0)},o=function(e){var t=null==e?void 0:e.elasticEmailFields.filter((function(e){return!0===e.required}));return t.length>0?t.map((function(e){return{formField:"",elasticEmailField:e.key}})):[{formField:"",elasticEmailField:""}]},d=function(e,t,l){l(!0);var r={apiKey:e.api_key},c=(0,n.Z)(r,"bitforms_get_all_lists").then((function(i){if(i&&i.success){var s=(0,a.Z)({},e);return s.default||(s.default={}),i.data.lists&&(s.default.lists=i.data.lists),t((0,a.Z)({},s)),l(!1),"List refreshed successfully"}return l(!1),"List refresh failed. please try again"}));i.ZP.promise(c,{success:function(e){return e},error:(0,s.__)("Error Occurred","bitform"),loading:(0,s.__)("Loading Lists...")})}},74937:(e,t,l)=>{l.d(t,{Z:()=>j});var a=l(665),i=l(59496),s=l(19753),n=l(73305),r=l(35669),c=function(e,t,l){var i=(0,a.Z)({},t);i.field_map.splice(e,0,{}),l((0,a.Z)({},i))},o=function(e,t,l){var i=(0,a.Z)({},t);i.field_map.length>1&&i.field_map.splice(e,1),l((0,a.Z)({},i))},d=function(e,t,l,i){var s=(0,a.Z)({},l);s.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(s.field_map[t].customValue=""),i((0,a.Z)({},s))},u=function(e,t,l,i){var s=(0,a.Z)({},l);s.field_map[t].customValue=e.target.value,i((0,a.Z)({},s))},m=l(44084),f=l(37029),b=l(2699),h=l(84448),v=l(4637);function p(e){var t,l=e.i,i=e.formFields,s=e.field,p=e.elasticEmailConf,x=e.setElasticEmailConf;if(1===(null==p||null==(t=p.field_map)?void 0:t.length)&&""===s.elasticEmailField){var _=(0,a.Z)({},p),g=(0,r.gn)(_);_.field_map=g,x(_)}var j=(null==p?void 0:p.elasticEmailFields.filter((function(e){return!0===e.required})))||[],N=(null==p?void 0:p.elasticEmailFields.filter((function(e){return!1===e.required})))||[],C=(0,m.sJ)(h.hi).isPro;return(0,v.jsx)("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:(0,v.jsxs)("div",{className:"pos-rel flx",children:[(0,v.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,v.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:s.formField||"",onChange:function(e){return d(e,l,p,x)},children:[(0,v.jsx)("option",{value:"",children:(0,n.__)("Select Field","bitform")}),(0,v.jsx)("optgroup",{label:"Form Fields",children:null==i?void 0:i.map((function(e){return(0,v.jsx)("option",{value:e.key,children:e.name},"ff-rm-"+e.key)}))}),(0,v.jsx)("option",{value:"custom",children:(0,n.__)("Custom...","bitform")}),(0,v.jsx)("optgroup",{label:"General Smart Codes "+(C?"":"(PRO)"),children:C&&(null==b.C?void 0:b.C.map((function(e){return(0,v.jsx)("option",{value:e.name,children:e.label},"ff-rm-"+e.name)})))})]}),"custom"===s.formField&&(0,v.jsx)(f.Z,{onChange:function(e){return u(e,l,p,x)},label:(0,n.__)("Custom Value","bitform"),className:"mr-2",type:"text",value:s.customValue,placeholder:(0,n.__)("Custom Value","bitform")}),(0,v.jsxs)("select",{className:"btcd-paper-inp",disabled:l<j.length,name:"elasticEmailField",value:l<j.length?j[l].label||"":s.elasticEmailField||"",onChange:function(e){return d(e,l,p,x)},children:[(0,v.jsx)("option",{value:"",children:(0,n.__)("Select Field","bitform")}),l<j.length?(0,v.jsx)("option",{value:j[l].key,children:j[l].label},j[l].key):N.map((function(e){var t=e.key,l=e.label;return(0,v.jsx)("option",{value:t,children:l},t)}))]})]}),l>=j.length&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("button",{onClick:function(){return c(l,p,x)},className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),(0,v.jsx)("button",{onClick:function(){return o(l,p,x)},className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:(0,v.jsx)("span",{className:"btcd-icn icn-trash-2"})})]})]})})}var x=l(83524),_=l(2598);function g(e){var t,l=e.elasticEmailConf,r=e.setElasticEmailConf,c=(e.formFields,(0,i.useState)({show:!1,action:function(){}})),o=c[0],d=c[1],u=(0,i.useState)(!1),m=u[0],f=(u[1],function(){d({show:!1})}),b=[{value:"Transactional",label:"Transactional"},{value:"Engaged",label:"Engaged"},{value:"Active",label:"Active"},{value:"Bounced",label:"Bounced"},{value:"Unsubscribed",label:"Unsubscribed"},{value:"Abuse",label:"Abuse"},{value:"Inactive",label:"Inactive"},{value:"Stale",label:"Stale"},{value:"NotConfirmed",label:"NotConfirmed"}];return(0,v.jsxs)("div",{className:"pos-rel d-flx w-8",children:[(0,v.jsx)(_.Z,{checked:(null==l||null==(t=l.actions)?void 0:t.status)||!1,onChange:function(e){return function(e,t){var i,s=(0,a.Z)({},l);"status"===t&&(e.target.checked?(s.actions[t]=!0,d({show:t})):(null==(i=s.actions)||delete i[t],null==s||delete s[t])),r((0,a.Z)({},s))}(e,"status")},className:"wdt-200 mt-4 mr-2",value:"status",title:(0,n.__)("Status","bitform"),subTitle:(0,n.__)("Add Status to contact","bitform")}),(0,v.jsxs)(x.Z,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:(0,n.__)("Ok","bitform"),show:"status"===o.show,close:f,action:f,title:(0,n.__)("Status","bitform"),children:[(0,v.jsx)("div",{className:"btcd-hr mt-2 mb-2"}),m?(0,v.jsx)(Loader,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):(0,v.jsx)("div",{className:"flx flx-between mt-2",children:(0,v.jsx)(s.Z,{className:"msl-wrp-options",defaultValue:null==l?void 0:l.status,options:null==b?void 0:b.map((function(e){return{label:e.label,value:e.value.toString()}})),onChange:function(e){return function(e,t){var i=(0,a.Z)({},l);i[t]=e,r((0,a.Z)({},i))}(e,"status")},customValue:!0,singleSelect:!0})})]})]})}function j(e){var t,l=e.formFields,i=(e.handleInput,e.elasticEmailConf),o=e.setElasticEmailConf,d=e.isLoading,u=e.setIsLoading,m=e.setSnackbar;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("br",{}),(0,v.jsxs)("div",{className:"flx",children:[(0,v.jsx)("b",{className:"wdt-200 d-in-b",children:(0,n.__)("Lists:","bitform")}),(0,v.jsx)(s.Z,{defaultValue:i.list_id,className:"btcd-paper-drpdwn w-5",options:(null==i||null==(t=i.default)?void 0:t.lists)&&i.default.lists.map((function(e){return{label:e.listName,value:e.listName.toString()}})),onChange:function(e){return function(e){var t=(0,a.Z)({},i);t.list_id=e?e.split(","):[],o((0,a.Z)({},t))}(e)}}),(0,v.jsx)("button",{onClick:function(){return(0,r.Jd)(i,o,u)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,n.__)("Fetch All Recipients","bitform")+"'"},type:"button",disabled:d,children:"↻"})]}),(0,v.jsx)("br",{}),(0,v.jsx)("div",{className:"mt-5",children:(0,v.jsx)("b",{className:"wdt-100",children:(0,n.__)("Field Map","bitform")})}),(0,v.jsx)("div",{className:"btcd-hr mt-1"}),(0,v.jsxs)("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[(0,v.jsx)("div",{className:"txt-dp",children:(0,v.jsx)("b",{children:(0,n.__)("Form Fields","bitform")})}),(0,v.jsx)("div",{className:"txt-dp",children:(0,v.jsx)("b",{children:(0,n.__)("Elastic Email Fields","bitform")})})]}),i.list_id&&(null==i?void 0:i.field_map.map((function(e,t){return(0,v.jsx)(p,{i:t,field:e,elasticEmailConf:i,formFields:l,setElasticEmailConf:o,setSnackbar:m},"rp-m-"+(t+9))}))),(0,v.jsx)("div",{className:"txt-center mt-2",style:{marginRight:85},children:(0,v.jsx)("button",{onClick:function(){return c(i.field_map.length,i,o,!1)},className:"icn-btn sh-sm",type:"button",children:"+"})}),(0,v.jsx)("br",{}),(0,v.jsx)("br",{}),(null==i?void 0:i.list_id)&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"mt-4",children:(0,v.jsx)("b",{className:"wdt-100",children:(0,n.__)("Actions","bitform")})}),(0,v.jsx)("div",{className:"btcd-hr mt-1"}),(0,v.jsx)(g,{elasticEmailConf:i,setElasticEmailConf:o,formFields:l})]})]})}},8940:(e,t,l)=>{l.d(t,{Z:()=>s});var a=l(73305),i=l(4637);function s(e){var t=e.step,l=e.saveConfig,s=e.edit,n=e.disabled;return s?(0,i.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,i.jsx)("button",{onClick:l,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:n,children:(0,a.__)("Update","bitform")})}):(0,i.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,i.jsx)("h2",{className:"ml-3",children:(0,a.__)("Successfully Integrated","bitform")}),(0,i.jsxs)("button",{onClick:l,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,a.__)("Finish & Save ","bitform")," ✔"]})]})}}}]);