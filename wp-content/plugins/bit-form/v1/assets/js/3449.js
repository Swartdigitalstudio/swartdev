"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[3449],{53132:(e,t,l)=>{l.d(t,{Mm:()=>s,WK:()=>r,P_:()=>d,FP:()=>c,T5:()=>m,wX:()=>u,mG:()=>f});var i=l(665),a=l(73305),n=l(77111),s=function(e,t,l,a,n,s,r){var d=[].concat(e);if(r)d[s]=(0,i.Z)({},e[s],a),d.push({editItegration:!0}),t([].concat(d)),n.push(l);else{var o=[].concat(d);o.push(a),o.push({newItegration:!0}),t(o),n.push(l)}},r=function(e){var t={},l=window.location.href.replace(window.opener.location.href+"/redirect","").split("&");l&&l.forEach((function(e){var l=e.split("=");l[1]&&(t[l[0]]=l[1])})),localStorage.setItem("__bitforms_"+e,JSON.stringify(t)),window.close()},d=function(e,t,l,n,s,r,d,c,m){if(n.dataCenter&&n.clientId&&n.clientSecret){c(!0);var u="https://accounts.zoho."+n.dataCenter+"/oauth/v2/auth?scope="+l+"&response_type=code&client_id="+n.clientId+"&prompt=Consent&access_type=offline&state="+encodeURIComponent(window.location.href)+"/redirect&redirect_uri="+encodeURIComponent(bits.zohoRedirectURL),f=window.open(u,e,"width=400,height=609,toolbar=off"),p=setInterval((function(){if(f.closed){clearInterval(p);var l={},r=!1,u=localStorage.getItem("__bitforms_"+e);if(u&&(r=!0,l=JSON.parse(u),localStorage.removeItem("__bitforms_"+e)),l.code&&!l.error&&l&&r){var _=(0,i.Z)({},n);_.accountServer=l["accounts-server"],o(t,l,_,s,d,c,m)}else{var h=l.error?"Cause: "+l.error:"";m({show:!0,msg:(0,a.__)("Authorization failed","bitform")+" "+h+". "+(0,a.__)("please try again","bitform")}),c(!1)}}}),500)}else r({dataCenter:n.dataCenter?"":(0,a.__)("Data center cann't be empty","bitform"),clientId:n.clientId?"":(0,a.__)("Client ID cann't be empty","bitform"),clientSecret:n.clientSecret?"":(0,a.__)("Secret key cann't be empty","bitform")})},o=function(e,t,l,s,r,d,o){var c=(0,i.Z)({},t);c.dataCenter=l.dataCenter,c.clientId=l.clientId,c.clientSecret=l.clientSecret,c.redirectURI=bits.zohoRedirectURL,(0,n.Z)(c,"bitforms_"+e+"_generate_token").then((function(e){return e})).then((function(e){if(e&&e.success){var t=(0,i.Z)({},l);t.tokenDetails=e.data,s(t),r(!0),o({show:!0,msg:(0,a.__)("Authorized Successfully","bitform")})}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?o({show:!0,msg:""+(0,a.__)("Authorization failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,a.__)("please try again","bitform")}):o({show:!0,msg:(0,a.__)("Authorization failed. please try again","bitform")});d(!1)}))},c=function(e,t,l,a,n){var s=(0,i.Z)({},t);n?a?s.relatedlists[n-1].upload_field_map.splice(e,0,{}):s.relatedlists[n-1].field_map.splice(e,0,{}):a?s.upload_field_map.splice(e,0,{}):s.field_map.splice(e,0,{}),l((0,i.Z)({},s))},m=function(e,t,l,a,n){var s=(0,i.Z)({},t);n?a?s.relatedlists[n-1].upload_field_map.length>1&&s.relatedlists[n-1].upload_field_map.splice(e,1):s.relatedlists[n-1].field_map.length>1&&s.relatedlists[n-1].field_map.splice(e,1):a?s.upload_field_map.length>1&&s.upload_field_map.splice(e,1):s.field_map.length>1&&s.field_map.splice(e,1),l((0,i.Z)({},s))},u=function(e,t,l,a,n,s){var r=(0,i.Z)({},l);s?n?r.relatedlists[s-1].upload_field_map[t][e.target.name]=e.target.value:r.relatedlists[s-1].field_map[t][e.target.name]=e.target.value:n?r.upload_field_map[t][e.target.name]=e.target.value:r.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(s?r.relatedlists[s-1].field_map[t].customValue="":r.field_map[t].customValue=""),a((0,i.Z)({},r))},f=function(e,t,l,a,n){var s=(0,i.Z)({},l);n?s.relatedlists[n-1].field_map[t].customValue=e.target.value:s.field_map[t].customValue=e.target.value,a((0,i.Z)({},s))}},8940:(e,t,l)=>{l.d(t,{Z:()=>n});var i=l(73305),a=l(4637);function n(e){var t=e.step,l=e.saveConfig,n=e.edit,s=e.disabled;return n?(0,a.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,a.jsx)("button",{onClick:l,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:s,children:(0,i.__)("Update","bitform")})}):(0,a.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,a.jsx)("h2",{className:"ml-3",children:(0,i.__)("Successfully Integrated","bitform")}),(0,a.jsxs)("button",{onClick:l,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,i.__)("Finish & Save ","bitform")," ✔"]})]})}},50606:(e,t,l)=>{l.d(t,{Rx:()=>s,GX:()=>d});var i=l(73305),a=l(77111),n=l(33591),s=function(e,t,l,i,a){var s=(0,n.p$)(t),d=e.target,o=d.name,c=d.value;if(s[o]=c,"module"===o)s=r(s,l,i,a);l(s)},r=function(e,t,l,i){var a,s,r,c=(0,n.p$)(e);return c.field_map=[],null!=(a=c)&&null!=(s=a.default)&&null!=(r=s.fields)&&r[e.module]?c=o(c):d(c,t,l,i),c},d=function(e,t,l,s){var r=e.module;r&&(l(!0),(0,a.Z)({module:r},"bitforms_wc_refresh_fields").then((function(a){if(a&&a.success){var d=(0,n.p$)(e);a.data&&(d.default||(d.default={}),d.default.fields||(d.default.fields={}),d.default.fields[r]=a.data,d=o(d),t(d),s({show:!0,msg:(0,i.__)("Fields refreshed","bitform")}))}else s({show:!0,msg:(0,i.__)("Fields refresh failed. please try again","bitform")});l(!1)})).catch((function(){return l(!1)})))},o=function(e){var t=(0,n.p$)(e);return t.default.fields[t.module].required.forEach((function(e){t.field_map.find((function(t){return t.wcField===e}))||t.field_map.unshift({formField:"",wcField:e,required:!0})})),t.field_map.length||(t.field_map=[{formField:"",wcField:""}]),t}},71587:(e,t,l)=>{l.d(t,{Z:()=>h});var i=l(73305),a=l(67860),n=l(53132),s=l(50606),r=l(665),d=l(44084),o=l(84448),c=l(94557),m=l(33591),u=l(2699),f=l(37029),p=l(4637);function _(e){var t=e.i,l=e.formFields,a=e.field,n=e.wcConf,s=e.setWcConf,_=e.uploadFields,h=!0===a.required,b=(0,d.sJ)(o.hi).isPro,v=function(e,t){var l=(0,m.p$)(n);_?l.upload_field_map[t][e.target.name]=e.target.value:l.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(l.field_map[t].customValue=""),s(l)};return(0,p.jsxs)("div",{className:"flx mt-2 mr-1",children:[(0,p.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,p.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:a.formField||"",onChange:function(e){return v(e,t)},children:[(0,p.jsx)("option",{value:"",children:(0,i.__)("Select Field","bitform")}),(0,p.jsx)("optgroup",{label:"Form Fields",children:_?l.map((function(e){return"file-up"===e.type&&(0,p.jsx)("option",{value:e.key,children:e.name},"ff-zhcrm-"+e.key)})):l.map((function(e){return"file-up"!==e.type&&(0,p.jsx)("option",{value:e.key,children:e.name},"ff-zhcrm-"+e.key)}))}),!_&&(0,p.jsx)("option",{value:"custom",children:(0,i.__)("Custom...","bitform")}),!_&&(0,p.jsxs)("optgroup",{label:"General Smart Codes "+(b?"":"(PRO)"),children:[" ",b&&u.C.map((function(e){return(0,p.jsx)("option",{value:e.name,children:e.label},"ff-zhcrm-"+e.name)}))]})]}),"custom"===a.formField&&(0,p.jsx)(f.Z,{onChange:function(e){return function(e,t){var l=(0,m.p$)(n);_?l.upload_field_map[t].customValue=e.target.value:l.field_map[t].customValue=e.target.value,s(l)}(e,t)},label:(0,i.__)("Custom Value","bitform"),className:"mr-2",type:"text",value:a.customValue,placeholder:(0,i.__)("Custom Value","bitform")}),(0,p.jsxs)("select",{className:"btcd-paper-inp",name:"wcField",value:a.wcField||"",onChange:function(e){return v(e,t)},disabled:h,children:[(0,p.jsx)("option",{value:"",children:(0,i.__)("Select Field","bitform")}),Object.values(n.default.fields[n.module][_?"uploadFields":"fields"]).map((function(e){if(h){if(e.required&&e.fieldKey===a.wcField)return(0,p.jsx)("option",{value:e.fieldKey,children:e.fieldName},e.fieldKey+"-1")}else if(!e.required)return(0,p.jsx)("option",{value:e.fieldKey,children:e.fieldName},e.fieldKey+"-1")}))]})]}),!h&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("button",{onClick:function(){return function(e){var t=(0,r.Z)({},n);_?t.upload_field_map.splice(e,0,{}):t.field_map.splice(e,0,{}),s(t)}(t)},className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),(0,p.jsx)("button",{onClick:function(){return function(e){var t=(0,m.p$)(n);_?t.upload_field_map.length>1&&t.upload_field_map.splice(e,1):t.field_map.length>1&&t.field_map.splice(e,1),s(t)}(t)},className:"icn-btn sh-sm ml-2",type:"button","aria-label":"btn",children:(0,p.jsx)(c.Z,{})})]})]})}function h(e){var t,l,r,d,o,c,m=e.formFields,u=e.handleInput,f=e.wcConf,h=e.setWcConf,b=e.isLoading,v=e.setisLoading,x=e.setSnackbar;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("br",{}),(0,p.jsx)("b",{className:"wdt-100 d-in-b",children:(0,i.__)("Module:","bitform")}),(0,p.jsxs)("select",{onChange:u,name:"module",value:f.module,className:"btcd-paper-inp w-7",children:[(0,p.jsx)("option",{value:"",children:(0,i.__)("Select Module","bitform")}),(0,p.jsx)("option",{value:"customer",children:"Customer"}),(0,p.jsx)("option",{value:"product",children:"Product"})]}),(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),b&&(0,p.jsx)(a.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),(null==(t=f.default)||null==(l=t.fields)||null==(r=l[f.module])?void 0:r.fields)&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"mt-4",children:[(0,p.jsx)("b",{className:"wdt-100",children:(0,i.__)("Map Fields","bitform")}),(0,p.jsx)("button",{onClick:function(){return(0,s.GX)(f,h,v,x)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,i.__)("Refresh Fields","bitform")+"'"},type:"button",disabled:b,children:"↻"})]}),(0,p.jsx)("div",{className:"btcd-hr mt-1"}),(0,p.jsxs)("div",{className:"flx flx-around mt-2 mb-1",children:[(0,p.jsx)("div",{className:"txt-dp",children:(0,p.jsx)("b",{children:(0,i.__)("Form Fields","bitform")})}),(0,p.jsx)("div",{className:"txt-dp",children:(0,p.jsx)("b",{children:(0,i.__)("WooCommerce Fields","bitform")})})]}),f.field_map.map((function(e,t){return(0,p.jsx)(_,{i:t,field:e,wcConf:f,formFields:m,setWcConf:h},"wc-m-"+(t+9))})),(0,p.jsx)("div",{className:"txt-center  mt-2",style:{marginRight:85},children:(0,p.jsx)("button",{onClick:function(){return(0,n.FP)(f.field_map.length,f,h)},className:"icn-btn sh-sm",type:"button",children:"+"})})]}),(null==(d=f.default)||null==(o=d.fields)||null==(c=o[f.module])?void 0:c.uploadFields)&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"mt-4",children:[(0,p.jsx)("b",{className:"wdt-100",children:(0,i.__)("Map File Upload Fields","bitform")}),(0,p.jsx)("button",{onClick:function(){return(0,s.GX)(f,h,v,x)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,i.__)("Refresh Fields","bitform")+"'"},type:"button",disabled:b,children:"↻"})]}),(0,p.jsx)("div",{className:"btcd-hr mt-1"}),(0,p.jsxs)("div",{className:"flx flx-around mt-2 mb-1",children:[(0,p.jsx)("div",{className:"txt-dp",children:(0,p.jsx)("b",{children:(0,i.__)("Form Fields","bitform")})}),(0,p.jsx)("div",{className:"txt-dp",children:(0,p.jsx)("b",{children:(0,i.__)("WooCommerce Fields","bitform")})})]}),f.upload_field_map.map((function(e,t){return(0,p.jsx)(_,{i:t,field:e,wcConf:f,formFields:m,setWcConf:h,uploadFields:!0},"wc-m-"+(t+9))})),(0,p.jsx)("div",{className:"txt-center  mt-2",style:{marginRight:85},children:(0,p.jsx)("button",{onClick:function(){return(0,n.FP)(f.field_map.length,f,h,!0)},className:"icn-btn sh-sm",type:"button",children:"+"})})]})]})}}}]);