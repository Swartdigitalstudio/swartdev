"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[9956],{8940:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(73305),s=n(4637);function l(e){var t=e.step,n=e.saveConfig,l=e.edit,a=e.disabled;return l?(0,s.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,s.jsx)("button",{onClick:n,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:a,children:(0,i.__)("Update","bitform")})}):(0,s.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,s.jsx)("h2",{className:"ml-3",children:(0,i.__)("Successfully Integrated","bitform")}),(0,s.jsxs)("button",{onClick:n,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,i.__)("Finish & Save ","bitform")," ✔"]})]})}},19956:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var i=n(665),s=n(59496),l=n(87230),a=n(73305),r=n(65194),o=n(53132),d=n(8940),c=n(53498),m=n(65323),u=n(4637);const f=function(e){var t=e.formFields,n=e.setIntegration,f=e.integrations,b=e.allIntegURL,h=(0,l.k6)(),p=(0,l.UO)(),x=p.id,_=p.formID,g=(0,s.useState)((0,i.Z)({},f[x])),j=g[0],v=g[1],k=(0,s.useState)(!1),C=k[0],F=k[1],y=(0,s.useState)({show:!1}),N=y[0],Z=y[1];return(0,u.jsxs)("div",{style:{width:900},children:[(0,u.jsx)(r.Z,{snack:N,setSnackbar:Z}),(0,u.jsxs)("div",{className:"flx mt-3",children:[(0,u.jsx)("b",{className:"wdt-100 d-in-b",children:(0,a.__)("Integration Name:","bitform")}),(0,u.jsx)("input",{className:"btcd-paper-inp w-7",onChange:function(e){return(0,c.Rx)(e,_,j,v)},name:"name",value:j.name,type:"text",placeholder:(0,a.__)("Integration Name...","bitform")})]}),(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),(0,u.jsx)(m.Z,{formID:_,formFields:t,handleInput:function(e){return(0,c.Rx)(e,_,j,v,F,Z)},marketingHubConf:j,setMarketingHubConf:v,isLoading:C,setisLoading:F,setSnackbar:Z}),(0,u.jsx)(d.Z,{edit:!0,saveConfig:function(){(0,c.Pd)(j)?(0,o.Mm)(f,n,b,j,h,x,1):Z({show:!0,msg:(0,a.__)("Please map mandatory fields","bitform")})},disabled:""===j.list||""===j.table||j.field_map.length<1})]})}},53498:(e,t,n)=>{n.d(t,{Rx:()=>a,aS:()=>o,Pg:()=>d,Pd:()=>c});var i=n(665),s=n(73305),l=n(77111),a=function(e,t,n,s,l,a,o,d,c){var m=(0,i.Z)({},n);if(o){var u=(0,i.Z)({},d);u[e.target.name]="",c((0,i.Z)({},u))}if(m[e.target.name]=e.target.value,"list"===e.target.name)m=r(m,t,s,l,a);s((0,i.Z)({},m))},r=function(e,t,n,s,l){var a,r,o=(0,i.Z)({},e);return o.field_map=[{formField:"",zohoFormField:"Contact Email"}],null!=o&&null!=(a=o.default)&&null!=(r=a.fields)&&r[o.list]||d(t,o,n,s,l),o},o=function(e,t,n,a,r){a(!0);var o={formID:e,id:t.id,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,l.Z)(o,"bitforms_zmarketingHub_refresh_lists").then((function(e){if(e&&e.success){var l=(0,i.Z)({},t);e.data.lists&&(l.default=(0,i.Z)({},l.default,{lists:e.data.lists})),e.data.tokenDetails&&(l.tokenDetails=e.data.tokenDetails),r({show:!0,msg:(0,s.__)("Lists refreshed","bitform")}),n((0,i.Z)({},l))}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?r({show:!0,msg:""+(0,s.__)("Lists refresh failed Cause:")+(e.data.data||e.data)+". "+(0,s.__)("please try again","bitform")}):r({show:!0,msg:(0,s.__)("Lists refresh failed. please try again","bitform")});a(!1)})).catch((function(){return a(!1)}))},d=function(e,t,n,a,r){var o=t.list;if(o){a(!0);var d={formID:e,list:o,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,l.Z)(d,"bitforms_zmarketingHub_refresh_contact_fields").then((function(e){if(e&&e.success){var l=(0,i.Z)({},t);e.data.fields?(l.default.fields||(l.default.fields={}),l.default.fields[o]=e.data,r({show:!0,msg:(0,s.__)("Contact Fields refreshed","bitform")})):r({show:!0,msg:(0,s.__)("Zoho didn't provide fields names for this list","bitform")}),e.data.tokenDetails&&(l.tokenDetails=e.data.tokenDetails),n((0,i.Z)({},l))}else r({show:!0,msg:(0,s.__)("Contact Fields refresh failed. please try again","bitform")});a(!1)})).catch((function(){return a(!1)}))}},c=function(e){return!((null!=e&&e.field_map?e.field_map.filter((function(t){var n,i,s;return!t.formField&&t.zohoFormField&&-1!==(null==e||null==(n=e.default)||null==(i=n.fields)||null==(s=i[e.list])?void 0:s.required.indexOf(t.zohoFormField))})):[]).length>0)}},65323:(e,t,n)=>{n.d(t,{Z:()=>b});var i=n(73305),s=n(67860),l=n(53132),a=n(53498),r=n(44084),o=n(84448),d=n(94557),c=n(2699),m=n(37029),u=n(4637);function f(e){var t,n,s,a,f=e.i,b=e.formFields,h=e.field,p=e.marketingHubConf,x=e.setMarketingHubConf,_=""===h.zohoFormField||-1===(null==(t=p.default.fields[p.list].required)?void 0:t.indexOf(h.zohoFormField)),g=(0,r.sJ)(o.hi).isPro;return(0,u.jsxs)("div",{className:"flx mt-2 mr-1",children:[(0,u.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,u.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:h.formField||"",onChange:function(e){return(0,l.wX)(e,f,p,x)},children:[(0,u.jsx)("option",{value:"",children:(0,i.__)("Select Field","bitform")}),(0,u.jsx)("optgroup",{label:"Form Fields",children:b.map((function(e){return"file-up"!==e.type&&(0,u.jsx)("option",{value:e.key,children:e.name},"ff-zhcrm-"+e.key)}))}),(0,u.jsx)("option",{value:"custom",children:(0,i.__)("Custom...","bitform")}),(0,u.jsx)("optgroup",{label:"General Smart Codes "+(g?"":"(PRO)"),children:g&&(null==c.C?void 0:c.C.map((function(e){return(0,u.jsx)("option",{value:e.name,children:e.label},"ff-rm-"+e.name)})))})]}),"custom"===h.formField&&(0,u.jsx)(m.Z,{onChange:function(e){return(0,l.mG)(e,f,p,x)},label:(0,i.__)("Custom Value","bitform"),className:"mr-2",type:"text",value:h.customValue,placeholder:(0,i.__)("Custom Value","bitform")}),(0,u.jsxs)("select",{className:"btcd-paper-inp",name:"zohoFormField",value:h.zohoFormField||"",disabled:!_,onChange:function(e){return(0,l.wX)(e,f,p,x)},children:[(0,u.jsx)("option",{value:"",children:(0,i.__)("Select Field","bitform")}),_?(null==p||null==(n=p.default)||null==(s=n.fields)||null==(a=s[p.list])?void 0:a.fields)&&p.default.fields[p.list].fields.map((function(e){return"Contact Email"!==e&&(0,u.jsx)("option",{value:e,children:e},e+"-1")})):(0,u.jsx)("option",{value:"Contact Email",children:(0,i.__)("Contact Email","bitform")},"contact_email")]})]}),(0,u.jsx)("button",{onClick:function(){return(0,l.FP)(f,p,x)},className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),_&&(0,u.jsx)("button",{onClick:function(){return(0,l.T5)(f,p,x)},className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:(0,u.jsx)(d.Z,{})})]})}function b(e){var t,n,r,o=e.formID,d=e.formFields,c=e.handleInput,m=e.marketingHubConf,b=e.setMarketingHubConf,h=e.isLoading,p=e.setisLoading,x=e.setSnackbar;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("br",{}),(0,u.jsx)("b",{className:"wdt-100 d-in-b",children:(0,i.__)("List:","bitform")}),(0,u.jsxs)("select",{onChange:function(e){return c(e)},name:"list",value:m.list,className:"btcd-paper-inp w-7",children:[(0,u.jsx)("option",{value:"",children:(0,i.__)("Select List","bitform")}),(null==m||null==(t=m.default)?void 0:t.lists)&&Object.values(m.default.lists).map((function(e){return(0,u.jsx)("option",{value:e.listkey,children:e.listname},e.listkey)}))]}),(0,u.jsx)("button",{onClick:function(){return(0,a.aS)(o,m,b,p,x)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,i.__)("Refresh MarketingHub Lists","bitform")+"'"},type:"button",disabled:h,children:"↻"}),(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),h&&(0,u.jsx)(s.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),m.list&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"mt-4",children:[(0,u.jsx)("b",{className:"wdt-100",children:(0,i.__)("Map Fields","bitform")}),(0,u.jsx)("button",{onClick:function(){return(0,a.Pg)(o,m,b,p,x)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,i.__)("Refresh MarketingHub Contact Fields","bitform")+"'"},type:"button",disabled:h,children:"↻"})]}),(0,u.jsx)("div",{className:"btcd-hr mt-1"}),(null==(n=m.default)||null==(r=n.fields)?void 0:r[m.list])&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"flx flx-around mt-2 mb-1",children:[(0,u.jsx)("div",{className:"txt-dp",children:(0,u.jsx)("b",{children:(0,i.__)("Form Fields","bitform")})}),(0,u.jsx)("div",{className:"txt-dp",children:(0,u.jsx)("b",{children:(0,i.__)("Zoho Fields","bitform")})})]}),m.field_map.map((function(e,t){return(0,u.jsx)(f,{i:t,field:e,marketingHubConf:m,formFields:d,setMarketingHubConf:b},"marketingHub-m-"+(t+9))})),(0,u.jsx)("div",{className:"txt-center  mt-2",style:{marginRight:85},children:(0,u.jsx)("button",{onClick:function(){return(0,l.FP)(m.field_map.length,m,b)},className:"icn-btn sh-sm",type:"button",children:"+"})})]})]})]})}}}]);