"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[8371],{18371:(e,t,s)=>{s.r(t),s.d(t,{default:()=>$});var r=s(21519),n=s(92634),a=s.n(n),i=s(59496),c=s(97998),l=s(87230),o=s(73305),u=s(665),p=s(14103),d=s(44084),m=s(84448),h=s(47359),f=s(94557),x=s(33591),v=s(94248),b=s(8665),j=s(83524),y=s(85012),g=s(4637);function k(e){var t,s,n=e.removeIntegration,c=(0,i.useState)({show:!1,action:null}),l=c[0],k=c[1],_=(0,d.FV)(m.UL),N=_[0],w=_[1],Z=(0,d.sJ)(m.uJ),C=function(){var e=(0,r.Z)(a().mark((function e(t){var s,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=(0,x.p$)(N),r=s.type.successMsg[t],s.type.successMsg.splice(t,1),w(s),l.show=!1,k((0,u.Z)({},l)),void 0===r.id){e.next=11;break}return e.next=9,n(r.id,"msg");case 9:e.sent||(s.type.successMsg.splice(t,0,r),w(s));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,g.jsxs)("div",{children:[(0,g.jsx)(j.Z,{action:l.action,show:l.show,body:(0,o.__)("Are you sure to delete this message ?","bitform"),btnTxt:(0,o.__)("Delete","bitform"),close:function(){l.show=!1,k((0,u.Z)({},l))}}),null!=N&&null!=(t=N.type)&&t.successMsg?null==(s=N.type.successMsg)?void 0:s.map((function(e,t){return(0,g.jsxs)("div",{className:"flx",children:[(0,g.jsx)(v.Z,{title:e.title,titleEditable:!0,cls:"mt-2 mr-2 w-9",onTitleChange:function(e){return function(e,t){var s=(0,x.p$)(N);s.type.successMsg[t].title=e.target.value,w(s)}(e,t)},children:(0,g.jsx)(y.Z,{id:"conf-"+t,formFields:Z,value:e.msg,onChangeHandler:function(e){return s=e,r=t,void w((function(e){return(0,p.ZP)(e,(function(e){e.type.successMsg[r].msg=s}))}));var s,r}})}),(0,g.jsx)(b.Z,{onClick:function(){return function(e){l.show=!0,l.action=function(){return C(e)},k((0,u.Z)({},l))}(t)},icn:!0,className:"sh-sm white mt-2",children:(0,g.jsx)(f.Z,{size:16})})]},"f-m-"+(t+1))})):(0,g.jsxs)("div",{className:"txt-center btcd-empty",children:[(0,g.jsx)("span",{className:"btcd-icn icn-stack"}),(0,o.__)("Empty","bitform")]}),(0,g.jsx)("div",{className:"txt-center",children:(0,g.jsx)(b.Z,{onClick:function(){var e,t=(0,x.p$)(N);null!=t&&null!=(e=t.type)&&e.successMsg||(t.type=(0,u.Z)({successMsg:[]},t.type)),t.type.successMsg.push({title:"Untitled Message "+(t.type.successMsg.length+1),msg:(0,o.__)("Successfully Submitted.","bitform")}),w(t)},icn:!0,className:"sh-sm blue tooltip mt-2",style:{"--tooltip-txt":"'"+(0,o.__)("Add More Alternative Success Message","bitform")+"'"},children:(0,g.jsx)(h.Z,{size:"14",stroke:"3",className:"icn-rotate-45"})})})]})}const _=(0,i.memo)(k);var N=s(77111);function w(e){var t,s=e.removeIntegration,n=(0,i.useState)({show:!1,action:null}),c=n[0],l=n[1],p=(0,i.useState)(null),y=p[0],k=p[1],_=(0,d.FV)(m.UL),w=_[0],Z=_[1],C=(0,d.sJ)(m.uJ);(0,i.useEffect)((function(){(0,N.Z)(null,"bitforms_get_all_wp_pages").then((function(e){null!=e&&e.success&&null!=e&&e.data&&k(e.data)}))}),[]);var P=function(e){return e.match(/(\?|&)([^=]+)=([^&]+|)/gi)},H=function(e,t,s,r){var n=(0,x.p$)(w);""!==t?n.type.redirectPage[r].url="key"===e?n.type.redirectPage[r].url.replace(s,""+s.charAt(0)+t+"="+s.split("=")[1]):n.type.redirectPage[r].url.replace(s,s.split("=")[0]+"="+t):null===s.match(/\?/g)?n.type.redirectPage[r].url=n.type.redirectPage[r].url.replace(s,""):n.type.redirectPage[r].url=n.type.redirectPage[r].url.replace(s+"&","?"),Z(n)},T=function(){var e=(0,r.Z)(a().mark((function e(t){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,x.p$)(w),n=r.type.redirectPage[t],r.type.redirectPage.splice(t,1),Z(r),c.show=!1,l((0,u.Z)({},c)),void 0===n.id){e.next=11;break}return e.next=9,s(n.id,"url");case 9:e.sent||(r.type.redirectPage.splice(t,0,n),Z(r));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,g.jsxs)("div",{children:[(0,g.jsx)(j.Z,{action:c.action,show:c.show,body:(0,o.__)("Are you sure to delete this URL ?","bitform"),btnTxt:(0,o.__)("Delete","bitform"),close:function(){c.show=!1,l((0,u.Z)({},c))}}),null!=w&&null!=(t=w.type)&&t.redirectPage?w.type.redirectPage.map((function(e,t){return(0,g.jsxs)("div",{className:"flx",children:[(0,g.jsxs)(v.Z,{title:e.title,titleEditable:!0,cls:"mt-2 mr-2 w-9",onTitleChange:function(e){return function(e,t){var s=(0,x.p$)(w);s.type.redirectPage[t].title=e.target.value,Z(s)}(e,t)},children:[(0,g.jsx)("div",{className:"f-m",children:(0,o.__)("Select A Page:","bitform")}),(0,g.jsxs)("select",{className:"btcd-paper-inp mt-1",onChange:function(e){return function(e,t){var s=(0,x.p$)(w);s.type.redirectPage[t].url=e.target.value,Z(s)}(e,t)},children:[(0,g.jsx)("option",{value:"",children:(0,o.__)("Custom Link","bitform")}),y&&y.map((function(e,t){return(0,g.jsx)("option",{value:e.url,children:e.title},"r-url-"+(t+22))}))]}),(0,g.jsx)("br",{}),(0,g.jsx)("br",{}),(0,g.jsx)("div",{className:"f-m",children:"Link:"}),(0,g.jsx)("input",{onChange:function(e){return function(e,t){var s=(0,x.p$)(w);s.type.redirectPage[t].url=e,Z(s)}(e.target.value,t)},className:"btcd-paper-inp mt-1",type:"text",value:e.url}),(0,g.jsx)("br",{}),(0,g.jsx)("br",{}),(0,g.jsx)("div",{className:"f-m",children:(0,o.__)("Add Url Parameter: (optional)","bitform")}),(0,g.jsx)("div",{className:"btcd-param-t-wrp mt-1",children:(0,g.jsxs)("div",{className:"btcd-param-t",children:[(0,g.jsxs)("div",{className:"tr",children:[(0,g.jsx)("div",{className:"td",children:(0,o.__)("Key","bitform")}),(0,g.jsx)("div",{className:"td",children:(0,o.__)("Value","bitform")})]}),null!==P(e.url)&&P(e.url).map((function(e,s){return(0,g.jsxs)("div",{className:"tr",children:[(0,g.jsx)("div",{className:"td",children:(0,g.jsx)("input",{className:"btcd-paper-inp p-i-sm",onChange:function(s){return H("key",s.target.value,e,t)},type:"text",value:e.split("=")[0].substr(1)})}),(0,g.jsx)("div",{className:"td",children:(0,g.jsx)("input",{className:"btcd-paper-inp p-i-sm",onChange:function(s){return H("val",s.target.value,e,t)},type:"text",value:e.split("=")[1]})}),(0,g.jsxs)("div",{className:"flx p-atn",children:[(0,g.jsx)(b.Z,{onClick:function(){return function(e,t){var s=(0,x.p$)(w);s.type.redirectPage[e].url=s.type.redirectPage[e].url.replace(t,""),Z(s)}(t,e)},icn:!0,children:(0,g.jsx)(f.Z,{size:16})}),(0,g.jsx)("span",{className:"tooltip",style:{"--tooltip-txt":"'"+(0,o.__)("set Form Field","bitform")+"'",position:"relative"},children:(0,g.jsxs)("select",{className:"btcd-paper-inp p-i-sm mt-1",onChange:function(s){return function(e,t,s){var r=(0,x.p$)(w),n=s.split("=");n[1]=e,r.type.redirectPage[t].url=r.type.redirectPage[t].url.replace(s,n.join("=")),Z(r)}(s.target.value,t,e)},defaultValue:e.split("=")[1],children:[(0,g.jsx)("option",{value:"",children:(0,o.__)("Select Form Field","bitform")}),null!==C&&C.map((function(e){return!e.type.match(/^(file-up|recaptcha)$/)&&(0,g.jsx)("option",{value:"${"+e.key+"}",children:e.name},e.key)}))]})})]})]},"url-p-"+(s+21))})),(0,g.jsx)(b.Z,{onClick:function(){return function(e){var t=(0,x.p$)(w);null!==t.type.redirectPage[e].url.match(/\?/g)?t.type.redirectPage[e].url+="&key=value":t.type.redirectPage[e].url+="?key=value",Z(t)}(t)},className:"add-pram",icn:!0,children:(0,g.jsx)(h.Z,{size:"14",stroke:"3",className:"icn-rotate-45"})})]})})]}),(0,g.jsx)(b.Z,{onClick:function(){return function(e){c.show=!0,c.action=function(){return T(e)},l((0,u.Z)({},c))}(t)},icn:!0,className:"sh-sm white mt-2",children:(0,g.jsx)(f.Z,{size:16})})]},"f-u-"+(t+1))})):(0,g.jsxs)("div",{className:"txt-center btcd-empty",children:[(0,g.jsx)("span",{className:"btcd-icn icn-stack"}),(0,o.__)("Empty","bitform")]}),(0,g.jsx)("div",{className:"txt-center",children:(0,g.jsx)(b.Z,{onClick:function(){var e,t=(0,x.p$)(w);null!=t&&null!=(e=t.type)&&e.redirectPage||(t.type=(0,u.Z)({redirectPage:[]},t.type)),t.type.redirectPage.push({title:"Redirect Url "+(t.type.redirectPage.length+1),url:""}),Z(t)},icn:!0,className:"sh-sm blue tooltip mt-2",style:{"--tooltip-txt":"'"+(0,o.__)("Add More Alternative URl","bitform")+"'"},children:(0,g.jsx)(h.Z,{size:"14",stroke:"3",className:"icn-rotate-45"})})})]})}const Z=(0,i.memo)(w);var C=s(19753),P=s(65194);function H(e){var t,s=e.removeIntegration,n=(0,i.useState)({show:!1,action:null}),c=n[0],l=n[1],p=(0,i.useState)({show:!1}),y=p[0],k=p[1],_=(0,d.FV)(m.UL),w=_[0],Z=_[1],H=(0,d.sJ)(m.uJ),T=(0,i.useRef)([]),$=function(e){e&&!T.current.includes(e)&&T.current.push(e)},E=function(e){var t=e.match(/(\?|&)([^=]+)=([^&]+|)/gi),s=[];if(t)for(var r=0;r<t.length;r+=1){var n=t[r].split("=");s.push({key:n[0].substring(1),value:n[1]})}return s},A=function(e,t,s,r){var n=(0,x.p$)(w);n.type.webHooks[s].params[r][e]=t,n.type.webHooks[s].url=L(s),Z(n)},M=function(){var e=(0,r.Z)(a().mark((function e(t){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,x.p$)(w),n=r.type.webHooks[t],r.type.webHooks.splice(t,1),Z(r),c.show=!1,l((0,u.Z)({},c)),void 0===n.id){e.next=11;break}return e.next=9,s(n.id,"hook");case 9:e.sent||(r.type.webHooks.splice(t,0,n),Z(r));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(e){var t=(0,x.p$)(w);(0,N.Z)({hookDetails:t.type.webHooks[e]},"bitforms_test_webhook").then((function(t){if(t&&t.success)0===t.data.response.length?T.current[e].innerHTML=(0,o.__)("No response from the server"):T.current[e].innerHTML="<pre>"+function(e){try{return JSON.stringify(e,null,2)}catch(t){return e}}(t.data.response)+"</pre>",k({show:!0,msg:(0,o.__)(t.data.msg)});else if(t&&t.data){var s="string"===typeof t.data?t.data:"Unknown error";k({show:!0,msg:s+". "+(0,o.__)("please try again","bitform")})}else k({show:!0,msg:(0,o.__)("Webhook tests failed. please try again","bitform")})}))},L=function(e){var t=(0,x.p$)(w),s=t.type.webHooks[e].url,r=t.type.webHooks[e].params;if(s=s.replaceAll(/\?.*/gi,""),r)for(var n=r.length,a=0;a<n;a+=1)0===a&&null===s.match(/\?/g)?s+="?"+r[a].key+"="+r[a].value:s+="&"+r[a].key+"="+r[a].value;return s};return(0,g.jsxs)("div",{children:[(0,g.jsx)(P.Z,{snack:y,setSnackbar:k}),(0,g.jsx)(j.Z,{action:c.action,show:c.show,body:(0,o.__)("Are you sure to delete this web hook?","bitform"),btnTxt:(0,o.__)("Delete","bitform"),close:function(){c.show=!1,l((0,u.Z)({},c))}}),null!=w&&null!=(t=w.type)&&t.webHooks?w.type.webHooks.map((function(e,t){return(0,g.jsxs)("div",{className:"flx",children:[(0,g.jsxs)(v.Z,{title:e.title,titleEditable:!0,cls:"mt-2 mr-2 w-9",onTitleChange:function(e){return function(e,t){var s=(0,x.p$)(w);s.type.webHooks[t].title=e.target.value,Z(s)}(e,t)},children:[(0,g.jsx)("br",{}),(0,g.jsxs)("div",{className:"flx",children:[(0,g.jsxs)("div",{className:"w-7 mr-2",children:[(0,g.jsx)("div",{className:"f-m",children:(0,o.__)("Link:","bitform")}),(0,g.jsx)("input",{onChange:function(e){return function(e,t){var s=(0,x.p$)(w);Z(s),s.type.webHooks[t].url=e,s.type.webHooks[t].params=E(e)}(e.target.value,t)},className:"btcd-paper-inp mt-1",type:"text",value:e.url})]}),(0,g.jsxs)("div",{className:"w-3",children:[(0,g.jsx)("div",{className:"f-m",children:(0,o.__)("Method:","bitform")}),(0,g.jsxs)("select",{onChange:function(e){return function(e,t){var s=(0,x.p$)(w);s.type.webHooks[t].method=e,Z(s)}(e.target.value,t)},defaultValue:e.method,className:"btcd-paper-inp mt-1",children:[(0,g.jsx)("option",{value:"GET",children:"GET"}),(0,g.jsx)("option",{value:"POST",children:"POST"}),(0,g.jsx)("option",{value:"PUT",children:"PUT"}),(0,g.jsx)("option",{value:"PATCH",children:"PATCH"}),(0,g.jsx)("option",{value:"OPTION",children:"OPTION"}),(0,g.jsx)("option",{value:"DELETE",children:"DELETE"}),(0,g.jsx)("option",{value:"TRACE",children:"TRACE"}),(0,g.jsx)("option",{value:"CONNECT",children:"CONNECT"})]})]})]}),(0,g.jsx)(b.Z,{onClick:function(){return S(t)},className:"btn btcd-btn-o-blue",children:(0,o.__)("Test Webhook","bitform")}),(0,g.jsx)("br",{}),(0,g.jsxs)("div",{className:"wh-resp-box",children:[(0,g.jsx)("div",{className:"f-m wh-resp-box-title",children:(0,o.__)("Response:","bitform")}),(0,g.jsx)("div",{className:"wh-resp-box-content",ref:$,children:"Test Webhook to see the response."})]}),(0,g.jsx)("br",{}),(0,g.jsx)("div",{className:"f-m",children:(0,o.__)("Add Url Parameter: (optional)","bitform")}),(0,g.jsx)("div",{className:"btcd-param-t-wrp mt-1",children:(0,g.jsxs)("div",{className:"btcd-param-t",children:[(0,g.jsxs)("div",{className:"tr",children:[(0,g.jsx)("div",{className:"td",children:(0,o.__)("Key","bitform")}),(0,g.jsx)("div",{className:"td",children:(0,o.__)("Value","bitform")})]}),(null==e?void 0:e.params)&&e.params.map((function(e,s){var r=e.key,n=e.value;return(0,g.jsxs)("div",{className:"tr",children:[(0,g.jsx)("div",{className:"td",children:(0,g.jsx)("input",{className:"btcd-paper-inp p-i-sm",onChange:function(e){return A("key",e.target.value,t,s)},type:"text",value:r})}),(0,g.jsx)("div",{className:"td",children:(0,g.jsx)("input",{className:"btcd-paper-inp p-i-sm",onChange:function(e){return A("value",e.target.value,t,s)},type:"text",value:n})}),(0,g.jsxs)("div",{className:"flx p-atn",children:[(0,g.jsx)(b.Z,{onClick:function(){return function(e,t){var s=(0,x.p$)(w);s.type.webHooks[e].params.splice(t,1),s.type.webHooks[e].url=L(e),Z(s)}(t,s)},icn:!0,children:(0,g.jsx)(f.Z,{size:16})}),(0,g.jsx)(C.Z,{options:H.map((function(e){return{label:e.name,value:"${"+e.key+"}"}})),className:"btcd-paper-drpdwn wdt-200 ml-2",singleSelect:!0,onChange:function(e){return A("value",e,t,s)},defaultValue:n})]})]},"url-p-"+(s+11))})),(0,g.jsx)(b.Z,{onClick:function(){return function(e){var t,s,r=(0,x.p$)(w);if(null!=(t=r.type.webHooks[e])&&t.params){if(null!=(s=r.type.webHooks[e])&&s.params){var n=r.type.webHooks[e].url;r.type.webHooks[e].params=E(n)}}else r.type.webHooks[e].params=[];r.type.webHooks[e].params.push({key:"key",value:"value"}),r.type.webHooks[e].url=L(e),Z(r)}(t)},className:"add-pram",icn:!0,children:(0,g.jsx)(h.Z,{size:"14",stroke:"3",className:"icn-rotate-45"})})]})})]}),(0,g.jsx)(b.Z,{onClick:function(){return function(e){c.show=!0,c.action=function(){return M(e)},l((0,u.Z)({},c))}(t)},icn:!0,className:"sh-sm white mt-2",children:(0,g.jsx)(f.Z,{size:16})})]},"f-u-"+(t+1))})):(0,g.jsxs)("div",{className:"txt-center btcd-empty",children:[(0,g.jsx)("span",{className:"btcd-icn icn-stack"}),(0,o.__)("Empty","bitform")]}),(0,g.jsx)("div",{className:"txt-center",children:(0,g.jsx)(b.Z,{onClick:function(){var e,t=(0,x.p$)(w);null!=t&&null!=(e=t.type)&&e.webHooks||(t.type=(0,u.Z)({webHooks:[]},t.type)),t.type.webHooks.push({title:"Web Hook "+(t.type.webHooks.length+1),url:"",method:"GET"}),Z(t)},icn:!0,className:"sh-sm blue tooltip mt-2",style:{"--tooltip-txt":"'"+(0,o.__)("Add More Hook","bitform")+"'"},children:(0,g.jsx)(h.Z,{size:"14",stroke:"3",className:"icn-rotate-45"})})})]})}const T=(0,i.memo)(H);function $(e){var t=e.formID,s=(0,l.$B)().path,n=function(){var e=(0,r.Z)(a().mark((function e(s,r){var n,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=null),n="bitforms_delete_integration",r&&"msg"===r&&(n="bitforms_delete_success_messsage"),e.next=5,(0,N.Z)({formID:t,id:s},n);case 5:return i=void 0!==(i=e.sent)?i.success:i.data&&i.data.data?i.data.data:null,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}();return(0,g.jsxs)("div",{className:"mt-4",style:{width:900},children:[(0,g.jsx)("h2",{children:(0,o.__)("Confirmations","bitform")}),(0,g.jsxs)("div",{children:[(0,g.jsx)(c.OL,{exact:!0,to:"/form/settings/edit/"+t+"/confirmations",className:"btcd-f-c-t-o mr-4 sh-sm",activeClassName:"btcd-f-c-t-o-a",children:(0,o.__)("Success/Error Messages","bitform")}),(0,g.jsx)(c.OL,{to:"/form/settings/edit/"+t+"/confirmations/redirect-url",className:"btcd-f-c-t-o mr-4 sh-sm",activeClassName:"btcd-f-c-t-o-a",children:(0,o.__)("Redirect Page","bitform")}),(0,g.jsx)(c.OL,{to:"/form/settings/edit/"+t+"/confirmations/webhooks",className:"btcd-f-c-t-o mr-4 sh-sm",activeClassName:"btcd-f-c-t-o-a",children:(0,o.__)("Web Hooks","bitform")})]}),(0,g.jsx)("br",{}),(0,g.jsx)("br",{}),(0,g.jsxs)(l.rs,{children:[(0,g.jsx)(l.AW,{exact:!0,path:s,children:(0,g.jsx)(_,{removeIntegration:n})}),(0,g.jsx)(l.AW,{path:s+"/:redirect-url",children:(0,g.jsx)(Z,{removeIntegration:n})}),(0,g.jsx)(l.AW,{path:s+"/:webhooks",children:(0,g.jsx)(T,{removeIntegration:n})})]})]})}}}]);