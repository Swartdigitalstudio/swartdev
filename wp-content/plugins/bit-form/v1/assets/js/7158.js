"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[7158],{8940:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(73305),s=n(4637);function a(e){var t=e.step,n=e.saveConfig,a=e.edit,l=e.disabled;return a?(0,s.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,s.jsx)("button",{onClick:n,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:l,children:(0,i.__)("Update","bitform")})}):(0,s.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,s.jsx)("h2",{className:"ml-3",children:(0,i.__)("Successfully Integrated","bitform")}),(0,s.jsxs)("button",{onClick:n,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,i.__)("Finish & Save ","bitform")," ✔"]})]})}},17158:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var i=n(665),s=n(59496),a=n(87230),l=n(73305),r=n(65194),o=n(53132),d=n(8940),c=n(59371),m=n(26298),f=n(4637);const u=function(e){var t=e.formFields,n=e.setIntegration,u=e.integrations,h=e.allIntegURL,p=(0,a.k6)(),b=(0,a.UO)(),x=b.id,_=b.formID,g=(0,s.useState)((0,i.Z)({},u[x])),v=g[0],j=g[1],C=(0,s.useState)(!1),F=C[0],k=C[1],y=(0,s.useState)({show:!1}),N=y[0],Z=y[1];return(0,f.jsxs)("div",{style:{width:900},children:[(0,f.jsx)(r.Z,{snack:N,setSnackbar:Z}),(0,f.jsxs)("div",{className:"flx mt-3",children:[(0,f.jsx)("b",{className:"wdt-100 d-in-b",children:(0,l.__)("Integration Name:","bitform")}),(0,f.jsx)("input",{className:"btcd-paper-inp w-7",onChange:function(e){return(0,c.Rx)(e,_,v,j)},name:"name",value:v.name,type:"text",placeholder:(0,l.__)("Integration Name...","bitform")})]}),(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),(0,f.jsx)(m.Z,{formID:_,formFields:t,handleInput:function(e){return(0,c.Rx)(e,_,v,j,k,Z)},campaignsConf:v,setCampaignsConf:j,isLoading:F,setisLoading:k,setSnackbar:Z}),(0,f.jsx)(d.Z,{edit:!0,saveConfig:function(){(0,c.Pd)(v)?(0,o.Mm)(u,n,h,v,p,x,1):Z({show:!0,msg:(0,l.__)("Please map mandatory fields","bitform")})},disabled:""===v.list||""===v.table||v.field_map.length<1})]})}},59371:(e,t,n)=>{n.d(t,{Rx:()=>l,aS:()=>o,Pg:()=>d,Pd:()=>c});var i=n(665),s=n(73305),a=n(77111),l=function(e,t,n,s,a,l){var o=(0,i.Z)({},n);if(o[e.target.name]=e.target.value,"list"===e.target.name)o=r(o,t,s,a,l);s((0,i.Z)({},o))},r=function(e,t,n,s,a){var l,r,o=(0,i.Z)({},e);return o.field_map=[{formField:"",zohoFormField:"Contact Email"}],null!=o&&null!=(l=o.default)&&null!=(r=l.fields)&&r[o.list]||d(t,o,n,s,a),o},o=function(e,t,n,l,r){l(!0);var o={formID:e,id:t.id,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,a.Z)(o,"bitforms_zcampaigns_refresh_lists").then((function(e){if(e&&e.success){var a=(0,i.Z)({},t);e.data.lists&&(a.default=(0,i.Z)({},a.default,{lists:e.data.lists})),e.data.tokenDetails&&(a.tokenDetails=e.data.tokenDetails),r({show:!0,msg:(0,s.__)("Lists refreshed","bitform")}),n((0,i.Z)({},a))}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?r({show:!0,msg:""+(0,s.__)("Lists refresh failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,s.__)("please try again","bitform")}):r({show:!0,msg:(0,s.__)("Lists refresh failed. please try again","bitform")});l(!1)})).catch((function(){return l(!1)}))},d=function(e,t,n,l,r){var o=t.list;if(o){l(!0);var d={formID:e,list:o,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,a.Z)(d,"bitforms_zcampaigns_refresh_contact_fields").then((function(e){if(e&&e.success){var a=(0,i.Z)({},t);e.data.fields?(a.default.fields||(a.default.fields={}),a.default.fields[o]=e.data,e.data.tokenDetails&&(a.tokenDetails=e.data.tokenDetails),r({show:!0,msg:(0,s.__)("Contact Fields refreshed","bitform")})):r({show:!0,msg:(0,s.__)("Zoho didn't provide fields names for this list","bitform")}),e.data.tokenDetails&&(a.tokenDetails=e.data.tokenDetails),n((0,i.Z)({},a))}else r({show:!0,msg:(0,s.__)("Contact Fields refresh failed. please try again","bitform")});l(!1)})).catch((function(){return l(!1)}))}},c=function(e){return!((null!=e&&e.field_map?e.field_map.filter((function(t){var n,i,s;return!t.formField&&t.zohoFormField&&-1!==(null==e||null==(n=e.default)||null==(i=n.fields)||null==(s=i[e.list])?void 0:s.required.indexOf(t.zohoFormField))})):[]).length>0)}},26298:(e,t,n)=>{n.d(t,{Z:()=>p});var i=n(73305),s=n(67860),a=n(59371),l=n(665),r=n(44084),o=n(84448),d=n(94557),c=n(2699),m=n(37029),f=n(4637),u=function(e,t,n){var i=(0,l.Z)({},t);i.field_map.splice(e,0,{}),n(i)};function h(e){var t,n,s,a,h=e.i,p=e.formFields,b=e.field,x=e.campaignsConf,_=e.setCampaignsConf,g=""===b.zohoFormField||-1===(null==(t=x.default.fields[x.list].required)?void 0:t.indexOf(b.zohoFormField)),v=(0,r.sJ)(o.hi).isPro,j=function(e,t){var n=(0,l.Z)({},x);n.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(n.field_map[t].customValue=""),_(n)};return(0,f.jsxs)("div",{className:"flx flx-around mt-2 "+(g&&"mr-1"),children:[(0,f.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:b.formField||"",onChange:function(e){return j(e,h)},children:[(0,f.jsx)("option",{value:"",children:(0,i.__)("Select Field","bitform")}),(0,f.jsx)("optgroup",{label:"Form Fields",children:p.map((function(e){return"file-up"!==e.type&&(0,f.jsx)("option",{value:e.key,children:e.name},"ff-zhcrm-"+e.key)}))}),(0,f.jsx)("option",{value:"custom",children:(0,i.__)("Custom...","bitform")}),(0,f.jsx)("optgroup",{label:"General Smart Codes "+(v?"":"(PRO)"),children:v&&(null==c.C?void 0:c.C.map((function(e){return(0,f.jsx)("option",{value:e.name,children:e.label},"ff-rm-"+e.name)})))})]}),"custom"===b.formField&&(0,f.jsx)(m.Z,{onChange:function(e){return function(e,t){var n=(0,l.Z)({},x);n.field_map[t].customValue=e.target.value,_(n)}(e,h)},label:(0,i.__)("Custom Value","bitform"),className:"mr-2",type:"text",value:b.customValue,placeholder:(0,i.__)("Custom Value","bitform")}),(0,f.jsxs)("select",{className:"btcd-paper-inp",name:"zohoFormField",value:b.zohoFormField||"",disabled:!g,onChange:function(e){return j(e,h)},children:[(0,f.jsx)("option",{value:"",children:(0,i.__)("Select Field","bitform")}),g?(null==x||null==(n=x.default)||null==(s=n.fields)||null==(a=s[x.list])?void 0:a.fields)&&x.default.fields[x.list].fields.map((function(e){return"Contact Email"!==e&&(0,f.jsx)("option",{value:e,children:e},e+"-1")})):(0,f.jsx)("option",{value:"Contact Email",children:(0,i.__)("Contact Email","bitform")},"contact_email")]}),(0,f.jsx)("button",{onClick:function(){return u(h,x,_)},className:"icn-btn sh-sm ml-2 "+(!g&&"mr-8"),type:"button",children:"+"}),g&&(0,f.jsx)("button",{onClick:function(){return function(e){var t=(0,l.Z)({},x);t.field_map.length>1&&t.field_map.splice(e,1),_(t)}(h)},className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:(0,f.jsx)(d.Z,{})})]})}function p(e){var t,n,l,r=e.formID,o=e.formFields,d=e.handleInput,c=e.campaignsConf,m=e.setCampaignsConf,p=e.isLoading,b=e.setisLoading,x=e.setSnackbar;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("br",{}),(0,f.jsx)("b",{className:"wdt-100 d-in-b",children:(0,i.__)("List:","bitform")}),(0,f.jsxs)("select",{onChange:function(e){return d(e)},name:"list",value:c.list,className:"btcd-paper-inp w-7",children:[(0,f.jsx)("option",{value:"",children:(0,i.__)("Select List","bitform")}),(null==c||null==(t=c.default)?void 0:t.lists)&&Object.values(c.default.lists).map((function(e){return(0,f.jsx)("option",{value:e.listkey,children:e.listname},e.listkey)}))]}),(0,f.jsx)("button",{onClick:function(){return(0,a.aS)(r,c,m,b,x)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,i.__)("Refresh Campaigns Lists","bitform")+"'"},type:"button",disabled:p,children:"↻"}),(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),p&&(0,f.jsx)(s.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),c.list&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"mt-4",children:[(0,f.jsx)("b",{className:"wdt-100",children:(0,i.__)("Map Fields","bitform")}),(0,f.jsx)("button",{onClick:function(){return(0,a.Pg)(r,c,m,b,x)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,i.__)("Refresh Campaigns Contact Fields","bitform")+"'"},type:"button",disabled:p,children:"↻"})]}),(0,f.jsx)("div",{className:"btcd-hr mt-1"}),(null==(n=c.default)||null==(l=n.fields)?void 0:l[c.list])&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"flx flx-around mt-2 mb-1",children:[(0,f.jsx)("div",{className:"txt-dp",children:(0,f.jsx)("b",{children:(0,i.__)("Form Fields","bitform")})}),(0,f.jsx)("div",{className:"txt-dp",children:(0,f.jsx)("b",{children:(0,i.__)("Zoho Fields","bitform")})})]}),c.field_map.map((function(e,t){return(0,f.jsx)(h,{i:t,field:e,campaignsConf:c,formFields:o,setCampaignsConf:m},"campaigns-m-"+(t+9))})),(0,f.jsx)("div",{className:"txt-center  mt-2",style:{marginRight:85},children:(0,f.jsx)("button",{onClick:function(){return u(c.field_map.length,c,m)},className:"icn-btn sh-sm",type:"button",children:"+"})})]})]})]})}}}]);