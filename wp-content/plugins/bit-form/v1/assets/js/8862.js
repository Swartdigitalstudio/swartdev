"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[8862],{84584:(e,t,a)=>{a.d(t,{FP:()=>d,Mm:()=>l,P_:()=>c,T5:()=>m,WK:()=>r,mG:()=>f,wX:()=>u});var n=a(72564),i=a(99484),s=a(44947),l=function(e,t,a,i,s,l,r){var c=[].concat(e);if(r)c[l]=(0,n.Z)({},e[l],i),c.push({editItegration:!0}),t([].concat(c)),s.push(a);else{var o=[].concat(c);o.push(i),o.push({newItegration:!0}),t(o),s.push(a)}},r=function(e){var t={},a=window.location.href.replace(window.opener.location.href+"/redirect","").split("&");a&&a.forEach((function(e){var a=e.split("=");a[1]&&(t[a[0]]=a[1])})),localStorage.setItem("__bitforms_"+e,JSON.stringify(t)),window.close()},c=function(e,t,a,s,l,r,c,d,m){if(s.dataCenter&&s.clientId&&s.clientSecret){d(!0);var u="https://accounts.zoho."+s.dataCenter+"/oauth/v2/auth?scope="+a+"&response_type=code&client_id="+s.clientId+"&prompt=Consent&access_type=offline&state="+encodeURIComponent(window.location.href)+"/redirect&redirect_uri="+encodeURIComponent(bits.zohoRedirectURL),f=window.open(u,e,"width=400,height=609,toolbar=off"),p=setInterval((function(){if(f.closed){clearInterval(p);var a={},r=!1,u=localStorage.getItem("__bitforms_"+e);if(u&&(r=!0,a=JSON.parse(u),localStorage.removeItem("__bitforms_"+e)),a.code&&!a.error&&a&&r){var h=(0,n.Z)({},s);h.accountServer=a["accounts-server"],o(t,a,h,l,c,d,m)}else{var _=a.error?"Cause: "+a.error:"";m({show:!0,msg:(0,i.__)("Authorization failed","bitform")+" "+_+". "+(0,i.__)("please try again","bitform")}),d(!1)}}}),500)}else r({dataCenter:s.dataCenter?"":(0,i.__)("Data center cann't be empty","bitform"),clientId:s.clientId?"":(0,i.__)("Client ID cann't be empty","bitform"),clientSecret:s.clientSecret?"":(0,i.__)("Secret key cann't be empty","bitform")})},o=function(e,t,a,l,r,c,o){var d=(0,n.Z)({},t);d.dataCenter=a.dataCenter,d.clientId=a.clientId,d.clientSecret=a.clientSecret,d.redirectURI=bits.zohoRedirectURL,(0,s.Z)(d,"bitforms_"+e+"_generate_token").then((function(e){return e})).then((function(e){if(e&&e.success){var t=(0,n.Z)({},a);t.tokenDetails=e.data,l(t),r(!0),o({show:!0,msg:(0,i.__)("Authorized Successfully","bitform")})}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?o({show:!0,msg:""+(0,i.__)("Authorization failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,i.__)("please try again","bitform")}):o({show:!0,msg:(0,i.__)("Authorization failed. please try again","bitform")});c(!1)}))},d=function(e,t,a,i,s){var l=(0,n.Z)({},t);s?i?l.relatedlists[s-1].upload_field_map.splice(e,0,{}):l.relatedlists[s-1].field_map.splice(e,0,{}):i?l.upload_field_map.splice(e,0,{}):l.field_map.splice(e,0,{}),a((0,n.Z)({},l))},m=function(e,t,a,i,s){var l=(0,n.Z)({},t);s?i?l.relatedlists[s-1].upload_field_map.length>1&&l.relatedlists[s-1].upload_field_map.splice(e,1):l.relatedlists[s-1].field_map.length>1&&l.relatedlists[s-1].field_map.splice(e,1):i?l.upload_field_map.length>1&&l.upload_field_map.splice(e,1):l.field_map.length>1&&l.field_map.splice(e,1),a((0,n.Z)({},l))},u=function(e,t,a,i,s,l){var r=(0,n.Z)({},a);l?s?r.relatedlists[l-1].upload_field_map[t][e.target.name]=e.target.value:r.relatedlists[l-1].field_map[t][e.target.name]=e.target.value:s?r.upload_field_map[t][e.target.name]=e.target.value:r.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(l?r.relatedlists[l-1].field_map[t].customValue="":r.field_map[t].customValue=""),i((0,n.Z)({},r))},f=function(e,t,a,i,s){var l=(0,n.Z)({},a);s?l.relatedlists[s-1].field_map[t].customValue=e.target.value:l.field_map[t].customValue=e.target.value,i((0,n.Z)({},l))}},19470:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(99484),i=a(4637);function s(e){var t=e.step,a=e.saveConfig,s=e.edit,l=e.disabled;return s?(0,i.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,i.jsx)("button",{onClick:a,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:l,children:(0,n.__)("Update","bitform")})}):(0,i.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,i.jsx)("h2",{className:"ml-3",children:(0,n.__)("Successfully Integrated","bitform")}),(0,i.jsxs)("button",{onClick:a,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,n.__)("Finish & Save ","bitform")," ✔"]})]})}},58862:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var n=a(72564),i=a(59496),s=a(83442),l=a(99484),r=a(24364),c=a(84584),o=a(19470);a(44947);var d=a(53220),m=a(4637);const u=function(e){var t=e.formFields,a=e.setIntegration,u=e.integrations,f=e.allIntegURL,p=(0,s.k6)(),h=(0,s.UO)().id,_=(0,i.useState)((0,n.Z)({},u[h])),b=_[0],v=_[1],x=(0,i.useState)({show:!1}),g=x[0],j=x[1],w=(0,i.useState)({show:!1}),y=w[0],C=w[1];return(0,m.jsxs)("div",{style:{width:900},children:[(0,m.jsx)(r.Z,{snack:g,setSnackbar:j}),(0,m.jsxs)("div",{className:"flx mt-3",children:[(0,m.jsx)("b",{className:"wdt-100 d-in-b",children:(0,l.__)("Integration Name:","bitform")}),(0,m.jsx)("input",{className:"btcd-paper-inp w-7",onChange:function(e){return function(e,t,a,i,s,l,r,c,o){var d=(0,n.Z)({},t);if(r){var m=(0,n.Z)({},c);m[e.target.name]="",o((0,n.Z)({},m))}d[e.target.name]=e.target.value,a((0,n.Z)({},d))}(e,b,v)},name:"name",value:b.name,type:"text",placeholder:(0,l.__)("Integration Name...","bitform")})]}),(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),(0,m.jsx)(d.Z,{formFields:t,mailConf:b,setMailConf:v}),(0,m.jsx)(o.Z,{edit:!0,saveConfig:function(){var e,t;null!=(e=b.actions)&&e.update&&""===(null==(t=b.actions)?void 0:t.update.criteria)&&"criteria"!==y.show?C({show:"criteria"}):(0,c.Mm)(u,a,f,b,p,h,1)}}),(0,m.jsx)("br",{})]})}},53220:(e,t,a)=>{a.d(t,{Z:()=>h});var n=a(72564),i=a(18846),s=a(52080),l=(a(32586),a(57287)),r=a(8309),c=a(99484),o=a(5218),d=a(59496),m=a(46249),u=a(3454),f=a(4637);function p(e){var t=e.formFields,a=e.mailConf,i=e.setMailConf,l=(0,d.useState)({show:!1}),r=l[0],o=l[1];return(0,f.jsxs)("div",{className:"pos-rel",children:[(0,f.jsx)("div",{className:"d-flx flx-wrp",children:(0,f.jsx)(u.Z,{onChange:function(){return o({show:"attachments"})},checked:"attachments"in a.actions,className:"wdt-200 mt-4 mr-2",value:"Attachment",title:(0,c.__)("Attachments","bitform"),subTitle:(0,c.__)("Add attachments from BitForm to mail pushed to Zoho Mail.","bitform")})}),(0,f.jsxs)(m.Z,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:"Ok",show:"attachments"===r.show,close:function(){return o({show:!1})},action:function(){return o({show:!1})},title:(0,c.__)("Select Attachment","bitform"),children:[(0,f.jsx)("div",{className:"btcd-hr mt-2"}),(0,f.jsx)("div",{className:"mt-2",children:(0,c.__)("Select file upload fields","bitform")}),(0,f.jsx)(s.Z,{defaultValue:a.actions.attachments,className:"mt-2 w-9",onChange:function(e){return function(e,t){var s=(0,n.Z)({},a);"attachments"===t&&(""!==e?s.actions.attachments=e:delete s.actions.attachments),i((0,n.Z)({},s))}(e,"attachments")},options:t.filter((function(e){return"file-up"===e.type})).map((function(e){return{label:e.name,value:e.key}}))})]})]})}function h(e){var t=e.formFields,a=e.mailConf,d=e.setMailConf,m=(0,l.sJ)(r.hi),u=(0,l.sJ)(r.uJ),h=function(){var e=[];m.userMail&&Array.isArray(m.userMail)&&e.push.apply(e,m.userMail);var a=[];return t.map((function(e){"email"===e.type&&a.push({label:e.name,value:"${"+e.key+"}"})})),e.push({title:"Form Fields",type:"group",childs:a}),e},_=function(e,t){d((function(a){var i=(0,n.Z)({},a);return i[t]=e,i}))};return(0,f.jsxs)("div",{style:{width:875},children:[(0,f.jsxs)("div",{className:"flx",children:[(0,f.jsx)("b",{style:{width:100},children:(0,c.__)("Type:","bitform")}),(0,f.jsxs)("select",{onChange:function(e){return _(e.target.value,"mailType")},className:"btcd-paper-inp",style:{width:150},value:a.mailType,children:[(0,f.jsx)("option",{value:"",children:(0,c.__)("Select type","bitform")}),(0,f.jsx)("option",{value:"send",children:(0,c.__)("Send Email","bitform")}),(0,f.jsx)("option",{value:"draft",children:(0,c.__)("Save as Draft","bitform")})]})]}),(0,f.jsxs)("div",{className:"flx",children:[(0,f.jsx)("b",{style:{width:100},children:"To:"}),(0,f.jsx)(s.Z,{className:"w-7 mt-2 btcd-paper-drpdwn",defaultValue:a.to,placeholder:(0,c.__)("Add Email Receiver","bitform"),onChange:function(e){return _(e,"to")},options:h(),customValue:!0})]}),(0,f.jsxs)("div",{className:"flx",children:[(0,f.jsx)("b",{style:{width:100},children:(0,c.__)("CC:","bitform")}),(0,f.jsx)(s.Z,{className:"w-7 mt-2 btcd-paper-drpdwn",defaultValue:a.cc,placeholder:(0,c.__)("Add Email CC","bitform"),onChange:function(e){return _(e,"cc")},options:h(),customValue:!0})]}),(0,f.jsxs)("div",{className:"flx",children:[(0,f.jsx)("b",{style:{width:100},children:(0,c.__)("BCC:","bitform")}),(0,f.jsx)(s.Z,{className:"w-7 mt-2 btcd-paper-drpdwn",defaultValue:a.bcc,placeholder:(0,c.__)("Add Email BCC","bitform"),onChange:function(e){return _(e,"bcc")},options:h(),customValue:!0})]}),(0,f.jsxs)("div",{className:"mt-2 flx",children:[(0,f.jsx)("b",{style:{width:100},children:(0,c.__)("Subject:","bitform")}),(0,f.jsx)("input",{type:"text",onChange:function(e){return _(e.target.value,"subject")},className:"btcd-paper-inp w-7",placeholder:(0,c.__)("Email Subject Here","bitform"),value:a.subject||""}),(0,f.jsxs)("select",{onChange:function(e){var t=(0,n.Z)({},a);t.subject+=e.target.value,d((0,n.Z)({},t)),e.target.value=""},className:"btcd-paper-inp ml-2",style:{width:150},children:[(0,f.jsx)("option",{value:"",children:(0,c.__)("Add form field","bitform")}),null!==t&&t.map((function(e){return!e.type.match(/^(file-up|recaptcha)$/)&&(0,f.jsx)("option",{value:"${"+e.key+"}",children:e.name},e.key)}))]})]}),(0,f.jsxs)("div",{className:"mt-3",children:[(0,f.jsx)("div",{className:"flx flx-between",children:(0,f.jsx)("b",{children:(0,c.__)("Body:","bitform")})}),(0,f.jsx)(o.Z,{id:"body-content",formFields:u,value:a.body||"",onChangeHandler:function(e){d((function(t){return(0,i.ZP)(t,(function(t){t.body=e}))}))}})]}),(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),(0,f.jsx)("div",{className:"mt-4",children:(0,f.jsx)("b",{className:"wdt-100",children:(0,c.__)("Actions","bitform")})}),(0,f.jsx)("div",{className:"btcd-hr mt-1"}),(0,f.jsx)(p,{mailConf:a,setMailConf:d,formFields:t})]})}}}]);