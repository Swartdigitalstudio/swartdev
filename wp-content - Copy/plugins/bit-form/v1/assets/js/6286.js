"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[6286],{86286:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var l=n(665),i=n(59496),s=n(87230),a=n(73305),r=n(65194),u=n(53132),d=n(8940),o=n(29712),f=n(55625),c=n(4637);const m=function(e){var t=e.formFields,n=e.setIntegration,m=e.integrations,b=e.allIntegURL,h=(0,s.k6)(),p=(0,s.UO)(),_=p.id,x=p.formID,C=(0,i.useState)((0,l.Z)({},m[_])),v=C[0],g=C[1],j=(0,i.useState)(!1),F=j[0],N=j[1],k=(0,i.useState)({show:!1}),y=k[0],w=k[1];return(0,c.jsxs)("div",{style:{width:900},children:[(0,c.jsx)(r.Z,{snack:y,setSnackbar:w}),(0,c.jsxs)("div",{className:"flx mt-3",children:[(0,c.jsx)("b",{className:"wdt-200 d-in-b",children:(0,a.__)("Integration Name:","bitform")}),(0,c.jsx)("input",{className:"btcd-paper-inp w-5",onChange:function(e){return(0,o.Rx)(e,v,g)},name:"name",value:v.name,type:"text",placeholder:(0,a.__)("Integration Name...","bitform")})]}),(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),(0,c.jsx)(f.Z,{formID:x,formFields:t,fluentCrmConf:v,setFluentCrmConf:g,isLoading:F,step:2,setisLoading:N,setSnackbar:w}),(0,c.jsx)(d.Z,{edit:!0,saveConfig:function(){(0,o.Pd)(v)?(0,u.Mm)(m,n,b,v,h,_,1):w({show:!0,msg:"Please map all required fields to continue."})},disabled:""===v.list_id||v.field_map.length<1}),(0,c.jsx)("br",{})]})}},29712:(e,t,n)=>{n.d(t,{ow:()=>a,Rx:()=>d,Pd:()=>o});var l=n(665),i=n(73305),s=n(77111),a=function(e,t,n,a,u){a(!0),(0,s.Z)({},"bitforms_refresh_fluent_crm_lists").then((function(e){if(e&&e.success){var s=(0,l.Z)({},t);s.default||(s.default={}),e.data.fluentCrmList&&(s.default.fluentCrmList=e.data.fluentCrmList),e.data.fluentCrmTags&&(s.default.fluentCrmTags=e.data.fluentCrmTags),u({show:!0,msg:(0,i.__)("FluentCRM list refreshed","bitform")}),r(s,n,a,u)}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?u({show:!0,msg:""+(0,i.__)("FluentCRM list refresh failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,i.__)("please try again","bitform")}):u({show:!0,msg:(0,i.__)("FluentCRM list refresh failed. please try again","bitform")});a(!1)})).catch((function(){return a(!1)}))},r=function(e,t,n,a){(0,s.Z)({},"bitforms_fluent_crm_headers").then((function(s){if(s&&s.success){var r=(0,l.Z)({},e);s.data.fluentCrmFlelds?(r.default.fields=s.data.fluentCrmFlelds,r.field_map=u(e),a({show:!0,msg:(0,i.__)("Fluent CRM fields refreshed","bitform")})):a({show:!0,msg:(0,i.__)("No Fluent CRM fields found. Try changing the header row number or try again","bitform")}),t((0,l.Z)({},r))}else a({show:!0,msg:(0,i.__)("Fluent CRM fields refresh failed. please try again","bitform")});n(!1)})).catch((function(){return n(!1)}))},u=function(e){var t=e.field_map,n=e.default.fields,i=Object.values(n).filter((function(e){return e.required})).map((function(e){return{formField:"",fluentCRMField:e.key,required:!0}})).filter((function(e){return!t.find((function(t){return t.fluentCRMField===e.fluentCRMField}))})),s=t.filter((function(e){return e.fluentCRMField||e.formField})).map((function(e){var t=n[e.fluentCRMField];return t?(0,l.Z)({},e,{formField:t.label}):e}));return[].concat(i,s)},d=function(e,t,n){var i=(0,l.Z)({},t);i.name=e.target.value,n((0,l.Z)({},i))},o=function(e){return!((null!=e&&e.field_map?e.field_map.filter((function(e){return!e.formField&&e.fluentCRMField&&e.required})):[]).length>0)}},55625:(e,t,n)=>{n.d(t,{Z:()=>x});var l=n(665),i=n(19753),s=n(73305),a=n(67860),r=n(53132),u=n(2598),d=n(4637);function o(e){var t,n,i=e.fluentCrmConf,a=e.setFluentCrmConf,r=(e.formFields,function(e,t){var n=(0,l.Z)({},i);"exists"===t&&(e.target.checked?n.actions.skip_if_exists=!0:delete n.actions.skip_if_exists),"doubleOpIn"===t&&(e.target.checked?n.actions.double_opt_in=!0:delete n.actions.double_opt_in),a((0,l.Z)({},n))});return(0,d.jsxs)("div",{className:"pos-rel d-flx w-8",children:[(0,d.jsx)(u.Z,{checked:(null==(t=i.actions)?void 0:t.skip_if_exists)||!1,onChange:function(e){return r(e,"exists")},className:"wdt-200 mt-4 mr-2",value:"skip_if_exists",title:(0,s.__)("Skip exist Contact","bitform"),subTitle:(0,s.__)("Skip if contact already exist in FluentCRM","bitform")}),(0,d.jsx)(u.Z,{checked:(null==(n=i.actions)?void 0:n.double_opt_in)||!1,onChange:function(e){return r(e,"doubleOpIn")},className:"wdt-200 mt-4 mr-2",value:"double_opt_in",title:(0,s.__)("Double Opt-in","bitform"),subTitle:(0,s.__)("Enable Double Option for new contacts","bitform")})]})}var f=n(29712),c=n(44084),m=n(84448),b=n(94557),h=n(2699),p=n(37029);function _(e){var t,n,i,a=e.i,r=e.formFields,u=e.field,o=e.fluentCrmConf,f=e.setFluentCrmConf,_=u.required,x=(null==o||null==(t=o.default)?void 0:t.fields)&&Object.values(null==o||null==(n=o.default)?void 0:n.fields).filter((function(e){return!e.required})),C=(0,c.sJ)(m.hi).isPro,v=function(e,t){var n=(0,l.Z)({},o);n.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(n.field_map[t].customValue=""),f(n)};return(0,d.jsxs)("div",{className:"flx mt-2 mr-1",children:[(0,d.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,d.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:u.formField||"",onChange:function(e){return v(e,a)},children:[(0,d.jsx)("option",{value:"",children:(0,s.__)("Select Field","bitform")}),(0,d.jsx)("optgroup",{label:"Form Fields",children:r.map((function(e){return"file-up"!==e.type&&(0,d.jsx)("option",{value:e.key,children:e.name},"ff-zhcrm-"+e.key)}))}),(0,d.jsx)("option",{value:"custom",children:(0,s.__)("Custom...","bitform")}),(0,d.jsx)("optgroup",{label:"General Smart Codes "+(C?"":"(PRO)"),children:C&&(null==h.C?void 0:h.C.map((function(e){return(0,d.jsx)("option",{value:e.name,children:e.label},"ff-rm-"+e.name)})))})]}),"custom"===u.formField&&(0,d.jsx)(p.Z,{onChange:function(e){return function(e,t){var n=(0,l.Z)({},o);n.field_map[t].customValue=e.target.value,f(n)}(e,a)},label:(0,s.__)("Custom Value","bitform"),className:"mr-2",type:"text",value:u.customValue,placeholder:(0,s.__)("Custom Value","bitform")}),(0,d.jsxs)("select",{className:"btcd-paper-inp",name:"fluentCRMField",value:u.fluentCRMField,onChange:function(e){return v(e,a)},disabled:_,children:[(0,d.jsx)("option",{value:"",children:(0,s.__)("Select Field","bitform")}),_?(null==o||null==(i=o.default)?void 0:i.fields)&&Object.values(o.default.fields).map((function(e){return(0,d.jsx)("option",{value:e.key,children:e.label},e.key+"-1")})):x&&x.map((function(e){return(0,d.jsx)("option",{value:e.key,children:e.label},e.key+"-1")}))]})]}),!_&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("button",{onClick:function(){return function(e){var t=(0,l.Z)({},o);t.field_map.splice(e,0,{}),f(t)}(a)},className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),(0,d.jsx)("button",{onClick:function(){return function(e){var t=(0,l.Z)({},o);t.field_map.length>1&&t.field_map.splice(e,1),f(t)}(a)},className:"icn-btn sh-sm ml-2",type:"button","aria-label":"btn",children:(0,d.jsx)(b.Z,{})})]})]})}function x(e){var t,n,u=e.formID,c=e.formFields,m=e.fluentCrmConf,b=e.setFluentCrmConf,h=e.isLoading,p=e.setisLoading,x=e.setSnackbar;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("br",{}),(0,d.jsxs)("div",{className:"flx",children:[(0,d.jsx)("b",{className:"wdt-200 d-in-b",children:(0,s.__)("Fluent CRM List:","bitform")}),(0,d.jsxs)("select",{onChange:function(e){return function(e){var t=(0,l.Z)({},m);t.list_id=e.target.value,b((0,l.Z)({},t))}(e)},name:"list_id",value:m.list_id,className:"btcd-paper-inp w-5",children:[(0,d.jsx)("option",{value:"",children:(0,s.__)("Select Fluent CRM list","bitform")}),(null==m||null==(t=m.default)?void 0:t.fluentCrmList)&&Object.keys(m.default.fluentCrmList).map((function(e){return(0,d.jsx)("option",{value:m.default.fluentCrmList[e].id,children:m.default.fluentCrmList[e].title},e)}))]}),(0,d.jsx)("button",{onClick:function(){return(0,f.ow)(u,m,b,p,x)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,s.__)("Refresh Fluent CRM List","bitform")+"'"},type:"button",disabled:h,children:"↻"})]}),(0,d.jsxs)("div",{className:"flx mt-5",children:[(0,d.jsx)("b",{className:"wdt-200 d-in-b",children:(0,s.__)("Fluent CRM Tags: ","bitform")}),(0,d.jsx)(i.Z,{defaultValue:null==m?void 0:m.tags,className:"btcd-paper-drpdwn w-5",options:(null==m||null==(n=m.default)?void 0:n.fluentCrmTags)&&Object.keys(m.default.fluentCrmTags).map((function(e){return{label:m.default.fluentCrmTags[e].title,value:m.default.fluentCrmTags[e].id.toString()}})),onChange:function(e){return function(e){var t=(0,l.Z)({},m);e?t.tags=e?e.split(","):[]:delete t.tags,b((0,l.Z)({},t))}(e)}})]}),h&&(0,d.jsx)(a.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),(0,d.jsx)("div",{className:"mt-4",children:(0,d.jsx)("b",{className:"wdt-100",children:(0,s.__)("Map Fields","bitform")})}),(0,d.jsx)("div",{className:"btcd-hr mt-1"}),(0,d.jsxs)("div",{className:"flx flx-around mt-2 mb-1",children:[(0,d.jsx)("div",{className:"txt-dp",children:(0,d.jsx)("b",{children:(0,s.__)("Form Fields","bitform")})}),(0,d.jsx)("div",{className:"txt-dp",children:(0,d.jsx)("b",{children:(0,s.__)("Fluent CRM Fields","bitform")})})]}),m.field_map.map((function(e,t){return(0,d.jsx)(_,{i:t,field:e,fluentCrmConf:m,formFields:c,setFluentCrmConf:b},"fluentcrm-m-"+(t+9))})),(0,d.jsx)("div",{className:"txt-center  mt-2",style:{marginRight:85},children:(0,d.jsx)("button",{onClick:function(){return(0,r.FP)(m.field_map.length,m,b)},className:"icn-btn sh-sm",type:"button",children:"+"})}),(0,d.jsx)("br",{}),(0,d.jsx)("div",{className:"mt-4",children:(0,d.jsx)("b",{className:"wdt-100",children:(0,s.__)("Actions","bitform")})}),(0,d.jsx)("div",{className:"btcd-hr mt-1"}),(0,d.jsx)(o,{fluentCrmConf:m,setFluentCrmConf:b,setisLoading:p,setSnackbar:x})]})}},8940:(e,t,n)=>{n.d(t,{Z:()=>s});var l=n(73305),i=n(4637);function s(e){var t=e.step,n=e.saveConfig,s=e.edit,a=e.disabled;return s?(0,i.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,i.jsx)("button",{onClick:n,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:a,children:(0,l.__)("Update","bitform")})}):(0,i.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,i.jsx)("h2",{className:"ml-3",children:(0,l.__)("Successfully Integrated","bitform")}),(0,i.jsxs)("button",{onClick:n,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,l.__)("Finish & Save ","bitform")," ✔"]})]})}}}]);