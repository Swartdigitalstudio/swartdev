"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[9073],{9073:(e,t,s)=>{s.r(t),s.d(t,{default:()=>y});var n=s(51163),i=s(18846),l=s(59496),a=s(65752),r=s(83442),o=s(48291),d=s(90794),c=s(97633),m=s(55873),u=s(32198),f=s(51108),h=s(38848),_=s(99996),b=s(76607),x=s(85493),p=s(75995),j=s(74062),v=s(16383),g=s(4637);function y(){var e=(0,l.useState)({sub:"Confirm the submission",body:h.VZ,dflt_temp:!0,day:1,custom_redirect:0,acti_succ_msg:"Thanks for the confirmation.",already_activated_msg:"Your mail is already confirmed!",invalid_key_msg:"Sorry! Your URL Is Invalid!"}),t=e[0],s=e[1],y=(0,o.sJ)(d.hi),N=(0,l.useState)(!1),k=N[0],w=N[1],C=(0,l.useState)(!1),S=C[0],Z=C[1],E=(0,l.useState)(!1),D=E[0],I=E[1],O=y.isPro,z=y.allPages,F=(0,l.useState)(!1),M=F[0],P=F[1],J=(0,l.useState)(!1),T=J[0],R=J[1],Y=(0,o.sJ)(d.uJ),L=(0,l.useState)({show:!1}),U=L[0],A=L[1],B=(0,r.UO)().formID;(0,l.useEffect)((function(){P(!0),(0,m.Z)({formID:B},"bitforms_get_double_opt_in").then((function(e){var t;if(null!=e&&e.success&&(null==e||null==(t=e.data)||!t.errors)){var n,i;I(Number(null==(n=e.data[0])?void 0:n.status));var l=JSON.parse(null==(i=e.data[0])?void 0:i.integration_details);s(l)}P(!1)}))}),[]);var H=function(e){var t=e.target,i=t.name,l=t.value;s((function(e){var t;return(0,n.Z)({},e,((t={})[i]=l,t))}))},V=function(e,n){var i=e.target.checked,l=(0,u.p$)(t);i?l[n]=!0:delete l[n],s(l)},$={};return D?($.opacity=1,$.pointerEvents="auto",$.userSelect="auto"):($.opacity=.6,$.pointerEvents="none",$.userSelect="none"),(0,g.jsxs)("div",{className:"pos-rel",children:[(0,g.jsx)("h2",{children:(0,f.__)("Double Opt-In","bitform")}),(0,g.jsxs)("h5",{children:["How to setup Double Opt-In & Send Email Notification:  ",(0,g.jsx)("a",{href:"#",target:"_blank",rel:"noreferrer",className:"yt-txt",children:"YouTube"})," ",(0,g.jsx)("a",{href:"#",target:"_blank",rel:"noreferrer",className:"doc-txt",children:"Documentation"})]}),!O&&(0,g.jsx)("div",{className:"pro-blur flx",style:{height:"111%",left:-53,width:"104%"},children:(0,g.jsxs)("div",{className:"pro",children:[(0,f.__)("Available On","bitform"),(0,g.jsx)("a",{href:"https://www.bitapps.pro/bit-form",target:"_blank",rel:"noreferrer",children:(0,g.jsx)("span",{className:"txt-pro",children:(0,f.__)("Premium","bitform")})})]})}),M?(0,g.jsx)(_.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:70,transform:"scale(0.7)"}}):(0,g.jsxs)("div",{children:[(0,g.jsx)(p.Z,{snack:U,setSnackbar:A}),(0,g.jsxs)("div",{className:"mt-6 flx",children:[(0,g.jsx)("label",{htmlFor:"status",children:(0,g.jsx)("b",{children:(0,f.__)("Enable","bitform")})}),(0,g.jsx)(x.Z,{name:"status",action:function(e){e.target.checked?I(1):I(0)},checked:1===D,className:"ml-4 flx"})]}),(0,g.jsxs)("div",{style:$,children:[(0,g.jsx)("br",{}),(0,g.jsxs)("div",{className:"flx",children:[(0,g.jsx)(x.Z,{name:"auto_unconfirmed_deleted",action:function(e){return V(e,"auto_unconfirmed_deleted")},checked:"auto_unconfirmed_deleted"in t,className:"flx"}),(0,g.jsx)("label",{htmlFor:"auto_unconfirmed_deleted",children:(0,f.__)("Delete the unconfirmed entries from responses after days: ","bitform")})," ",(0,g.jsx)("input",{onChange:H,name:"day",value:(null==t?void 0:t.day)||1,disabled:!t.auto_unconfirmed_deleted,className:"btcd-paper-inp mr-2 wdt-100",placeholder:"1",type:"number",min:"1"})]}),(0,g.jsxs)("div",{className:"mt-2 flx",children:[(0,g.jsx)(x.Z,{name:"disable_loggin_user",action:function(e){return V(e,"disable_loggin_user")},checked:"disable_loggin_user"in t,className:"flx"}),(0,g.jsx)("label",{htmlFor:"disable_loggin_user",children:(0,f.__)("Disable double opt-in confirmation for logged in users.","bitform")})]}),(0,g.jsxs)("div",{className:"mt-4 flx",children:[(0,g.jsx)(x.Z,{name:"dflt_temp",action:function(e){return V(e,"dflt_temp")},checked:!(null==t||!t.dflt_temp),className:"flx"}),(0,g.jsx)("label",{htmlFor:"dflt_temp",children:(0,f.__)("Configure default confirmation email template")}),(0,g.jsx)(b.Z,{className:"ml-1",icnSize:14,width:600,children:(0,f.__)("By disabling this option, you can configure the double opt-in confirmation email from Conditional Logics manually.")})]}),(null==t?void 0:t.dflt_temp)&&(0,g.jsxs)("div",{className:"w-8",children:[(0,g.jsxs)("div",{className:"w-5 mt-4",children:[(0,g.jsx)("b",{children:"Email"}),(0,g.jsx)("br",{}),(0,g.jsxs)("select",{className:"btcd-paper-inp mt-1 w-9",name:"fldkey",value:null==t?void 0:t.fldkey,onChange:H,children:[(0,g.jsx)("option",{selected:!0,disabled:!0,children:(0,f.__)("Select Email Field","bitform")}),null==Y?void 0:Y.filter((function(e){return"email"===e.type})).map((function(e){return(0,g.jsx)("option",{value:e.key,children:""+e.name},e.key+"-1")}))]})]}),(0,g.jsxs)("div",{className:"flx",children:[(0,g.jsxs)("div",{children:[(0,g.jsxs)("button",{type:"button",className:"btn",onClick:function(){return Z(!0)},children:[(0,g.jsx)(c.Z,{size:18})," ",(0,f.__)("Customize Email template")]}),(0,g.jsx)(j.Z,{dataConf:t,setDataConf:s,showMdl:S,setshowMdl:Z,title:"Customize Email template"})]}),(null==t?void 0:t.dflt_temp)&&(0,g.jsxs)("div",{className:"ml-2",children:[(0,g.jsxs)("button",{type:"button",className:"btn",onClick:function(){return w(!0)},children:[(0,g.jsx)(c.Z,{size:18})," ",(0,f.__)("Edit verification messages","bitform")]}),(0,g.jsx)(v.Z,{dataConf:t,setDataConf:s,showMdl:k,setCustomRedirectMdl:w,pages:z,title:"Edit verification messages"})]})]})]}),!(null!=t&&t.dflt_temp)&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("p",{className:"mb-0",children:[(0,g.jsx)("strong",{children:"Note: "}),(0,g.jsx)("span",{children:"Please make sure you have configured the "}),(0,g.jsx)("strong",{children:"double opt-in"}),(0,g.jsx)("span",{children:" from "}),(0,g.jsx)("strong",{children:"conditional logics."}),(0,g.jsx)("br",{}),(0,g.jsx)("span",{children:"Otherwise, the confirmation message will not sent to the responder."})]}),(0,g.jsxs)("div",{children:[(0,g.jsxs)("button",{type:"button",className:"btn",onClick:function(){return w(!0)},children:[(0,g.jsx)(c.Z,{size:18})," ",(0,f.__)("Edit verification messages","bitform")]}),(0,g.jsx)(v.Z,{dataConf:t,setDataConf:s,showMdl:k,setCustomRedirectMdl:w,pages:z,title:"Show after verification"})]})]})]}),(0,g.jsx)("div",{className:"br-5 w-6",children:(0,g.jsxs)("p",{className:"mt-0",children:[(0,g.jsx)("strong",{children:"Note : "}),"The webhook, email notification & integrations will trigger after the responder confirms their Opt-In."]})}),(0,g.jsx)("button",{type:"button",id:"secondary-update-btn",onClick:function(e){if(e.preventDefault(),!t.dflt_temp||void 0!==(null==t?void 0:t.fldkey)&&""!==(null==t?void 0:t.fldkey)){R(!0);var s=(0,i.ZP)(t,(function(e){e.formId=B,e.status=D})),n=(0,m.Z)(s,"bitforms_save_double_opt_in").then((function(e){var t;null==e||!e.success||null!=e&&null!=(t=e.data)&&t.errors||R(!1)}));a.ZP.promise(n,{success:(0,f.__)("Saved successfully.","bitform"),loading:(0,f.__)("Saving...","bitform"),error:(0,f.__)("Something went wrong, Try again.","bitform")})}else A({show:!0,msg:(0,f.__)("Email field is mandatory for double opt-in.")})},className:"btn btcd-btn-lg blue flx",disabled:T,children:(0,f.__)("Save ","bitform")})]})]})}}}]);