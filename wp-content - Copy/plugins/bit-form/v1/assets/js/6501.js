"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[6501],{6501:(t,e,a)=>{a.d(e,{Yd:()=>n,Rx:()=>o,c0:()=>f,Ir:()=>c,WP:()=>m,AA:()=>p,D6:()=>k,GX:()=>_,n:()=>h,mM:()=>I,FT:()=>g,TF:()=>b,zF:()=>j});var s=a(665),l=a(73305),r=a(77111),d=function(t,e){var a=(0,s.Z)({},t),l=["projectId","milestoneId","tasklistFlag","tasklistId","taskId"];return l.splice(l.indexOf(e)+1).map((function(t){null!=a&&a[t]&&(a[t]=""),a.actions[t.split("Id")[0]]={}})),(0,s.Z)({},a)},n=function(t,e,a,l,r){var d=(0,s.Z)({},e);return d.subEvent.map((function(e){var s,n,o,i,u,f,c;(null==d||!d.projectId||null!=d&&null!=(s=d.default)&&null!=(n=s.fields)&&null!=(o=n[d.portalId])&&null!=(i=o[d.projectId])&&i[e])&&null!=d&&null!=(u=d.default)&&null!=(f=u.fields)&&null!=(c=f[d.portalId])&&c[e]?d.field_map[e]=v(d,e):_(t,d,a,l,r,e)})),(0,s.Z)({},d)},o=function(t,e,a,l,r,o,f,c,_){var h,I,g,b=(0,s.Z)({},e),v=t.target.name,j=t.target.value;if(f){var D=(0,s.Z)({},c);D[v]="",_((0,s.Z)({},D))}switch(b[v]=j,v){case"portalId":b=i(b,l,a,r,o);break;case"event":b.subEvent=[j],b.field_map={},b.actions[j]={},b=u(d(b),l,a,r,o);break;case"projectId":case"milestoneId":case"tasklistId":case"taskId":var w,y;b=d(b,v);var F=v.split("Id")[0];b.actions[F]={},b.actions[b.event]={},b.subEvent.includes(F)&&b.subEvent.splice(b.subEvent.indexOf(F),1),["project","milestone"].includes(b.event)||"project"!==F||null!=e&&null!=(w=e.default)&&null!=(y=w.milestones)&&y[b.portalId]||m(l,b,a,r,o),"subtask"===b.event&&"task"!==F&&k(l,b,a,r,o),b=n(l,b,a,r,o);break;case"tasklistFlag":b.tasklistId="",j&&b.subEvent.includes("tasklist")&&b.subEvent.splice(b.subEvent.indexOf("tasklist"),1),!j||!["task","subtask"].includes(b.event)||null!=e&&null!=(h=e.default)&&null!=(I=h.milestones)&&null!=(g=I[b.portalId])&&g[j]||p(l,b,a,r,o)}a((0,s.Z)({},b))},i=function(t,e,a,l,r){var d,n,o=(0,s.Z)({},t);return o.event="",o.field_map={},o.actions={},o.subEvent=[],null==t||!t.portalId||null!=(d=t.default.tags)&&d[o.portalId]||b(e,t,a,l,r),null==t||!t.portalId||null!=(n=t.default.projects)&&n[o.portalId]||c(e,o,a,l,r),o},u=function(t,e,a,l,r){var d,n,o,i=(0,s.Z)({},t);(i.field_map={},i.field_map[i.event]=[{formField:"",zohoFormField:""}],null!=i&&i.event)&&(null!=i&&null!=(d=i.default)&&null!=(n=d.fields)&&null!=(o=n[i.portalId])&&o[i.event]?i.field_map[i.event]=v(i):_(e,i,a,l,r));return i},f=function(t,e,a,d,n){d(!0);var o={formID:t,id:e.id,dataCenter:e.dataCenter,clientId:e.clientId,clientSecret:e.clientSecret,tokenDetails:e.tokenDetails};(0,r.Z)(o,"bitforms_zprojects_refresh_portals").then((function(t){if(t&&t.success){var r=(0,s.Z)({},e);t.data.portals&&(Object.keys(t.data.portals).length>0?(r.default=(0,s.Z)({},r.default,{portals:t.data.portals}),n({show:!0,msg:(0,l.__)("Portals refreshed","bitform")})):n({show:!0,msg:(0,l.__)("No Portal Found","bitform")})),t.data.tokenDetails&&(r.tokenDetails=t.data.tokenDetails),n({show:!0,msg:(0,l.__)("Portals refreshed","bitform")}),a((0,s.Z)({},r))}else t&&t.data&&t.data.data||!t.success&&"string"===typeof t.data?n({show:!0,msg:(0,l.g)((0,l.__)("Portals refresh failed Cause: %s. please try again","bitform"),t.data.data||t.data)}):n({show:!0,msg:(0,l.__)("Portals refresh failed. please try again","bitform")});d(!1)})).catch((function(){return d(!1)}))},c=function(t,e,a,d,n){var o=e.id,i=e.portalId;d(!0);var u={formID:t,id:o,dataCenter:e.dataCenter,clientId:e.clientId,clientSecret:e.clientSecret,tokenDetails:e.tokenDetails,portalId:i};(0,r.Z)(u,"bitforms_zprojects_refresh_projects").then((function(t){if(t&&t.success){var r=(0,s.Z)({},e);r.default.projects||(r.default.projects={}),t.data.projects&&(Object.keys(t.data.projects).length>0?(r.default.projects[i]=t.data.projects,n({show:!0,msg:(0,l.__)("Projects refreshed","bitform")})):n({show:!0,msg:(0,l.__)("No Project Found","bitform")})),t.data.tokenDetails&&(r.tokenDetails=t.data.tokenDetails),a((0,s.Z)({},r))}else t&&t.data&&t.data.data||!t.success&&"string"===typeof t.data?n({show:!0,msg:(0,l.g)((0,l.__)("Projects refresh failed Cause: %s. please try again","bitform"),t.data.data||t.data)}):n({show:!0,msg:(0,l.__)("Projects refresh failed. please try again","bitform")});d(!1)})).catch((function(){return d(!1)}))},m=function(t,e,a,d,n){var o=e.id,i=e.portalId,u=e.projectId;d(!0);var f={formID:t,id:o,dataCenter:e.dataCenter,clientId:e.clientId,clientSecret:e.clientSecret,tokenDetails:e.tokenDetails,portalId:i,projectId:u};(0,r.Z)(f,"bitforms_zprojects_refresh_milestones").then((function(t){if(t&&t.success){var r=(0,s.Z)({},e);t.data.milestones&&(r.default.milestones||(r.default.milestones={}),Object.keys(t.data.milestones).length>0?(r.default.milestones[u]=t.data.milestones,n({show:!0,msg:(0,l.__)("Milestones refreshed","bitform")})):n({show:!0,msg:(0,l.__)("No Milestone Found","bitform")})),t.data.tokenDetails&&(r.tokenDetails=t.data.tokenDetails),a((0,s.Z)({},r))}else t&&t.data&&t.data.data||!t.success&&"string"===typeof t.data?n({show:!0,msg:(0,l.g)((0,l.__)("Milestones refresh failed Cause: %s. please try again","bitform"),t.data.data||t.data)}):n({show:!0,msg:(0,l.__)("Milestones refresh failed. please try again","bitform")});d(!1)})).catch((function(){return d(!1)}))},p=function(t,e,a,d,n){var o=e.id,i=e.portalId,u=e.projectId,f=e.tasklistFlag;d(!0);var c={formID:t,id:o,dataCenter:e.dataCenter,clientId:e.clientId,clientSecret:e.clientSecret,tokenDetails:e.tokenDetails,portalId:i,projectId:u,tasklistFlag:f};null!=e&&e.milestoneId&&(c.milestoneId=e.milestoneId),(0,r.Z)(c,"bitforms_zprojects_refresh_tasklists").then((function(t){if(t&&t.success){var r=(0,s.Z)({},e);Object.keys(t.data.tasklists).length>0?(r.default.tasklists||(r.default.tasklists={}),r.default.tasklists[i]||(r.default.tasklists[i]={}),null!=e&&e.milestoneId?(r.default.tasklists[i][e.milestoneId]||(r.default.tasklists[i][e.milestoneId]={}),r.default.tasklists[i][e.milestoneId][f]=t.data.tasklists):r.default.tasklists[i][f]=t.data.tasklists,n({show:!0,msg:(0,l.__)("Tasklists refreshed","bitform")})):n({show:!0,msg:(0,l.__)("No Tasklist Found","bitform")}),t.data.tokenDetails&&(r.tokenDetails=t.data.tokenDetails),a((0,s.Z)({},r))}else t&&t.data&&t.data.data||!t.success&&"string"===typeof t.data?n({show:!0,msg:(0,l.g)((0,l.__)("Tasklists refresh failed Cause: %s. please try again","bitform"),t.data.data||t.data)}):n({show:!0,msg:(0,l.__)("Tasklists refresh failed. please try again","bitform")});d(!1)})).catch((function(){return d(!1)}))},k=function(t,e,a,d,n){var o=e.id,i=e.portalId,u=e.projectId;d(!0);var f={formID:t,id:o,dataCenter:e.dataCenter,clientId:e.clientId,clientSecret:e.clientSecret,tokenDetails:e.tokenDetails,portalId:i,projectId:u};null!=e&&e.milestoneId&&(f.milestoneId=e.milestoneId),null!=e&&e.tasklistId&&(f.tasklistId=e.tasklistId),(0,r.Z)(f,"bitforms_zprojects_refresh_tasks").then((function(t){if(t&&t.success){var r=(0,s.Z)({},e);Object.keys(t.data.tasks).length>0?(r.default.tasks||(r.default.tasks={}),r.default.tasks[i]||(r.default.tasks[i]={}),null!=e&&e.milestoneId?null!=e&&e.tasklistId?(r.default.tasks[i][null==e?void 0:e.milestoneId]||(r.default.tasks[i][null==e?void 0:e.milestoneId]={}),r.default.tasks[i][null==e?void 0:e.milestoneId][null==e?void 0:e.tasklistId]=t.data.tasks):r.default.tasks[i][null==e?void 0:e.milestoneId]=t.data.tasks:null!=e&&e.tasklistId?r.default.tasks[i][null==e?void 0:e.tasklistId]=t.data.tasks:r.default.tasks[i]=t.data.tasks,n({show:!0,msg:(0,l.__)("Tasks refreshed","bitform")})):n({show:!0,msg:(0,l.__)("No Task Found","bitform")}),t.data.tokenDetails&&(r.tokenDetails=t.data.tokenDetails),a((0,s.Z)({},r))}else t&&t.data&&t.data.data||!t.success&&"string"===typeof t.data?n({show:!0,msg:(0,l.g)((0,l.__)("Tasks refresh failed Cause: %s. please try again","bitform"),t.data.data||t.data)}):n({show:!0,msg:(0,l.__)("Tasks refresh failed. please try again","bitform")});d(!1)})).catch((function(){return d(!1)}))},_=function(t,e,a,d,n,o){var i;i=o||e.event;var u=e.portalId;d(!0);var f={formID:t,dataCenter:e.dataCenter,clientId:e.clientId,clientSecret:e.clientSecret,tokenDetails:e.tokenDetails,portalId:u,event:i};null!=e&&e.projectId&&(f.projectId=e.projectId),(0,r.Z)(f,"bitforms_zprojects_refresh_fields").then((function(t){if(t&&t.success){var r=(0,s.Z)({},e);t.data.fields?(r.default.fields||(r.default.fields={}),r.default.fields[u]||(r.default.fields[u]={}),null!=e&&e.projectId?(r.default.fields[u][e.projectId]||(r.default.fields[u][e.projectId]={}),r.default.fields[u][r.projectId][i]=(0,s.Z)({},t.data)):r.default.fields[u][i]=(0,s.Z)({},t.data),r.field_map[i]=v(r,i),n({show:!0,msg:(0,l.__)("Fields refreshed","bitform")})):n({show:!0,msg:(0,l.g)((0,l.__)("Fields refresh failed Cause: %s. please try again","bitform"),t.data.data||t.data)}),t.data.tokenDetails&&(r.tokenDetails=t.data.tokenDetails),a((0,s.Z)({},r))}else n({show:!0,msg:(0,l.__)("Fields refresh failed. please try again","bitform")});d(!1)})).catch((function(){return d(!1)}))},h=function(t,e,a,d,n){var o=e.id,i=e.portalId;d(!0);var u={formID:t,id:o,dataCenter:e.dataCenter,clientId:e.clientId,clientSecret:e.clientSecret,tokenDetails:e.tokenDetails,portalId:e.portalId};null!=e&&e.projectId&&(u.projectId=e.projectId),(0,r.Z)(u,"bitforms_zprojects_refresh_users").then((function(t){if(t&&t.success){var r=(0,s.Z)({},e);r.default.users||(r.default.users={}),t.data.users&&(Object.keys(t.data.users).length>0?(null!=e&&e.projectId?(r.default.users[i]||(r.default.users[i]={}),r.default.users[i][e.projectId]=t.data.users):r.default.users[i]=t.data.users,n({show:!0,msg:(0,l.__)("Owners refreshed","bitform")})):n({show:!0,msg:(0,l.__)("No Owner Found","bitform")})),t.data.tokenDetails&&(r.tokenDetails=t.data.tokenDetails),a((0,s.Z)({},r))}else t&&t.data&&t.data.data||!t.success&&"string"===typeof t.data?n({show:!0,msg:(0,l.g)((0,l.__)("Owners refresh failed Cause: %s. please try again","bitform"),t.data.data||t.data)}):n({show:!0,msg:(0,l.__)("Owners refresh failed. please try again","bitform")});d(!1)})).catch((function(){return d(!1)}))},I=function(t,e,a,d,n){var o=e.id,i=e.portalId;d(!0);var u={formID:t,id:o,dataCenter:e.dataCenter,clientId:e.clientId,clientSecret:e.clientSecret,tokenDetails:e.tokenDetails,portalId:i};(0,r.Z)(u,"bitforms_zprojects_refresh_task_layouts").then((function(t){if(t&&t.success){var r=(0,s.Z)({},e);r.default.taskLays||(r.default.taskLays={}),t.data.taskLays&&(Object.keys(t.data.taskLays).length>0?(r.default.taskLays[i]=t.data.taskLays,n({show:!0,msg:(0,l.__)("Task Layouts refreshed","bitform")})):n({show:!0,msg:(0,l.__)("No Task Layout Found","bitform")})),t.data.tokenDetails&&(r.tokenDetails=t.data.tokenDetails),a((0,s.Z)({},r))}else t&&t.data&&t.data.data||!t.success&&"string"===typeof t.data?n({show:!0,msg:(0,l.g)((0,l.__)("Task Layouts refresh failed Cause: %s. please try again","bitform"),t.data.data||t.data)}):n({show:!0,msg:(0,l.__)("Task Layouts refresh failed. please try again","bitform")});d(!1)})).catch((function(){return d(!1)}))},g=function(t,e,a,d,n){var o=e.id,i=e.portalId;d(!0);var u={formID:t,id:o,dataCenter:e.dataCenter,clientId:e.clientId,clientSecret:e.clientSecret,tokenDetails:e.tokenDetails,portalId:i};(0,r.Z)(u,"bitforms_zprojects_refresh_groups").then((function(t){if(t&&t.success){var r=(0,s.Z)({},e);r.default.groups||(r.default.groups={}),t.data.groups&&(Object.keys(t.data.groups).length>0?(r.default.groups[i]=t.data.groups,n({show:!0,msg:(0,l.__)("Project Groups refreshed","bitform")})):n({show:!0,msg:(0,l.__)("No Project Group Found","bitform")})),t.data.tokenDetails&&(r.tokenDetails=t.data.tokenDetails),a((0,s.Z)({},r))}else t&&t.data&&t.data.data||!t.success&&"string"===typeof t.data?n({show:!0,msg:(0,l.g)((0,l.__)("Project Groups refresh failed Cause: %s. please try again","bitform"),t.data.data||t.data)}):n({show:!0,msg:(0,l.__)("Project Groups refresh failed. please try again","bitform")});d(!1)})).catch((function(){return d(!1)}))},b=function(t,e,a,d,n){var o=e.id,i=e.portalId;d(!0);var u={formID:t,id:o,dataCenter:e.dataCenter,clientId:e.clientId,clientSecret:e.clientSecret,tokenDetails:e.tokenDetails,portalId:i};(0,r.Z)(u,"bitforms_zprojects_refresh_tags").then((function(t){if(t&&t.success){var r=(0,s.Z)({},e);r.default.tags||(r.default.tags={}),t.data.tags&&(Object.keys(t.data.tags).length>0?(r.default.tags[i]=t.data.tags,n({show:!0,msg:(0,l.__)("Tags refreshed","bitform")})):n({show:!0,msg:(0,l.__)("No Tag Found","bitform")})),t.data.tokenDetails&&(r.tokenDetails=t.data.tokenDetails),a((0,s.Z)({},r))}else t&&t.data&&t.data.data||!t.success&&"string"===typeof t.data?n({show:!0,msg:(0,l.g)((0,l.__)("Tags refresh failed Cause: %s. please try again","bitform"),t.data.data||t.data)}):n({show:!0,msg:(0,l.__)("Tags refresh failed. please try again","bitform")});d(!1)})).catch((function(){return d(!1)}))},v=function(t,e){var a,s,l;return s=e||t.event,null!=t&&t.projectId?t.default.fields[t.portalId][t.projectId][s].required.length>0?null==(l=t.default.fields[t.portalId][t.projectId][s].required)?void 0:l.map((function(t){return{formField:"",zohoFormField:t}})):[{formField:"",zohoFormField:""}]:t.default.fields[t.portalId][s].required.length>0?null==(a=t.default.fields[t.portalId][s].required)?void 0:a.map((function(t){return{formField:"",zohoFormField:t}})):[{formField:"",zohoFormField:""}]},j=function(t,e){return function(t){var e=!0;return null!=t&&t.subEvent&&t.subEvent.map((function(a){var s,l;(null!=t&&t.projectId?null!=t&&null!=(s=t.field_map)&&s[a]?t.field_map[a].filter((function(e){var s,l,r,d,n;return!e.formField&&e.zohoFormField&&-1!==(null==t||null==(s=t.default)||null==(l=s.fields)||null==(r=l[t.portalId])||null==(d=r[t.projectId])||null==(n=d[a])?void 0:n.required.indexOf(e.zohoFormField))})):[]:null!=t&&null!=(l=t.field_map)&&l[a]?t.field_map[a].filter((function(e){var s,l,r,d;return!e.formField&&e.zohoFormField&&-1!==(null==t||null==(s=t.default)||null==(l=s.fields)||null==(r=l[t.portalId])||null==(d=r[a])?void 0:d.required.indexOf(e.zohoFormField))})):[]).length>0&&(e=!1)})),!!e}(t)?function(t){var e=!0,a={project:["owner","tasklayoutid"],milestone:["owner","flag"],tasklist:["flag"],task:["owner"],subtask:["owner"],issue:["owner","flag"]};return null!=t&&t.subEvent&&t.subEvent.map((function(s){a[s].map((function(a){t.actions[s][a]||(e=!1)}))})),!!e}(t)?"subtask"!==(null==t?void 0:t.event)||null!=t&&t.taskId||t.subEvent.includes("task")?!(["task","subtask"].includes(null==t?void 0:t.event)&&(null!=t&&t.milestoneId||t.subEvent.includes("milestone"))&&!(null!=t&&t.tasklistId||t.subEvent.includes("tasklist")))||(e({show:!0,msg:(0,l.g)((0,l.__)("to create a %s under milestone you must select a tasklist or create a new tasklist","bitform"),t.event)}),!1):(e({show:!0,msg:(0,l.__)("to create a subtask you must select a task or create a new task","bitform")}),!1):(e({show:!0,msg:(0,l.__)("please fill up the required actions","bitform")}),!1):(e({show:!0,msg:(0,l.__)("please map mandatory fields","bitform")}),!1)}}}]);