"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[3463],{27285:(e,t,a)=>{a.d(t,{Jq:()=>c,Pd:()=>o,Rx:()=>s,in:()=>d,uL:()=>r});var i=a(72564),n=a(74320),l=a(12102),s=function(e,t,a){var n=(0,i.Z)({},t);n.name=e.target.value,a((0,i.Z)({},n))},r=function(e,t,a,s){var r={api_key:e.api_key,api_url:e.api_url};(0,l.Z)(r,"bitforms_aCampaign_lists").then((function(l){if(l&&l.success){var r=(0,i.Z)({},e);l.data.activeCampaignLists?(r.default||(r.default={}),r.default.activeCampaignLists=l.data.activeCampaignLists,s({show:!0,msg:(0,n.__)("ActiveCampaign lists refreshed","bitform")})):s({show:!0,msg:(0,n.__)("No ActiveCampaign lists found. Try changing the header row number or try again","bitform")}),t((0,i.Z)({},r))}else s({show:!0,msg:(0,n.__)("ActiveCampaign lists refresh failed. please try again","bitform")});a(!1)})).catch((function(){return a(!1)}))},c=function(e,t,a,s){var r={api_key:e.api_key,api_url:e.api_url};(0,l.Z)(r,"bitforms_aCampaign_tags").then((function(l){if(l&&l.success){var r=(0,i.Z)({},e);l.data.activeCampaignTags?(r.default||(r.default={}),r.default.activeCampaignTags=l.data.activeCampaignTags,s({show:!0,msg:(0,n.__)("ActiveCampaign tags refreshed","bitform")})):s({show:!0,msg:(0,n.__)("No ActiveCampaign tags found. Try changing the header row number or try again","bitform")}),t((0,i.Z)({},r))}else s({show:!0,msg:(0,n.__)("ActiveCampaign tags refresh failed. please try again","bitform")});a(!1)})).catch((function(){return a(!1)}))},d=function(e,t,a,s){var r={api_key:e.api_key,api_url:e.api_url};(0,l.Z)(r,"bitforms_aCampaign_headers").then((function(l){if(l&&l.success){var r=(0,i.Z)({},e);if(l.data.activeCampaignField){r.default||(r.default={}),r.default.fields=l.data.activeCampaignField;var c=r.default.fields;r.field_map=Object.values(c).filter((function(e){return e.required})).map((function(e){return{formField:"",activeCampaignField:e.fieldId,required:!0}})),s({show:!0,msg:(0,n.__)("ActiveCampaign fields refreshed","bitform")})}else s({show:!0,msg:(0,n.__)("No ActiveCampaign fields found. Try changing the header row number or try again","bitform")});t((0,i.Z)({},r))}else s({show:!0,msg:(0,n.__)("ActiveCampaign fields refresh failed. please try again","bitform")});a(!1)})).catch((function(){return a(!1)}))},o=function(e){return!((null!=e&&e.field_map?e.field_map.filter((function(e){return!e.formField&&e.activeCampaignField&&e.required})):[]).length>0)}},94504:(e,t,a)=>{a.d(t,{Z:()=>b});var i=a(72564),n=a(74320),l=a(59496),s=a(83428),r=a(82166),c=a(52665),d=a(26414),o=a(4637);function m(e){var t,a=e.activeCampaingConf,l=e.setActiveCampaingConf;return(0,o.jsx)("div",{className:"pos-rel d-flx w-8",children:(0,o.jsx)(d.Z,{checked:(null==(t=a.actions)?void 0:t.update)||!1,onChange:function(e){return function(e,t){var n=(0,i.Z)({},a);"update"===t&&(e.target.checked?n.actions.update=!0:delete n.actions.update),l((0,i.Z)({},n))}(e,"update")},className:"wdt-200 mt-4 mr-2",value:"user_share",title:(0,n.__)("Update ActiveCampaign","bitform"),subTitle:(0,n.__)("Update Responses with ActiveCampaign existing email?","bitform")})})}var u=a(27285),f=a(48291),p=a(20859),g=a(53189),_=a(80027),v=a(84048);function h(e){var t,a,l,s=e.i,r=e.formFields,c=e.field,d=e.activeCampaingConf,m=e.setActiveCampaingConf,u=c.required,h=(0,f.sJ)(p.hi).isPro,b=(null==d||null==(t=d.default)?void 0:t.fields)&&Object.values(null==d||null==(a=d.default)?void 0:a.fields).filter((function(e){return!e.required})),C=function(e,t){var a=(0,i.Z)({},d);a.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(a.field_map[t].customValue=""),m(a)};return(0,o.jsxs)("div",{className:"flx mt-2 mr-1",children:[(0,o.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,o.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:c.formField||"",onChange:function(e){return C(e,s)},children:[(0,o.jsx)("option",{value:"",children:(0,n.__)("Select Field","bitform")}),(0,o.jsx)("optgroup",{label:"Form Fields",children:r.map((function(e){return"file-up"!==e.type&&(0,o.jsx)("option",{value:e.key,children:e.name},"ff-zhcrm-"+e.key)}))}),(0,o.jsx)("option",{value:"custom",children:(0,n.__)("Custom...","bitform")}),(0,o.jsx)("optgroup",{label:"General Smart Codes "+(h?"":"(PRO)"),children:h&&(null==_.C?void 0:_.C.map((function(e){return(0,o.jsx)("option",{value:e.name,children:e.label},"ff-rm-"+e.name)})))})]}),"custom"===c.formField&&(0,o.jsx)(v.Z,{onChange:function(e){return function(e,t){var a=(0,i.Z)({},d);a.field_map[t].customValue=e.target.value,m(a)}(e,s)},label:(0,n.__)("Custom Value","bitform"),className:"mr-2",type:"text",value:c.customValue,placeholder:(0,n.__)("Custom Value","bitform")}),(0,o.jsxs)("select",{className:"btcd-paper-inp",name:"activeCampaignField",value:c.activeCampaignField,onChange:function(e){return C(e,s)},disabled:u,children:[(0,o.jsx)("option",{value:"",children:(0,n.__)("Select Field","bitform")}),u?(null==d||null==(l=d.default)?void 0:l.fields)&&Object.values(d.default.fields).map((function(e){return(0,o.jsx)("option",{value:e.fieldId,children:e.fieldName},e.fieldId+"-1")})):b&&b.map((function(e){return(0,o.jsx)("option",{value:e.fieldId,children:e.fieldName},e.fieldId+"-1")}))]})]}),!u&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:function(){return function(e){var t=(0,i.Z)({},d);t.field_map.splice(e,0,{}),m(t)}(s)},className:"icn-btn sh-sm ml-2",type:"button",children:"+"}),(0,o.jsx)("button",{onClick:function(){return function(e){var t=(0,i.Z)({},d);t.field_map.length>1&&t.field_map.splice(e,1),m(t)}(s)},className:"icn-btn sh-sm ml-2",type:"button","aria-label":"btn",children:(0,o.jsx)(g.Z,{})})]})]})}function b(e){e.formID;var t,a,d,f,p=e.formFields,g=e.activeCampaingConf,_=e.setActiveCampaingConf,v=e.isLoading,b=e.setIsLoading,C=e.setSnackbar,x=null==g||null==(t=g.default)?void 0:t.activeCampaignLists;return(0,l.useEffect)((function(){x&&(0,u.Jq)(g,_,b,C)}),[x]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("br",{}),(0,o.jsx)("b",{className:"wdt-200 d-in-b",children:(0,n.__)("List:","bitform")}),(0,o.jsxs)("select",{value:null==g?void 0:g.listId,name:"listId",id:"",className:"btcd-paper-inp w-5",onChange:function(e){var t=e.target.value,a=(0,i.Z)({},g);t?a.listId=t:delete a.listId,(0,u.in)(a,_,b,C)},children:[(0,o.jsx)("option",{value:"",children:(0,n.__)("Select List","bitform")}),(null==g||null==(a=g.default)?void 0:a.activeCampaignLists)&&Object.keys(g.default.activeCampaignLists).map((function(e){return(0,o.jsx)("option",{value:g.default.activeCampaignLists[e].listId,children:g.default.activeCampaignLists[e].listName},""+(e+1))}))]}),(0,o.jsx)("button",{onClick:function(){return(0,u.uL)(g,_,b,C)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh Activecapmaign list"'},type:"button",disabled:v,children:"↻"}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),(0,o.jsxs)("div",{className:"d-flx",children:[(0,o.jsx)("b",{style:{marginTop:"15px"},className:"wdt-200 d-in-b",children:(0,n.__)("Tags: ","bitform")}),(0,o.jsx)(s.Z,{defaultValue:null==g?void 0:g.tagIds,className:"btcd-paper-drpdwn w-5",options:(null==g||null==(d=g.default)?void 0:d.activeCampaignTags)&&Object.keys(g.default.activeCampaignTags).map((function(e){return{label:g.default.activeCampaignTags[e].tagName,value:g.default.activeCampaignTags[e].tagId}})),onChange:function(e){return function(e){var t=(0,i.Z)({},g);e?t.tagIds=e?e.split(","):[]:delete t.tagIds,_((0,i.Z)({},t))}(e)}}),(0,o.jsx)("button",{onClick:function(){return(0,u.Jq)(g,_,b,C)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,n.__)("Refresh Activecapmaign Tags","bitform")+"'"},type:"button",disabled:v,children:"↻"})]}),(0,o.jsx)("br",{}),v&&(0,o.jsx)(r.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),(0,o.jsxs)("div",{className:"mt-4",children:[(0,o.jsx)("b",{className:"wdt-100",children:(0,n.__)("Map Fields","bitform")}),(0,o.jsx)("button",{onClick:function(){return(0,u.in)(g,_,b,C)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,n.__)("Refresh Activecapmaign Field","bitform")+"'"},type:"button",disabled:v,children:"↻"})]}),((null==g?void 0:g.listId)||(null==g||null==(f=g.default)?void 0:f.fields))&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"btcd-hr mt-1"}),(0,o.jsxs)("div",{className:"flx flx-around mt-2 mb-1",children:[(0,o.jsx)("div",{className:"txt-dp",children:(0,o.jsx)("b",{children:(0,n.__)("Form Fields","bitform")})}),(0,o.jsx)("div",{className:"txt-dp",children:(0,o.jsx)("b",{children:(0,n.__)("ActiveCampaign Fields","bitform")})})]}),g.field_map.map((function(e,t){return(0,o.jsx)(h,{i:t,field:e,activeCampaingConf:g,formFields:p,setActiveCampaingConf:_},"Activecampaign-m-"+(t+9))})),(0,o.jsx)("div",{className:"txt-center  mt-2",style:{marginRight:85},children:(0,o.jsx)("button",{onClick:function(){return(0,c.FP)(g.field_map.length,g,_)},className:"icn-btn sh-sm",type:"button",children:"+"})}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),(0,o.jsx)("div",{className:"mt-4",children:(0,o.jsx)("b",{className:"wdt-100",children:(0,n.__)("Actions","bitform")})}),(0,o.jsx)("div",{className:"btcd-hr mt-1"}),(0,o.jsx)(m,{activeCampaingConf:g,setActiveCampaingConf:_})]})]})}},52665:(e,t,a)=>{a.d(t,{FP:()=>o,Mm:()=>s,P_:()=>c,T5:()=>m,WK:()=>r,mG:()=>f,wX:()=>u});var i=a(72564),n=a(66399),l=a(12102),s=function(e,t,a,n,l,s,r){var c=[].concat(e);if(r)c[s]=(0,i.Z)({},e[s],n),c.push({editItegration:!0}),t([].concat(c)),l.push(a);else{var d=[].concat(c);d.push(n),d.push({newItegration:!0}),t(d),l.push(a)}},r=function(e){var t={},a=window.location.href.replace(window.opener.location.href+"/redirect","").split("&");a&&a.forEach((function(e){var a=e.split("=");a[1]&&(t[a[0]]=a[1])})),localStorage.setItem("__bitforms_"+e,JSON.stringify(t)),window.close()},c=function(e,t,a,l,s,r,c,o,m){if(l.dataCenter&&l.clientId&&l.clientSecret){o(!0);var u="https://accounts.zoho."+l.dataCenter+"/oauth/v2/auth?scope="+a+"&response_type=code&client_id="+l.clientId+"&prompt=Consent&access_type=offline&state="+encodeURIComponent(window.location.href)+"/redirect&redirect_uri="+encodeURIComponent(bits.zohoRedirectURL),f=window.open(u,e,"width=400,height=609,toolbar=off"),p=setInterval((function(){if(f.closed){clearInterval(p);var a={},r=!1,u=localStorage.getItem("__bitforms_"+e);if(u&&(r=!0,a=JSON.parse(u),localStorage.removeItem("__bitforms_"+e)),a.code&&!a.error&&a&&r){var g=(0,i.Z)({},l);g.accountServer=a["accounts-server"],d(t,a,g,s,c,o,m)}else{var _=a.error?"Cause: "+a.error:"";m({show:!0,msg:(0,n.__)("Authorization failed","bitform")+" "+_+". "+(0,n.__)("please try again","bitform")}),o(!1)}}}),500)}else r({dataCenter:l.dataCenter?"":(0,n.__)("Data center cann't be empty","bitform"),clientId:l.clientId?"":(0,n.__)("Client ID cann't be empty","bitform"),clientSecret:l.clientSecret?"":(0,n.__)("Secret key cann't be empty","bitform")})},d=function(e,t,a,s,r,c,d){var o=(0,i.Z)({},t);o.dataCenter=a.dataCenter,o.clientId=a.clientId,o.clientSecret=a.clientSecret,o.redirectURI=bits.zohoRedirectURL,(0,l.Z)(o,"bitforms_"+e+"_generate_token").then((function(e){return e})).then((function(e){if(e&&e.success){var t=(0,i.Z)({},a);t.tokenDetails=e.data,s(t),r(!0),d({show:!0,msg:(0,n.__)("Authorized Successfully","bitform")})}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?d({show:!0,msg:""+(0,n.__)("Authorization failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,n.__)("please try again","bitform")}):d({show:!0,msg:(0,n.__)("Authorization failed. please try again","bitform")});c(!1)}))},o=function(e,t,a,n,l){var s=(0,i.Z)({},t);l?n?s.relatedlists[l-1].upload_field_map.splice(e,0,{}):s.relatedlists[l-1].field_map.splice(e,0,{}):n?s.upload_field_map.splice(e,0,{}):s.field_map.splice(e,0,{}),a((0,i.Z)({},s))},m=function(e,t,a,n,l){var s=(0,i.Z)({},t);l?n?s.relatedlists[l-1].upload_field_map.length>1&&s.relatedlists[l-1].upload_field_map.splice(e,1):s.relatedlists[l-1].field_map.length>1&&s.relatedlists[l-1].field_map.splice(e,1):n?s.upload_field_map.length>1&&s.upload_field_map.splice(e,1):s.field_map.length>1&&s.field_map.splice(e,1),a((0,i.Z)({},s))},u=function(e,t,a,n,l,s){var r=(0,i.Z)({},a);s?l?r.relatedlists[s-1].upload_field_map[t][e.target.name]=e.target.value:r.relatedlists[s-1].field_map[t][e.target.name]=e.target.value:l?r.upload_field_map[t][e.target.name]=e.target.value:r.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(s?r.relatedlists[s-1].field_map[t].customValue="":r.field_map[t].customValue=""),n((0,i.Z)({},r))},f=function(e,t,a,n,l){var s=(0,i.Z)({},a);l?s.relatedlists[l-1].field_map[t].customValue=e.target.value:s.field_map[t].customValue=e.target.value,n((0,i.Z)({},s))}},7020:(e,t,a)=>{a.d(t,{Z:()=>l});var i=a(66399),n=a(4637);function l(e){var t=e.step,a=e.saveConfig,l=e.edit,s=e.disabled;return l?(0,n.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,n.jsx)("button",{onClick:a,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:s,children:(0,i.__)("Update","bitform")})}):(0,n.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,n.jsx)("h2",{className:"ml-3",children:(0,i.__)("Successfully Integrated","bitform")}),(0,n.jsxs)("button",{onClick:a,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,i.__)("Finish & Save ","bitform")," ✔"]})]})}}}]);