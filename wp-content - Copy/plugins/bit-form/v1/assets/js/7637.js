"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[7637],{8940:(e,n,i)=>{i.d(n,{Z:()=>s});var t=i(73305),l=i(4637);function s(e){var n=e.step,i=e.saveConfig,s=e.edit,r=e.disabled;return s?(0,l.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,l.jsx)("button",{onClick:i,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:r,children:(0,t.__)("Update","bitform")})}):(0,l.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===n&&"90%",height:3===n&&"100%"},children:[(0,l.jsx)("h2",{className:"ml-3",children:(0,t.__)("Successfully Integrated","bitform")}),(0,l.jsxs)("button",{onClick:i,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,t.__)("Finish & Save ","bitform")," ✔"]})]})}},21809:(e,n,i)=>{i.d(n,{Rx:()=>a,GF:()=>o,P_:()=>d,gn:()=>c,TN:()=>u,Kv:()=>m,pK:()=>f});var t=i(665),l=i(17607),s=i(77111),r=(i(33591),i(73305)),a=function(e,n,i,l,s,r){var a=(0,t.Z)({},n),d=e.target.name;""!==e.target.value?a[d]=e.target.value:delete a[d],"2"===a.mainAction&&o(a,i,l,s),i((0,t.Z)({},a))},o=function(e,n,i,a){i(!0);var o={access_token:e.access_token};(0,s.Z)(o,"bitforms_sendfox_fetch_all_list").then((function(s){if(s&&s.success){var a=(0,t.Z)({},e);return a.default||(a.default={}),s.data&&(a.default.allLists=s.data.data),n((0,t.Z)({},a)),i(!1),void l.ZP.success((0,r.__)("Lists fetched successfully","bit-integrations"))}i(!1),l.ZP.error((0,r.__)("Lists fetch failed. please try again","bit-integrations"))})).catch((function(){return i(!1)}))},d=function(e,n,i,a,o,d){if(e.access_token){i({}),o(!0);var c={access_token:e.access_token};(0,s.Z)(c,"bitforms_sendFox_authorize").then((function(i){if(i&&i.success){var s=(0,t.Z)({},e);return n(s),a(!0),o(!1),void l.ZP.success((0,r.__)("Authorized successfully","bit-integrations"))}o(!1),l.ZP.error((0,r.__)("Authorized failed","bit-integrations"))}))}else i({access_token:e.access_token?"":(0,r.__)("Access Token can't be empty","bit-integrations")})},c=function(e){var n=null==e?void 0:e.contactFields.filter((function(e){return!0===e.required}));return n.length>0?n.map((function(e){return{formField:"",sendFoxFormField:e.key}})):[{formField:"",sendFoxFormField:""}]},u=function(e){var n=null==e?void 0:e.listFields.filter((function(e){return!0===e.required}));return n.length>0?n.map((function(e){return{formField:"",sendFoxListFormField:e.key}})):[{formField:"",sendFoxListFormField:""}]},m=function(e){var n=null==e?void 0:e.unsubscribeFields.filter((function(e){return!0===e.required}));return n.length>0?n.map((function(e){return{formField:"",sendFoxUnsubscribeFormField:e.key}})):[{formField:"",sendFoxUnsubscribeFormField:""}]},f=function(e){return"1"===e.mainAction?!function(e){return!((null!=e&&e.field_map_list?e.field_map_list.filter((function(n){var i,t,l;return!n.formField&&n.sendFoxListFormField&&-1!==(null==e||null==(i=e.default)||null==(t=i.allFields)||null==(l=t[e.listId])?void 0:l.required.indexOf(n.sendFoxListFormField))})):[]).length>0)}(e):"2"===e.mainAction?!function(e){return(!e.field_map||!e.field_map.find((function(e){return!e.formField||!e.sendFoxFormField})))&&!((null!=e&&e.field_map?e.field_map.filter((function(n){var i,t,l;return!n.formField&&n.sendFoxFormField&&-1!==(null==e||null==(i=e.default)||null==(t=i.allFields)||null==(l=t[e.listId])?void 0:l.required.indexOf(n.sendFoxFormField))})):[]).length>0)}(e)||void 0===e.listId||""===e.listId:!function(e){return!((null!=e&&e.field_map_unsubscribe?e.field_map_unsubscribe.filter((function(n){var i,t,l;return!n.formField&&n.sendFoxUnsubscribeFormField&&-1!==(null==e||null==(i=e.default)||null==(t=i.allFields)||null==(l=t[e.listId])?void 0:l.required.indexOf(n.sendFoxUnsubscribeFormField))})):[]).length>0)}(e)}},95932:(e,n,i)=>{i.d(n,{Z:()=>S});var t=i(665),l=i(19753),s=i(73305),r=i(67860),a=i(53132),o=i(21809),d=i(44084),c=i(59496),u=i(37029),m=function(e,n,i){var l=(0,t.Z)({},n);l.field_map.splice(e,0,{}),i((0,t.Z)({},l))},f=function(e,n,i){var l=(0,t.Z)({},n);l.field_map.length>1&&l.field_map.splice(e,1),i((0,t.Z)({},l))},b=function(e,n,i,l){var s=(0,t.Z)({},i);s.field_map[n][e.target.name]=e.target.value,"custom"===e.target.value&&(s.field_map[n].customValue=""),l((0,t.Z)({},s))},x=function(e,n,i,l){var s=(0,t.Z)({},i);s.field_map[n].customValue=e.target.value,l((0,t.Z)({},s))},p=function(e,n,i,l){var s=(0,t.Z)({},i);s.field_map_list[n][e.target.name]=e.target.value,"custom"===e.target.value&&(s.field_map_list[n].customValue=""),l((0,t.Z)({},s))},h=function(e,n,i,l){var s=(0,t.Z)({},i);s.field_map_list[n].customValue=e.target.value,l((0,t.Z)({},s))},F=function(e,n,i){var l=(0,t.Z)({},n);l.field_map_list.splice(e,0,{}),i((0,t.Z)({},l))},v=function(e,n,i){var l=(0,t.Z)({},n);l.field_map_list.length>1&&l.field_map_list.splice(e,1),i((0,t.Z)({},l))},_=function(e,n,i,l){var s=(0,t.Z)({},i);s.field_map_unsubscribe[n][e.target.name]=e.target.value,"custom"===e.target.value&&(s.field_map_unsubscribe[n].customValue=""),l((0,t.Z)({},s))},g=function(e,n,i,l){var s=(0,t.Z)({},i);s.field_map_unsubscribe[n].customValue=e.target.value,l((0,t.Z)({},s))},j=i(2699),N=i(84448),C=i(4637);function y(e){var n=e.i,i=e.formFields,l=e.field,r=e.sendFoxConf,a=e.setSendFoxConf;(0,c.useEffect)((function(){var e;if(1===(null==r||null==(e=r.field_map)?void 0:e.length)&&""===l.sendFoxFormField){var n=(0,t.Z)({},r),i=(0,o.gn)(n);n.field_map=i,a(n)}}));var p=(null==r?void 0:r.contactFields.filter((function(e){return!0===e.required})))||[],h=(null==r?void 0:r.contactFields.filter((function(e){return!1===e.required})))||[],F=(0,d.sJ)(N.hi).isPro;return(0,C.jsx)("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:(0,C.jsxs)("div",{className:"pos-rel flx",children:[(0,C.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,C.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:l.formField||"",onChange:function(e){return b(e,n,r,a)},children:[(0,C.jsx)("option",{value:"",children:(0,s.__)("Select Field","bit-integrations")}),(0,C.jsx)("optgroup",{label:"Form Fields",children:i.map((function(e){return"file-up"!==e.type&&(0,C.jsx)("option",{value:e.key,children:e.name},"ff-zhcrm-"+e.key)}))}),(0,C.jsx)("option",{value:"custom",children:(0,s.__)("Custom...","bit-integrations")}),(0,C.jsx)("optgroup",{label:"General Smart Codes "+(F?"":"(PRO)"),children:F&&(null==j.C?void 0:j.C.map((function(e){return(0,C.jsx)("option",{value:e.name,children:e.label},"ff-rm-"+e.name)})))})]}),"custom"===l.formField&&(0,C.jsx)(u.Z,{onChange:function(e){return x(e,n,r,a)},label:(0,s.__)("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:l.customValue,placeholder:(0,s.__)("Custom Value","bit-integrations")}),(0,C.jsxs)("select",{className:"btcd-paper-inp",disabled:n<p.length,name:"sendFoxFormField",value:n<p.length?p[n].key||"":l.sendFoxFormField||"",onChange:function(e){return b(e,n,r,a)},children:[(0,C.jsx)("option",{value:"",children:(0,s.__)("Select Field","bit-integrations")}),n<p.length?(0,C.jsx)("option",{value:p[n].key,children:p[n].label},p[n].key):h.map((function(e){var n=e.key,i=e.label;return(0,C.jsx)("option",{value:n,children:i},n)}))]})]}),n>=p.length&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("button",{onClick:function(){return m(n,r,a)},className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),(0,C.jsx)("button",{onClick:function(){return f(n,r,a)},className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:(0,C.jsx)("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function k(e){var n=e.i,i=e.formFields,l=e.field,r=e.sendFoxConf,a=e.setSendFoxConf;(0,c.useEffect)((function(){var e;if(1===(null==r||null==(e=r.field_map_list)?void 0:e.length)&&""===l.sendFoxListFormField){var n=(0,t.Z)({},r),i=(0,o.TN)(n);n.field_map_list=i,a(n)}}));var m=(null==r?void 0:r.listFields.filter((function(e){return!0===e.required})))||[],f=(null==r?void 0:r.listFields.filter((function(e){return!1===e.required})))||[],b=(0,d.sJ)(N.hi).isPro;return(0,C.jsx)("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:(0,C.jsxs)("div",{className:"pos-rel flx",children:[(0,C.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,C.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:l.formField||"",onChange:function(e){return p(e,n,r,a)},children:[(0,C.jsx)("option",{value:"",children:(0,s.__)("Select Field","bit-integrations")}),(0,C.jsx)("optgroup",{label:"Form Fields",children:i.map((function(e){return"file-up"!==e.type&&(0,C.jsx)("option",{value:e.key,children:e.name},"ff-zhcrm-"+e.key)}))}),(0,C.jsx)("option",{value:"custom",children:(0,s.__)("Custom...","bit-integrations")}),(0,C.jsx)("optgroup",{label:"General Smart Codes "+(b?"":"(PRO)"),children:b&&(null==j.C?void 0:j.C.map((function(e){return(0,C.jsx)("option",{value:e.name,children:e.label},"ff-rm-"+e.name)})))})]}),"custom"===l.formField&&(0,C.jsx)(u.Z,{onChange:function(e){return h(e,n,r,a)},label:(0,s.__)("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:l.customValue,placeholder:(0,s.__)("Custom Value","bit-integrations")}),(0,C.jsxs)("select",{className:"btcd-paper-inp",disabled:n<m.length,name:"sendFoxListFormField",value:n<m.length?m[n].key||"":l.sendFoxListFormField||"",onChange:function(e){return p(e,n,r,a)},children:[(0,C.jsx)("option",{value:"",children:(0,s.__)("Select Field","bit-integrations")}),n<m.length?(0,C.jsx)("option",{value:m[n].key,children:m[n].label},m[n].key):f.map((function(e){var n=e.key,i=e.label;return(0,C.jsx)("option",{value:n,children:i},n)}))]})]}),n>=m.length&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("button",{onClick:function(){return F(n,r,a)},className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),(0,C.jsx)("button",{onClick:function(){return v(n,r,a)},className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:(0,C.jsx)("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function Z(e){var n=e.i,i=e.formFields,l=e.field,r=e.sendFoxConf,a=e.setSendFoxConf;(0,c.useEffect)((function(){var e;if(1===(null==r||null==(e=r.field_map_unsubscribe)?void 0:e.length)&&""===l.sendFoxUnsubscribeFormField){var n=(0,t.Z)({},r),i=(0,o.Kv)(n);n.field_map_unsubscribe=i,a(n)}}));var m=(null==r?void 0:r.unsubscribeFields.filter((function(e){return!0===e.required})))||[],f=(null==r?void 0:r.unsubscribeFields.filter((function(e){return!1===e.required})))||[],b=(0,d.sJ)(N.hi).isPro;return(0,C.jsx)("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:(0,C.jsxs)("div",{className:"pos-rel flx",children:[(0,C.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,C.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:l.formField||"",onChange:function(e){return _(e,n,r,a)},children:[(0,C.jsx)("option",{value:"",children:(0,s.__)("Select Field","bit-integrations")}),(0,C.jsx)("optgroup",{label:"Form Fields",children:i.map((function(e){return"file-up"!==e.type&&(0,C.jsx)("option",{value:e.key,children:e.name},"ff-zhcrm-"+e.key)}))}),(0,C.jsx)("option",{value:"custom",children:(0,s.__)("Custom...","bit-integrations")}),(0,C.jsx)("optgroup",{label:"General Smart Codes "+(b?"":"(PRO)"),children:b&&(null==j.C?void 0:j.C.map((function(e){return(0,C.jsx)("option",{value:e.name,children:e.label},"ff-rm-"+e.name)})))})]}),"custom"===l.formField&&(0,C.jsx)(u.Z,{onChange:function(e){return g(e,n,r,a)},label:(0,s.__)("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:l.customValue,placeholder:(0,s.__)("Custom Value","bit-integrations")}),(0,C.jsxs)("select",{className:"btcd-paper-inp",disabled:n<m.length,name:"sendFoxUnsubscribeFormField",value:n<m.length?m[n].key||"":l.sendFoxUnsubscribeFormField||"",onChange:function(e){return _(e,n,r,a)},children:[(0,C.jsx)("option",{value:"",children:(0,s.__)("Select Field","bit-integrations")}),n<m.length?(0,C.jsx)("option",{value:m[n].key,children:m[n].label},m[n].key):f.map((function(e){var n=e.key,i=e.label;return(0,C.jsx)("option",{value:n,children:i},n)}))]})]}),n>=m.length&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("button",{onClick:function(){return F(n,r,a)},className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),(0,C.jsx)("button",{onClick:function(){return v(n,r,a)},className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:(0,C.jsx)("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function S(e){var n,i=e.formFields,d=e.handleInput,c=e.sendFoxConf,u=e.setSendFoxConf,m=e.isLoading,f=e.setIsLoading,b=e.setSnackbar,x=((null==c||null==(n=c.default)?void 0:n.allLists)||[]).map((function(e){var n=e.id;return{label:e.name,value:""+n}}));return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("br",{}),(0,C.jsx)("br",{}),(0,C.jsx)("b",{className:"wdt-200 d-in-b",children:(0,s.__)("Actions:","bit-integrations")}),(0,C.jsxs)("select",{onChange:d,name:"mainAction",value:c.mainAction,className:"btcd-paper-inp w-5",children:[(0,C.jsx)("option",{value:"",children:(0,s.__)("Select Actions","bit-integrations")}),c.allActions&&c.allActions.map((function(e){var n=e.key,i=e.label;return(0,C.jsx)("option",{value:n,children:i},n)}))]}),(0,C.jsx)("br",{}),(0,C.jsx)("br",{}),m&&(0,C.jsx)(r.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),"1"===c.mainAction&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"mt-5",children:(0,C.jsx)("b",{className:"wdt-100",children:(0,s.__)("Field Map","bit-integrations")})}),(0,C.jsx)("div",{className:"btcd-hr mt-1"}),(0,C.jsxs)("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[(0,C.jsx)("div",{className:"txt-dp",children:(0,C.jsx)("b",{children:(0,s.__)("Form Fields","bit-integrations")})}),(0,C.jsx)("div",{className:"txt-dp",children:(0,C.jsx)("b",{children:(0,s.__)("SendFox List Fields","bit-integrations")})})]}),null==c?void 0:c.field_map_list.map((function(e,n){return(0,C.jsx)(k,{i:n,field:e,sendFoxConf:c,formFields:i,setSendFoxConf:u,setSnackbar:b},"rp-m-"+(n+9))}))]}),"2"===c.mainAction&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"d-flx",children:[(0,C.jsx)("b",{className:"wdt-200 d-in-b mt-3 mt-i-3",children:(0,s.__)("All List:","bit-integrations")}),(0,C.jsx)(l.Z,{options:x,className:"btcd-paper-drpdwn w-5",defaultValue:c.listId,onChange:function(e){return function(e){var n=(0,t.Z)({},c);n.listId=e||"",u((0,t.Z)({},n))}(e)},customValue:!0}),(0,C.jsx)("button",{onClick:function(){return(0,o.GF)(c,u,f,b)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,s.__)("Refresh SendFox List","bit-integrations")+"'",height:"35px"},type:"button",disabled:m,children:"↻"})]}),(0,C.jsx)("br",{}),(0,C.jsx)("div",{className:"mt-5",children:(0,C.jsx)("b",{className:"wdt-100",children:(0,s.__)("Field Map","bit-integrations")})}),(0,C.jsx)("div",{className:"btcd-hr mt-1"}),(0,C.jsxs)("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[(0,C.jsx)("div",{className:"txt-dp",children:(0,C.jsx)("b",{children:(0,s.__)("Form Fields","bit-integrations")})}),(0,C.jsx)("div",{className:"txt-dp",children:(0,C.jsx)("b",{children:(0,s.__)("SendFox Fields","bit-integrations")})})]}),(null==c?void 0:c.listId)&&(null==c?void 0:c.field_map.map((function(e,n){return(0,C.jsx)(y,{i:n,field:e,sendFoxConf:c,formFields:i,setSendFoxConf:u,setSnackbar:b},"rp-m-"+(n+9))}))),(0,C.jsx)("div",{className:"txt-center  mt-2",style:{marginRight:85},children:(0,C.jsx)("button",{onClick:function(){return(0,a.FP)(c.field_map.length,c,u,!1)},className:"icn-btn sh-sm",type:"button",children:"+"})})]}),"3"===c.mainAction&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"mt-5",children:(0,C.jsx)("b",{className:"wdt-100",children:(0,s.__)("Field Map","bit-integrations")})}),(0,C.jsx)("div",{className:"btcd-hr mt-1"}),(0,C.jsxs)("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[(0,C.jsx)("div",{className:"txt-dp",children:(0,C.jsx)("b",{children:(0,s.__)("Form Fields","bit-integrations")})}),(0,C.jsx)("div",{className:"txt-dp",children:(0,C.jsx)("b",{children:(0,s.__)("SendFox Unsubscribe Fields","bit-integrations")})})]}),null==c?void 0:c.field_map_unsubscribe.map((function(e,n){return(0,C.jsx)(Z,{i:n,field:e,sendFoxConf:c,formFields:i,setSendFoxConf:u,setSnackbar:b},"rp-m-"+(n+9))}))]}),(0,C.jsx)("br",{})]})}}}]);