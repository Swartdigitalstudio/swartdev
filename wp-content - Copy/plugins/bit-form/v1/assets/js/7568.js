"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[7568],{3952:(e,t,r)=>{r.d(t,{Rx:()=>o,hQ:()=>l,P_:()=>d});var s=r(665),n=r(17607),i=r(77111),a=r(73305),o=function(e,t,r,n,i,a,o,l){var d=(0,s.Z)({},t),c=e.target.name;""!==e.target.value?d[c]=e.target.value:delete d[c],r((0,s.Z)({},d))},l=function(e,t,r){var o;void 0===e&&(e=null);var l={formID:e,id:null!=(o=t.id)?o:null,apiKey:t.apiKey,apiSecret:t.apiSecret,tokenDetails:t.tokenDetails},d=(0,i.Z)(l,"bitforms_dropbox_get_all_folders").then((function(e){if(e&&e.success){var n=(0,s.Z)({},t);return e.data.dropboxFoldersList&&(n.foldersList=e.data.dropboxFoldersList,n.tokenDetails=e.data.tokenDetails),r(n),"Dropbox Folders List refreshed successfully"}return"Dropbox Folders List refresh failed. please try again"}));n.ZP.promise(d,{success:function(e){return e},error:(0,a.__)("Error Occurred","bitform"),loading:(0,a.__)("Loading Dropbox Folders List...","bitform")})},d=function(e,t,r,o){if(e.accessCode&&e.apiKey&&e.apiSecret){o(!0);var l={apiKey:e.apiKey,apiSecret:e.apiSecret,accessCode:e.accessCode};(0,i.Z)(l,"bitforms_dropbox_authorization").then((function(i){if(i&&i.success){var l=(0,s.Z)({},e);l.tokenDetails=i.data,t(l),r(!0),n.ZP.success((0,a.__)("Authorized Successfully","bitform"))}else i&&i.data&&i.data.data||!i.success&&"string"===typeof i.data?n.ZP.error(""+(0,a.__)("Authorization failed Cause: ","bitform")+(i.data.data||i.data)+". "+(0,a.__)("please try again","bitform")):n.ZP.error((0,a.__)("Authorization failed. please try again","bitform"));o(!1)}))}else n.ZP.error((0,a.__)("Dropbox ApiKey, ApiSecret & Access Code can't be empty","bitform"))}},20906:(e,t,r)=>{r.d(t,{Z:()=>u});var s=r(73305),n=r(665),i=r(2598),a=r(4637);function o(e){var t,r=e.dropboxConf,o=e.setDropboxConf;return(0,a.jsx)("div",{className:"pos-rel d-flx w-8",children:(0,a.jsx)(i.Z,{checked:(null==(t=r.actions)?void 0:t.delete_from_wp)||!1,onChange:function(e){return function(e,t){var s=(0,n.Z)({},r);"deleteFile"===t&&(e.target.checked?s.actions.delete_from_wp=!0:delete s.actions.delete_from_wp),o((0,n.Z)({},s))}(e,"deleteFile")},className:"mt-4 mr-2",value:"delete_from_wp",title:(0,s.__)("Delete File From Wordpress","bitform"),subTitle:(0,s.__)("Delete file from Wordpress after upload in Dropbox","bitform")})})}var l=r(3952),d=r(33591),c=function(e,t,r){var s=(0,n.Z)({},t);s.field_map.splice(e,0,{}),r((0,n.Z)({},s))},m=function(e,t,r){var s=(0,n.Z)({},t);s.field_map.length>1&&s.field_map.splice(e,1),r((0,n.Z)({},s))};function f(e){var t=e.i,r=e.formFields,i=e.field,o=e.dropboxConf,l=e.setDropboxConf,f=function(e,t){var r=(0,n.Z)({},o);r.field_map[t][e.target.name]=e.target.value,l((0,n.Z)({},r))};return(0,a.jsx)("div",{className:"flx mt-2 mr-1",children:(0,a.jsxs)("div",{className:"pos-rel flx",children:[(0,a.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,a.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:i.formField||"",onChange:function(e){return f(e,t)},children:[(0,a.jsx)("option",{value:"",children:(0,s.__)("Select Field","bitform")}),null==r?void 0:r.filter((function(e){return"file-up"===e.type})).map((function(e){return(0,a.jsx)("option",{value:e.key,children:e.name},"ff-rm-"+e.key)}))]}),(0,a.jsxs)("select",{className:"btcd-paper-inp",name:"dropboxFormField",value:i.dropboxFormField,onChange:function(e){return f(e,t)},children:[(0,a.jsx)("option",{value:"",children:(0,s.__)("Select Folder","bitform")}),(0,d.L1)(o.foldersList,"lower_path","ASC").map((function(e){e.name;var t=e.lower_path;return(0,a.jsx)("option",{value:t,children:t.substring(1).split("/").map((function(e){return e.replace("/",">")})).join(" > ")},t)}))]})]}),(0,a.jsx)("button",{onClick:function(){return c(t,o,l)},className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),(0,a.jsx)("button",{onClick:function(){return m(t,o,l)},className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:(0,a.jsx)("span",{className:"btcd-icn icn-trash-2"})})]})})}function u(e){var t=e.formID,r=e.formFields,n=e.dropboxConf,i=e.setDropboxConf;e.isLoading,e.setIsLoading;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mt-5",children:[(0,a.jsx)("b",{className:"wdt-100",children:(0,s.__)("Field Map","bitform")}),(0,a.jsx)("button",{onClick:function(){return(0,l.hQ)(t,n,i)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,s.__)("Fetch All Dropbox Folders","bitform")+"'"},type:"button",children:"↻"})]}),(0,a.jsx)("div",{className:"btcd-hr mt-1"}),(0,a.jsxs)("div",{className:"flx flx-around mt-2 mb-1",children:[(0,a.jsx)("div",{className:"txt-dp",children:(0,a.jsx)("b",{children:(0,s.__)("File Input","bitform")})}),(0,a.jsx)("div",{className:"txt-dp",children:(0,a.jsx)("b",{children:(0,s.__)("Dropbox Folder","bitform")})})]}),null==n?void 0:n.field_map.map((function(e,t){return(0,a.jsx)(f,{i:t,field:e,formFields:r,dropboxConf:n,setDropboxConf:i},"rp-m-"+(t+9))})),(0,a.jsx)("div",{className:"txt-center  mt-2",style:{marginRight:85},children:(0,a.jsx)("button",{onClick:function(){return c(n.field_map.length,n,i,!1)},className:"icn-btn sh-sm",type:"button",children:"+"})}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("b",{className:"wdt-100",children:(0,s.__)("Actions","bitform")})}),(0,a.jsx)("div",{className:"btcd-hr mt-1"}),(0,a.jsx)(o,{dropboxConf:n,setDropboxConf:i})]})}},7568:(e,t,r)=>{r.r(t),r.d(t,{default:()=>u});var s=r(665),n=r(59496),i=r(87230),a=r(73305),o=r(65194),l=r(53132),d=r(8940),c=r(3952),m=r(20906),f=r(4637);const u=function(e){var t=e.allIntegURL,r=e.formFields,u=e.integrations,p=e.setIntegration,b=(0,i.k6)(),x=(0,i.UO)(),h=x.id,_=x.formID,v=(0,n.useState)((0,s.Z)({},u[h])),j=v[0],g=v[1],C=(0,n.useState)(!1),N=C[0],y=C[1],F=(0,n.useState)({show:!1}),Z=F[0],D=F[1];return(0,f.jsxs)("div",{style:{width:900},children:[(0,f.jsx)(o.Z,{snack:Z,setSnackbar:D}),(0,f.jsxs)("div",{className:"flx mt-3",children:[(0,f.jsx)("b",{className:"wdt-200 d-in-b",children:(0,a.__)("Integration Name:","bitform")}),(0,f.jsx)("input",{className:"btcd-paper-inp w-5",onChange:function(e){return(0,c.Rx)(e,j,g)},name:"name",value:j.name,type:"text",placeholder:(0,a.__)("Integration Name...","bitform")})]}),(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),(0,f.jsx)(m.Z,{formID:_,formFields:r,dropboxConf:j,setDropboxConf:g,isLoading:N,setIsLoading:y}),(0,f.jsx)(d.Z,{edit:!0,saveConfig:function(){(0,l.Mm)(u,p,t,j,b,h,1)},disabled:j.field_map.length<1,isLoading:N}),(0,f.jsx)("br",{})]})}},8940:(e,t,r)=>{r.d(t,{Z:()=>i});var s=r(73305),n=r(4637);function i(e){var t=e.step,r=e.saveConfig,i=e.edit,a=e.disabled;return i?(0,n.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,n.jsx)("button",{onClick:r,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:a,children:(0,s.__)("Update","bitform")})}):(0,n.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,n.jsx)("h2",{className:"ml-3",children:(0,s.__)("Successfully Integrated","bitform")}),(0,n.jsxs)("button",{onClick:r,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,s.__)("Finish & Save ","bitform")," ✔"]})]})}}}]);