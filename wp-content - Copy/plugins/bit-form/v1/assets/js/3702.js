"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[3702],{57688:(e,l,t)=>{t.d(l,{Rx:()=>r,GX:()=>d,GF:()=>u,P_:()=>c,Pd:()=>o});var a=t(665),i=t(17607),s=t(77111),n=(t(33591),t(73305)),r=function(e,l,t,i,s,n){var r,u,c=(0,a.Z)({},l),o=e.target.name;if(""!==e.target.value?c[o]=e.target.value:delete c[o],c[e.target.name]=e.target.value,"listId"===e.target.name)c.field_map=[{formField:"",acumbamailFormField:"email"}],!c.listId||null!=(r=c.default)&&null!=(u=r.allFields)&&u[c.listId]||d(n,c,t,i,s);t((0,a.Z)({},c))},d=function(e,l,t,r,d){var u=l.listId;if(u){r(!0);var c={auth_token:l.auth_token,list_id:u};(0,s.Z)(c,"bitforms_acumbamail_refresh_fields").then((function(e){if(e&&e.success){var s,d,c=(0,a.Z)({},l);if(e.data)return null!=(s=c.default)&&s.allFields||(c.default.allFields={}),null!=(d=c.default.allFields)&&d[u]||(c.default.allFields[u]={}),c.default.allFields[u].fields=e.data,c.default.allFields[u].required=["email"],t((0,a.Z)({},c)),r(!1),void i.ZP.success((0,n.__)("All list field fetched successfully","bitform"));r(!1),i.ZP.error((0,n.__)("Failed to fetch list fields","bitform"))}})).catch((function(){return r(!1)}))}},u=function(e,l,t,r){t(!0);var d={auth_token:e.auth_token};(0,s.Z)(d,"bitforms_acumbamail_fetch_all_list").then((function(s){if(s&&s.success){var r=(0,a.Z)({},e);return r.default||(r.default={}),s.data&&(r.default.allLists=s.data),l((0,a.Z)({},r)),t(!1),void i.ZP.success((0,n.__)("Lists fetched successfully","bitform"))}t(!1),i.ZP.error((0,n.__)("Lists fetch failed. please try again","bitform"))})).catch((function(){return t(!1)}))},c=function(e,l,t,r,d,u){if(e.auth_token){t({}),d(!0);var c={auth_token:e.auth_token};(0,s.Z)(c,"bitforms_acumbamail_authorization_and_fetch_subscriber_list").then((function(t){if(t&&t.success){var s=(0,a.Z)({},e);return l(s),r(!0),d(!1),void i.ZP.success((0,n.__)("Authorized successfully","bitform"))}d(!1),i.ZP.error((0,n.__)("Authorized failed","bitform"))}))}else t({auth_token:e.auth_token?"":(0,n.__)("Api Key can't be empty","bitform")})},o=function(e){return!((null!=e&&e.field_map?e.field_map.filter((function(l){var t,a,i;return!l.formField&&l.acumbamailFormField&&-1!==(null==e||null==(t=e.default)||null==(a=t.allFields)||null==(i=a[e.listId])?void 0:i.required.indexOf(l.acumbamailFormField))})):[]).length>0)}},1543:(e,l,t)=>{t.d(l,{Z:()=>p});var a=t(73305),i=t(67860),s=t(53132),n=t(57688),r=t(44084),d=t(84448),u=t(94557),c=t(2699),o=t(37029),m=t(79694),f=t(4637);function b(e){var l,t,i,s,n,b,p,_,h,v,x=e.i,j=e.formFields,g=e.field,F=e.acumbamailConf,Z=e.setAcumbamailConf,y=(0,r.sJ)(d.hi).isPro,C=null==(l=F.default.allFields[F.listId])||null==(t=l.required)?void 0:t.includes(g.acumbamailFormField),N=(null==(i=F.default.allFields)||null==(s=i[F.listId])?void 0:s.fields)&&(Object.entries(null==(n=F.default.allFields)||null==(b=n[F.listId])?void 0:b.fields).filter((function(e){return!0===e[1].required}))||[]),k=(null==(p=F.default.allFields)||null==(_=p[F.listId])?void 0:_.fields)&&(Object.entries(null==(h=F.default.allFields)||null==(v=h[F.listId])?void 0:v.fields).filter((function(e){return!1===e[1].required}))||[]);return(0,f.jsxs)("div",{className:"flx mt-2 mr-1",children:[(0,f.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,f.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:g.formField||"",onChange:function(e){return(0,m.wX)(e,x,F,Z)},children:[(0,f.jsx)("option",{value:"",children:(0,a.__)("Select Field","bitform")}),(0,f.jsx)("optgroup",{label:"Form Fields",children:j.map((function(e){return"file-up"!==e.type&&(0,f.jsx)("option",{value:e.key,children:e.name},"ff-zhcrm-"+e.key)}))}),(0,f.jsx)("option",{value:"custom",children:(0,a.__)("Custom...","bitform")}),(0,f.jsx)("optgroup",{label:"General Smart Codes "+(y?"":"(PRO)"),children:y&&(null==c.C?void 0:c.C.map((function(e){return(0,f.jsx)("option",{value:e.name,children:e.label},"ff-rm-"+e.name)})))})]}),"custom"===g.formField&&(0,f.jsx)(o.Z,{onChange:function(e){return(0,m.mG)(e,x,F,Z)},label:(0,a.__)("Custom Value","bitform"),className:"mr-2",type:"text",value:g.customValue,placeholder:(0,a.__)("Custom Value","bitform")}),(0,f.jsxs)("select",{className:"btcd-paper-inp",name:"acumbamailFormField",disabled:x<1,value:g.acumbamailFormField||"",onChange:function(e){return(0,m.wX)(e,x,F,Z)},children:[(0,f.jsx)("option",{value:"",children:(0,a.__)("Select Field","bitform")}),C&&N&&N.map((function(e,l){return(0,f.jsx)("option",{value:e[0],children:e[0]},"mchimp-"+2*l)})),!C&&k&&k.map((function(e,l){return(0,f.jsx)("option",{value:e[0],children:e[0]},"mchimp-"+2*l)}))]})]}),!C&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("button",{onClick:function(){return(0,m.FP)(x,F,Z)},className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),(0,f.jsx)("button",{onClick:function(){return(0,m.T5)(x,F,Z)},className:"icn-btn sh-sm",type:"button","aria-label":"btn",children:(0,f.jsx)(u.Z,{})})]})]})}function p(e){var l,t,r=e.formFields,d=e.handleInput,u=e.acumbamailConf,c=e.setAcumbamailConf,o=e.isLoading,m=e.setIsLoading,p=e.setSnackbar;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("br",{}),(0,f.jsx)("b",{className:"wdt-200 d-in-b",children:(0,a.__)("Actions:","bitform")}),(0,f.jsxs)("select",{onChange:d,name:"mainAction",value:u.mainAction,className:"btcd-paper-inp w-5",children:[(0,f.jsx)("option",{value:"",children:(0,a.__)("Select Actions","bitform")}),u.allActions&&u.allActions.map((function(e){var l=e.key,t=e.label;return(0,f.jsx)("option",{value:l,children:t},l)}))]}),(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),(0,f.jsx)("b",{className:"wdt-200 d-in-b",children:(0,a.__)("All List:","bitform")}),(0,f.jsxs)("select",{onChange:d,name:"listId",value:u.listId,className:"btcd-paper-inp w-5",children:[(0,f.jsx)("option",{value:"",children:(0,a.__)("Select List","bitform")}),(null==u||null==(l=u.default)?void 0:l.allLists)&&Object.entries(u.default.allLists).map((function(e){return(0,f.jsx)("option",{value:e[0],children:e[1].name},e[0])}))]}),(0,f.jsx)("button",{onClick:function(){return(0,n.GF)(u,c,m,p)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,a.__)("Fetch Subscriber List","bitform")+"'"},type:"button",disabled:o,children:"↻"}),(0,f.jsx)("br",{}),o&&(0,f.jsx)(i.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),(0,f.jsxs)("div",{className:"mt-5",children:[(0,f.jsx)("b",{className:"wdt-100",children:(0,a.__)("Field Map","bitform")}),(0,f.jsx)("button",{onClick:function(){return(0,n.GX)(null,u,c,m,p)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,a.__)("Refresh Acumbamail Fields","bitform")+"'"},type:"button",disabled:o,children:"↻"})]}),(0,f.jsx)("div",{className:"btcd-hr mt-1"}),(0,f.jsxs)("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[(0,f.jsx)("div",{className:"txt-dp",children:(0,f.jsx)("b",{children:(0,a.__)("Form Fields","bitform")})}),(0,f.jsx)("div",{className:"txt-dp",children:(0,f.jsx)("b",{children:(0,a.__)("Acumbamail Fields","bitform")})})]}),(null==(t=u.default)?void 0:t.allFields)&&(0,f.jsxs)(f.Fragment,{children:[u.field_map.map((function(e,l){return(0,f.jsx)(b,{i:l,field:e,acumbamailConf:u,formFields:r,setAcumbamailConf:c},"acumba-m-"+(l+9))})),(0,f.jsx)("div",{className:"txt-center  mt-2",style:{marginRight:85},children:(0,f.jsx)("button",{onClick:function(){return(0,s.FP)(u.field_map.length,u,c)},className:"icn-btn sh-sm",type:"button",children:"+"})}),(0,f.jsx)("br",{}),(0,f.jsx)("br",{})]}),(0,f.jsx)("br",{})]})}},8940:(e,l,t)=>{t.d(l,{Z:()=>s});var a=t(73305),i=t(4637);function s(e){var l=e.step,t=e.saveConfig,s=e.edit,n=e.disabled;return s?(0,i.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,i.jsx)("button",{onClick:t,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:n,children:(0,a.__)("Update","bitform")})}):(0,i.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===l&&"90%",height:3===l&&"100%"},children:[(0,i.jsx)("h2",{className:"ml-3",children:(0,a.__)("Successfully Integrated","bitform")}),(0,i.jsxs)("button",{onClick:t,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,a.__)("Finish & Save ","bitform")," ✔"]})]})}},79694:(e,l,t)=>{t.d(l,{Mm:()=>i,FP:()=>s,T5:()=>n,wX:()=>r,mG:()=>d,D2:()=>u,LX:()=>c,Ye:()=>o});var a=t(665),i=function(e,l,t,i,s,n,r){var d=[].concat(e);if(r)d[n]=(0,a.Z)({},e[n],i),d.push({editItegration:!0}),l([].concat(d)),s.push(t);else{var u=[].concat(d);u.push(i),u.push({newItegration:!0}),l(u),s.push(t)}},s=function(e,l,t,i,s){var n=(0,a.Z)({},l);s?i?n.relatedlists[s-1].upload_field_map.splice(e,0,{}):n.relatedlists[s-1].field_map.splice(e,0,{}):i?n.upload_field_map.splice(e,0,{}):n.field_map.splice(e,0,{}),t((0,a.Z)({},n))},n=function(e,l,t,i,s){var n=(0,a.Z)({},l);s?i?n.relatedlists[s-1].upload_field_map.length>1&&n.relatedlists[s-1].upload_field_map.splice(e,1):n.relatedlists[s-1].field_map.length>1&&n.relatedlists[s-1].field_map.splice(e,1):i?n.upload_field_map.length>1&&n.upload_field_map.splice(e,1):n.field_map.length>1&&n.field_map.splice(e,1),t((0,a.Z)({},n))},r=function(e,l,t,i,s,n){var r=(0,a.Z)({},t);n?s?r.relatedlists[n-1].upload_field_map[l][e.target.name]=e.target.value:r.relatedlists[n-1].field_map[l][e.target.name]=e.target.value:s?r.upload_field_map[l][e.target.name]=e.target.value:r.field_map[l][e.target.name]=e.target.value,"custom"===e.target.value&&(n?r.relatedlists[n-1].field_map[l].customValue="":r.field_map[l].customValue=""),i((0,a.Z)({},r))},d=function(e,l,t,i,s){var n=(0,a.Z)({},t);s?n.relatedlists[s-1].field_map[l].customValue=e.target.value:n.field_map[l].customValue=e.target.value,i((0,a.Z)({},n))},u=function(e,l,t,i,s,n){var r=(0,a.Z)({},t);r.address_field[l][e.target.name]=e.target.value,i((0,a.Z)({},r))},c=function(e,l,t){var i=(0,a.Z)({},l);i.address_field||(i.address_field=[]),i.address_field.push({}),t((0,a.Z)({},i))},o=function(e,l,t){var i=(0,a.Z)({},l);i.address_field&&i.address_field.length>1&&i.address_field.splice(e,1),t((0,a.Z)({},i))}}}]);