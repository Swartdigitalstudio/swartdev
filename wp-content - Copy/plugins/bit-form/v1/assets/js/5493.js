"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[5493],{8940:(e,t,s)=>{s.d(t,{Z:()=>n});var i=s(73305),l=s(4637);function n(e){var t=e.step,s=e.saveConfig,n=e.edit,a=e.disabled;return n?(0,l.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,l.jsx)("button",{onClick:s,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:a,children:(0,i.__)("Update","bitform")})}):(0,l.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,l.jsx)("h2",{className:"ml-3",children:(0,i.__)("Successfully Integrated","bitform")}),(0,l.jsxs)("button",{onClick:s,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,i.__)("Finish & Save ","bitform")," ✔"]})]})}},15493:(e,t,s)=>{s.r(t),s.d(t,{default:()=>f});var i=s(665),l=s(59496),n=s(87230),a=s(73305),r=s(65194),d=s(53132),o=s(8940),c=s(46074),u=s(28870),m=s(4637);const f=function(e){var t=e.formFields,s=e.setIntegration,f=e.integrations,h=e.allIntegURL,b=(0,n.k6)(),p=(0,n.UO)(),x=p.id,_=p.formID,j=(0,l.useState)((0,i.Z)({},f[x])),v=j[0],g=j[1],w=(0,l.useState)(!1),N=w[0],C=w[1],F=(0,l.useState)({show:!1}),y=F[0],Z=F[1];return(0,m.jsxs)("div",{style:{width:900},children:[(0,m.jsx)(r.Z,{snack:y,setSnackbar:Z}),(0,m.jsxs)("div",{className:"flx mt-3",children:[(0,m.jsx)("b",{className:"wdt-200 d-in-b",children:(0,a.__)("Integration Name:","bitform")}),(0,m.jsx)("input",{className:"btcd-paper-inp w-6",onChange:function(e){return(0,c.Rx)(e,v,g)},name:"name",value:v.name,type:"text",placeholder:(0,a.__)("Integration Name...","bitform")})]}),(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),(0,m.jsx)(u.Z,{formID:_,formFields:t,mailPoetConf:v,setMailPoetConf:g,isLoading:N,step:2,setisLoading:C,setSnackbar:Z,edit:v.lists}),(0,m.jsx)(o.Z,{edit:!0,saveConfig:function(){(0,c.Pd)(v)?(0,d.Mm)(f,s,h,v,b,x,1):Z({show:!0,msg:"Please map all required fields to continue."})},disabled:""===v.lists||v.field_map.length<1}),(0,m.jsx)("br",{})]})}},46074:(e,t,s)=>{s.d(t,{XE:()=>a,eE:()=>r,Rx:()=>d,Pd:()=>o});var i=s(665),l=s(73305),n=s(77111),a=function(e,t,s,a,r){a(!0),(0,n.Z)({},"bitforms_refresh_news_letter").then((function(e){if(e&&e.success){var n=(0,i.Z)({},t);n.default||(n.default={}),e.data.newsletterList&&(n.default.newsletterList=e.data.newsletterList),r({show:!0,msg:(0,l.__)("Newsletter list refreshed","bitform")}),s((0,i.Z)({},n))}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?r({show:!0,msg:""+(0,l.__)("Newsletter list refresh failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,l.__)("please try again","bitform")}):r({show:!0,msg:(0,l.__)("Newsletter list refresh failed. please try again","bitform")});a(!1)})).catch((function(){return a(!1)}))},r=function(e,t,s,a){(0,n.Z)({},"bitforms_mail_poet_list_headers").then((function(n){if(n&&n.success){var r=(0,i.Z)({},e);if(n.data.mailPoetFields){r.default.fields=n.data.mailPoetFields;var d=r.default.fields;r.field_map=Object.values(d).filter((function(e){return e.required})).map((function(e){return{formField:"",mailPoetField:e.id,required:!0}})),a({show:!0,msg:(0,l.__)("Mailpoet fields refreshed","bitform")})}else a({show:!0,msg:(0,l.__)("No Mailpoet fields found. Try changing the header row number or try again","bitform")});n.data.tokenDetails&&(r.tokenDetails=n.data.tokenDetails),t((0,i.Z)({},r))}else a({show:!0,msg:(0,l.__)("Mailpoet fields refresh failed. please try again","bitform")});s(!1)})).catch((function(){return s(!1)}))},d=function(e,t,s){var l=(0,i.Z)({},t);l.name=e.target.value,s((0,i.Z)({},l))},o=function(e){return!((null!=e&&e.field_map?e.field_map.filter((function(e){return!e.formField&&e.mailPoetField&&e.required})):[]).length>0)}},28870:(e,t,s)=>{s.d(t,{Z:()=>p});var i=s(665),l=s(19753),n=s(73305),a=s(67860),r=s(53132),d=s(46074),o=s(44084),c=s(84448),u=s(94557),m=s(2699),f=s(37029),h=s(4637);function b(e){var t,s,l,a=e.i,r=e.formFields,d=e.field,b=e.mailPoetConf,p=e.setMailPoetConf,x=d.required,_=(null==b||null==(t=b.default)?void 0:t.fields)&&Object.values(null==b||null==(s=b.default)?void 0:s.fields).filter((function(e){return""===e.required})),j=(0,o.sJ)(c.hi).isPro,v=function(e,t){var s=(0,i.Z)({},b);s.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(s.field_map[t].customValue=""),p(s)};return(0,h.jsxs)("div",{className:"flx mt-2 mr-1",children:[(0,h.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,h.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:d.formField||"",onChange:function(e){return v(e,a)},children:[(0,h.jsx)("option",{value:"",children:(0,n.__)("Select Field","bitform")}),(0,h.jsx)("optgroup",{label:"Form Fields",children:r.map((function(e){return"file-up"!==e.type&&(0,h.jsx)("option",{value:e.key,children:e.name},"ff-zhcrm-"+e.key)}))}),(0,h.jsx)("option",{value:"custom",children:(0,n.__)("Custom...","bitform")}),(0,h.jsx)("optgroup",{label:"General Smart Codes "+(j?"":"(PRO)"),children:j&&(null==m.C?void 0:m.C.map((function(e){return(0,h.jsx)("option",{value:e.name,children:e.label},"ff-rm-"+e.name)})))})]}),"custom"===d.formField&&(0,h.jsx)(f.Z,{onChange:function(e){return function(e,t){var s=(0,i.Z)({},b);s.field_map[t].customValue=e.target.value,p(s)}(e,a)},label:(0,n.__)("Custom Value","bitform"),className:"mr-2",type:"text",value:d.customValue,placeholder:(0,n.__)("Custom Value","bitform")}),(0,h.jsxs)("select",{className:"btcd-paper-inp",name:"mailPoetField",value:d.mailPoetField,onChange:function(e){return v(e,a)},disabled:x,children:[(0,h.jsx)("option",{value:"",children:(0,n.__)("Select Field","bitform")}),x?(null==b||null==(l=b.default)?void 0:l.fields)&&Object.values(b.default.fields).map((function(e){return(0,h.jsx)("option",{value:e.id,children:e.name},e.id+"-1")})):_&&_.map((function(e){return(0,h.jsx)("option",{value:e.id,children:e.name},e.id+"-1")}))]})]}),!x&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("button",{onClick:function(){return function(e){var t=(0,i.Z)({},b);t.field_map.splice(e,0,{}),p(t)}(a)},className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),(0,h.jsx)("button",{onClick:function(){return function(e){var t=(0,i.Z)({},b);t.field_map.length>1&&t.field_map.splice(e,1),p(t)}(a)},className:"icn-btn sh-sm ml-2",type:"button","aria-label":"btn",children:(0,h.jsx)(u.Z,{})})]})]})}function p(e){var t,s=e.formID,o=e.formFields,c=e.mailPoetConf,u=e.setMailPoetConf,m=e.isLoading,f=e.setisLoading,p=e.setSnackbar,x=function(e){var t=(0,i.Z)({},c);e?(t.lists=e?e.split(","):[],(0,d.eE)(t,u,f,p)):delete t.lists,u((0,i.Z)({},t))};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("br",{}),(0,h.jsxs)("div",{className:"flx",children:[(0,h.jsx)("b",{className:"wdt-200 d-in-b",children:(0,n.__)("List: ","bitform")}),(0,h.jsx)(l.Z,{defaultValue:null==c?void 0:c.lists,className:"btcd-paper-drpdwn w-6",options:(null==c||null==(t=c.default)?void 0:t.newsletterList)&&Object.keys(c.default.newsletterList).map((function(e){return{label:c.default.newsletterList[e].newsletterName,value:c.default.newsletterList[e].newsletterId}})),onChange:function(e){return x(e)}}),(0,h.jsx)("button",{onClick:function(){return x(s)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,n.__)("Refresh MailPoet List","bitform")+"'"},type:"button",disabled:m,children:"↻"})]}),m&&(0,h.jsx)(a.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),(null==c?void 0:c.lists)&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"mt-4",children:(0,h.jsx)("b",{className:"wdt-100",children:(0,n.__)("Map Fields","bitform")})}),(0,h.jsx)("div",{className:"btcd-hr mt-1"}),(0,h.jsxs)("div",{className:"flx flx-around mt-2 mb-1",children:[(0,h.jsx)("div",{className:"txt-dp",children:(0,h.jsx)("b",{children:(0,n.__)("Form Fields","bitform")})}),(0,h.jsx)("div",{className:"txt-dp",children:(0,h.jsx)("b",{children:(0,n.__)("MailPoet Fields","bitform")})})]}),c.field_map.map((function(e,t){return(0,h.jsx)(b,{i:t,field:e,mailPoetConf:c,formFields:o,setMailPoetConf:u},"mailpoet-m-"+(t+9))})),(0,h.jsx)("div",{className:"txt-center  mt-2",style:{marginRight:85},children:(0,h.jsx)("button",{onClick:function(){return(0,r.FP)(c.field_map.length,c,u)},className:"icn-btn sh-sm",type:"button",children:"+"})}),(0,h.jsx)("br",{}),(0,h.jsx)("br",{})]})]})}}}]);