"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[5640],{87034:(e,t,l)=>{l.d(t,{Pd:()=>u,Rx:()=>d,ow:()=>r});var n=l(72564),i=l(99484),a=l(44947),r=function(e,t,l,r,o){r(!0),(0,a.Z)({},"bitforms_refresh_fluent_crm_lists").then((function(e){if(e&&e.success){var a=(0,n.Z)({},t);a.default||(a.default={}),e.data.fluentCrmList&&(a.default.fluentCrmList=e.data.fluentCrmList),e.data.fluentCrmTags&&(a.default.fluentCrmTags=e.data.fluentCrmTags),o({show:!0,msg:(0,i.__)("FluentCRM list refreshed","bitform")}),s(a,l,r,o)}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?o({show:!0,msg:""+(0,i.__)("FluentCRM list refresh failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,i.__)("please try again","bitform")}):o({show:!0,msg:(0,i.__)("FluentCRM list refresh failed. please try again","bitform")});r(!1)})).catch((function(){return r(!1)}))},s=function(e,t,l,r){(0,a.Z)({},"bitforms_fluent_crm_headers").then((function(a){if(a&&a.success){var s=(0,n.Z)({},e);a.data.fluentCrmFlelds?(s.default.fields=a.data.fluentCrmFlelds,s.field_map=o(e),r({show:!0,msg:(0,i.__)("Fluent CRM fields refreshed","bitform")})):r({show:!0,msg:(0,i.__)("No Fluent CRM fields found. Try changing the header row number or try again","bitform")}),t((0,n.Z)({},s))}else r({show:!0,msg:(0,i.__)("Fluent CRM fields refresh failed. please try again","bitform")});l(!1)})).catch((function(){return l(!1)}))},o=function(e){var t=e.field_map,l=e.default.fields,i=Object.values(l).filter((function(e){return e.required})).map((function(e){return{formField:"",fluentCRMField:e.key,required:!0}})).filter((function(e){return!t.find((function(t){return t.fluentCRMField===e.fluentCRMField}))})),a=t.filter((function(e){return e.fluentCRMField||e.formField})).map((function(e){var t=l[e.fluentCRMField];return t?(0,n.Z)({},e,{formField:t.label}):e}));return[].concat(i,a)},d=function(e,t,l){var i=(0,n.Z)({},t);i.name=e.target.value,l((0,n.Z)({},i))},u=function(e){return!((null!=e&&e.field_map?e.field_map.filter((function(e){return!e.formField&&e.fluentCRMField&&e.required})):[]).length>0)}},6157:(e,t,l)=>{l.d(t,{Z:()=>v});var n=l(72564),i=l(52080),a=l(99484),r=l(40493),s=l(84584),o=l(3454),d=l(4637);function u(e){var t,l,i=e.fluentCrmConf,r=e.setFluentCrmConf,s=(e.formFields,function(e,t){var l=(0,n.Z)({},i);"exists"===t&&(e.target.checked?l.actions.skip_if_exists=!0:delete l.actions.skip_if_exists),"doubleOpIn"===t&&(e.target.checked?l.actions.double_opt_in=!0:delete l.actions.double_opt_in),r((0,n.Z)({},l))});return(0,d.jsxs)("div",{className:"pos-rel d-flx w-8",children:[(0,d.jsx)(o.Z,{checked:(null==(t=i.actions)?void 0:t.skip_if_exists)||!1,onChange:function(e){return s(e,"exists")},className:"wdt-200 mt-4 mr-2",value:"skip_if_exists",title:(0,a.__)("Skip exist Contact","bitform"),subTitle:(0,a.__)("Skip if contact already exist in FluentCRM","bitform")}),(0,d.jsx)(o.Z,{checked:(null==(l=i.actions)?void 0:l.double_opt_in)||!1,onChange:function(e){return s(e,"doubleOpIn")},className:"wdt-200 mt-4 mr-2",value:"double_opt_in",title:(0,a.__)("Double Opt-in","bitform"),subTitle:(0,a.__)("Enable Double Option for new contacts","bitform")})]})}var c=l(87034),f=l(57287),m=l(8309),p=l(83997),_=l(85385),h=l(46649);function b(e){var t,l,i,r=e.i,s=e.formFields,o=e.field,u=e.fluentCrmConf,c=e.setFluentCrmConf,b=o.required,v=(null==u||null==(t=u.default)?void 0:t.fields)&&Object.values(null==u||null==(l=u.default)?void 0:l.fields).filter((function(e){return!e.required})),g=(0,f.sJ)(m.hi).isPro,C=function(e,t){var l=(0,n.Z)({},u);l.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(l.field_map[t].customValue=""),c(l)};return(0,d.jsxs)("div",{className:"flx mt-2 mr-1",children:[(0,d.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,d.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:o.formField||"",onChange:function(e){return C(e,r)},children:[(0,d.jsx)("option",{value:"",children:(0,a.__)("Select Field","bitform")}),(0,d.jsx)("optgroup",{label:"Form Fields",children:s.map((function(e){return"file-up"!==e.type&&(0,d.jsx)("option",{value:e.key,children:e.name},"ff-zhcrm-"+e.key)}))}),(0,d.jsx)("option",{value:"custom",children:(0,a.__)("Custom...","bitform")}),(0,d.jsx)("optgroup",{label:"General Smart Codes "+(g?"":"(PRO)"),children:g&&(null==_.C?void 0:_.C.map((function(e){return(0,d.jsx)("option",{value:e.name,children:e.label},"ff-rm-"+e.name)})))})]}),"custom"===o.formField&&(0,d.jsx)(h.Z,{onChange:function(e){return function(e,t){var l=(0,n.Z)({},u);l.field_map[t].customValue=e.target.value,c(l)}(e,r)},label:(0,a.__)("Custom Value","bitform"),className:"mr-2",type:"text",value:o.customValue,placeholder:(0,a.__)("Custom Value","bitform")}),(0,d.jsxs)("select",{className:"btcd-paper-inp",name:"fluentCRMField",value:o.fluentCRMField,onChange:function(e){return C(e,r)},disabled:b,children:[(0,d.jsx)("option",{value:"",children:(0,a.__)("Select Field","bitform")}),b?(null==u||null==(i=u.default)?void 0:i.fields)&&Object.values(u.default.fields).map((function(e){return(0,d.jsx)("option",{value:e.key,children:e.label},e.key+"-1")})):v&&v.map((function(e){return(0,d.jsx)("option",{value:e.key,children:e.label},e.key+"-1")}))]})]}),!b&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("button",{onClick:function(){return function(e){var t=(0,n.Z)({},u);t.field_map.splice(e,0,{}),c(t)}(r)},className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),(0,d.jsx)("button",{onClick:function(){return function(e){var t=(0,n.Z)({},u);t.field_map.length>1&&t.field_map.splice(e,1),c(t)}(r)},className:"icn-btn sh-sm ml-2",type:"button","aria-label":"btn",children:(0,d.jsx)(p.Z,{})})]})]})}function v(e){var t,l,o=e.formID,f=e.formFields,m=e.fluentCrmConf,p=e.setFluentCrmConf,_=e.isLoading,h=e.setisLoading,v=e.setSnackbar;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("br",{}),(0,d.jsxs)("div",{className:"flx",children:[(0,d.jsx)("b",{className:"wdt-200 d-in-b",children:(0,a.__)("Fluent CRM List:","bitform")}),(0,d.jsxs)("select",{onChange:function(e){return function(e){var t=(0,n.Z)({},m);t.list_id=e.target.value,p((0,n.Z)({},t))}(e)},name:"list_id",value:m.list_id,className:"btcd-paper-inp w-5",children:[(0,d.jsx)("option",{value:"",children:(0,a.__)("Select Fluent CRM list","bitform")}),(null==m||null==(t=m.default)?void 0:t.fluentCrmList)&&Object.keys(m.default.fluentCrmList).map((function(e){return(0,d.jsx)("option",{value:m.default.fluentCrmList[e].id,children:m.default.fluentCrmList[e].title},e)}))]}),(0,d.jsx)("button",{onClick:function(){return(0,c.ow)(o,m,p,h,v)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,a.__)("Refresh Fluent CRM List","bitform")+"'"},type:"button",disabled:_,children:"↻"})]}),(0,d.jsxs)("div",{className:"flx mt-5",children:[(0,d.jsx)("b",{className:"wdt-200 d-in-b",children:(0,a.__)("Fluent CRM Tags: ","bitform")}),(0,d.jsx)(i.Z,{defaultValue:null==m?void 0:m.tags,className:"btcd-paper-drpdwn w-5",options:(null==m||null==(l=m.default)?void 0:l.fluentCrmTags)&&Object.keys(m.default.fluentCrmTags).map((function(e){return{label:m.default.fluentCrmTags[e].title,value:m.default.fluentCrmTags[e].id.toString()}})),onChange:function(e){return function(e){var t=(0,n.Z)({},m);e?t.tags=e?e.split(","):[]:delete t.tags,p((0,n.Z)({},t))}(e)}})]}),_&&(0,d.jsx)(r.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),(0,d.jsx)("div",{className:"mt-4",children:(0,d.jsx)("b",{className:"wdt-100",children:(0,a.__)("Map Fields","bitform")})}),(0,d.jsx)("div",{className:"btcd-hr mt-1"}),(0,d.jsxs)("div",{className:"flx flx-around mt-2 mb-1",children:[(0,d.jsx)("div",{className:"txt-dp",children:(0,d.jsx)("b",{children:(0,a.__)("Form Fields","bitform")})}),(0,d.jsx)("div",{className:"txt-dp",children:(0,d.jsx)("b",{children:(0,a.__)("Fluent CRM Fields","bitform")})})]}),m.field_map.map((function(e,t){return(0,d.jsx)(b,{i:t,field:e,fluentCrmConf:m,formFields:f,setFluentCrmConf:p},"fluentcrm-m-"+(t+9))})),(0,d.jsx)("div",{className:"txt-center  mt-2",style:{marginRight:85},children:(0,d.jsx)("button",{onClick:function(){return(0,s.FP)(m.field_map.length,m,p)},className:"icn-btn sh-sm",type:"button",children:"+"})}),(0,d.jsx)("br",{}),(0,d.jsx)("div",{className:"mt-4",children:(0,d.jsx)("b",{className:"wdt-100",children:(0,a.__)("Actions","bitform")})}),(0,d.jsx)("div",{className:"btcd-hr mt-1"}),(0,d.jsx)(u,{fluentCrmConf:m,setFluentCrmConf:p,setisLoading:h,setSnackbar:v})]})}},84584:(e,t,l)=>{l.d(t,{FP:()=>u,Mm:()=>r,P_:()=>o,T5:()=>c,WK:()=>s,mG:()=>m,wX:()=>f});var n=l(72564),i=l(99484),a=l(44947),r=function(e,t,l,i,a,r,s){var o=[].concat(e);if(s)o[r]=(0,n.Z)({},e[r],i),o.push({editItegration:!0}),t([].concat(o)),a.push(l);else{var d=[].concat(o);d.push(i),d.push({newItegration:!0}),t(d),a.push(l)}},s=function(e){var t={},l=window.location.href.replace(window.opener.location.href+"/redirect","").split("&");l&&l.forEach((function(e){var l=e.split("=");l[1]&&(t[l[0]]=l[1])})),localStorage.setItem("__bitforms_"+e,JSON.stringify(t)),window.close()},o=function(e,t,l,a,r,s,o,u,c){if(a.dataCenter&&a.clientId&&a.clientSecret){u(!0);var f="https://accounts.zoho."+a.dataCenter+"/oauth/v2/auth?scope="+l+"&response_type=code&client_id="+a.clientId+"&prompt=Consent&access_type=offline&state="+encodeURIComponent(window.location.href)+"/redirect&redirect_uri="+encodeURIComponent(bits.zohoRedirectURL),m=window.open(f,e,"width=400,height=609,toolbar=off"),p=setInterval((function(){if(m.closed){clearInterval(p);var l={},s=!1,f=localStorage.getItem("__bitforms_"+e);if(f&&(s=!0,l=JSON.parse(f),localStorage.removeItem("__bitforms_"+e)),l.code&&!l.error&&l&&s){var _=(0,n.Z)({},a);_.accountServer=l["accounts-server"],d(t,l,_,r,o,u,c)}else{var h=l.error?"Cause: "+l.error:"";c({show:!0,msg:(0,i.__)("Authorization failed","bitform")+" "+h+". "+(0,i.__)("please try again","bitform")}),u(!1)}}}),500)}else s({dataCenter:a.dataCenter?"":(0,i.__)("Data center cann't be empty","bitform"),clientId:a.clientId?"":(0,i.__)("Client ID cann't be empty","bitform"),clientSecret:a.clientSecret?"":(0,i.__)("Secret key cann't be empty","bitform")})},d=function(e,t,l,r,s,o,d){var u=(0,n.Z)({},t);u.dataCenter=l.dataCenter,u.clientId=l.clientId,u.clientSecret=l.clientSecret,u.redirectURI=bits.zohoRedirectURL,(0,a.Z)(u,"bitforms_"+e+"_generate_token").then((function(e){return e})).then((function(e){if(e&&e.success){var t=(0,n.Z)({},l);t.tokenDetails=e.data,r(t),s(!0),d({show:!0,msg:(0,i.__)("Authorized Successfully","bitform")})}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?d({show:!0,msg:""+(0,i.__)("Authorization failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,i.__)("please try again","bitform")}):d({show:!0,msg:(0,i.__)("Authorization failed. please try again","bitform")});o(!1)}))},u=function(e,t,l,i,a){var r=(0,n.Z)({},t);a?i?r.relatedlists[a-1].upload_field_map.splice(e,0,{}):r.relatedlists[a-1].field_map.splice(e,0,{}):i?r.upload_field_map.splice(e,0,{}):r.field_map.splice(e,0,{}),l((0,n.Z)({},r))},c=function(e,t,l,i,a){var r=(0,n.Z)({},t);a?i?r.relatedlists[a-1].upload_field_map.length>1&&r.relatedlists[a-1].upload_field_map.splice(e,1):r.relatedlists[a-1].field_map.length>1&&r.relatedlists[a-1].field_map.splice(e,1):i?r.upload_field_map.length>1&&r.upload_field_map.splice(e,1):r.field_map.length>1&&r.field_map.splice(e,1),l((0,n.Z)({},r))},f=function(e,t,l,i,a,r){var s=(0,n.Z)({},l);r?a?s.relatedlists[r-1].upload_field_map[t][e.target.name]=e.target.value:s.relatedlists[r-1].field_map[t][e.target.name]=e.target.value:a?s.upload_field_map[t][e.target.name]=e.target.value:s.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(r?s.relatedlists[r-1].field_map[t].customValue="":s.field_map[t].customValue=""),i((0,n.Z)({},s))},m=function(e,t,l,i,a){var r=(0,n.Z)({},l);a?r.relatedlists[a-1].field_map[t].customValue=e.target.value:r.field_map[t].customValue=e.target.value,i((0,n.Z)({},r))}},19470:(e,t,l)=>{l.d(t,{Z:()=>a});var n=l(99484),i=l(4637);function a(e){var t=e.step,l=e.saveConfig,a=e.edit,r=e.disabled;return a?(0,i.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,i.jsx)("button",{onClick:l,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:r,children:(0,n.__)("Update","bitform")})}):(0,i.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,i.jsx)("h2",{className:"ml-3",children:(0,n.__)("Successfully Integrated","bitform")}),(0,i.jsxs)("button",{onClick:l,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,n.__)("Finish & Save ","bitform")," ✔"]})]})}}}]);