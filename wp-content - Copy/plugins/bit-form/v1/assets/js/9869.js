"use strict";(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[9869],{69369:(e,t,a)=>{a.d(t,{FP:()=>d,Mm:()=>n,P_:()=>s,T5:()=>f,WK:()=>o,mG:()=>u,wX:()=>m});var r=a(72564),i=a(57852),l=a(2850),n=function(e,t,a,i,l,n,o){var s=[].concat(e);if(o)s[n]=(0,r.Z)({},e[n],i),s.push({editItegration:!0}),t([].concat(s)),l.push(a);else{var c=[].concat(s);c.push(i),c.push({newItegration:!0}),t(c),l.push(a)}},o=function(e){var t={},a=window.location.href.replace(window.opener.location.href+"/redirect","").split("&");a&&a.forEach((function(e){var a=e.split("=");a[1]&&(t[a[0]]=a[1])})),localStorage.setItem("__bitforms_"+e,JSON.stringify(t)),window.close()},s=function(e,t,a,l,n,o,s,d,f){if(l.dataCenter&&l.clientId&&l.clientSecret){d(!0);var m="https://accounts.zoho."+l.dataCenter+"/oauth/v2/auth?scope="+a+"&response_type=code&client_id="+l.clientId+"&prompt=Consent&access_type=offline&state="+encodeURIComponent(window.location.href)+"/redirect&redirect_uri="+encodeURIComponent(bits.zohoRedirectURL),u=window.open(m,e,"width=400,height=609,toolbar=off"),p=setInterval((function(){if(u.closed){clearInterval(p);var a={},o=!1,m=localStorage.getItem("__bitforms_"+e);if(m&&(o=!0,a=JSON.parse(m),localStorage.removeItem("__bitforms_"+e)),a.code&&!a.error&&a&&o){var _=(0,r.Z)({},l);_.accountServer=a["accounts-server"],c(t,a,_,n,s,d,f)}else{var h=a.error?"Cause: "+a.error:"";f({show:!0,msg:(0,i.__)("Authorization failed","bitform")+" "+h+". "+(0,i.__)("please try again","bitform")}),d(!1)}}}),500)}else o({dataCenter:l.dataCenter?"":(0,i.__)("Data center cann't be empty","bitform"),clientId:l.clientId?"":(0,i.__)("Client ID cann't be empty","bitform"),clientSecret:l.clientSecret?"":(0,i.__)("Secret key cann't be empty","bitform")})},c=function(e,t,a,n,o,s,c){var d=(0,r.Z)({},t);d.dataCenter=a.dataCenter,d.clientId=a.clientId,d.clientSecret=a.clientSecret,d.redirectURI=bits.zohoRedirectURL,(0,l.Z)(d,"bitforms_"+e+"_generate_token").then((function(e){return e})).then((function(e){if(e&&e.success){var t=(0,r.Z)({},a);t.tokenDetails=e.data,n(t),o(!0),c({show:!0,msg:(0,i.__)("Authorized Successfully","bitform")})}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?c({show:!0,msg:""+(0,i.__)("Authorization failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,i.__)("please try again","bitform")}):c({show:!0,msg:(0,i.__)("Authorization failed. please try again","bitform")});s(!1)}))},d=function(e,t,a,i,l){var n=(0,r.Z)({},t);l?i?n.relatedlists[l-1].upload_field_map.splice(e,0,{}):n.relatedlists[l-1].field_map.splice(e,0,{}):i?n.upload_field_map.splice(e,0,{}):n.field_map.splice(e,0,{}),a((0,r.Z)({},n))},f=function(e,t,a,i,l){var n=(0,r.Z)({},t);l?i?n.relatedlists[l-1].upload_field_map.length>1&&n.relatedlists[l-1].upload_field_map.splice(e,1):n.relatedlists[l-1].field_map.length>1&&n.relatedlists[l-1].field_map.splice(e,1):i?n.upload_field_map.length>1&&n.upload_field_map.splice(e,1):n.field_map.length>1&&n.field_map.splice(e,1),a((0,r.Z)({},n))},m=function(e,t,a,i,l,n){var o=(0,r.Z)({},a);n?l?o.relatedlists[n-1].upload_field_map[t][e.target.name]=e.target.value:o.relatedlists[n-1].field_map[t][e.target.name]=e.target.value:l?o.upload_field_map[t][e.target.name]=e.target.value:o.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(n?o.relatedlists[n-1].field_map[t].customValue="":o.field_map[t].customValue=""),i((0,r.Z)({},o))},u=function(e,t,a,i,l){var n=(0,r.Z)({},a);l?n.relatedlists[l-1].field_map[t].customValue=e.target.value:n.field_map[t].customValue=e.target.value,i((0,r.Z)({},n))}},82780:(e,t,a)=>{a.d(t,{Z:()=>l});var r=a(57852),i=a(4637);function l(e){var t=e.step,a=e.saveConfig,l=e.edit,n=e.disabled;return l?(0,i.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,i.jsx)("button",{onClick:a,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:n,children:(0,r.__)("Update","bitform")})}):(0,i.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,i.jsx)("h2",{className:"ml-3",children:(0,r.__)("Successfully Integrated","bitform")}),(0,i.jsxs)("button",{onClick:a,id:"secondary-update-btn",className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,r.__)("Finish & Save ","bitform")," ✔"]})]})}},72447:(e,t,a)=>{a.d(t,{P_:()=>m,Rx:()=>s,e1:()=>f,kY:()=>d});var r=a(72564),i=a(94965),l=a(57852),n=a(2850),o=a(74641),s=function(e,t,a,i,l,n,o){void 0===o&&(o=0);var s=(0,r.Z)({},t),d=e.target.name;if(""!==e.target.value?s[d]=e.target.value:delete s[d],s[e.target.name]=e.target.value,"folder"===e.target.name)s.folderMap=s.folderMap.slice(0,o),s=c(s,i,a,l,n);a((0,r.Z)({},s))},c=function(e,t,a,i,l){var n,o,s=(0,r.Z)({},e);return delete s.teamType,!s.folder||null!=(n=s.default)&&null!=(o=n.folders)&&o[s.folder]?s.folder&&s.folder!==s.folderMap[s.folderMap.length-1]&&s.folderMap.push(s.folder):f(t,s,a,i,l),s},d=function(e,t,a,o,s){o(!0);var c={flowID:null!=e?e:null,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails},d=(0,n.Z)(c,"bitforms_oneDrive_get_all_folders").then((function(e){if(e&&e.success){var i=(0,r.Z)({},t);return i.default||(i.default={}),e.data.oneDriveFoldersList&&(i.default.rootFolders=e.data.oneDriveFoldersList,i.tokenDetails=e.data.tokenDetails),a(i),o(!1),"OneDrive Folders List refreshed successfully"}return o(!1),"OneDrive Folders List refresh failed. please try again"})).catch((function(){return o(!1)}));i.ZP.promise(d,{success:function(e){return e},error:(0,l.__)("Error Occurred","bitform"),loading:(0,l.__)("Loading OneDrive Folders List...","bitform")})},f=function(e,t,a,i,s,c){var d=c?t.folderMap[c]:t.folder;i(!0);var f={formID:e,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails,team:t.team,folder:d,teamType:"teamType"in t?"private":"team"};(0,n.Z)(f,"bitforms_oneDrive_get_single_folder").then((function(e){if(e&&e.success){var n=(0,r.Z)({},t);e.data.folders?(n.default.folders||(n.default.folders={}),n.default.folders[d]=(0,o.SI)(e.data.folders,"folderName"),n.folderMap.includes(d)||n.folderMap.push(d),s({show:!0,msg:(0,l.__)("Sub Folders refreshed","bitform")})):s({show:!0,msg:(0,l.__)("No Sub Folder Found","bitform")}),e.data.tokenDetails&&(n.tokenDetails=e.data.tokenDetails),a((0,r.Z)({},n))}else s({show:!0,msg:(0,l.__)("Sub Folders refresh failed. please try again","bitform")});i(!1)})).catch((function(){return i(!1)}))},m=function(e,t,a,n,o){if(e.clientId&&e.clientSecret){n(!0);var s="https://login.live.com/oauth20_authorize.srf?client_id="+e.clientId+"&scope=onedrive.readwrite offline_access Files.ReadWrite.All&access_type=offline&prompt=consent&response_type=code&state="+encodeURIComponent(window.location.href)+"/redirect&redirect_uri="+encodeURIComponent(bits.oneDriveRedirectURL),c=window.open(s,"oneDrive","width=400,height=609,toolbar=off"),d=setInterval((function(){if(c.closed){clearInterval(d);var o={},s=!1,f=localStorage.getItem("__bitforms_oneDrive");if(f&&(s=!0,o=JSON.parse(f),localStorage.removeItem("__bitforms_oneDrive")),o.code&&!o.error&&o&&s){var m=(0,r.Z)({},e);m.accountServer=o["accounts-server"],u(o,m,t,a,n)}else{var p=o.error?"Cause: "+o.error:"";i.ZP.error((0,l.__)("Authorization failed","bitform")+" "+p+". "+(0,l.__)("please try again","bitform")),n(!1)}}}),500)}else o({clientId:e.clientId?"":(0,l.__)("Client Id can't be empty","bitform"),clientSecret:e.clientSecret?"":(0,l.__)("Client Secret can't be empty","bitform")})},u=function(e,t,a,o,s){var c=(0,r.Z)({},e);c.clientId=t.clientId,c.clientSecret=t.clientSecret,c.redirectURI=bits.oneDriveRedirectURL,(0,n.Z)(c,"bitforms_oneDrive_authorization").then((function(e){if(e&&e.success){var n=(0,r.Z)({},t);n.tokenDetails=e.data,a(n),o(!0),i.ZP.success((0,l.__)("Authorized Successfully","bitform"))}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?i.ZP.error(""+(0,l.__)("Authorization failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,l.__)("please try again","bitform")):i.ZP.error((0,l.__)("Authorization failed. please try again","bitform"));s(!1)}))}},84415:(e,t,a)=>{a.d(t,{Z:()=>u});var r=a(59496),i=a(57852),l=a(55668),n=a(72564),o=a(83428),s=a(33273),c=(a(32066),a(45427)),d=a(4637);function f(e){var t,a=e.oneDriveConf,l=e.setOneDriveConf,f=e.formFields,m=(e.formID,e.setSnackbar,a.folderMap?a.folderMap[0]:a.folder,(0,r.useState)(!1)),u=(m[0],m[1],(0,r.useState)({show:!1})),p=u[0],_=u[1];return(0,d.jsxs)("div",{className:"pos-rel d-flx w-5",children:[(0,d.jsxs)("div",{className:"pos-rel d-flx flx-col w-8",children:[(0,d.jsx)(s.Z,{onChange:function(){var e,t,r;null!=(e=a.actions)&&e.share||(a.actions.share={}),null!=(t=a.actions)&&null!=(r=t.share)&&r.file||(a.actions.share.file={permissions:[{email:"",access:"34",accessLabel:"View"},{email:"",access:"5",accessLabel:"Edit"},{email:"",access:"4",accessLabel:"Share"},{email:"",access:"6",accessLabel:"View and Comment"}],mail:"false"}),_({show:"attachments"})},checked:"attachments"in a.actions,className:"wdt-200 mt-4 mr-2",value:"Attachment",title:(0,i.__)("Upload Files","bit-integration-pro"),subTitle:(0,i.__)("Add attachments from Bit-integration-pro to OneDrive folder.","bit-integration-pro")}),!a.actions.attachments&&(0,d.jsx)("small",{style:{marginLeft:30,marginTop:10,color:"red",fontWeight:"bold"},children:(0,i.__)("This action is required.","bitform")})]}),(0,d.jsx)(c.Z,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:"Ok",show:"attachments"===p.show,close:function(){return _({show:!1})},action:function(){return _({show:!1})},title:(0,i.__)("Select Attachment","bitform"),children:(0,d.jsxs)("div",{style:{height:"95%"},children:[(0,d.jsx)("div",{className:"mt-2",children:(0,i.__)("Select file upload fields","bitform")}),(0,d.jsx)(o.Z,{defaultValue:a.actions.attachments,className:"mt-2 w-10 mb-25",options:f.filter((function(e){return"file-up"===e.type})).map((function(e){return{label:e.lbl,value:e.key}})),onChange:function(e){return function(e,t,r){var i=(0,n.Z)({},a);"create_folder"===t?e.target.checked?i.actions.create_folder={name:"",suffix:!1}:(delete i.actions.create_folder,delete i.actions.share.folder):"attachments"===t&&(""!==e?i.actions.attachments=e:(delete i.actions.attachments,delete i.actions.share.file)),l((0,n.Z)({},i))}(e,"attachments")},height:300})]})}),(0,d.jsx)("div",{className:"pos-rel d-flx flx-col w-8",children:(0,d.jsx)(s.Z,{checked:(null==(t=a.actions)?void 0:t.delete_from_wp)||!1,onChange:function(e){return function(e,t){var r=(0,n.Z)({},a);"deleteFile"===t&&(e.target.checked?r.actions.delete_from_wp=!0:delete r.actions.delete_from_wp),l((0,n.Z)({},r))}(e,"deleteFile")},className:"mt-4 mr-2",value:"delete_from_wp",title:(0,i.__)("Delete File From Wordpress","bitform"),subTitle:(0,i.__)("Delete file from Wordpress after upload in OneDrive","bitform")})})]})}var m=a(72447);function u(e){var t,a=e.formID,r=e.formFields,n=e.oneDriveConf,o=e.setOneDriveConf,s=e.isLoading,c=e.setIsLoading,u=e.setSnackbar;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("br",{}),(0,d.jsx)("b",{className:"wdt-150 d-in-b mr-2",children:"Folder:"}),(0,d.jsxs)("select",{onChange:function(e){return(0,m.Rx)(e,n,o,a,c,u)},name:"folder",value:n.folderMap[0]||n.folder,className:"btcd-paper-inp w-7",children:[(0,d.jsx)("option",{value:"",children:(0,i.__)("Select Folder","bitform")}),(null==n||null==(t=n.default)?void 0:t.rootFolders)&&n.default.rootFolders.map((function(e){return(0,d.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),(0,d.jsx)("button",{onClick:function(){return(0,m.kY)(a,n,o,c,u)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,i.__)("Refresh All oneDrive Folders","bitform")+"'"},type:"button",disabled:s,children:"↻"}),(0,d.jsx)("br",{}),n.folderMap.map((function(e,t){var r,l;return(0,d.jsxs)("div",{children:[(0,d.jsx)("br",{}),(0,d.jsxs)("div",{className:"flx",children:[(0,d.jsx)("b",{className:"wdt-150 d-in-b mr-2"}),(0,d.jsx)("div",{className:"d-in-b",style:{width:10*(t+1),marginLeft:1,marginRight:2,height:58,marginTop:-60},children:(0,d.jsx)("div",{className:"sub-tree"})}),(0,d.jsxs)("div",{className:"flx sub-folder w-7",children:[(0,d.jsxs)("select",{onChange:function(e){return(0,m.Rx)(e,n,o,a,c,u,t+1)},name:"folder",value:n.folderMap[t+1]||n.folder,className:"btcd-paper-inp",children:[(0,d.jsx)("option",{value:n.folderMap[t],children:"/ root"}),(null==n||null==(r=n.default)||null==(l=r.folders)?void 0:l[e])&&n.default.folders[e].map((function(e){return(0,d.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),(0,d.jsx)("div",{className:"tooltip-box",children:(0,d.jsx)("button",{onClick:function(){return(0,m.e1)(a,n,o,c,u,t)},className:"d-non icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,i.__)("Refresh Sub Folders","bitform")+"'"},type:"button",disabled:s,children:"↻"})})]})]})]},e)})),(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),s&&(0,d.jsx)(l.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),n.folder&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"mt-4",children:(0,d.jsx)("b",{className:"wdt-100",children:(0,i.__)("Actions","bitform")})}),(0,d.jsx)("div",{className:"btcd-hr mt-1"}),(0,d.jsx)(f,{oneDriveConf:n,setOneDriveConf:o,formFields:r,formID:a,setisLoading:c,setSnackbar:u})]})]})}}}]);