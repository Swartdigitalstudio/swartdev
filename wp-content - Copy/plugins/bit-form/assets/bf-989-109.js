import{r as k,aO as r}from"./main-398.js";function O(){return(O=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var d=arguments[s];for(var y in d)Object.prototype.hasOwnProperty.call(d,y)&&(t[y]=d[y])}return t}).apply(this,arguments)}function ce(t,s){(s==null||s>t.length)&&(s=t.length);for(var d=0,y=new Array(s);d<s;d++)y[d]=t[d];return y}function de(){return r.createElement("svg",{viewBox:"0 0 10 10",className:"msl-close-icn"},r.createElement("line",{stroke:"currentColor",strokeLinecap:"round",x1:"0",y1:"0",x2:"10",y2:"10"}),r.createElement("line",{stroke:"currentColor",strokeLinecap:"round",x1:"0",y1:"10",x2:"10",y2:"0"}))}function ge(t){var s,d=t.deleteAction;return r.createElement("div",{clickable:"true",className:"msl-chip"},typeof(s=t.value).label=="object"?(s==null?void 0:s.title)||s.value:s.label,r.createElement("div",{role:"button",clickable:"true","aria-label":"delete-value",onClick:d,onKeyPress:d,tabIndex:"0",className:"msl-btn msl-chip-delete msl-flx"},r.createElement(de,null)),r.createElement("span",null))}function ye(){return r.createElement("svg",{viewBox:"0 0 20 20",className:"msl-arrow-icn"},r.createElement("line",{stroke:"currentColor",strokeLinecap:"round",x1:"10",y1:"14",x2:"4",y2:"8"}),r.createElement("line",{stroke:"currentColor",strokeLinecap:"round",x1:"16",y1:"8",x2:"10",y2:"14"}))}function ue(t){var s=t.singleSelect,d=t.addValue,y=t.checkValueExist,A=t.value;if(t.largeData&&!t.menuOpen)return null;var C=[];return function S(P){for(var f,F=function(){var b=f.value,V=b[0],l=b[1];l.type==="group"?(C.push(r.createElement("div",{key:l.title+V,"data-msl":!0,className:"msl-grp-title"},l.title)),l.childs.length>0?S(l.childs):C.push(r.createElement("option",{className:"msl-option msl-option-disable"},l.emptyDataLabel||"No Data Found"))):C.push(r.createElement("div",O({tabIndex:"0",key:l.value+l.label+V+10},!s&&{"data-msl":!0},{style:O({},l.style&&l.style),onClick:function(){!l.disabled&&d(l)},onKeyPress:function(j){j.key==="Enter"&&!l.disabled&&d(l)},title:typeof l.label=="object"?l==null?void 0:l.title:l.label,className:"msl-option "+(y(l,A)?"msl-option-active":"")+" "+(l.disabled?"msl-option-disable":"")+" "+(l.classes!==void 0?l.classes:""),value:l.value}),l.label))},K=function(b,V){var l=typeof Symbol!="undefined"&&b[Symbol.iterator]||b["@@iterator"];if(l)return(l=l.call(b)).next.bind(l);if(Array.isArray(b)||(l=function(E,Q){if(E){if(typeof E=="string")return ce(E,void 0);var x=Object.prototype.toString.call(E).slice(8,-1);return x==="Object"&&E.constructor&&(x=E.constructor.name),x==="Map"||x==="Set"?Array.from(E):x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?ce(E,void 0):void 0}}(b))){l&&(b=l);var j=0;return function(){return j>=b.length?{done:!0}:{done:!1,value:b[j++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}(P.entries());!(f=K()).done;)F()}(t.opts),r.createElement("div",null,C)}function Ee(t){var s=t.options,d=t.downArrowIcon,y=t.closeIcon,A=t.clearable,C=t.clearAll,S=t.downArrow,P=t.onChange,f=t.singleSelect,F=t.jsonValue,K=t.defaultValue,b=t.className,V=t.placeholder,l=t.disableChip,j=t.name,E=t.style,Q=t.attr,x=t.largeData,W=t.disabled,X=t.limit,me=t.emptyDataLabel,L=t.customValue,pe=t.onMenuOpen,Y=t.onMenuClose,fe=t.chipAlternateText,ve=t.closeOnSelect,be=t.disableSearch,Z=k.useState([]),c=Z[0],ee=Z[1],te=k.useState(s||[]),g=te[0],U=te[1],le=k.useState(null),w=le[0],T=le[1],D=k.useRef(null),_=function(e){var n=e.onClickOutside,a=k.useState(e.initialIsVisible),i=a[0],m=a[1],h=k.useRef(null),v=function(u){u.key==="Escape"&&m(!1)},o=function u(N){h.current&&!h.current.contains(N.target)&&(document.removeEventListener("keydown",v,!0),document.removeEventListener("click",u,!0),m(!1),n())};return k.useEffect(function(){return document.addEventListener("keydown",v,!0),document.addEventListener("click",o,!0),function(){document.removeEventListener("keydown",v,!0),document.removeEventListener("click",o,!0)}}),{ref:h,isComponentVisible:i,setIsComponentVisible:m}}({initialIsVisible:!1,onClickOutside:Y}),ne=_.ref,R=_.isComponentVisible,$=_.setIsComponentVisible,he="calc(100% - "+(A&&S?60:S||A?40:5)+"px)";k.useEffect(function(){C&&c.length&&G()},[C]),k.useEffect(function(){U(s)},[s]),k.useEffect(function(){var e=function(n,a){if(!n)return[];var i=n,m=[],h=[];typeof n=="string"&&(i=n.split(","));for(var v=function(p){if(typeof p=="string")m.push({label:p,value:p});else if(typeof p=="object"){var J={label:p,value:p};"label"in p&&typeof p.label=="string"?J.label=p.label:"title"in p&&(J.label=p.title),m.push(J)}},o=0;o<i.length;o++)if(typeof i[o]=="string"){var u=H(i[o],a,!0,"value");u.length>0?h.push(u[0]):L&&v(i[o])}else if(typeof i[o]=="object"){var N=H(i[o].value,a,!0,"value");N.length>0?h.push(N[0]):L&&v(i[o])}var I=[];return m.length&&(I=oe(m)),U([].concat(s,I)),[].concat(h,m)}(K,g);f&&e.length&&(e=[e[0]]),ee(e),ve&&f&&$(!1)},[K]);var q,ae,z=function(e){if(ee(e),F)P(e);else{var n="";n+=e.map(function(a){return a.value}),P(n)}},M=function(e,n){return n.some(function(a){return a.value===e.value})},B=function(e){var n=[].concat(c);f?n=M(e,c)?[]:[e]:M(e,c)?n=n.filter(function(a){return a.value!==e.value}):(X===null||X>c.length)&&n.push(e),z(n),T(null),D.current&&(D.current.innerHTML="")},G=function(){z([])},re=function(){return!(be||(f||l)&&(!f||c.length)&&(f||!l||c.length))},H=function(e,n,a,i){var m=[],h=[];return function v(o){for(var u=0;u<o.length;u++){var N;if(((N=o[u])===null||N===void 0?void 0:N.type)==="group")v(o[u].childs);else if(a)a&&o[u][i]===e&&m.push(o[u]);else{var I,p;typeof o[u].label!="object"&&o[u].label.match(new RegExp(""+e,"gi"))||typeof o[u].label=="object"&&(I=o[u])!==null&&I!==void 0&&(p=I.title)!==null&&p!==void 0&&p.match(new RegExp(""+e,"gi"))?m.push(o[u]):o[u].value.match(new RegExp(""+e,"gi"))&&h.push(o[u])}typeof o[u].label!="object"||"title"in o[u]||console.warn("[multiselect] you must provide a title property as typeof string, if you want to render jsx in option label")}}(n),[].concat(m,h)},oe=function(e){var n=[],a=g.findIndex(function(i){return(i==null?void 0:i.type)==="group"&&(i==null?void 0:i.title)==="Custom Values"});return a===-1?n.push({title:"Custom Values",type:"group",childs:[].concat(e)}):Array.isArray(e)?e.map(function(i){return g[a].childs.push(i)}):typeof e=="object"&&g[a].childs.push(e),U([].concat(g,n)),n},ie=function(e){var n=e.target;(function(a){return!(a.hasAttribute("clickable")||a.parentNode.hasAttribute("clickable")||a.parentNode.parentNode.hasAttribute("clickable")||a.parentNode.parentNode.parentNode.hasAttribute("clickable"))})(n)&&(function(a){if(a.hasAttribute("dropdown-handle")||a.parentNode.hasAttribute("dropdown-handle")||a.parentNode.parentNode.hasAttribute("dropdown-handle"))return!0}(n)&&R?($(!1),Y()):($(!0),pe(),D.current&&D.current.focus()))},se=function(e){return typeof e.label=="object"?(e==null?void 0:e.title)||e.value:e.label};return r.createElement("div",O({ref:ne},Q,{onClick:ie,tabIndex:"0",onKeyPress:ie,style:O({},E),className:"msl-wrp msl-vars "+b+" "+(W?"msl-disabled":"")}),r.createElement("input",{name:j,type:"hidden",value:c==null?void 0:c.map(function(e){return e.value})}),r.createElement("div",{"data-msl":!0,className:"msl "+(R&&(q=ne.current,ae=q.getBoundingClientRect(),window.innerHeight-(ae.top+q.clientHeight)<200?"msl-active-up":"msl-active"))+" "},r.createElement("div",{"data-msl":!0,className:"msl-input-wrp",style:{width:he}},!f&&!l&&c.map(function(e,n){return r.createElement(ge,{key:"msl-chip-"+(n+11),value:e,deleteAction:function(){return function(a){var i=[].concat(c);i.splice(a,1),z(i)}(n)}})}),!f&&l&&c.length>0&&r.createElement("span",{className:"msl-single-value","data-msl":!0},c.length===1?se(c[0]):c.length+" "+fe),f&&c.length===1&&r.createElement("span",{className:"msl-single-value","data-msl":!0},se(c[0])),re()&&r.createElement("div",{"data-msl":!0,"data-placeholder":V,className:"msl-input",contentEditable:!W,onKeyUp:function(e){var n=e.target.textContent.trim().replace(/,+/g,"");if(n){var a={label:'Create "'+n+'"',value:n},i=H(n,g);i.length?(L&&!H(n,g,!0,"value").length&&i.push(a),T(i)):T(L?[a]:[]);var m=function(h){var v=h.label,o=h.value;return typeof v!="object"&&v.match(/Create "|"+/g)&&(v=v.replace(/Create "|"+/g,"")),{label:v,value:o}}(a);e.key!=="Enter"&&e.key!==","||(!L||i.length||M(m,c)?w.length>0&&B(w[0]):(oe(m),B(a)))}else T(null)},ref:D}),!re()&&c.length<1&&r.createElement("div",{"data-msl":!0,"data-placeholder":V,className:"msl-input"})),(A||S)&&r.createElement("div",{className:"msl-actions msl-flx"},A&&c.length>0&&r.createElement("div",{role:"button",clickable:"true","aria-label":"close-menu",onClick:G,onKeyPress:G,tabIndex:"0",className:"msl-btn msl-clear-btn msl-flx"},y||r.createElement(de,null)),S&&r.createElement("div",{role:"button",tabIndex:"0","dropdown-handle":"true",className:"msl-btn msl-arrow-btn msl-flx",style:O({},R&&{transform:"rotate(180deg)"})},d||r.createElement(ye,null)))),r.createElement("div",{className:"msl-options"},!w&&g.length?r.createElement(ue,{opts:g,singleSelect:f,addValue:B,checkValueExist:M,value:c,largeData:x,menuOpen:R}):w&&w.length?r.createElement(ue,{opts:w,singleSelect:f,addValue:B,checkValueExist:M,value:c,largeData:x,menuOpen:R}):(w&&!w.length||g&&!g.length)&&r.createElement("option",{className:"msl-option msl-option-disable"},me)))}Ee.defaultProps={clearable:!0,clearAll:!1,downArrow:!0,singleSelect:!1,jsonValue:!1,defaultValue:"",disableChip:!1,name:"",style:{},disabled:!1,limit:null,emptyDataLabel:"No Data Found",placeholder:"Select...",onChange:function(){},onMenuOpen:function(){},onMenuClose:function(){},options:[{label:"Empty",value:"",disabled:!0,style:{textAlign:"center"}}],customValue:!1,chipAlternateText:"Item Selected",closeOnSelect:!0,disableSearch:!1};export{Ee as u};
