var os=Object.defineProperty,rs=Object.defineProperties;var ns=Object.getOwnPropertyDescriptors;var $t=Object.getOwnPropertySymbols;var as=Object.prototype.hasOwnProperty,ls=Object.prototype.propertyIsEnumerable;var kt=(o,r,a)=>r in o?os(o,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[r]=a,c=(o,r)=>{for(var a in r||(r={}))as.call(r,a)&&kt(o,a,r[a]);if($t)for(var a of $t(r))ls.call(r,a)&&kt(o,a,r[a]);return o},B=(o,r)=>rs(o,ns(r));import{z as is,A as yt,D as He,F as gt,G as ee,j as n,H as cs,J as ds,K as ms,a as $e,r as T,O as fs,d as _e,_ as P,o as Ke,p as Ft,e as x,u as N,P as g,Q as It,l as bt,U as jt,V as Ct,W as us,X as bs,Y as we,c as Bt,Z as ps,a0 as hs,L as ys,a1 as Nt,a2 as At,a3 as Vt,a4 as Et,a5 as Rt,a6 as gs,a7 as Pt,a8 as vs,a9 as Ut,aa as ze,ab as Mt,ac as Ss,ad as Ot,ae as zt,af as Ht,ag as Kt,ah as Wt,ai as qt,aj as Gt,ak as Ts,al as Jt,am as Yt,an as Qt,ao as ws,ap as Xt,aq as Zt,ar as es,as as ts,at as xs,au as _s,av as Lt,aw as $s,ax as ks,ay as js,az as Cs,aA as vt,aB as St,aC as Ls,k as ss,aD as Ds,i as Fs,N as Dt,aE as Is,aF as Bs,aG as Ns,aH as As,aI as Vs,t as Es,aJ as Rs,aK as Ps,aL as Us,aM as xe,aN as y}from"./main-398.js";import{T as Ms,a as Os,R as zs}from"./bf-491-73.js";const We=is({allThemeVars:{},allThemeColors:{},allStyles:{}}),io=yt(o=>{const r=o(He),{lightThemeColors:a,darkThemeColors:s}=o(We).allThemeColors;return r==="dark"?c(c({},a),s):a}),co=yt(o=>{const r=o(He)==="dark",a=o(gt),{lgLightThemeVars:s,lgDarkThemeVars:u,mdLightThemeVars:m,mdDarkThemeVars:p,smLightThemeVars:_,smDarkThemeVars:$}=o(We).allThemeVars;if(a==="lg")return r?c(c({},s),u):s;if(a==="md")return c(c(c(c({},s),r&&u),m),r&&p);if(a==="sm")return c(c(c(c(c(c({},s),r&&u),m),r&&p),_),r&&$)}),mo=yt(o=>{const r=o(He)==="dark",a=o(gt),{lgLightStyles:s,lgDarkStyles:u,mdLightStyles:m,mdDarkStyles:p,smLightStyles:_,smDarkStyles:$}=o(We).allStyles;if(a==="lg")return r?ee(s,u):s;if(a==="md")return r?ee(s,u,m,p):ee(s,m);if(a==="sm")return r?ee(s,u,m,p,_,$):ee(s,m,_)});function Hs({size:o=14,stroke:r=3,className:a}){return n.jsx("svg",{className:a,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 30 30",children:n.jsx("polyline",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:r,points:"26 15.2 4 15.2 12.38 23.69 4 15.2 12.77 6.31"})})}var Ks={name:"Contact Form",theme:"bitformDefault",fields:{"fld_key-1":{typ:"button",btnSiz:"md",btnTyp:"submit",txt:"Submit",icn:{pos:"",url:""},valid:{},customClasses:{},customAttributes:{},fulW:!0},"fld_key-2":{typ:"text",lbl:"Name",phHide:!0,valid:{req:!0,reqPos:"after",reqShow:!0},err:{req:{dflt:'<p style="margin:0">This field is required</p>',show:!0}},customClasses:{},customAttributes:{},fieldName:"name",acHide:!0,ac:"name",ph:"John Doe"},"fld_key-3":{typ:"textarea",lbl:"Message",phHide:!0,valid:{req:!0,reqPos:"after",reqShow:!0},err:{req:{dflt:'<p style="margin:0">This field is required</p>',show:!0,custom:!0,msg:'<p style="margin:0">Message can not be empty.</p>'}},customClasses:{},customAttributes:{},fieldName:"textarea-44-3",ph:"Write your message..."},"fld_key-5":{typ:"email",lbl:"Email",ph:"example@mail.com",phHide:!0,pattern:"^[^$_bf_$s@]+@[^$_bf_$s@]+$_bf_$.[^$_bf_$s@]+$",valid:{req:!0,reqPos:"after",reqShow:!0},err:{invalid:{dflt:'<p style="margin:0">Please, Enter a valid email address.</p>',show:!0},req:{dflt:'<p style="margin:0">This field is required</p>',show:!0,custom:!0,msg:'<p style="margin:0">Please enter your email.</p>'}},customClasses:{},customAttributes:{},fieldName:"email",acHide:!0,ac:"email"}},layouts:{lg:[{w:60,h:77,x:0,y:0,i:"fld_key-2"},{w:60,h:77,x:0,y:77,i:"fld_key-5"},{w:60,h:98,x:0,y:154,i:"fld_key-3",minW:9},{w:60,h:50,x:0,y:252,i:"fld_key-1"}],md:[],sm:[]}};function Ws(o,r){let a={};o==="contact_form"?a=Ks:a=ms;const{name:s,fields:u,layouts:m,conditions:p,confirmations:_,theme:$,additionalSettings:F}=a;m.md=ee(m.lg,m.md),m.sm=ee(m.lg,m.md,m.sm);const G=Object.keys(u),h={},v={lg:[],md:[],sm:[]},C=ee(cs(),_||{}),L=[...Gs(),...p||[]];G.forEach((D,Y)=>{const A=`b${r}-${Y+1}`,d=c({},u[D]);d.fieldName=`${d.typ}-${A}`,h[A]=d;const w=m.lg.find(E=>E.i===D),V=m.md.find(E=>E.i===D),K=m.sm.find(E=>E.i===D);v.lg.push(B(c({},w),{i:A})),v.md.push(B(c({},V),{i:A})),v.sm.push(B(c({},K),{i:A}))});const z=Object.entries(h),{themeColors:S,themeVars:U,styles:k}=ds($,z,r);return{name:s,fields:h,layouts:v,confirmations:C,conditions:L,allThemeColors:S,allThemeVars:U,allStyles:k,additionalSettings:F}}const qs={cond_type:"if",logics:[{field:"",logic:"",val:""},"or",{field:"",logic:"",val:""}],actions:{fields:[{field:"",action:"value"}],success:[{type:"successMsg",details:{id:'{"index":0}'}}]}};function Gs(){return[{title:"Show Success Message",action_type:"onsubmit",action_run:"create_edit",action_behaviour:"always",conditions:[qs]}]}function Js({id:o,className:r,cls:a,value:s,readOnly:u=!0}){const{css:m}=$e(),p=T.useRef(null),_=()=>navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(s):(p.current.focus(),p.current.select(),new Promise((F,G)=>{document.execCommand("copy")?F():G()})),$=()=>{_().then(()=>_e.success(P("Copied on clipboard."))).catch(()=>_e.error(P("Failed to Copy, Try Again.")))};return n.jsxs("div",{className:`${m(pt.wrapper)} ${r}`,children:[n.jsx("input",{"aria-label":"Copy field key",ref:p,className:`${m(pt.input)} ${a}`,id:"text-copy",type:"text",value:s,readOnly:u}),n.jsx(Ms,{msg:"Copy",children:n.jsx("button",{"data-testid":`${o}-col-cpy-btn`,onClick:$,className:`${m(pt.btn)}`,type:"button","aria-label":"Copy field key",children:n.jsx(fs,{w:"20"})})})]})}const pt={wrapper:{pn:"relative"},input:{bd:"var(--white-0-95)",oe:"none",b:"none !important",brs:"10px !important",p:"2px 40px 2px 10px !important",w:100,lh:"1 !important",fw:"500 !important",bs:"none !important",":focus-visible":{bs:"0 0 0 2px var(--b-50) !important"}},btn:{pn:"absolute !important",b:"none",oe:"none",bd:"none",tp:"50%",tm:"translateY(-50%)",rt:2,cur:"pointer",tn:"color 0.2s",cr:"var(--white-0-61)",flx:"center-between","&:hover":{cr:"var(--b-50)"}}};function Ys({children:o,instance:r=null,width:a="auto",place:s="bottom",onShow:u,onHide:m,arrow:p=!0,trigger:_="click",offset:$=[0,10]}){return n.jsx(Os,B(c(c({ref:r,inertia:!0,trigger:_,placement:s,duration:350,interactiveBorder:20},u&&{onShow:u}),m&&{onHide:m}),{theme:"light-border",animation:"shift-away-extreme",interactive:!0,maxWidth:a,offset:$,arrow:p&&zs,content:o[1],children:n.jsx("span",{children:o[0]})}))}function Qs(){const{css:o}=$e(),{formID:r}=Ke();return n.jsxs(Ys,{children:[n.jsx("button",{type:"button",className:o(Oe.shareIcn),children:"Publish"}),n.jsxs("div",{className:o(Oe.downmenu),children:[n.jsx("div",{className:o(Oe.title),children:"Short Code"}),n.jsx(Js,{cls:o(Oe.downmenuinput),value:`[bitform id='${r}']`})]})]})}const Oe={title:{fs:14,mb:5,fw:600},shareIcn:{bd:"none",px:15,py:7,oe:"none",b:"none",cr:"var(--white-100)",flx:"align-center",fs:12,fw:400,tn:"background 0.2s",mx:10,my:5,brs:8,curp:1,":hover":{bd:"var(--b-35-33)"}},downmenu:{w:200,px:5,py:8},downmenuinput:{w:"100% !important",fs:12}};function ht(o){const r=Ke(),a=Object.keys(o);let s=!0;return a.forEach(u=>{o[u]!=="?"&&u!=="render"&&r[u]!==o[u]&&(o[u]===!0&&r[u]===void 0||o[u]!==!0)&&(s=!1)}),s&&o.render}const H={btct_bld_nav:{flx:"center-between",bd:"var(--dp-blue-bg)",pn:"fixed",h:40,w:"100%",zx:999,inset:0},builder_routes:{mt:40,pn:"relative"},btcd_bld_title:{flx:"align-center",w:320},nav_back_icn:{w:38,ow:"hidden",py:4,cr:"var(--white-100)",pr:15,pl:25,mx:5,brs:100,":hover":{cr:"var(--white-100)",bd:"var(--b-50-22)"}},bit_icn:{flx:"center",w:40,h:"70%",p:"5px 7px",bl:"0.5px solid var(--b-38-62-40)",br:"0.5px solid var(--b-38-62-40)",my:5},btcd_bld_title_inp:{bd:"var(--dp-blue-bg)",cr:"var(--white)",py:6,px:10,fs:14,b:"none",tn:"background 0.3s !important",oe:"none",ml:8,brs:8,"&:hover":{bd:"var(--b-16-35)"},"&:focus":{bd:"var(--b-44-87)",cr:"var(--b-54-12)"}},btcd_bld_lnk:{w:320},btcd_bld_btn:{flx:"align-center",w:320,jc:"end"},cls_btn:{cr:"var(--white)",se:30,mr:15,flx:"center",p:0,ta:"center",tn:"color 0.5s !important","&:hover":{cr:"var(--red-100-61) !important"}},btn:{fw:500,bd:"var(--g-45)",oe:"none",cr:"var(--b-63-18-67)",brs:"10px !important",b:"1px solid var(--g-89-7)",h:28,td:"none",my:5,mx:10,py:7,px:15,pn:"relative",fs:14,curp:1,flx:"align-center",w:"auto","&:disabled":{bd:"var(--b-100-50-5) !important"}},visDisable:{bd:"var(--b-50-22) !important",cr:"var(--b-37-69) !important",b:"none !important",fw:600}};function Xs({componentMounted:o,modal:r,setModal:a}){const s=Ft(),{page:u,formType:m,formID:p,"*":_}=Ke(),{css:$}=$e(),[F,G]=T.useState(m==="edit"?"Update":"Save"),[h,v]=T.useState(m==="edit"?p:0),[C,L]=x(Nt),[z,S]=T.useState(!1),[U,k]=x(At),D=N(Vt),Y=N(Et),{formName:A}=Y,d=N(Rt),w=g(gs);N(Pt);const V=g(vs),K=g(Ut),E=It(ze),[Tt,ce]=x(Mt),ke=N(Ss),[te,je]=x(Ot),[Q,de]=x(zt),[X,me]=x(Ht),[M,W]=x(ze),[qe,Ge]=x(Kt),[J,Ce]=x(Wt),[Je,Ye]=x(qt),[Le,Qe]=x(Gt),De=N(Ts),Xe=g(Jt),Ze=g(Yt),et=g(Qt),tt=g(ws),st=N(Xt),ot=N(Zt),rt=N(es),Fe=N(ts),nt=N(xs),Ie=N(_s);T.useEffect(()=>{var l,e;if((l=J[J.length-1])!=null&&l.newItegration||(e=J[J.length-1])!=null&&e.editItegration){const b=bt(J,R=>{R.pop()});Ce(b),ne("integrations",b)}},[J]),T.useEffect(()=>{var l;if((l=Q[Q.length-1])!=null&&l.updateTem){const e=bt(Q,b=>{b.pop()});de(e),ne("email-template",e)}},[Q]),T.useEffect(()=>{var l;if((l=X[X.length-1])!=null&&l.updateTem){const e=bt(X,b=>{b.pop()});me(e),ne("pdf-template",e)}},[X]);const re=l=>{if((l.key==="s"||l.key==="S")&&l.ctrlKey)return l.preventDefault(),!M.disabled&&!z&&fe(),!1},Be=l=>{if(M.unsaved){const e=l;return e.preventDefault(),e.returnValue="Are you sure you want to exit?",e.returnValue}};T.useEffect(()=>{var e;document.addEventListener("keydown",re);const l=(e=document.getElementById("bit-grid-layout"))==null?void 0:e.contentDocument;return l==null||l.addEventListener("keydown",re),window.addEventListener("beforeunload",Be),()=>{document.removeEventListener("keydown",re),l==null||l.removeEventListener("keydown",re),window.removeEventListener("beforeunload",Be)}});const at=()=>{if(M.errors){const l=M.errors[M.errors.length-1];if(l.errorMsg?_e.error(l.errorMsg):_e.error(P("Please fix the errors")),l.errorUrl){const e=js();s(`${e}/${l.errorUrl}`)}return l.fieldKey&&(tt(l.fieldKey),setTimeout(()=>{var e;(e=Cs(`[data-key="${l.fieldKey}"]`))==null||e.focus()},500)),!0}return!1},fe=l=>{const e=Lt("#secondary-update-btn");if(nt.styleMode&&$s(),e)e.click();else if(l==="update-btn"){if(at())return;ne()}else Lt("#update-btn").click()};T.useEffect(()=>{M.unsaved&&z&&S(!1)},[M]);const Ne=()=>{const l=Object.values(D).filter(b=>b.typ==="button"&&b.btnTyp==="submit");return(D?Object.values(D).filter(b=>ks.includes(b.typ)):[]).length>0||l.length>0},ne=(l,e)=>{h&&S(!0);let b=Q,R=X,q=Je,f=J;if(l==="email-template"?b=e:l==="pdf-template"?R=e:l==="additional"?q=e:l==="integrations"&&(f=e),!Ne()){const i=c({},r);i.show=!0,i.title=P("Sorry"),i.btnTxt=P("Close"),i.msg=P("Please add a submit button"),i.cancelBtn=!1,a(i),S(!1);return}if(!C.md.length||typeof C=="undefined"){const i=c({},r);i.show=!0,i.title=P("Sorry"),i.btnTxt=P("Close"),i.msg=P("You can not save a blank form"),i.cancelBtn=!1,a(i),S(!1);return}const j=jt(De)||De===void 0,{layouts:I,nestedLayouts:O,lightThemeColors:ae,darkThemeColors:lt,lgLightThemeVars:it,lgDarkThemeVars:ct,mdLightThemeVars:dt,mdDarkThemeVars:mt,smLightThemeVars:ft,smDarkThemeVars:ut,lgLightStyles:Ae,lgDarkStyles:Ve,mdLightStyles:Ee,mdDarkStyles:Re,smLightStyles:Pe,smDarkStyles:Ue}=Ct(h),ue={lightThemeColors:ae,darkThemeColors:lt},be={lgLightThemeVars:it,lgDarkThemeVars:ct,mdLightThemeVars:dt,mdDarkThemeVars:mt,smLightThemeVars:ft,smDarkThemeVars:ut};let le={lgLightStyles:Ae,lgDarkStyles:Ve,mdLightStyles:Ee,mdDarkStyles:Re,smLightStyles:Pe,smDarkStyles:Ue};le=us(le);let se=sessionStorage.getItem("btcd-fs");se=se&&bs(se);const pe=B(c(B(c(c(c(c(B(c(c(c({},h&&{id:h}),!h&&{form_id:d}),h&&{currentReport:ke}),{layout:I,nestedLayouts:O,fields:D,form_name:A,report_id:te.id,additional:q,workFlows:qe,formStyle:se}),!j&&{style:we.stringify(le)}),!j&&{staticStyles:we.stringify(ot)}),!j&&{themeColors:we.stringify(ue)}),!j&&{themeVars:we.stringify(be)}),{breakpointSize:rt}),Fe.isFetched&&{customCodes:Fe}),{layoutChanged:sessionStorage.getItem("btcd-lc"),rowHeight:sessionStorage.getItem("btcd-rh"),formSettings:c({formName:A,confirmation:Le,mailTem:b,pdfTem:R,integrations:f},!jt(Ie)&&{formAbandonment:Ie}),builderSettings:st});h&&U.length!==0&&(pe.deletedFldKey=U);const ie=h?"bitforms_update_form":"bitforms_create_new_form",Me=Bt(pe,ie).then(i=>{var Z,he,ye,ge,ve,Se,Te;if(i!=null&&i.success&&o){let{data:t}=i;typeof t!="object"&&(t=JSON.parse(t)),L(I),V(oe=>B(c({},oe),{reRenderGridLayoutByRootLay:oe.reRenderGridLayoutByRootLay+1})),(Z=t==null?void 0:t.formSettings)!=null&&Z.confirmation&&Qe(t.formSettings.confirmation),t!=null&&t.workFlows&&Ge(t.workFlows),(he=t==null?void 0:t.formSettings)!=null&&he.integrations&&Ce(t.formSettings.integrations),(ye=t==null?void 0:t.formSettings)!=null&&ye.mailTem&&de(t.formSettings.mailTem),(ge=t==null?void 0:t.formSettings)!=null&&ge.pdfTem&&me(t.formSettings.pdfTem),t!=null&&t.additional&&Ye(t.additional),t!=null&&t.Labels&&K(t.Labels),t!=null&&t.reports&&ce((t==null?void 0:t.reports)||[]),!(te!=null&&te.id)&&((ve=t==null?void 0:t.form_content)!=null&&ve.report_id)&&je({id:(Se=t==null?void 0:t.form_content)==null?void 0:Se.report_id,isDefault:((Te=t==null?void 0:t.form_content)==null?void 0:Te.is_default)||0}),j||(Xe(ue),Ze(be),et(we.parse(t==null?void 0:t.style)),ps()),w(oe=>hs(oe,{type:ie==="bitforms_create_new_form"?"add":"update",data:{formID:t.id,status:t.status!=="0",formName:t.form_name,shortcode:`bitform id='${t.id}'`,entries:t.entries,views:t.views,conversion:t.entries===0?0:(t.entries/(t.views==="0"?1:t.views)*100).toPrecision(3),created_at:t.created_at}})),E(),k([]),ie==="bitforms_create_new_form"&&h===0&&F==="Save"&&(v(t.id),G("Update"),s(`/form/${u}/edit/${t.id}/${_}`,{replace:!0})),setTimeout(()=>Ct(t.id),100),sessionStorage.removeItem("btcd-lc"),sessionStorage.removeItem("btcd-fs"),sessionStorage.removeItem("btcd-rh")}else!(i!=null&&i.success)&&(i==null?void 0:i.data)==="Token expired"?window.location.reload():i!=null&&i.success||setTimeout(()=>{window.location.reload()},2e3);return i}).catch(i=>{console.error("form save error=",i)});h&&_e.promise(Me,{loading:P("Updating..."),success:i=>{var Z;return S(!1),((Z=i==null?void 0:i.data)==null?void 0:Z.message)||(i==null?void 0:i.data)},error:()=>(S(!1),P("Error occurred, Please try again."))})};return n.jsxs("button",{id:"update-btn",className:`${$(H.btn)} tooltip ${M.unsaved?"":$(H.visDisable)}`,type:"button",onClick:()=>fe("update-btn"),disabled:M.disabled||z,style:{"--tooltip-txt":`'${P("ctrl + s")}'`},children:[F,M.loading&&n.jsx(ys,{size:20,clr:"white",className:"ml-1"})]})}function Zs({defaultActive:o,options:r,size:a=100,component:s="a",onChange:u,variant:m="white",show:p,activeShow:_,square:$}){const{css:F}=$e(),G=Number(a),h=d=>Math.floor(G/d),v={};m==="white"&&(v.tabBg="var(--white-0-95)",v.selectorBg="var(--white-100)",v.active="var(--b-50) !important"),m==="blue"&&(v.selectorBg="var(--b-50)",v.tabBg="#454A65",v.tabClr="var(--b-44-87)",v.active="var(--white-100) !important"),m==="lightgray"&&(v.selectorBg="var(--white-100)",v.tabBg="var(--white-0-95)",v.tabClr="var(--b-44-87)",v.active="var(--b-50) !important");const C={wrapper:{ta:"center"},tabs:{fs:h(6.67),py:h(33.34),px:h(20),bd:v.tabBg,ls:"none",dy:"inline-block",brs:h(7.15),pn:"relative","& .active":{cr:v.active},"& button":{bd:"none",oe:"none",b:"none"}},selector:{w:0,h:"80%",dy:"inline-block",pn:"absolute",lt:h(20),tp:"50%",tm:"translatey(-50%)",zx:1,brs:h(9.09),tdn:"0.3s",ttf:"cubic-bezier(0.42, 0.44, 0.57, 1.35)",bd:v.selectorBg,willChange:"transform",bs:m==="blue"&&"0 2px 7px -2px rgb(0 11 49 / 79%)"},tab_link:B(c({curp:1,td:"none",fw:500,flxi:"align-center",pn:"relative",py:$?0:h(10),px:$?0:h(5),textShadow:m==="blue"&&"0 1px 1px #6e6e6e70",zx:1},$&&{aspectRatio:"1/1",w:30,h:30,flxi:"center"}),{tdy:"0.3s",tdn:"0.6s",cr:v.tabClr,"transition-property":"color",":hover:not(.active)":{cr:"var(--white-0-100-90)",tdy:"0s",tdn:"300ms"},":focus-visible":{oe:"2px solid var(--b-50)"},"& .icn":{mr:p!=null&&p.includes("label")?h(20):0,lh:"75%",dy:"block"}})},L=T.useRef(null),z=T.useRef(null),S=T.useRef(null),[U,k]=T.useState(o||r[0].label),D=s;T.useEffect(()=>{U!==o&&k(o)},[o]),T.useLayoutEffect(()=>{var w;const d=(w=S==null?void 0:S.current)==null?void 0:w.querySelector(`[data-label="${U}"]`);if(d){const{width:V}=d.getBoundingClientRect()||{width:0};if(!L.current)return;L.current.style.width===""?(z.transition=L.current.style.transition,L.current.style.transition="all 0s"):L.current.style.transition=z.transition,L.current.style.width=`${V}px`,L.current.style.transform=`translate(${d.offsetLeft-5}px, -50%)`}});const Y=(d,w)=>{var E;if(d.preventDefault(),d.type==="keypress"&&d.code!=="Space"||d.type==="keypress"&&d.code!=="Enter")return;const V=d.currentTarget;if(!d.type==="keypress"||!d.type==="click")return;const K=(E=S==null?void 0:S.current)==null?void 0:E.querySelector(`.tabs ${s}.active`);V!==K&&(K==null||K.classList.remove("active"),k(r[w].label),u(r[w].label))},A=(d,w)=>!!(d[w]&&(_&&U===d.label&&_.includes(w)||p&&p.includes(w)||!p&&!_));return n.jsx("div",{className:F(C.wrapper),children:n.jsxs("div",{ref:S,className:`${F(C.tabs)} tabs`,children:[n.jsx("div",{ref:L,className:`selector ${F(C.selector)}`}),r==null?void 0:r.map((d,w)=>n.jsxs(D,B(c(c({className:`${F(C.tab_link)} ${U===d.label?" active":""}`,onClick:V=>Y(V,w),onKeyDown:V=>Y(V,w),"data-label":d.label,"data-testid":`${d.label}-tab`},s==="button"&&{type:"button"}),s==="a"&&{href:`#${d.label}`}),{href:`#${d.label}`,type:"button",children:[A(d,"icn")&&n.jsx("span",{className:`icn ${U===d.label?F(C.segment_img):""}`,children:d.icn}),A(d,"label")&&P(d.label)]}),`segment-option-${w*10}`))]})})}const eo=vt(()=>St(()=>import("./bf-760-79.js").then(o=>o.n),["./bf-760-79.js","./main-398.js","./main-398.css","./bf-491-73.js","./bf-5-382.css","./bf-827-74.js","./bf-314-99.js","./bf-233-100.js","./bf-782-101.js","./bf-235-102.js","./bf-864-103.js","./bf-913-383.css"],import.meta.url),{fallback:n.jsx(Ls,{})}),to=vt(()=>St(()=>import("./bf-810-80.js"),["./bf-810-80.js","./main-398.js","./main-398.css","./bf-827-74.js","./bf-511-68.js","./bf-887-104.js","./bf-404-116.js","./bf-264-388.css","./bf-491-73.js","./bf-5-382.css","./bf-789-105.js","./bf-864-106.js","./bf-364-387.css","./bf-952-107.js","./bf-138-72.js","./bf-500-108.js","./bf-989-109.js","./bf-537-111.js","./bf-139-389.css","./bf-305-112.js","./bf-292-113.js","./bf-314-99.js","./bf-13-114.js","./bf-849-115.js"],import.meta.url),{fallback:n.jsx(ss,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"90vh"}})}),so=vt(()=>St(()=>import("./bf-471-81.js").then(o=>o.a),["./bf-471-81.js","./main-398.js","./main-398.css","./bf-193-126.js","./bf-13-114.js","./bf-529-76.js","./bf-864-103.js"],import.meta.url),{fallback:n.jsx(ss,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"90vh"}})});function oo(){let o=!0;const r=Ft(),{formType:a,formID:s}=Ke(),u=g(Mt),m=g(Ns),p=g(Vt),_=g(Ut),[$,F]=T.useState(!0),[G,h]=T.useState([]),[v,C]=T.useState(!0),L=N(ze),[z,S]=x(Et),{formName:U}=z,[k,D]=T.useState({show:!1,title:"",msg:"",action:()=>fe(),btnTxt:""}),Y=g(zt),A=g(Ht),d=g(Kt),w=g(qt),[V,K]=x(Wt),E=g(Gt),Tt=g(Ot),ce=g(Nt),ke=g(As),te=g(Jt),je=g(Yt),Q=g(Qt),de=g(We),X=g(Vs),me=g(ze),M=N(Rt),{css:W}=$e(),[qe,Ge]=x(Zt),J=g(gt),[Ce,Je]=x(Pt),[Ye,Le]=x(Xt),[Qe,De]=x(He),[Xe,Ze]=x(ts),[et,tt]=x(At),[st,ot]=x(es),rt=Ds().map(e=>It(e)),Fe=()=>{const b=Es().pathname.split("/");return b[2].charAt(0).toUpperCase()+b[2].slice(1)},nt=()=>{const{name:e,fields:b,layouts:R,confirmations:q,conditions:f,allThemeColors:j,allThemeVars:I,allStyles:O,additionalSettings:ae}=Ws(a,M);S({formName:e}),p(b),ce(R),E(q),d(f),te(j),je(I),Q(O),de({allThemeColors:j,allThemeVars:I,allStyles:O}),X(!0),xe({state:{fields:b,layouts:R,allThemeColors:j,allThemeVars:I,allStyles:O}},!1,0),C(!1),ae&&w(ae)},Ie=()=>{if(window.scrollTo(0,0),Rs(),m(s),a!=="edit"){nt();return}at()},re=()=>{Ps(),F(!1),rt.forEach(e=>e()),Us()};T.useEffect(()=>(Ie(),()=>{o=!1,re()}),[]);const Be=()=>{var Ae,Ve,Ee,Re,Pe,Ue,ue,be,le,se,pe,ie,Me,i,Z,he,ye,ge,ve,Se,Te,t,oe,wt,xt,_t;let e=0;const b=(Ae=y(`btcd-breakpoint-bf-${s}`))!=null?Ae:e+=1,R={lgLightThemeVars:(Ve=y(`btcd-themeVarsLgLight-bf-${s}`,{strType:"json"}))!=null?Ve:e+=1,mdLightThemeVars:(Ee=y(`btcd-themeVarsMdLight-bf-${s}`,{strType:"json"}))!=null?Ee:e+=1,smLightThemeVars:(Re=y(`btcd-themeVarsSmLight-bf-${s}`,{strType:"json"}))!=null?Re:e+=1,lgDarkThemeVars:(Pe=y(`btcd-themeVarsLgDark-bf-${s}`,{strType:"json"}))!=null?Pe:e+=1,mdDarkThemeVars:(Ue=y(`btcd-themeVarsMdDark-bf-${s}`,{strType:"json"}))!=null?Ue:e+=1,smDarkThemeVars:(ue=y(`btcd-themeVarsSmDark-bf-${s}`,{strType:"json"}))!=null?ue:e+=1},q={lightThemeColors:(be=y(`btcd-lightThemeColors-bf-${s}`,{strType:"json"}))!=null?be:e+=1,darkThemeColors:(le=y(`btcd-darkThemeColors-bf-${s}`,{strType:"json"}))!=null?le:e+=1},f={lgLightStyles:(se=y(`btcd-stylesLgLight-bf-${s}`,{strType:"json"}))!=null?se:e+=1,mdLightStyles:(pe=y(`btcd-stylesMdLight-bf-${s}`,{strType:"json"}))!=null?pe:e+=1,smLightStyles:(ie=y(`btcd-stylesSmLight-bf-${s}`,{strType:"json"}))!=null?ie:e+=1,lgDarkStyles:(Me=y(`btcd-stylesLgDark-bf-${s}`,{strType:"json"}))!=null?Me:e+=1,mdDarkStyles:(i=y(`btcd-stylesMdDark-bf-${s}`,{strType:"json"}))!=null?i:e+=1,smDarkStyles:(Z=y(`btcd-stylesSmDark-bf-${s}`,{strType:"json"}))!=null?Z:e+=1},j=(he=y(`btcd-layouts-bf-${s}`,{strType:"json"}))!=null?he:e+=1,I=(ye=y(`btcd-nested-layouts-bf-${s}`,{strType:"json"}))!=null?ye:e+=1,O=(ge=y(`btcd-fields-bf-${s}`,{strType:"json"}))!=null?ge:e+=1,ae=(ve=y(`btcd-breakpointSize-bf-${s}`,{strType:"json"}))!=null?ve:st,lt=(Se=y(`btcd-staticStyles-bf-${s}`,{strType:"json"}))!=null?Se:qe,it=(Te=y(`btcd-builderHelperStates-bf-${s}`,{strType:"json"}))!=null?Te:Ce,ct=(t=y(`btcd-builderSettings-bf-${s}`,{strType:"json"}))!=null?t:Ye,dt=(oe=y(`btcd-colorScheme-bf-${s}`))!=null?oe:Qe,mt=(wt=y(`btcd-customCodes-bf-${s}`,{strType:"json"}))!=null?wt:Xe,ft=(xt=y(`btcd-deletedFldKey-bf-${s}`,{strType:"json"}))!=null?xt:et,ut=(_t=y(`btcd-formInfo-bf-${s}`,{strType:"json"}))!=null?_t:z;return e===0?(ce(j),ke(I),p(O),xe({state:{layouts:j,fields:O}},!1,0),J(b),je(R),te(q),Q(f),Ge(lt),de({allThemeVars:R,allThemeColors:q,allStyles:f}),Je(it),Le(ct),De(dt),Ze(mt),tt(ft),S(ut),me({unsaved:!0}),ot(ae),X(!0),!0):!1},at=()=>{a==="edit"&&Bt({id:s},"bitforms_get_a_form").then(e=>{var b,R,q;if(e!=null&&e.success&&o){const f=e.data,j=(b=f==null?void 0:f.reports)==null?void 0:b.find(O=>O.isDefault.toString()==="1"),I=Be();I||(ce(f.form_content.layout),xe({state:{layouts:f.form_content.layout}},!1,0)),I||(ke(f.form_content.nestedLayout||{}),xe({state:{nestedLayouts:f.form_content.nestedLayout||{}}},!1,0)),I||(p(f.form_content.fields),xe({state:{fields:f.form_content.fields}},!1,0)),I||S(O=>B(c({},O),{formName:f.form_content.form_name})),d(f.workFlows),w(f.additional),K(f.formSettings.integrations),E(f.formSettings.confirmation),Y(f.formSettings.mailTem),A(f.formSettings.pdfTem),!I&&f.builderSettings&&Le(f.builderSettings),Tt({id:((R=f==null?void 0:f.form_content)==null?void 0:R.report_id)||(j==null?void 0:j.id),isDefault:((q=f==null?void 0:f.form_content)==null?void 0:q.report_id)===null}),_(f.Labels),u(f.reports||[]),C(!1)}else!e.success&&e.data==="Token expired"&&window.location.reload(),C(!1)}).catch(()=>{C(!1)})},fe=()=>{k.show=!1,D(c({},k))},Ne=e=>{e.preventDefault(),D({show:!0,title:"Warning",msg:"Are you sure you want to leave the form? Unsaved data will be lost.",btnTxt:"Okay",action:()=>r("/",{replace:!0})})},ne=[{label:"Builder"},{label:"Responses"},{label:"Settings"}],l=e=>{e==="Builder"&&r(`/form/builder/${a}/${s}/fields-list`),e==="Responses"&&r(`/form/responses/${a}/${s}/`),e==="Settings"&&r(`/form/settings/${a}/${s}/form-settings`)};return n.jsxs("div",{className:`btcd-builder-wrp ${$&&"btcd-ful-scn"}`,children:[n.jsx(Fs,{title:k.title,action:k.action,show:k.show,body:k.msg,btnTxt:k.btnTxt,cancelBtn:k.cancelBtn,close:fe}),n.jsxs("nav",{className:W(H.btct_bld_nav),children:[n.jsxs("div",{className:W(H.btcd_bld_title),children:[n.jsx(Dt,{className:W(H.nav_back_icn),to:"/",onClick:L.unsaved?Ne:null,children:n.jsx("span",{className:"g-c",children:n.jsx(Hs,{size:"22",className:"mr-2",stroke:"3"})})}),n.jsx("div",{className:W(H.bit_icn),children:n.jsx("img",{width:"16",src:Is,alt:"BitForm logo"})}),n.jsx("input",{className:W(H.btcd_bld_title_inp),onChange:({target:{value:e}})=>{S(b=>B(c({},b),{formName:e})),me(b=>B(c({},b),{unsaved:!0}))},value:U,"data-testid":"form-name"})]}),n.jsx("div",{className:W(H.btcd_bld_lnk),children:n.jsx(Zs,{defaultActive:Fe(),options:ne,size:"90",component:"button",onChange:l,variant:"blue"})}),n.jsxs("div",{className:W(H.btcd_bld_btn),children:[a==="edit"&&n.jsx(Qs,{}),n.jsx(Xs,{componentMounted:o,modal:k,setModal:D}),n.jsx(Dt,{to:"/",className:W(H.cls_btn),onClick:L.unsaved?Ne:null,children:n.jsx(Bs,{size:"14"})})]})]}),n.jsxs("div",{className:W(H.builder_routes),children:[n.jsx(ht,{page:"responses",formType:!0,formID:!0,render:n.jsx(to,{isLoading:v,allResp:G,setAllResp:h,integrations:V})}),n.jsx(ht,{page:"builder",formType:!0,formID:!0,render:n.jsx(eo,{isLoading:v})}),n.jsx(ht,{page:"settings",formType:!0,formID:!0,render:n.jsx(so,{})})]})]})}var ro=T.memo(oo),fo=Object.freeze({__proto__:null,default:ro});export{io as $,Hs as B,Js as C,Ys as D,fo as F,co as a,mo as b,We as c,qs as d};
